{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\oneapp-frontend\\\\frontend\\\\src\\\\front\\\\IncomingCallPage.js\";\n\nimport React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Link } from 'react-router-dom';\nimport 'bootstrap/dist/js/bootstrap.min.js';\nimport { useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { AgoraVideoPlayer, createClient, createMicrophoneAndCameraTracks, ClientConfig, IAgoraRTCRemoteUser, ICameraVideoTrack, IMicrophoneAudioTrack } from \"agora-rtc-react\";\nimport { AGORA_APP_ID } from \"../agora.config\";\nimport ReactPlayer from 'react-player';\nimport swal from 'sweetalert';\nimport http from '../http';\nexport var IncomingCallPage = function IncomingCallPage() {\n  var navigate = useNavigate();\n  useEffect(function () {\n    fetchCallDetails();\n  }, []);\n  var config = {\n    mode: \"rtc\",\n    codec: \"vp8\"\n  };\n  var useClient = createClient(config);\n  var useMicrophoneAndCameraTracks = createMicrophoneAndCameraTracks({}); // console.log(useMicrophoneAndCameraTracks); \n\n  var client = useClient();\n\n  var _useMicrophoneAndCame = useMicrophoneAndCameraTracks({}),\n      ready = _useMicrophoneAndCame.ready,\n      tracks = _useMicrophoneAndCame.tracks;\n\n  var fetchCallDetails = function fetchCallDetails() {\n    var tokenString = sessionStorage.getItem('token');\n\n    if (tokenString != null) {\n      var userString = sessionStorage.getItem('user');\n      var user_details = JSON.parse(userString);\n      var userid = user_details.id; //console.log(user_details.id);\n\n      http.get('/fetchcalldetails').then(function (res) {\n        try {\n          //setChatusers(res.data);\n          var _user_details = JSON.stringify(res);\n\n          var user_detailsss = JSON.parse(_user_details); //  console.log(user_detailsss.data[0].personcalledid);\n\n          if (userid == user_detailsss.data[0].personcalledid) {\n            swal(\"Call Joined..!\"); //    client.join(user_detailsss.data[0].token, \"1024\", null, function(uid) {\n            //       console.log(\"client\" + user_detailsss.data[0] + \"joined channel\")\n            //       // Create a local stream\n            //       //……\n            //   }, function(err) {\n            //       console.error(\"client join failed \", err)\n            //       // Error handling\n            //   });\n          }\n        } catch (e) {\n          console.log('error', e);\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"section\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"video-call-section\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"clearfix\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"video-call\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"chat-i-refresh\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/VideoChat\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-refresh \",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 22\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"videocall-btn-section\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/VideoCallPage\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"btn3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-microphone\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 45\n    }\n  }))), /*#__PURE__*/React.createElement(Link, {\n    to: \"/VideoCallPage\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"btn3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 22\n    }\n  }, \"Hold\")), /*#__PURE__*/React.createElement(Link, {\n    to: \"/Chat\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"btn2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-phone icon-rotate\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 45\n    }\n  }))), /*#__PURE__*/React.createElement(Link, {\n    to: \"/VideoCallPage\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"btn3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-user-plus\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 45\n    }\n  }))), /*#__PURE__*/React.createElement(Link, {\n    to: \"/VideoCallPage\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"btn3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-video-camera\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 45\n    }\n  })))))))));\n};\nexport default IncomingCallPage;","map":{"version":3,"names":["React","Link","useEffect","useState","useNavigate","useParams","AgoraVideoPlayer","createClient","createMicrophoneAndCameraTracks","ClientConfig","IAgoraRTCRemoteUser","ICameraVideoTrack","IMicrophoneAudioTrack","AGORA_APP_ID","ReactPlayer","swal","http","IncomingCallPage","navigate","fetchCallDetails","config","mode","codec","useClient","useMicrophoneAndCameraTracks","client","ready","tracks","tokenString","sessionStorage","getItem","userString","user_details","JSON","parse","userid","id","get","then","res","stringify","user_detailsss","data","personcalledid","e","console","log"],"sources":["C:/xampp/htdocs/oneapp-frontend/frontend/src/front/IncomingCallPage.js"],"sourcesContent":["import React from 'react'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { Link } from 'react-router-dom';\r\nimport 'bootstrap/dist/js/bootstrap.min.js';\r\nimport { useEffect, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { AgoraVideoPlayer, createClient, createMicrophoneAndCameraTracks, ClientConfig,\r\n   IAgoraRTCRemoteUser, ICameraVideoTrack, IMicrophoneAudioTrack } from \"agora-rtc-react\";\r\nimport { AGORA_APP_ID } from \"../agora.config\";\r\nimport ReactPlayer from 'react-player';\r\nimport swal from 'sweetalert';\r\nimport http from '../http'\r\nexport const IncomingCallPage = () => {  \r\n\r\n   const navigate = useNavigate();\r\n   useEffect(()=>{\r\n      fetchCallDetails();\r\n   },[]);\r\n   \r\n   const config = {mode: \"rtc\", codec: \"vp8\"}  \r\n   const useClient = createClient(config);\r\n   const useMicrophoneAndCameraTracks = createMicrophoneAndCameraTracks({\r\n\r\n   });\r\n  // console.log(useMicrophoneAndCameraTracks); \r\n   const client = useClient();\r\n   const { ready, tracks } = useMicrophoneAndCameraTracks({});\r\n\r\n   const fetchCallDetails = () => {\r\n      const tokenString = sessionStorage.getItem('token');\r\n      if(tokenString != null){\r\n         const userString = sessionStorage.getItem('user');\r\n         const user_details = JSON.parse(userString);\r\n         const userid = user_details.id;\r\n         //console.log(user_details.id);\r\n         http.get('/fetchcalldetails').then(res=>{\r\n            try{\r\n             //setChatusers(res.data);\r\n             const user_details = JSON.stringify(res);\r\n             const user_detailsss = JSON.parse(user_details);\r\n             //  console.log(user_detailsss.data[0].personcalledid);\r\n               if(userid == user_detailsss.data[0].personcalledid){\r\n                  swal(\"Call Joined..!\");\r\n                  //    client.join(user_detailsss.data[0].token, \"1024\", null, function(uid) {\r\n                  //       console.log(\"client\" + user_detailsss.data[0] + \"joined channel\")\r\n                  //       // Create a local stream\r\n                  //       //……\r\n                  //   }, function(err) {\r\n                  //       console.error(\"client join failed \", err)\r\n                  //       // Error handling\r\n                  //   });\r\n               }\r\n             }catch(e){\r\n               console.log('error', e)       \r\n             }\r\n          })\r\n      \r\n      }\r\n  }\r\n      \r\nreturn (\r\n<>\r\n<section>\r\n   <div className=\"video-call-section\">\r\n            <div className=\"card\">\r\n               <div className=\"chat\">\r\n                  <div className=\"clearfix\">\r\n                     <div className=\"col-12\">\r\n                        <div className=\"video-call\">\r\n            \r\n                        \r\n                        </div>\r\n                       \r\n                     </div>\r\n                  </div>\r\n                  <div className=\"chat-i-refresh\">\r\n                     <Link to=\"/VideoChat\">\r\n                     <i className=\"fa fa-refresh \"></i></Link>\r\n                  </div>\r\n                  <div className=\"videocall-btn-section\">\r\n                     <Link to=\"/VideoCallPage\">\r\n                     <span className=\"btn3\"><i className=\"fa fa-microphone\"></i></span></Link>\r\n                     <Link to=\"/VideoCallPage\">\r\n                     <span className=\"btn3\">Hold</span></Link>\r\n                     <Link to=\"/Chat\">\r\n                     <span className=\"btn2\"><i className=\"fa fa-phone icon-rotate\"></i></span></Link>\r\n                     <Link to=\"/VideoCallPage\">\r\n                     <span className=\"btn3\"><i className=\"fa fa-user-plus\"></i></span></Link>\r\n                     <Link to=\"/VideoCallPage\">\r\n                     <span className=\"btn3\"><i className=\"fa fa-video-camera\"></i></span></Link>\r\n                  </div>\r\n               </div>\r\n            </div>\r\n         </div>\r\n   </section>\r\n</>\r\n)\r\n}\r\nexport default IncomingCallPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}