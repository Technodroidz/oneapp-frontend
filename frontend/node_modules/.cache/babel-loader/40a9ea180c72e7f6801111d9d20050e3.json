{"ast":null,"code":"/*! AgoraRTC|BUILD v3.6.11-0-gbdacc5f-dirty */\n!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(\"AgoraRTC\", [], t) : \"object\" == typeof exports ? exports.AgoraRTC = t() : e.AgoraRTC = t();\n}(window, function () {\n  return function (e) {\n    var t = {};\n\n    function n(r) {\n      if (t[r]) return t[r].exports;\n      var i = t[r] = {\n        i: r,\n        l: !1,\n        exports: {}\n      };\n      return e[r].call(i.exports, i, i.exports, n), i.l = !0, i.exports;\n    }\n\n    return n.m = e, n.c = t, n.d = function (e, t, r) {\n      n.o(e, t) || Object.defineProperty(e, t, {\n        enumerable: !0,\n        get: r\n      });\n    }, n.r = function (e) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(e, \"__esModule\", {\n        value: !0\n      });\n    }, n.t = function (e, t) {\n      if (1 & t && (e = n(e)), 8 & t) return e;\n      if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n      var r = Object.create(null);\n      if (n.r(r), Object.defineProperty(r, \"default\", {\n        enumerable: !0,\n        value: e\n      }), 2 & t && \"string\" != typeof e) for (var i in e) {\n        n.d(r, i, function (t) {\n          return e[t];\n        }.bind(null, i));\n      }\n      return r;\n    }, n.n = function (e) {\n      var t = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return n.d(t, \"a\", t), t;\n    }, n.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, n.p = \"\", n(n.s = 96);\n  }([function (e, t, n) {\n    \"use strict\";\n\n    n.r(t);\n\n    var r,\n        i = n(11),\n        o = n.n(i),\n        a = function a() {\n      var e = new Date();\n      return e.toTimeString().split(\" \")[0] + \":\" + e.getMilliseconds();\n    },\n        s = n(14),\n        c = n(2),\n        d = n(1),\n        u = n(48),\n        l = n.n(u),\n        f = n(49),\n        p = n.n(f),\n        g = new Array(32).fill(void 0);\n\n    function m(e) {\n      return g[e];\n    }\n\n    g.push(void 0, null, !0, !1);\n    var h = g.length;\n\n    function v(e) {\n      var t = m(e);\n      return function (e) {\n        e < 36 || (g[e] = h, h = e);\n      }(e), t;\n    }\n\n    var E = new TextDecoder(\"utf-8\", {\n      ignoreBOM: !0,\n      fatal: !0\n    });\n    E.decode();\n    var S = null;\n\n    function _() {\n      return null !== S && S.buffer === r.memory.buffer || (S = new Uint8Array(r.memory.buffer)), S;\n    }\n\n    function y(e, t) {\n      return E.decode(_().subarray(e, e + t));\n    }\n\n    function R(e) {\n      h === g.length && g.push(g.length + 1);\n      var t = h;\n      return h = g[t], g[t] = e, t;\n    }\n\n    var T = 0,\n        I = new TextEncoder(\"utf-8\"),\n        b = \"function\" == typeof I.encodeInto ? function (e, t) {\n      return I.encodeInto(e, t);\n    } : function (e, t) {\n      var n = I.encode(e);\n      return t.set(n), {\n        read: e.length,\n        written: n.length\n      };\n    };\n    var A = null;\n\n    function O() {\n      return null !== A && A.buffer === r.memory.buffer || (A = new Int32Array(r.memory.buffer)), A;\n    }\n\n    var C = function () {\n      function e() {\n        l()(this, e);\n      }\n\n      return p()(e, [{\n        key: \"free\",\n        value: function value() {\n          var e = this.ptr;\n          this.ptr = 0, r.__wbg_signmanager_free(e);\n        }\n      }, {\n        key: \"get_digest\",\n        value: function value(e) {\n          return v(r.signmanager_get_digest(this.ptr, R(e)));\n        }\n      }], [{\n        key: \"__wrap\",\n        value: function value(t) {\n          var n = Object.create(e.prototype);\n          return n.ptr = t, n;\n        }\n      }, {\n        key: \"new\",\n        value: function value() {\n          var t = r.signmanager_new();\n          return e.__wrap(t);\n        }\n      }]), e;\n    }(),\n        N = !1,\n        w = null;\n\n    var L,\n        D = 0,\n        k = \"free\",\n        M = [],\n        P = [],\n        x = 0;\n    (w ? Promise.resolve(w) : new Promise(function (e) {\n      N || r || function e() {\n        var t = {\n          wbg: {}\n        };\n        t.wbg.__wbindgen_object_drop_ref = function (e) {\n          v(e);\n        }, t.wbg.__wbindgen_string_new = function (e, t) {\n          return R(y(e, t));\n        }, t.wbg.__wbindgen_string_get = function (e, t) {\n          var n = m(t),\n              i = \"string\" == typeof n ? n : void 0,\n              o = null == i ? 0 : function (e, t, n) {\n            if (void 0 === n) {\n              var r = I.encode(e),\n                  i = t(r.length);\n              return _().subarray(i, i + r.length).set(r), T = r.length, i;\n            }\n\n            for (var o = e.length, a = (i = t(o), _()), s = 0; s < o; s++) {\n              var c = e.charCodeAt(s);\n              if (c > 127) break;\n              a[i + s] = c;\n            }\n\n            if (s !== o) {\n              0 !== s && (e = e.slice(s)), i = n(i, o, o = s + 3 * e.length);\n\n              var d = _().subarray(i + s, i + o);\n\n              s += b(e, d).written;\n            }\n\n            return T = s, i;\n          }(i, r.__wbindgen_malloc, r.__wbindgen_realloc),\n              a = T;\n          O()[e / 4 + 1] = a, O()[e / 4 + 0] = o;\n        }, t.wbg.__wbindgen_throw = function (e, t) {\n          throw new Error(y(e, t));\n        };\n\n        for (var n = Uint8Array.from(atob(\"55ZBgM/2Bzm2JGhNn//ljJsSorhWUYE66a1Hf8O7pfQGR2zfol8qRP6CDhsi3iG7nFZu9stSyPq/qu2Rr2w8QkTGP6Gm2cg3J5qsQgq5bcHA9mDpGv/b24uEwsixZVl1eGkdV4SB/6ayw2v48hLmNA+w5UlnTCiWwerzESQPidpSUMbamXL3pU815EQm12GhhZ9aWzo568gdZvXevBc/WHfFKQSuTgWva4e4eSmW7UxpH8sY4HlDsCTMu0WwEB8B95XsZwOp3GLgfOQmJBw036DgIKU+XGn4KpIEq77WE/h6R7sZKsFUp+u+2cDnW7IPNe7xfd9areFo0EUh0/9K9CqxUkLqMB5hlgS1fwQHRzKPhQ7gALyc6HwMCPooS0M1NrzjdfH3vUn0PeQ1GBlnrnXgiu8TunfHg5TcbBfPEbxbyiiow1Np+VEBlHNh00PiAWyu024NHaPbDGfMtzu4WF02fgkh8Pxb7bCSpCZndjTytQgAzfZxk2bbe6NoHHFnsviqYzHVpxoPEk7icHRWcZC28d2muthq673KCMQay1fJcPqSTuYhWUZS5eylIguT33lP+TBbOWQI8KtCzBN5FzqILfKzRkzrJ3L192BUF8SILdwmriv10HU9ZlQAyQA1VdegnzOl/dYk2GGsB3724y7w/7aJLHJzEfwrfIzFd5CoAft7ct+zQW2G4Wm2kpoz6uJfgrNyykQgwCO6pkPy1ADrBUuJon9ySjhgcFru6AKa99wTlIhzBw3FKFt9Aa1/1KWWy7W1wAIGzRTs/7rLXRkKFjNqGVXBdoVNTpHFtfEFsuX0X98ISr0Bennlx0h2Yl/CGNb5Kc7i3bio1XJHX24avcMsEAwfdfskCki4/dkStn7QC97YJC3z+7gD84IiEEeGcnn7gHJyeALr0ssbqDUcKqxEyheyFs9FToJziLB+eYw6nMQLmYTrQyrg3b+3YBdgx7pzNEDSyz3tmaPaikwcLSyB/Igo6U/oP/fS2TZLtmN03m4iS76YrDJAgI+2W1GboabuixVcLdxm6SQ4CzUnHSPl1knhcGhW/+OcKa53tB5j5C4wEpiENv6T9PUu4K0YwtEAqFbd/eN2wVAYCKn/nlVA8uiESxCfgs0411mRFk4i1pixJLPP5AFPG9QFZnj6X19TqmhmIhl8D6Q1rOvPCqPZV/z04HjayX4qPzPzP/5NVilN/sHhQe7ulriGmU/3rj5QEuiOymsL7EdCQMc/4mXDPdVrDBfbt6dnv11oLYGmqOP1oSBj02FtsmYrMn9pRg7HJoCh86jAnzuOYn4tGnQ4gw/89sb64NAXcoIbTIjyiHBAQCCK2Yn4I/fNF10rkQlvSvkpqLG2eYpJmpWrcouNDEUtJFR607oNraLdmUKyLc1g7SNpS+ofp1FL6rua/HFSrb5kTF2Vcy2gl+6MACbFRChKoP/un7IbYJuOima/JWFZcs/MXokIx+ijuqjMtVKaYRTzNI5ncPa2y/EXTNdUUFpMhbE7sa39Uoh6Hci/viXy2KFTNbiw+BkWOPnyOr04LjIYKlJ8ud/KvjuvNUGQOHJvj6tpZJxj97tr0OrgZCAxSHGU5JQfqEd/U0QfzGM8Wh3zdsnd9LhoIIRJAtyA2PmjwJk4zTxeYlgwPqAVTU3+9bA1QD+jLZZ3Ffk3MRq+Ar2RT8YN6ASR4bItt3omBj0LJe0zeGY3OzfhljL6LA1m4+IUp+CzeWo0aEjnvRk3iCJeajgdC+NUGB5qh8PWKtBeC58woavnRjvRNphXS4b9M7Aymcfq26B2YY2lS+wLf763OnGJlVdV/srgyAUJJZjarxom4zrYy23kLFB8zFzWuwSMue5Xm1YWape91JGDuRLIctrJWU47/XfLm6Zgei4xOwq1RcjikGuaZtDwcFg9aKtO+JOGJsCjy9AiPnmt+rmdX83GsT3KtTETnLv6ZQcnGtmt4H8AjFgGYePdQc40cj8VAOV8NCLspyW5w63b3g37GXJrzjm9Fym3fh27psjo5RuTs7XCSrNENxKm9jCcXPqWxyuXJSn6dhdWnw5SAnUjixXviWS4HsnYjw4Xt4cSwkqCB9naLstVXt5D2HgG4fzHFNHvnETft0mrhU81IBDTSyNFdDvFEX8cifoc6FcNq7pzXlotl2ZS1FIzNXddZrdXpBNYZPV52gtCok6ePpUR/Y8jyJpE9P3q8dmFVivVGgmKTcBKMDDbzeOfl4MpOGBtBX/Lab/kzqG42sTyOyGUyOoFXYGMUWJ33GPI2KNa/mW8zVl+imshfbj7PiK1qRUn74KjAkH4wjKnu50AONYUaiveSdwnEc1zCjZSJ3dmBKSxhWAcO2PdHBg5m9+JCiPGCVfK9dzoM8Bm7xx9noJiqt4hNiVa5di1Fd1JRN4rnd1DbKglKpAVSoqvJPxmuyH56TFE4BQjhfKbDMZezQJqx+KXDiW1JWGeDYaPVBWPYeZX6STIzC/DjS7UFlqoKgGGAGP17x8wmMRE6O/axG5jDzloCGxCmrymT0ZGCh4g54O1iDYUtmJr7Bo1d+H9RQj2Y10BxcMkLFTIZVjm9e3vtIbeRx0OdXE1Ou37J/WeJZyPXn1fszvp/KonCqVnt862LrxfoB/0sF5gk4Y/f6LVneU5hun9/V1OVre9XrnDBhcVaQa9Ye6gs8sHW9HCNchaFbkUpxSiyxVEFZIlbejbjSPFlkYOLhtQHduwZWRHWA9akqykJNG3PKvOZAaJG5nWQq8+e4K0JF/AXTKIIr4J7zDt8ZR4xb9T2gxjl1nfqzidMRIY5B4rkw0oetta+j8rqkFpTEGA+hU/tw7bDtpkPYvCguwncnCjwULNFT9I9jXx3H4Ws3WWMCit29F7kGq2Ka+rU/MjnuP0lsXkoB1rr8LawHH5gaf8rajq/BhKrGTIfjDiZG5qz+L7SZBZsMSZZ9pM1QhKju+GTD9iC+9HlhfXMtj94gz8U4h7eGXziEO7lo7LwLL6/DVMrGbkv68JYUYhGz2yBm/8cbQEh5vhakbhmpv1K6XYM9rzdsd9bwYcYt3cfKE3m+/NrUa42+RpJBdFg7cAmxsZ7/0TMyVw6Aqu2gzldb2ag4iLrPNEyW1ywaJ2DXMgPi/sjnDzhuo+vIUrc86j4ZLhT4GAN6uqwbnXq5UDzX7TfuB48oMvvE1sK5q6owkdWfklgnC6pSBpK7wl+e3kuvaYnGRGJJMBQuVgWL1awHrVtfOTsSE1vc0ZdG+a/Jbza6pHbyfi5L7FXJAGdQTk0EP3VT54+F7RZ/MJ9fj56aMxzhJRwQJ6df3cM26qSc5bW/zP3PFXypTOBwzCvVtwGQzkGvDW7XGwgLbTNHDpQXOd2BQ5Zd9bjQqGg+S+kIqWZVZCqVLfyFPF9bEOHfPepL6nRDJUD2l5uRnXqeTvidaSIoqS1Fbc6mLPtYnbp6uuts6Qo8TbMzFuI7NuaPuKnQIyVu7vUGJ8jg1uVOjlMNKdVtLPr9/ZEKVZVj7lsFA+nm3zRjjr1DRKhr/wY1CI1iXKVTeQZ0i2PSnN99j4iVTSwNAYQLWWD+KyZ/xRLVxmZQPuSkLeKBRAkavxjWnIFQb1dn72wMSUdcB9cNCNJNdyTkrl44MRR+pUuiVrTAnTlzL33X32eEYwT+vn564yxFJLUDyIMNjJ0nx+GreKSOglI2et0kAwRHKYFclH9GVTiVlB0TWeUJGD+7JYogF7BizjTGyPOUEWQCguIEmtC4fHD5461T80Z3Mp7rhNTI+Cswuknr9hrIZmpRyFSrSrP8R4S1Cf34Tu4RNrDxpofVK9nGTklZPsYM6eiP29Lx264fsX9oLdYhq7vCwcrRMJ1a5d0QHXUYRV5IqTFBoUSpxkQ6IHHL8ckM4NCzwk8K0CA3pj5Jp2a9wZjfKq7R/eukzQFuhMxV2qgHf2E3t7/SA8N7sMvsmF0p3J96QRE3rA85ekH1q8nrBVujlIqahmL0Qto3+JxdqAfnKMCblQGSKVWZgWLMm82MG/9pjhdkMzG7C2GRLGMty2y8NhX1pZWHNbLOmvaC424LNz/Nl5tkPv7fVbCT2ItB+/dx3ZhVhmgSLd1zL+2PsNFmj7VGBruTttezlo1mDKErjY27nTswjf2fY/Uq8lPcVAgRpJM+m7jS/8dk8cdl7fkY7Tuj4TfiSe0tiNSoJgZwom4+9haoBQ65AifaB7pUiTc0MAXCvG+nDydkRIbKx5fL6gAlyMAnBbQf+Qh1naLfzzwLVTP0EEyoenW2W1zKqfMql5rwGlyCB9mSa2s25yHf4SDSBlgEVMJtplpRgegZvDakpWDKgx3UR4W7yKW+RD7bd7rEa/GQmA/q0RYAOIaXfO/2CgEUPtNhPS2uqy29lBYFPPv5SHQ0t/jRxQLBpe09ateAWKypt9TWS7Z5gynOePS5M2NC16AhF0Xz6s7DUjtI0xNho9Y6GK16J5V8HqHypV/OAz7+VBzTaiR57XGH4r62GoAiJqfWOM7okzKCeeSBnOIKPHtwgM0SQbvCvv7rmS6ZAacu4BbXZ5R9gOhdR9H3bi7lWLBNnqqLPIy0k6m4XBhtl40B6z/5AcJxjtKfwvIExl7VsQRqbW8gpPMsmJZfSp3uC35g1AkP+BJlju3RVoFZNo3JR18A5uc60NGD4zvzIdGTAOth4ZAZx0ZGQItHuNcLz/0CiavJdkjD65h4avf1vf7LFZ1uogJz6vLK3uDisXIBIGkXOlIpxTdjjjTQt6Khy50bYbXsG9JBrSUGhsBWpeRUnq2cZWOifhfueY95gFIDAu37oKR3FQ1YxGMg3UMq+L2VN2rtqodelSHof8SyYZVQWs7L0bjtgolId1tAAjHI7J1/+JIRXeUBjjaGGQAU+az9XFfiqn+VRAGG8JDdP/WmEqjhYpcy00LIBIBzCF9I9mbXCv8IX9fhPlI5NqWGO/v0ikpfn+hb5U16FcPYsx+xLb4la6nSbvrTDP5MthPyeLIIY7ZE/rNU4ajgPmI0/3RvD7WtEbo8UGPjnev55N2ELuFpEPzkNu9MzXqq8K0cWxk4lT2DQPi3rDO8x8i5jX7wWQi8e0neCMb0SUO67zRfaekZONGfaFl47LByciUuy5dhqxMPokhTE2WbzxqCyt/s2TqG66R0ocYHmzv9f7tJ+TES8NFyzL3fhNoZoW5IxWNE+stYWutd3LPwa7HKhhRAbl5uCEbEGjrUzTXwbzG0qvpmNtpnYnmKjzTaSAFNCxfw9edcjaxCiRKKIDd6GS/eDsGBgTvJexDfwGmVWm9jadZhee9jRFiZFtL6m7sY1oQa8F9ycxSuPANXCqWkApcaEfQLkt1yyfeRs5yC5O/6XGJ4TEtJmCTPJFRr95au20STIPgkoEF1mzZ+5ZRtWKUYuWJVZDwcA/lTy6oYp0/d0LGPRUXnXRm0qtIXQVdnoVhKZPeWACt9rujRL57MEDi2kHtfV/ucu+k03bN0fQlbalUJ0faY99GC6L8MO8MXTSmqDAxNSpqpIFPhgHgAg0YK/GZhlQjbQXE4tMDEDO9obNfp4W6m8fdznMesSSRINBG5FDf//DkT9pSRQsIdSg4VK7W7j2d2jsQUIyjJmbd/2zCTaqh0Yq0cH6mS/5g/cq3eGOiJbaCNo6oVwGURzXVAeVaGIfJFhd2A59sVp+rVfe1f8B6bVbCLIKgGUgpUokO0vTg6ouAxXGQKtveMhhBT83ukPIRZ02+qF1kvM+nNCVy8uzrB0+W9QIKbMio2m/7zW78xd5Tf9itocpLbRuNC5cuS/GyRGXw6fzFzjM1UITlQ5dlvoyYxuvb7ol4S1MyhkfMNZbif6/xic0wB3uSScez3oFTRbCHBd0cbJL3cLwfQjCBpGBrRVC7174qW4XWnw0eYGSSzTVSEDOlMaTUIGJO+s7/z8JxaZprcEsoB4+vt9/+uwtM/iyqLVPidu8ZTh+F1rsEWKwZhDAg/giVc6VzRq+DJCrhn81b/LYlLJOdgoAjID2VnwgU+mQhCL6KhgIqqiVraD25UIYEqxMcZ1aRcZvHa8x5gh5onPtsVcl53Xek9BOYqkyj64acX921zwqoY0lmNA81NE7BzVts3cwWDZ4Dk6uuzwtfJuJc7vVS+fdVDEg3ATwC9oG5/Vb1swTyzTsl2V4m+93bSQo5STFG5AruTDWTym6Lxtt4OrAeIVgdoyTJL+keHiHTNiL0/nO5oYwftSQK1aYBuA0e12t/FVN+LsCk0L/hfCCcke89LuP4d46qnFo3NLpHb+NFrvekXVT4GiZgMW2H0orIY0TpS15wlxVUaGCUo7YSN0yWDRU5+p41dCOs5/vXq1do7K+Byjj35/mPlQ+VEDqqF7OIBQrXfHgCXYPy8ye3Ih3io+tYA6nK0/2clIERrpA0AMHKLTGEO7q/IzIcOCwYN9W/ISH4v4uk9MhzNu7Fg2IPCq5CQF1GLuzQu+wNv2h94NIA2UJydawv5X2bHkZjv+kB/WQCYjxUNEU8ssUdxDZstpv2qNAHmI6BMD84olxMiwFdK5J80zc9x7de/cz3ZNIkkGIpMCZJqKKkaLVo1MLnR/h/hQeUvfqJmvkPeIre3EjnliNkKJKL0KNaupHzY7Eoztaj0cNOhJ5dxIRB2is3kLcSK1FZswRJR0B5OXX+Q4UlFIrhR10lIge3Fg5DnaGoZoOyFaaHztrdF251JubDsCZRDSWA0y6ysykO+h4jhXtuWF7D5Wp7B4Hx3EQvKsmPPZYcLevowjlWghHbRBEhwPI3bzjhNWXlqtym5ObYAeYxuHyvyYue2X4651f7Om3+m8KT7Y/JqLWXwgayCdzxHuJidti1ITuf/oXzeCfTRbG5ytXlDk/epX061W6BO074jI7nV518OkYtRJDnPqdDFAf0uWcATfk0h17+gP7GHjy0Rc0Ive9XmvA6gCkoMjNjMEA7GQ3xy7e12DzfNpIfND7GKKojMifTrvkDXrfa3o4wNYktY6/VlBdHtrcH9F7uMWICej/BjZXVX83WFGcVHx3nOXxSL59kE9bSmHc3Xp8iDbPuSG5GIRp3fTFHnmTzzGedl6al2gUbGFKtkC0jFNtKTk2rr8LEObiGgfCoSpTWknvAYDQBoj93s0KiRNPOqgY++Xka2cQiDwqUsLl8/i57YC/V6sy5/NvhViRRZgCzcyjNHGzZsYA5YMtUntyfC1gNFP7cL3AwVA+326NJI7MQJoxTqcHL/YhntsnYTR5R6GVVvFYIlW8Nv9qn3daoGXMz0MoAsXpCzbiHZ0XWkfw2qlJkmZjgQtMAEhHXNgokGRPfOprmtlvNZaNlGB1EjQTVX1Y4tCyJFZhdhID4CowB23uQF16NifyxH+DGnQrnxeklnG7UQV2BRVdr6ZEKZYv7Gj+PbpojzAskvbdtaFsataqPrLDoejjc6ZfPA5zA0iYcCvcNjzuy9SuT0uG8NWMTLv2OsImL++PQV1sifUENAwi4O3yBvzTy4J77B7mMBpjCYGXAyjFGFZL4eAazSmvZ8thJ0FFW+keLHL+ft1dQBKmXY6JatelGebcIC/PyLBHdfX9bRcauGg4xEO7mMl8AjlcPMczkPniNQpiQFqcDJYrFGoxMV2hskxMn0bRQT8Ajc6w6sQYkGl0CQUImPrGfie9dsk4mrCLMIFOqcm0WT8O8AiREEGmooBTO7WI0qk506NsV7ffvc0rVJERJKcyRyCmFZdTSn/SrBfjV7SXT3pQlgluoY4FBUCDDkzwBgjkrE1oFUA3ls+xVP10w5jjBIMwKBSQqRVAEDXw+Dyj+jH3ila8czULWsCKhWd4qGsMFN7++OGBAz9eXHjAO9m++mTXF6qiyG35Q+61yjYQKsBrjR4NNexrwVGqBwAZA6cr5mp8AhoyzPomJ6TLfWEJjEeRI3QsX5oQkNuyF7u650QFka+VjFeNRY6ALklleTW9I0v4ABKDCXTGkjv80vqVNk+FTL0bJK7ndSjjMJD7OBFIEywBPJFrxTdyzocmxEgG0zu1VDgsQuXITYCx1RRty89A/F+CdSAlbMlIkptCC0GrF/jFS8PAU+6TNV1eBqJrCr9BgH1mth8FtdfE7druR+xyZKn5idfUKzGW6ACGF4M61IRoSs9o6xmaj3dnAVQvFWUsMcR6MI3xTKJNyMxkhXhhvT0IxialnG7i/BBzXfMXYh5jl4BXzCSNlxU4+aboEgIDr48/+pfj8J3WcNccFfzV6eiX05qkNktmafoBcxrEsrM8WQV0VVSRybQyXPOqJ1yndwBI6BOGO9oGxGDAd+HcKaZlptCMJsR1Cp3m7F9HpBFSu/NYVj+WSDY7jWSFBlTBSCFyyPEUn8S9NmBVa+mwGVsz0Q+fxe23w1w6wVO7sVnZqRpmXJeXg72QFkl7Qda1lBzn/FW+rRwLvFxCsuad67Wmzab1RJdzPGsuq8AzW6tL+JiwW/VPUSBbBmV1+EjqQ28x1u9W5Eoy7zhsU8NT87CtNbZ0lPEpsoWMewxC80kPanfWPrQXmixWDXXz7uf1kBTr1J/iYuls7fUsyAChXjKcKOaCF4ySqkhMTGmjNqYiG5joBUi/SZpWvgxk28pyIPhf28YULINiqmbWPBKuTCLFruV7JfRgGM87XfNEFc7tgnYx503k/0UXJfpmjx6wKbKcvV5fqrctx+OrIn++TxRxSKlTScEIwd2vG5mg/p5wsQDpiD+X91XbkReKLB25Jvp/IJaJh715RXqBzwCwlY3URonyy+oZoTD8Ym8XMMv/dMllh0LCFZkZFn2gYcLG9iO+I5S/GyxwjajQLQtwH7o+n50vimC+ES8ePOpPDwlu4oG8KhS7NL/OTdIWPIHbSa6/9DfjOq9W66EpaK57R78PpEzVNLkTP2L6lllqDT6SDhIDIvQS3SQbxG96khXgvW/rME+tiXFXi+BC0udi9keyGlc3sLBN3CP3QXzswhBGTxvz2LmRMkU3rLuSkYR1Gzr7vj1VxTN1y1iciA0DswsPZ38eB6X10Uzk6HZqjzBK+EJ5osJJJ/s3b0MFRIWYlM15TPm1uzeOk1zQ96quClQLEZbpxmV/eAduIotXUYQZjWAkTulBJt7kw9uEnLo7OpZrf8k+0ZQP0agcOTLbfrekHji86Mxr7rTwve82mePKoAkkEthE45VI+f1VqpyWNW1kbBbVVfuatKt6MEKqyTUyxSFGHk81kY7CxkgMNexiikN0+IeiUNsfuktjfOAiMfDhbTe4rtxSEPvO4CCUGaktA58TGnSO8rHdCicmGkNrwWsnXgUWjhp8bllNcnQN10TbwxYPAwQKW/JJiYQadr4THXO+vWudiq3I47vqmEM/Ab3Dlq11Q7RmRWntYOEyESbTI8PZYwbtsmjcSwBtTAIHQ5h3I633h3FpOkT2c0PlMjzj0Q/OuqaTVt639fowVppqvSlNcK5KupBnrxfKHQK+SoKSuaO8PNMkYkbcEAc9F0I4uzPfRVP/q5QkvJVsVoJ8BEWW/q1+kivHEMQfb+J2NfJjSTG+WhjHjL8eqi7FgfVewxwmqG9IOnTkwDjAHUaJMIyhVkadW/+GQjLyNP4zyHcLAdWcB5zQ2kc/blAx2RKfG+ON3RfC+iQ5Th7V2i5abkoy0pjfyOwTjIvaq9slSCtoNGBZggBDOiWwau0CX4NAIThFyqu9VWCLr8TsqhQZvQP+xrywovGs6A079U7YBjhEXyQw4Q3rbQY1EQnxTPXNlHfn9vQnuhsJnzx6PZrCqry8fidPz2U1scmAMVPHxa/injIf+hDziEU02xWm9ou67OgebktON9V6wwVotoNOzVNJhiDBlHbktBwOjX1BlJHybLox5y/7NhR7uc8f85O6xdxueabhwtJjYcBzac56v6RbuI9IRvPzOnNbltj8Hh0ftwwhWyHAyiEat0oDSEVZ925jmxJKAqTo4/uHnkozgMDsnkzXPXBDJ1sDTawXy23mXuTJOYV6ZVWrervMaGGGQpgQjAnfP7KPZro+OKt/MpnoM0NeGQgIFAiH7dU7Nl1QbcMiwO6/5nIosJtrFB8w1kpqb6OjI9BgZHG1nzTMGA++HNrl4WQNcq3SajD4C9utQYAu/fETPFMMJeCDwHRCnPuRAlqJ5t0E5h3Wlh1Nw57LQ36kDjC3lS9w0a89eI8ym6BzEA25Cdz3LQAyz94Fvjqp7MyHrpm3PzmsV/tbSLF9NJBjFmzWPQ8Tfgvj3fi8dg78tXvEatqtUhLxsNp2VCU6IzSqafxWw93+Wk47skJv5qxM+tv7CrpYKvWLEylJNEXlh7GHm9UenNf2/szZOl+54P4ZWksh1r6+rphL68QYhmqW7DqKVrc2rjzPYcvFDmKtCGL/F62i3riMV9z+LoLnuVaMn4dtpNNFmQEQ4uEhDfLYU4x8G2OHCz7gnxLCa4zE4CFo9m/+ECmdzziVumHM/P00/BESH2rxUYMBL8/9NRG5fiskFJr4AO0qNUKUCgTRgEiFsTbGXtP4DTTzc8ZAmfNJuJQE5Kp7W7U7QZnBXKepfSHkYTEqgOhqo95Jw9i56kYGt4BWwX50mC27CCW92SVMl4tbUEhBDSB36zgztz5Zts0563Kjc34B+6ZUnMIk+BiQNvqSkZHnk3rHNSaYthO72IWLIxij0hcv7n228yc82FsQLK9jmptjY6estDfH3OSMaAj+poCLKwRFXvXWb6jwM9mG4nu1yug0Cc4L89w4EYek6dnV17VBfIxB2dmFFQdp0kqx3BM9gdMAr0KS7WLOSf3cn5eDItDLP2UW7MWaIR+GJ0EGcEL3ejBdu0to6vDh04JcRMNU55usmSn3jp74myzWE3azMIT96wr39F62c3G/ldGskbqTIMTk3gMg61vNBQ0cJSIxVdcgNb3xFDowwVyIqYz54F8Rqg0uQE4FIiUGZxJhND/AWhkukqIqLLZEpxj07kPBN6Zb2pWht/X5JrC8yJzPlvFhfJndQ4jcgjFyhvymr/a17uxTKHpKNWDEoL4nNa9/Prf7TYRw6Gyo6vcwYcUHk17SMb9aEdVnx24msNCDEKbj0OVzRaA3gFJeXZPObqJKvWqFlavGpxXnP+4ZYTl0Dmcri6vMdwX687ApG+ygiGHZDwNzU68F4JMPQ9JB45vLkCsE2w50QNP1kJZlI56dVGzfK1MyRqP4J6VshesfOT4hzR6MYq373IoONlLvENdYXN6pTxo5eRzQkwk2tZ1zmZqczCytqTEhpweKcBCCZ/FhizgLm8/x5ScBlO0wEXHZm90mpmL1gR/J2CUnz3wDU99YFFKqm01AZ8q2S5Fnh81CbD687c7K2OjWlZgdvEJA9M0JT3eKdIRd9GCx6g1TO5PWTE8OOphUDKdazyYnmMqFhFxfJ//cWJTsgYbol2a7Ob/Q69Fy3kb9K7aZLzH+Kl/uCzWnqTOrQonVL7LTFPr7wbTaepfAl5zSgMInjrGXY+Gspw+fCNgEU1zyC0Suum6VFyHBjdKWft7strrOXqOSQwxsYXp4F013mN9gZyu4Hc84A4dzIHN5UNXmxNn+vPjS82JM6klySWB9pLCzLBUgXiMDllaG6fT2PSBv/b+yaruyWBVcpsOKuEaQ37W3A3t9YFRcgB5rFMDjwOn3c0lfsg+5V+dBX2EmWLTSelNZkeq67CFnxaKtnlsAJRPBqYvoWVZcJKn0zSelrO2TwnailO7zgAHaMRmQYbXo9beBs16JWf7V8LjYGS/DYUKTTE1zKECC/pK1EKf6mxIgmV+mJ+Mc8h04qep+okIIEXaN351J3N0VUk7cEEaOLE1rFF3W4vqRcodPfbLqINF6QtTsfny1+O46J5ahlamZEyxglZtpjEkKd9yKDsgwnzqoAPN5o76IsI+FRaBc8u1qLBWxpKU615chTVegNFR5V4o1T2JGwVkueD6CjAhOplPnRyv8sauMnMy2wEMARR6AmCQ8S5ebL0nCEqjSztMoUyAEjQ6FDYqkGweu48DkBR5HjwlBloKVawYcDezxKBH8WWnMpJKZj1Ol+OHMmg5iq9xDswLx0iTNkujgatOkeRU0c/GmSSH+7GTTMLQJdj51l3EkojjEwWOjw8XBOm88GqC4bWPEE+U/5XYtZNJG/X4FYjgIvVd69RYVbMEMfPSKJ825e3XQ6RBesp/G+lkMk4VIxRakyUBPLO1u0UYnNG9ExAnPdOO0OfFvcPOL9rBJO8bR+q9Lp9/i+fH32KkaNR2WgoxQY3FY+rS2NUvtCOgZAaF9vny16WG/3zeUtRP9V28PcGivAHAwwCcRk0D0iohjAfgL/EKXJkr8gIFqbNq7lXUFRKqMbpBa182ol77SqJq1M5setGUJuSBKqYBYKdDZv3XdT/u6J5aKKkLvA5ez6PuWX0RT7kELSKDKfg9w9nwSmMmJHjbnr0blM2WvpiirR/nLid6SRN9+5KoLUb+pLw3QzD8JlS3X2q0m4BNRxfltr5KWqryOuuGDt6IOHSE8/zqGXMiTqgrUOfDH58NoWe0te4mFc1GxswvhZXWJZmaWaMJo2SBnuXa7+jIfFbnhNH74Z6jygwcqXsldYfI/Zh8BZbqTh2I7Hu44dilfbX8Uh18NVB3phRnTwpUonKquUs/iZXRnDFjtEmKg2YRQm2CP1FWRb/B92HqJlHT7Hs/Tpl3RrlxvkoskpNlW53/6Ujse0fkHLNeUm97TlDsaRXpfZkR1uWMTwhPv4oYM2Bv941R+c7nQ0yBdFNVQpZRkpejmIfjFrdQUA7DPwR69aq6Pzmk3IXarIMKG6R4MBdkB3j3HWxohnZLWpaNy/BMxS+84e4vPPfO/7+nLWVZsdpUY/nGDkQts0NGnRpZK/lW60tmncMoTepY5fMbow1GyKhqSXLbOZkz59l8DG9v9ZHPwA1roKz3MW/j2tN/U+lPQVYXTa6h1ePQkSWR2bp9OHmCCvT6s8v9PVG2ufK7dkbpY500gNx7fdArzH3yCjY33Fa5TbOuybLNdW8juJyJtikDn+5jMnMzIWP/+v12XkaXj195xk6eOKuvA5zeKk1i1PrSnmWA46Ca2ldgNqJ0rvLqM9X2EPn/QuMjLnLg0iVJ4H4r5S2PgpGdSdfVoiX/rBAq6yVDc30v8DOUae4oquSM0YDCIafLQ+hvEmB5b/f+QsTFtAR0zIVWeLyYbmrx3g9gHhVRfelCz9/exh19AGsyXcwuSaBiCzQIoctYvyhhkdCsC/cdZDce/1Fav35JQt+RJFAjiMRQhCdE4eS3SmfsREHe9LZa0ElOLhxxvs5uS/SnMYssyK9FxiucRjjOqfaIp2N8CmuNJqg3WvtMk+MlbAYeji9K94rx6U7nj9L1TGhVcAyz+Gb4sib21AW94HRzWbTrRKEkx5+KLE69Vc+8Cj1Vu2GkZ1AA2E4kaJ2aTjsEL2C0srAINXRAjnxwI3p5ED0NRYn9sT1iY9GPBJwhhd6WXEJ/Z44D0rufaDOA8dUj1SIqywRs2b7SjYcCYS8eefkwdWlpN0DvnecdwHVc3TqyCcUy7K2PMS2l2KZHzZfLCTCPaPq/NVc/Nlc5hVJoFvnNUpKWZcTsxVeHfH1mnELREECq9YES9v6FcvONCxXLQmf0k3S2dyNmsxbvlXM0u7lSqkx81md0rad3E33PPuPpDGM9UiBhSeJn3Sejmx+LdLCiZYcVxow59nCqrUmXGAbsR4O7wVQzyHdL6DX5s8k5BjHXlONz0PaIqS89xMhkYetMw6w7JZ5c/oJBH2jdZPbS6KbR0RpEe16BATLzU4QiHybxArrjBM8MKKP8Zz6MVbg/d8yb76U8nQzCK4Eqa5ombBm7/6xo2dR9O/ByfcU6qDu+efdLFAP4LiCr6C3aihDPjigUYuy0voLuX3Flevl7xXRtRZ4Vc48j2tgA7tK0wqv4OjLwCzZJn9lYIQuScQBEFMBjA6Vj8FTp4h3OphB6g0uA13nTnVLmKQ+zfELl+6znWX5nCWvbwak0t3q4qwWK3MAPKE2vqDEeCsFKvmJ2Ws+VOqnrA+ekCk9jaszBsZd71InADWijT4SHnyVmc55dv5ivXl1fED4vwNrxbiZHWeGinS3ImcoDAT1vGiLpP/D3NaiIPq9A2h5DT5SgaCVCh0JKu7DKsHjW9ZAACRxHgTSo5jrVWUJfGKweg2auQuittVidB+JaCdwYd0x9oJ4jyI5UygrB9Nzi2gbLVcCnpu+1ytsiWCbJb1Xxas8FhG/EX86taG6flZZauhaGnpRyfBB5ojGdsdPBVHEtb8R951oaNTvKXK7CddSeWaeOi2FIDPEhWhAk19RzuR9wSKEwvvi8nQFz649+fUlBMuDL7VmUBSsC1ExWwqY+uSdNKowEkpsBb+/KpWl6oGxymyR/e4uKjipBJrVPXg0nE2j6HL2JbCHNh01lV+/+6FUglhV8GTypzdvdfhYc7t0ZYtkyH/17wDakU7r1GAdUIXXmtxamhK2FdelBa4BPryblCC9gJG9htJue9LMrNS7mM6gbRA1xSFnWNsziDuGZeS3Dcu4bjsWaIebrgNnxpl/pLGxV5EtkFwDeh8fPyfPU8CZAM/Ljk3+Vi7jUtNZmZM8+f7d4wlUIkTHiAULRUKu0ODFIeyk20BiqLB7vvAT342SIDP+z5FPaa6Tjyqh/AsX2jFhbeIXKxDMb8fid0jHAWk6JKhswbtvtP6bDz+lYjvXIPwV1Y+nyft2uM8c1aUxmDHAUmZnJBvZXT43mxjXDHP05R1/dKfoExcgcYzv3wO5mazi7ugS01z6oUmByKtfQ6fA2+MQynPCoDHcp1eDtag/E3HQpHMWAgGkNh9wWR5Y48YG0W4CgvOrngI111j/x+MIuH5xFlVkxqptSjW+hnVbt9qxtXndEH5RtnxWfd9eP+kli/x3LU1WGsZVAkVElXD274LBGK0bMveEUbj/6EpnocEnvRSlglpE4GiAO5S4JdYb4uYd6oeK8vuZvTQaWMS3dEIJ2ssCxWz8DqYmc/b38ynz0DWCCeF1gCyipaLG2Kq9wqfHz3S6m7CS+H42nmDYAz2dYcx77M8purGOS5tQ4aykJXIDQBwHjIGSU+52M+1OV53rp4B3JbIXecQWEjfk9gkVoz8T6HJbIhFgm3quNMk+cIyRHlj/BdURXY8o7H7dBQfsdpLJhAsxS/1JtMkY8JoP4YdyOxzJY5x/+A9scOTXvPVoQAMqgmP899s6GvRtzNFGXLX7VHSnUj7VPO8K1qxaS/a/6v/YhRlUtNgnqnth3Jo/DKbdhdPn6HgB9YjU5GuN1uPyUXZJDZYfFwMfdqNPVoI8d1csoHMK5tquGoK060mIwBHMk3pFGqBosajr9g/5kBPrrtuIIEPFZnaAKSCQqLdeQq2B6Bs8WxD8+DfzGJ2nu0Xeb58spPoiHZAVV+I5lRUseUE0IA4E844UzFYADNYcLBW3zsP7aWzLnUZoQPuIDR3FX3bkM5mCunvXaPSi4PRkKnItEv8/OYiq8RSKQcaTwxX9YgdNbgPuXLwb5ARofv0Zj3WpHhNnlTq2Qu/lwvM3PUaqv8L7kpFqQR9aRaXfFanbLgbyxJ2kAx9oA1kRMyH3JXI06oQhRiZQ1LtWz+QKKxme0zAgI2q6/dmYApsA7WGeBae5+Y3eqkqDjXyS7Q+LzYgrM3EiqGHsibaKZKgFecxpGiMLXY5+kkuDKBdMkj2Bd8uTKI+aTWpu97gNp78fm891zYuT68sIEzE5JggpWjlWFSpzYayxvnOxJ3JYK/q8WbCy14KhtCFhdLOxCEAvyqXN3K+oP52ZzdxHiCAac5LX2TO5CTmkxp6zCT5JZDIBgnnmQU8GBowEvogfPni17fE1sljd55P2C4mWCNDr8l3hMH+4zpyZqp3iFbJx20nGtU+9LJozl0OxNrk/c0C9chEe+k4vUECnUaXbS8JqdnymqbZ1SCI+4+1BYMW4nzYKDLaqL3Nm08C/Ug7zNg2BuwhWepXrkqaRX58LCWLPDQyUzn369E1drtekeuNcI4SgdmyQZ/7xhXZ6sOKg9G/HEiJQsriRQThvHz4BhaFaXic4nlrz4LhUthGBLbnnB6tufJizYx4c6b2rY1E63pLDA8QdZsTOD7euNMku1a0T2nNQ9rOPBYPDyksaP+EmKTvqcgRycKMtzhHh37mAqVERuzIIMs/zXE9jGBpJBBWb8KCPZne6Sxw0+UFlY6/VeXJUHunHXY1csfc40Tw95XrkpLzxqX/LrsaYM7Y0UQ/Qe6PTjMQUXDseSMhYwHTXCohySQ+1fIjz/yjZWRFI1/a4d9eQzWLoGjz8O8ldPhzhpWFwwlaR0T1gpMP3VeHvDOx4RJocHJOSRQ+H4/nHJsiuXWDKowYZZW8Jk9vUiw2jExedn7glAsC/bgN1NrgIp1y+y3tmLd2V9x7yKVC+QK6MOFq19dlQflj350qUavBULMCTn0BvCRQY4q6VjniU6XHISUsaApCVoQeevAOuCUFcnwWfK+44XDo1qSpPF1wcnbH7N9aO+AzD212PgFlGkXlaQ3Gbfz9XIUMjulgGUREelr6IX+tR2K9H/yep959z5WLXlZ81Z8HCIV8CyU0JKYzkIeFqf6o2ywb2O73oRi7i8F6Vcn2zU1VWZpLfSXgTNkRtqM7r5s13UimLWtAVZs97rLcMRlwXzYp98ZnKvQLj/dpKn8nfNnU9V2Bp90frlQedeKt6zd4mPR53FKQ1J4r95n1G8ph0XG37DC9b185sWbnoyC4Q1iUvyy5IOxBrIqbqn/JSUWzdrlOiZGDJrU5IGuzUl5TaupUTIgFeLfT6uh0gIEJ5nZQ/8XjB0mmEZxTvocrU/BFoOaUvV/N48W3W/aQu5nR3KwsSByfSDAEq6qBqTVTkZtkaAd/1Rie2jkdRlZvxFMu0MGnLc0SHPII8eOz/bjfIhSQhAb38dSRcFmfRb+fpDrDHeazED6EHNayy0kESoRG+XFbJa6xWB6OlbwHVDwdO9Ka7bIOqLRHpZjwXmv/2DR9nu+2xwxE39cBHq/7Vv99HcvH8ZJeGmgHr8mBKQmOCTkvLkxf5k4FrqZuNpaRNhCB3puFuF5d2nnQbhgAaANLMCYAiGsJhX2bFM/r3BGhR/dkGPXeBQUJ4tTARQnVqA07mW/42Dv2k7Wa7hWU/wv7FTIWLwWyHX0Vqdg4BHrlJ7zh+b+T6fH+W3d53LS5rkXK5GIctMIttK+osfGYIvOD0BkkXBJR0EYUmteToIxpoaMVKZmCRC2BbmBLdUTIZiI1kVYKYnq9Q5xMGODu+6vCT2ofvYE0pmGbQ9Ln6wnBDYZUD/BL9rmiPn3n28Zs33OsHUQcLp2vjUEV5sOBLO2ScyescGu0N58y1q1NSNJuXCzI4fu4RWJtSIn3P3+9eAsMo/2NupFeaf70/usLGd2Z0F27EjLoIj+nmJ4/Q5edPFhVNpPURQrUzPALNNzEvx3e82rDtPpbZjugv7Abm2q2vMGwz5W+hGH0hkCzXdZhPFbLk0sR5vVhScLgAPdZIVZIjTuzwIKVuWmvpMr7Gwxgiglpy8ecfOAZcCpXRzG6lNuRB64D4G9AWD9vQi/crWV4Xq5VjJnRjQc3g4bJe+MmksjEctghn27n5i5PHZvW/gM0BsXzo8Pou6yOLnp49dGXpK/oLAbOdOel9h+kDqEtZunvsXa9EFomdl0QbDvk+H58SjszCVqVOXSgDpOdZjXWfZpFL6S/fd1Lq8FQS3LklgiNhdvE5GzgSO8uq3gtj8I2o+JzucnrUSrtoxa6IejmVQLGzF3rSCy3fdhBPhZnDdgctC89dRJ+PTfW4ga5WWAyaWspzFg5251FoByB8LUbD3AxhvV6M1ARNXRJ4NhPe2j9WOlu5I2KmCMGvGP5CbHAyZk3YhiuIdtDgOvre9Cz0yOWvHH5FpZQzqzyHE5XkTTFMU2JhG1nvne9SCi9zNvPnGj9h/bQXgpue78rpogXJl8oDSfMwz9fp4ocyOxEV1JCEslSsRvodEzPbUsMUYWDERNzR6f45Ku6EmW3qdD48dcFQtc9rr2wF3o85edZ/2SY0BSkOdQX1ahwPVBP554Q1Z4lbd0d/vrRCO5k3QBWOb3iML0vI4MRkiKwqt735Q2fkq0Xl1pI3nk4ll51cSEHOrFTctkxwLOiQl6HJh2q3iqHFmtOCSo0A4YLl+mllolm7FLpe/79gMoe7A5cbFPCbX9Z3GhI43FgBbWoq8pwaIoDlklRimVauOx355pv7v26P0MLrgiqWTOxJaIGO/UhHf7GSOm0r1O5m1sPYYn1bathmEkYfrQLiEWQ2/3IjunsIxgAmi6t4JsxalYxE4YyvD59EpzvswOjZUvSgkHwPZonVtaiMTLXnV3p0dKpCSSz38Kv8QbNFzqLbwbBBRUHw/nHSxNipNm5vtjfkuf06jWRwkctgu8wZqKwS/7IcGnFtmwnbJFPhpGcyV9GVFzCCG+TOeNgAWxOUPgmtLdD8JawVVDV+e3iR8kHuaZXIknncI/3uFnblTd2P/OdWvxl+9CXbqJb1CS8osg2fg/qaA9KvM3FQoZQ79JRZC/Upm90ABPCGzksTWJ7Xy9VHpnPZCgGzAVbJhmurq8tm24BjBvnm1GOKfotvCqXyIXFE1bYTRS1WtzgZrGWgR/oOUDnNgDPXqUfTmyFPfNCD9MX22hvuBans/Kl1DustiTunl9Kravj0NG1Ds5nkTqlQSYOfhgvRIowimmWAYWma55eqvaQL9GvHmuH/hIVB/tiN6s7yOW2iahReL8dNddIbMJ6BLVguJ4n1dnquV3ZNqi6V0H/Vn00j0cE80ERsZTgsHPJ0eUjxYik+eDtaEHnyAsYeR2AjRcGw==\"), function (e) {\n          return e.charCodeAt(0);\n        }), i = new Uint8Array([177, 156, 215, 89, 13, 111, 230, 1]), o = new Uint8Array(n.length), a = new Uint8Array(256), s = 0; s < 256; s++) {\n          a[s] = s;\n        }\n\n        var c,\n            d = 0;\n\n        for (s = 0; s < 256; s++) {\n          d = (d + a[s] + i[s % i.length]) % 256;\n          var u = [a[d], a[s]];\n          a[s] = u[0], a[d] = u[1];\n        }\n\n        s = 0, d = 0;\n\n        for (var l = 0; l < 0 + n.length; l++) {\n          d = (d + a[s = (s + 1) % 256]) % 256;\n          var f = [a[d], a[s]];\n          a[s] = f[0], a[d] = f[1], c = a[(a[s] + a[d]) % 256], l >= 0 && (o[l - 0] = n[l - 0] ^ c);\n        }\n\n        return N = !0, new Promise(function (n) {\n          (function (e, t) {\n            return WebAssembly.instantiate(e, t);\n          })(o.buffer, t).then(function (t) {\n            N = !1, r = t.instance.exports, e.__wbindgen_wasm_module = t.module, n();\n          });\n        });\n      }().then(function () {\n        w = C.new(), e(w);\n      });\n    })).then(function (e) {\n      L = e;\n    });\n    var U = !0;\n    setInterval(function () {\n      Object(c.getParameter)(\"UPLOAD_LOG\") && j.info(\"console log upload\");\n    }, 9e5);\n\n    var j = function () {\n      var e,\n          t,\n          n,\n          r,\n          i,\n          u,\n          l = null,\n          f = [\"DEBUG\", \"INFO\", \"WARNING\", \"ERROR\", \"NONE\"],\n          p = 0,\n          g = function g(e, t, n) {\n        var r = {};\n        Array.isArray(e) || (e = [e]), e = e.map(function (e) {\n          return {\n            log_item_id: D++,\n            log_level: e.log_level,\n            payload_str: e.payload\n          };\n        }), r = {\n          timestamp: Date.now(),\n          sdk_version: c.VERSION,\n          process_id: Object(d.getProcessId)(),\n          payload: JSON.stringify(e)\n        }, L ? r.hash = L.get_digest(\"\".concat(r.payload).concat(r.process_id).concat(r.timestamp)) : n && n();\n\n        try {\n          var i = l,\n              o = l || \"https://\".concat(Object(c.getParameter)(\"LOG_UPLOAD_SERVER\"), \"/upload/v2\");\n          Object(s.post)(o, r, function (e) {\n            \"OK\" === e ? t && t(e) : n && n(e);\n          }, function (e) {\n            n && n(e);\n          }, i ? {\n            withCredentials: !0\n          } : {\n            withCredentials: !0,\n            \"Cache-Control\": \"no-cache, no-store\",\n            Pragma: \"no-cache\",\n            Expires: \"0\"\n          });\n        } catch (e) {\n          n && n(e);\n        }\n      },\n          m = function m(e, t) {\n        if (Object(c.getParameter)(\"UPLOAD_LOG\")) try {\n          t = Array.prototype.slice.call(t);\n          var n = \"\";\n          if (t.forEach(function (e) {\n            \"object\" === o()(e) && (e = JSON.stringify(e)), n = n + e + \" \";\n          }), M.push({\n            payload: n,\n            log_level: e\n          }), U) return;\n          \"free\" === k && function e(t) {\n            k = \"uploading\", setTimeout(function () {\n              g(t, function () {\n                x = 0, 0 !== M.length ? (P = M.length < 10 ? M.splice(0, M.length) : M.splice(0, 10), e(P)) : k = \"free\";\n              }, function () {\n                setTimeout(function () {\n                  e(P);\n                }, x++ < 2 ? 200 : 1e4);\n              });\n            }, 3e3);\n          }(P = M.length < 10 ? M.splice(0, M.length) : M.splice(0, 10));\n        } catch (e) {}\n      };\n\n      t = function t() {\n        for (var t = [0], n = 0; n < arguments.length; n++) {\n          t.push(arguments[n]);\n        }\n\n        e.apply(this, t);\n      }, n = function n() {\n        for (var t = [1], n = 0; n < arguments.length; n++) {\n          t.push(arguments[n]);\n        }\n\n        e.apply(this, t);\n      }, r = function r() {\n        for (var t = [2], n = 0; n < arguments.length; n++) {\n          t.push(arguments[n]);\n        }\n\n        e.apply(this, t);\n      }, i = function i() {\n        for (var t = [3], n = 0; n < arguments.length; n++) {\n          t.push(arguments[n]);\n        }\n\n        e.apply(this, t);\n      };\n      var h = {};\n      return u = function u(e) {\n        h[e] || (r.apply(void 0, arguments), h[e] = !0);\n      }, {\n        DEBUG: 0,\n        INFO: 1,\n        WARNING: 2,\n        ERROR: 3,\n        NONE: 4,\n        stopWaitJoin: function stopWaitJoin() {\n          U = !1;\n        },\n        enableLogUpload: function enableLogUpload() {\n          Object(c.setParameter)(\"UPLOAD_LOG\", !0);\n        },\n        disableLogUpload: function disableLogUpload() {\n          Object(c.setParameter)(\"UPLOAD_LOG\", !1);\n        },\n        setProxyServer: function setProxyServer(e) {\n          l = e ? \"https://\".concat(e, \"/ls/?h=\").concat(Object(c.getParameter)(\"LOG_UPLOAD_SERVER\"), \"&p=443&d=upload/v2\") : \"https://\".concat(Object(c.getParameter)(\"LOG_UPLOAD_SERVER\"), \"/upload/v2\");\n        },\n        setLogLevel: function setLogLevel(e) {\n          e > 4 ? e = 4 : e < 0 && (e = 0), p = e;\n        },\n        log: e = function e() {\n          var e = arguments[0],\n              t = arguments;\n          if (t[0] = a() + \" Agora-SDK [\" + (f[e] || \"DEFAULT\") + \"]:\", m(e, t), !(e < p)) switch (e) {\n            case 0:\n            case 1:\n              console.log.apply(console, t);\n              break;\n\n            case 2:\n              console.warn.apply(console, t);\n              break;\n\n            case 3:\n              console.log.apply(console, t);\n              break;\n\n            default:\n              return void console.log.apply(console, t);\n          }\n        },\n        debug: t,\n        info: n,\n        warning: r,\n        deprecate: u,\n        error: i\n      };\n    }();\n\n    t.default = j;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.r(t), n.d(t, \"report\", function () {\n      return A;\n    }), n.d(t, \"SESSION_INIT\", function () {\n      return v;\n    }), n.d(t, \"JOIN_CHOOSE_SERVER\", function () {\n      return E;\n    }), n.d(t, \"JOIN_GATEWAY\", function () {\n      return S;\n    }), n.d(t, \"PUBLISH\", function () {\n      return _;\n    }), n.d(t, \"SUBSCRIBE\", function () {\n      return y;\n    }), n.d(t, \"getProcessId\", function () {\n      return b;\n    });\n    var r = n(46),\n        i = n.n(r),\n        o = n(7),\n        a = n.n(o),\n        s = n(2),\n        c = n(0),\n        d = n(14),\n        u = n(28),\n        l = n.n(u),\n        f = n(47);\n\n    function p(e, t) {\n      var n = Object.keys(e);\n\n      if (Object.getOwnPropertySymbols) {\n        var r = Object.getOwnPropertySymbols(e);\n        t && (r = r.filter(function (t) {\n          return Object.getOwnPropertyDescriptor(e, t).enumerable;\n        })), n.push.apply(n, r);\n      }\n\n      return n;\n    }\n\n    function g(e) {\n      for (var t = 1; t < arguments.length; t++) {\n        var n = null != arguments[t] ? arguments[t] : {};\n        t % 2 ? p(Object(n), !0).forEach(function (t) {\n          i()(e, t, n[t]);\n        }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : p(Object(n)).forEach(function (t) {\n          Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t));\n        });\n      }\n\n      return e;\n    }\n\n    var m,\n        h,\n        v = \"session_init\",\n        E = \"join_choose_server\",\n        S = \"join_gateway\",\n        _ = \"publish\",\n        y = \"subscribe\",\n        R = new (n.n(f).a)(),\n        T = {\n      eventType: null,\n      sid: null,\n      lts: null,\n      success: null,\n      cname: null,\n      uid: null,\n      peer: null,\n      cid: null,\n      elapse: null,\n      extend: null,\n      vid: 0\n    },\n        I = null,\n        b = function b() {\n      return I || (I = \"process-\" + l()(), c.default.info(\"processId: \" + I)), I;\n    },\n        A = (h = 0, (m = {\n      list: {},\n      setProxyServer: function setProxyServer(e) {\n        R.setProxy(e), m.proxyServerURL = e;\n      },\n      getUrl: function getUrl() {\n        return m.proxyServerURL ? \"https://\".concat(m.proxyServerURL, \"/rs/?h=\").concat(Object(s.getParameter)(\"EVENT_REPORT_DOMAIN\"), \"&p=6443&d=events/message\") : \"https://\".concat(Object(s.getParameter)(\"EVENT_REPORT_DOMAIN\"), \":6443/events/message\");\n      },\n      getBackUrl: function getBackUrl() {\n        return m.proxyServerURL ? \"https://\".concat(m.proxyServerURL, \"/rs/?h=\").concat(Object(s.getParameter)(\"EVENT_REPORT_BACKUP_DOMAIN\"), \"&p=6443&d=events/message\") : \"https://\".concat(Object(s.getParameter)(\"EVENT_REPORT_BACKUP_DOMAIN\"), \":6443/events/message\");\n      },\n      getSessionStartTime: function getSessionStartTime(e) {\n        return m.list[e] ? m.list[e].startTime : (c.default.DEBUG(\"[getSessionStartTime]: session \".concat(e, \" no exit\")), 0);\n      },\n      sessionInit: function sessionInit(e, t) {\n        var n = a()({}, T);\n        n.startTime = +new Date(), n.sid = e, n.cname = t.cname, m.list[e] = n;\n        var r = a()({}, {\n          willUploadConsoleLog: Object(s.getParameter)(\"UPLOAD_LOG\"),\n          areaVersion: \"global\"\n        }, t.extend),\n            i = a()({}, n);\n        i.eventType = v, i.appid = t.appid, i.browser = navigator.userAgent, i.build = s.BUILD, i.lts = +new Date(), i.elapse = i.lts - i.startTime, i.extend = JSON.stringify(r), i.mode = t.mode, i.process = b(), i.success = t.succ, i.version = s.VERSION, delete i.startTime, m.send({\n          type: \"Session\",\n          data: i\n        }), m._flushInvokeReport(e);\n      },\n      joinChooseServer2: function joinChooseServer2(e, t, n) {\n        if (m.list[e]) {\n          m.list[e].uid || (t.uid && (m.list[e].uid = parseInt(t.uid)), t.cid && (m.list[e].cid = parseInt(t.cid)), t.vid && (m.list[e].vid = parseInt(t.vid)));\n          var r = a()({}, m.list[e]);\n          r.eventType = E;\n          var i = t.lts;\n          r.lts = Date.now(), r.eventElapse = r.lts - i, r.chooseServerAddr = t.csAddr, r.errorCode = t.ec, r.elapse = r.lts - r.startTime, r.success = t.succ, r.chooseServerIp = t.chooseServerIp || \"\", r.chooseServerAddrList = JSON.stringify(t.serverList), delete r.startTime, m.send({\n            type: \"JoinChooseServer\",\n            data: r\n          });\n        }\n      },\n      joinChooseServer: function joinChooseServer(e, t, n) {\n        if (m.list[e]) {\n          n && (t.uid && (m.list[e].uid = parseInt(t.uid)), t.cid && (m.list[e].cid = parseInt(t.cid)), t.vid && (m.list[e].vid = parseInt(t.vid)));\n          var r = a()({}, m.list[e]);\n          r.eventType = E;\n          var i = t.lts;\n          r.lts = Date.now(), r.eventElapse = r.lts - i, r.chooseServerAddr = t.csAddr, r.errorCode = t.ec, r.elapse = r.lts - r.startTime, r.success = t.succ, r.chooseServerIp = t.chooseServerIp || \"\", r.chooseServerAddrList = JSON.stringify(t.serverList), delete r.startTime, m.send({\n            type: \"JoinChooseServer\",\n            data: r\n          });\n        }\n      },\n      reqUserAccount: function reqUserAccount(e, t) {\n        t.vid && (m.list[e].vid = parseInt(t.vid));\n        var n = a()({}, m.list[e]),\n            r = t.lts;\n        n.eventType = \"req_user_account\", n.lts = Date.now(), n.success = t.success, n.serverAddress = t.serverAddress, n.stringUid = t.stringUid, n.uid = t.uid, n.errorCode = t.errorCode, n.elapse = n.lts - n.startTime, n.eventElapse = n.lts - r, n.extend = \"string\" == typeof t.extend ? t.extend : JSON.stringify(t.extend), delete n.startTime, m.send({\n          type: \"ReqUserAccount\",\n          data: n\n        });\n      },\n      joinGateway: function joinGateway(e, t) {\n        t.vid && (m.list[e].vid = parseInt(t.vid)), t.uid && (m.list[e].uid = parseInt(t.uid));\n        var n = a()({}, m.list[e]),\n            r = t.lts;\n        n.eventType = S, n.firstSuccess = t.firstSuccess, n.lts = Date.now(), n.gatewayAddr = t.addr, n.success = t.succ, n.errorCode = t.ec, n.elapse = n.lts - n.startTime, n.eventElapse = n.lts - r, delete n.startTime, m.send({\n          type: \"JoinGateway\",\n          data: n\n        });\n      },\n      publish: function publish(e, t) {\n        var n = a()({}, m.list[e]);\n        n.eventType = _;\n        var r = t.lts;\n        n.lts = Date.now(), n.eventElapse = n.lts - r, n.elapse = n.lts - n.startTime, n.success = t.succ, n.errorCode = t.ec, n.audio = t.audio, n.video = t.video, n.screenshare = t.screenshare, n.publishRequestid = t.publishRequestid, n.p2pid = t.p2pid, t.videoName && (n.videoName = t.videoName), t.audioName && (n.audioName = t.audioName), t.screenName && (n.screenName = t.screenName), delete n.startTime, m.send({\n          type: \"Publish\",\n          data: n\n        }), m._flushInvokeReport(e);\n      },\n      subscribe: function subscribe(e, t) {\n        var n = a()({}, m.list[e]);\n        n.eventType = y;\n        var r = t.lts;\n        n.lts = Date.now(), n.eventElapse = n.lts - r, n.elapse = n.lts - n.startTime, n.errorCode = t.ec, n.success = t.succ, n.subscribeRequestid = t.subscribeRequestid, n.p2pid = t.p2pid, isFinite(t.peerid) ? n.peer = t.peerid : n.peerSuid = \"\" + t.peerid, \"boolean\" == typeof t.video && (n.video = t.video), \"boolean\" == typeof t.audio && (n.audio = t.audio), delete n.startTime, m.send({\n          type: \"Subscribe\",\n          data: n\n        }), m._flushInvokeReport(e);\n      },\n      firstRemoteFrame: function firstRemoteFrame(e, t) {\n        var n = a()({}, m.list[e]);\n        n.eventType = \"first_remote_frame\";\n        var r = t.lts;\n        n.lts = Date.now(), n.eventElapse = n.lts - r, n.elapse = n.lts - n.startTime, n.width = t.width, n.height = t.height, n.success = t.succ, n.errorCode = t.ec, isFinite(t.peerid) ? n.peer = t.peerid : n.peerSuid = \"\" + t.peerid, delete n.startTime, m.send({\n          type: \"FirstFrame\",\n          data: n\n        });\n      },\n      firstVideoReceived: function firstVideoReceived(e, t) {\n        var n = a()({}, m.list[e]);\n        n.eventType = \"first_video_received\", n.lts = Date.now(), n.peer = t.peerid, n.uid = t.uid, n.elapse = t.elapse, n.subscribeElapse = t.subscribeElapse, n.subscribeRequestid = t.subscribeRequestid, n.p2pid = t.p2pid, m.send({\n          type: \"FirstVideoReceived\",\n          data: n\n        });\n      },\n      firstAudioReceived: function firstAudioReceived(e, t) {\n        var n = a()({}, m.list[e]);\n        n.eventType = \"first_audio_received\", n.lts = Date.now(), n.peer = t.peerid, n.uid = t.uid, n.elapse = t.elapse, n.subscribeElapse = t.subscribeElapse, n.subscribeRequestid = t.subscribeRequestid, n.p2pid = t.p2pid, m.send({\n          type: \"FirstAudioReceived\",\n          data: n\n        });\n      },\n      firstVideoDecode: function firstVideoDecode(e, t) {\n        var n = a()({}, m.list[e]);\n        n.eventType = \"first_video_decode\", n.lts = Date.now(), n.peer = t.peerid, n.uid = t.uid, n.elapse = t.elapse, n.videowidth = t.width, n.videoheight = t.height, n.subscribeElapse = t.subscribeElapse, n.subscribeRequestid = t.subscribeRequestid, n.p2pid = t.p2pid, m.send({\n          type: \"FirstVideoDecode\",\n          data: n\n        });\n      },\n      firstAudioDecode: function firstAudioDecode(e, t) {\n        var n = a()({}, m.list[e]);\n        n.eventType = \"first_audio_decode\", n.lts = Date.now(), n.uid = t.uid, n.peer = t.peerid, n.elapse = t.elapse, n.subscribeElapse = t.subscribeElapse, n.subscribeRequestid = t.subscribeRequestid, n.p2pid = t.p2pid, m.send({\n          type: \"FirstAudioDecode\",\n          data: n\n        });\n      },\n      onAddAudioStream: function onAddAudioStream(e, t) {\n        var n = a()({}, m.list[e]);\n        n.eventType = \"on_add_audio_stream\", n.lts = Date.now(), n.uid = t.uid, n.peer = t.peerid, m.send({\n          type: \"OnAddAudioStream\",\n          data: n\n        });\n      },\n      onAddVideoStream: function onAddVideoStream(e, t) {\n        var n = a()({}, m.list[e]);\n        n.eventType = \"on_add_video_stream\", n.lts = Date.now(), n.uid = t.uid, n.peer = t.peerid, m.send({\n          type: \"OnAddVideoStream\",\n          data: n\n        });\n      },\n      onUpdateStream: function onUpdateStream(e, t) {\n        var n = a()({}, m.list[e]);\n        n.eventType = \"on_update_stream\", n.lts = Date.now(), n.uid = t.uid, n.peer = t.peerid, n.audio = t.audio, n.video = t.video, m.send({\n          type: \"OnUpdateStream\",\n          data: n\n        });\n      },\n      onRemoveStream: function onRemoveStream(e, t) {\n        var n = a()({}, m.list[e]);\n        n.eventType = \"on_remove_stream\", n.lts = Date.now(), n.uid = t.uid, n.peer = t.peerid, m.send({\n          type: \"OnRemoveStream\",\n          data: n\n        });\n      },\n      streamSwitch: function streamSwitch(e, t) {\n        var n = a()({}, m.list[e]);\n        n.eventType = \"stream_switch\", n.lts = Date.now(), n.isDual = t.isdual, n.elapse = n.lts - n.startTime, n.success = n.succ, delete n.startTime, m.send({\n          type: \"StreamSwitch\",\n          data: n\n        });\n      },\n      audioSendingStopped: function audioSendingStopped(e, t) {\n        var n = a()({}, m.list[e]);\n        n.eventType = \"audio_sending_stopped\", n.lts = Date.now(), n.elapse = n.lts - n.startTime, n.reason = t.reason, n.success = t.succ, delete n.startTime, m.send({\n          type: \"AudioSendingStopped\",\n          data: n\n        });\n      },\n      videoSendingStopped: function videoSendingStopped(e, t) {\n        var n = a()({}, m.list[e]);\n        n.eventType = \"video_sending_stopped\", n.lts = Date.now(), n.elapse = n.lts - n.startTime, n.reson = t.reason, n.success = t.succ, delete n.startTime, m.send({\n          type: \"VideoSendingStopped\",\n          data: n\n        });\n      },\n      requestProxyAppCenter: function requestProxyAppCenter(e, t) {\n        var n = a()({}, m.list[e]),\n            r = t.lts;\n        n.eventType = \"request_proxy_appcenter\", n.lts = Date.now(), n.eventElapse = n.lts - r, n.elapse = n.lts - n.startTime, n.extend = t.extend + \"\", n.APAddr = t.APAddr, n.workerManagerList = t.workerManagerList, n.response = t.response, n.errorCode = t.ec, n.success = t.succ, delete n.startTime, m.send({\n          type: \"RequestProxyAppCenter\",\n          data: n\n        });\n      },\n      requestProxyWorkerManager: function requestProxyWorkerManager(e, t) {\n        var n = a()({}, m.list[e]),\n            r = t.lts;\n        n.eventType = \"request_proxy_worker_manager\", n.lts = Date.now(), n.eventElapse = n.lts - r, n.elapse = n.lts - n.startTime, n.extend = t.extend, n.workerManagerAddr = t.workerManagerAddr, n.response = t.response, n.errorCode = t.ec, n.success = t.succ, delete n.startTime, m.send({\n          type: \"RequestProxyWorkerManager\",\n          data: n\n        });\n      },\n      requestWorkerEvent: function requestWorkerEvent(e, t) {\n        var n = a()({}, m.list[e]),\n            r = n.startTime,\n            i = Date.now();\n        delete (n = g({}, n, {}, t, {\n          elapse: i - r,\n          lts: i,\n          productType: \"WebRTC\"\n        })).startTime, m.send({\n          type: \"WorkerEvent\",\n          data: n\n        });\n      },\n      requestApWorkerEvent: function requestApWorkerEvent(e, t) {\n        var n = a()({}, m.list[e]),\n            r = n.startTime,\n            i = Date.now();\n        n = g({}, n, {}, t, {\n          elapse: i - r,\n          lts: i\n        }), m.send({\n          type: \"APWorkerEvent\",\n          data: n\n        });\n      },\n      sendCustomReportMessage: function sendCustomReportMessage(e, t, n) {\n        var r = {\n          type: \"UserAnalytics\",\n          data: g({\n            sid: e\n          }, t)\n        },\n            i = m.getUrl(),\n            o = !!m.proxyServerURL;\n        Object(d.post)(i, r, function (e) {\n          n && n();\n        }, function (e) {\n          var t = m.getBackUrl();\n          Object(d.post)(t, r, function (e) {\n            n && n();\n          }, function (e) {\n            n && n(\"Failed\");\n          }, o ? {\n            timeout: Object(s.getParameter)(\"CUSTOMER_REPORT_TIMEOUT\")\n          } : {\n            timeout: Object(s.getParameter)(\"CUSTOMER_REPORT_TIMEOUT\"),\n            \"Cache-Control\": \"no-cache, no-store\",\n            Pragma: \"no-cache\",\n            Expires: \"0\"\n          });\n        }, o ? {\n          timeout: Object(s.getParameter)(\"CUSTOMER_REPORT_TIMEOUT\")\n        } : {\n          timeout: Object(s.getParameter)(\"CUSTOMER_REPORT_TIMEOUT\"),\n          \"Cache-Control\": \"no-cache, no-store\",\n          Pragma: \"no-cache\",\n          Expires: \"0\"\n        });\n      },\n      joinChannelTimeOut: function joinChannelTimeOut(e) {\n        m.send({\n          type: \"JoinChannelTimeout\",\n          data: g({}, e)\n        });\n      },\n      peerPublishStatus: function peerPublishStatus(e) {\n        m.send({\n          type: \"PeerPublishStatus\",\n          data: g({}, e)\n        });\n      },\n      joinWebProxyAP: function joinWebProxyAP(e) {\n        m.send({\n          type: \"JoinWebProxyAP\",\n          data: g({}, e)\n        });\n      },\n      webSocketQuit: function webSocketQuit(e) {\n        m.send({\n          type: \"WebSocketQuit\",\n          data: g({}, e)\n        });\n      }\n    }).reportApiInvoke = function (e, t) {\n      var n = t.tag,\n          r = t.name,\n          i = t.getStates,\n          o = t.options,\n          a = t.timeout,\n          d = void 0 === a ? 6e4 : a,\n          u = t.callback,\n          l = t.reportResult,\n          f = void 0 === l || l,\n          p = Date.now(),\n          m = 0,\n          v = h++,\n          E = function E() {\n        return g({\n          tag: n,\n          invokeId: v,\n          sid: e,\n          name: r,\n          apiInvokeTime: p,\n          options: o\n        }, i && {\n          states: (t = i(), Object.keys(t).reduce(function (e, n) {\n            var r = e;\n            return null != t[n] && (r[n] = t[n]), r;\n          }, {}))\n        });\n        var t;\n      },\n          S = !!Object(s.getParameter)(\"SHOW_REPORT_INVOKER_LOG\");\n\n      S && c.default.info(\"\".concat(r, \" start\"));\n\n      var _ = setTimeout(function () {\n        A._sendApiInvoke(g({}, E(), {\n          error: \"API_INVOKE_TIMEOUT\",\n          success: !1\n        }));\n      }, d);\n\n      return function (e, t) {\n        if (clearTimeout(_), ++m > 1 && (e = \"EXECUTOR_INVOKE_\".concat(m)), e) return A._sendApiInvoke(g({}, E(), {\n          success: !1,\n          error: e\n        }, i && {\n          states: i()\n        })), S && c.default.info(\"\".concat(r, \" onFailure\"), e), u && u(e);\n        A._sendApiInvoke(g({}, E(), {\n          success: !0\n        }, f && {\n          result: t\n        }, {}, i && {\n          states: i()\n        })), S && c.default.info(\"\".concat(r, \" onSuccess\")), u && u(null, t);\n      };\n    }, m._cachedItems = [], m._cacheInvokeReport = function (e) {\n      e.lts || (e.lts = Date.now()), m._cachedItems.push(e), m._cachedItems.length > 50 && m._cachedItems.shift();\n    }, m._flushInvokeReport = function (e) {\n      if (m._cachedItems.length) {\n        var t = m._cachedItems;\n        m._cachedItems = [], c.default.debug(\"Flush cached event reporting:\", t.length), t.forEach(function (t, n) {\n          t.sid = e, setTimeout(function () {\n            m._sendApiInvoke(t);\n          }, 5e3 + 500 * n);\n        });\n      }\n    }, m._sendApiInvoke = function (e) {\n      var t = e.tag,\n          n = e.invokeId,\n          r = e.sid,\n          i = e.name,\n          o = e.result,\n          a = e.states,\n          c = e.options,\n          d = e.error,\n          u = e.success,\n          l = e.apiInvokeTime,\n          f = e.lts,\n          p = Object(s.getParameter)(\"NOT_REPORT_EVENT\");\n      if (!(t && p instanceof Array && -1 !== p.indexOf(t))) if (m.list[r]) {\n        var h = m.list[r],\n            v = h.startTime,\n            E = h.cname,\n            S = h.uid,\n            _ = h.cid,\n            y = (f = f || Date.now()) - v,\n            R = f - l,\n            T = \"\";\n        if (c) try {\n          T = JSON.stringify(c);\n        } catch (e) {\n          T = c.toString();\n        }\n        var I = g({\n          invokeId: n,\n          sid: r,\n          cname: E,\n          cid: _,\n          lts: f,\n          uid: S,\n          success: u,\n          elapse: y,\n          apiName: i,\n          execElapse: R\n        }, void 0 !== c && {\n          options: T\n        }, {}, void 0 !== a && {\n          execStates: JSON.stringify(a)\n        }, {}, void 0 !== d && {\n          errorCode: JSON.stringify(d)\n        }, {}, void 0 !== o && {\n          execResult: JSON.stringify(o)\n        });\n        m.send({\n          type: \"ApiInvoke\",\n          data: I\n        });\n      } else m._cacheInvokeReport(arguments[0]);\n    }, m.sendCache = [], m.sendTimer = null, m.send = function (e) {\n      if (e.data) {\n        var t = e.data;\n        m._lastLts && m._lastLts >= t.lts && (t.lts = m._lastLts + 1), m._lastLts = t.lts;\n      }\n\n      if (m.sendCache.push(e), null === m.sendTimer) return function e() {\n        m.sendTimer = setTimeout(function () {\n          if (0 !== m.sendCache.length) {\n            var t = m.sendCache.length < 10 ? m.sendCache.splice(0, m.sendCache.length) : m.sendCache.splice(0, 10),\n                n = m.list[t[0].data.sid].vid;\n            return R.sendReportList(t, n), e();\n          }\n\n          m.sendTimer = null;\n        }, Object(s.getParameter)(\"EVENT_REPORT_SEND_INTERVAL\"));\n      }();\n    }, m);\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n    t.BUILD = \"v3.6.11-0-gbdacc5f-dirty\";\n    t.VERSION = \"3.6.11\";\n    var r = 0 * Date.now() + 11499 + 86604 + 5615 + 6547 + 846;\n    t.SUPPORT_RESOLUTION_LIST = {\n      \"90p_1\": [160, 90, null, null, null, null],\n      \"120p_1\": [160, 120, 15, 15, 30, 65],\n      \"120p_3\": [120, 120, 15, 15, 30, 50],\n      \"120p_4\": [212, 120, null, null, null, null],\n      \"180p_1\": [320, 180, 15, 15, 30, 140],\n      \"180p_3\": [180, 180, 15, 15, 30, 100],\n      \"180p_4\": [240, 180, 15, 15, 30, 120],\n      \"240p_1\": [320, 240, 15, 15, 40, 200],\n      \"240p_3\": [240, 240, 15, 15, 40, 140],\n      \"240p_4\": [424, 240, 15, 15, 40, 220],\n      \"360p_1\": [640, 360, 15, 15, 80, 400],\n      \"360p_3\": [360, 360, 15, 15, 80, 260],\n      \"360p_4\": [640, 360, 30, 30, 80, 600],\n      \"360p_6\": [360, 360, 30, 30, 80, 400],\n      \"360p_7\": [480, 360, 15, 15, 80, 320],\n      \"360p_8\": [480, 360, 30, 30, 80, 490],\n      \"360p_9\": [640, 360, 15, 15, 80, 800],\n      \"360p_10\": [640, 360, 24, 24, 80, 800],\n      \"360p_11\": [640, 360, 24, 24, 80, 1e3],\n      \"480p_1\": [640, 480, 15, 15, 100, 500, 1, 5],\n      \"480p_2\": [640, 480, 30, 30, 100, 1e3, 25, 30],\n      \"480p_3\": [480, 480, 15, 15, 100, 400],\n      \"480p_4\": [640, 480, 30, 30, 100, 750],\n      \"480p_6\": [480, 480, 30, 30, 100, 600],\n      \"480p_8\": [848, 480, 15, 15, 100, 610],\n      \"480p_9\": [848, 480, 30, 30, 100, 930],\n      \"480p_10\": [640, 480, 10, 10, 100, 400],\n      \"720p_1\": [1280, 720, 15, 15, 120, 1130, 1, 5],\n      \"720p_2\": [1280, 720, 30, 30, 120, 2e3, 25, 30],\n      \"720p_3\": [1280, 720, 30, 30, 120, 1710],\n      \"720p_5\": [960, 720, 15, 15, 120, 910],\n      \"720p_6\": [960, 720, 30, 30, 120, 1380],\n      \"1080p_1\": [1920, 1080, 15, 15, 120, 2080, 1, 5],\n      \"1080p_2\": [1920, 1080, 30, 30, 120, 3e3, 25, 30],\n      \"1080p_3\": [1920, 1080, 30, 30, 120, 3150],\n      \"1080p_5\": [1920, 1080, 60, 60, 120, 4780],\n      \"1440p_1\": [2560, 1440, 30, 30, 120, 4850],\n      \"1440p_2\": [2560, 1440, 60, 60, 120, 7350],\n      \"4k_1\": [3840, 2160, 30, 30, 120, 8910],\n      \"4k_3\": [3840, 2160, 60, 60, 120, 13500]\n    };\n    t.AUDIO_PROFILE_SETTINGS = {\n      speech_low_quality: [!1, !1, !0, !0],\n      speech_standard: [!1, !1, !0, !1],\n      music_standard: [!1, !1, !1, !1],\n      standard_stereo: [!1, !0, !1, !1],\n      high_quality: [!0, !1, !1, !1],\n      high_quality_stereo: [!0, !0, !1, !1],\n      default: [!1, !1, !1, !1]\n    };\n    var i = {\n      AREA_SETTING: [\"NORTH_AMERICA\", \"OVERSEA\"],\n      WEBCS_DOMAIN: [\"ap-web-1-oversea.agora.io\", \"ap-web-1-north-america.agora.io\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-oversea.agora.io\", \"ap-web-2-north-america.agora.io\"],\n      PROXY_CS: [\"proxy-ap-web-oversea.agora.io\", \"proxy-ap-web-america.agora.io\"],\n      CDS_AP: [\"cds-ap-web-oversea.agora.io\", \"cds-ap-web-america.agora.io\", \"cds-ap-web-america2.agora.io\"],\n      ACCOUNT_REGISTER: [\"sua-ap-web-oversea.agora.io\", \"sua-ap-web-america.agora.io\", \"sua-ap-web-america2.agora.io\"],\n      UAP_AP: [\"uap-ap-web-oversea.agora.io\", \"uap-ap-web-america.agora.io\", \"uap-ap-web-america2.agora.io\"],\n      LOG_UPLOAD_SERVER: \"logservice-oversea.agora.io\",\n      EVENT_REPORT_DOMAIN: \"statscollector-1-oversea.agora.io\",\n      EVENT_REPORT_BACKUP_DOMAIN: \"statscollector-2-oversea.agora.io\",\n      ENABLE_LIVE_SERVER_LIST: !1,\n      LIVE_SERVER_LIST: [],\n      ACCOUNT_REGISTER_RETRY_TIMEOUT: 1,\n      ACCOUNT_REGISTER_RETRY_RATIO: 2,\n      ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX: 6e4,\n      ACCOUNT_REGISTER_RETRY_COUNT_MAX: 1e5,\n      AUDIO_CONTEXT: null,\n      GATEWAY_DOMAINS: [\"edge.agora.io\"],\n      WEBCS_BACKUP_CONNECT_TIMEOUT: 6e3,\n      LIVESTREAMING_ALIGN: !0,\n      HTTP_CONNECT_TIMEOUT: 5e3,\n      PLAYER_STATE_DEFER: 2e3,\n      SIGNAL_REQUEST_TIMEOUT: 1e7,\n      SIGNAL_REQUEST_WATCH_INTERVAL: 1e3,\n      REPORT_STATS: !0,\n      REPORT_STATS_TIMEOUT: 3e3,\n      UPLOAD_LOG: !1,\n      NOT_REPORT_EVENT: [],\n      FILEPATH_LENMAX: 255,\n      SUBSCRIBE_TCC: !1,\n      PING_PONG_TIME_OUT: 10,\n      DUALSTREAM_OPERATION_CHECK: !0,\n      WEBSOCKET_TIMEOUT_MIN: 1e4,\n      EVENT_REPORT_SEND_INTERVAL: 1e3,\n      MEDIA_ELEMENT_EXISTS_DEPTH: 3,\n      CANDIDATE_TIMEOUT: 2e3,\n      SHIM_CANDIDATE: !1,\n      LEAVE_MSG_TIMEOUT: 2e3,\n      TICKET_RENEW_TIMEOUT: 828e5,\n      LIVE_STREAMING_TIMEOUT: 12e4,\n      SHOW_REPORT_INVOKER_LOG: !1,\n      STATS_FILTER: {\n        transportId: !0,\n        googTrackId: !0\n      },\n      FORCE_TURN: !1,\n      TURN_ENABLE_TCP: !0,\n      TURN_ENABLE_UDP: !0,\n      FORCE_CHANGED_GATEWAY_FLAG: !1,\n      JOIN_EXTEND: \"\",\n      PUB_EXTEND: \"\",\n      SUB_EXTEND: \"\",\n      CHROME_NEW_STATS: !1,\n      AP_BACKOFF_MAX_TIME: 8,\n      SET_DEFAULT_TURNSERVER: !0,\n      TURN_SERVER_PASSWORD: r.toString(),\n      PROXY_SERVER_TYPE2: \"webnginx-proxy.agora.io\",\n      NGINX: \"webrtc-cloud-proxy.agora.io\",\n      PROXY_SERVER_TYPE3: [\"webrtc-cloud-proxy.sd-rtn.com\", \"webrtc-cloud-proxy.agora.io\"],\n      CR: !0,\n      CRL: 10,\n      CRI: 6,\n      CUSTOMER_REPORT_TIMEOUT: 5e3,\n      LIVE_STREAMING_ADDRESS: \"\",\n      CHOOSE_SERVER_FRAGEMENT_LENGTH: 4,\n      PLAN: \"plan-b\"\n    };\n    i.AREA_SETTING = [\"CHINA\", \"GLOBAL\"], i.WEBCS_DOMAIN = [\"webrtc2-ap-web-1.agora.io\", \"webrtc2-2.ap.sd-rtn.com\"], i.WEBCS_DOMAIN_BACKUP_LIST = [\"webrtc2-ap-web-3.agora.io\", \"webrtc2-4.ap.sd-rtn.com\"], i.PROXY_CS = [\"ap-proxy-1.agora.io\", \"ap-proxy-2.agora.io\"], i.CDS_AP = [\"cds-ap-web-1.agora.io\", \"cds-web-2.ap.sd-rtn.com\", \"cds-ap-web-3.agora.io\", \"cds-web-4.ap.sd-rtn.com\"], i.ACCOUNT_REGISTER = [\"sua-ap-web-1.agora.io\", \"sua-web-2.ap.sd-rtn.com\", \"sua-ap-web-3.agora.io\", \"sua-web-4.ap.sd-rtn.com\"], i.UAP_AP = [\"uap-ap-web-1.agora.io\", \"uap-web-2.ap.sd-rtn.com\", \"uap-ap-web-3.agora.io\", \"uap-web-4.ap.sd-rtn.com\"], i.LOG_UPLOAD_SERVER = \"logservice.agora.io\", i.EVENT_REPORT_DOMAIN = \"web-2.statscollector.sd-rtn.com\", i.EVENT_REPORT_BACKUP_DOMAIN = \"web-3.statscollector.sd-rtn.com\", i.GATEWAY_DOMAINS = [\"edge.agora.io\", \"edge.sd-rtn.com\"], i.NGINX = \"webrtc-cloud-proxy.sd-rtn.com\", i.PROXY_SERVER_TYPE3 = [\"webrtc-cloud-proxy.sd-rtn.com\", \"webrtc-cloud-proxy.agora.io\"];\n\n    t.setParameter = function (e, t) {\n      return void 0 !== i[e] && (i[e] = t, !0);\n    };\n\n    t.getParameter = function (e) {\n      return void 0 !== i[e] ? i[e] : null;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.r(t), n.d(t, \"checkValidObject\", function () {\n      return c;\n    }), n.d(t, \"checkValidString\", function () {\n      return d;\n    }), n.d(t, \"checkValidNumber\", function () {\n      return u;\n    }), n.d(t, \"checkValidArray\", function () {\n      return l;\n    }), n.d(t, \"checkValidFloatNumber\", function () {\n      return f;\n    }), n.d(t, \"checkValidBoolean\", function () {\n      return p;\n    }), n.d(t, \"checkValidEnum\", function () {\n      return s;\n    }), n.d(t, \"checkValidUID\", function () {\n      return g;\n    }), n.d(t, \"isValidString\", function () {\n      return m;\n    }), n.d(t, \"isValidNumber\", function () {\n      return h;\n    }), n.d(t, \"isValidBoolean\", function () {\n      return E;\n    }), n.d(t, \"isASCII\", function () {\n      return y;\n    }), n.d(t, \"isInteger\", function () {\n      return R;\n    }), n.d(t, \"isNumber\", function () {\n      return T;\n    }), n.d(t, \"isString\", function () {\n      return I;\n    }), n.d(t, \"isArray\", function () {\n      return b;\n    }), n.d(t, \"isEmpty\", function () {\n      return A;\n    }), n.d(t, \"isValidToken\", function () {\n      return S;\n    }), n.d(t, \"isValidChannelName\", function () {\n      return _;\n    });\n\n    var r = n(11),\n        i = n.n(r),\n        o = n(10),\n        a = n(0),\n        s = function s(e, t, n) {\n      for (var r = 0; r < n.length; r++) {\n        if (e === n[r]) return !0;\n      }\n\n      throw new Error(\"\".concat(t, \" can only be set as \").concat(JSON.stringify(n)));\n    },\n        c = function c(e, t) {\n      if (!e) throw new Error(\"Invalid param: \".concat(t || \"param\", \" cannot be empty\"));\n      if (\"object\" !== i()(e)) throw new Error(\"\".concat(t || \"This paramter\", \" is of the object type\"));\n      return !0;\n    },\n        d = function d(e, t, n, r, i) {\n      if (A(n) && (n = 1), r = r || 255, A(i) && (i = !0), A(e)) throw new Error(\"\".concat(t || \"param\", \" cannot be empty\"));\n      if (!m(e, n, r, i)) throw new Error(\"Invalid \".concat(t || \"string param\", \": Length of the string: [\").concat(n, \",\").concat(r, \"].\").concat(i ? \" ASCII characters only.\" : \"\"));\n    },\n        u = function u(e, t, n, r) {\n      if (A(n) && (n = 1), r = r || 1e4, A(e)) throw new Error(\"\".concat(t || \"param\", \" cannot be empty\"));\n      if (!h(e, n, r)) throw new Error(\"Invalid \".concat(t || \"number param\", \": The value range is [\").concat(n, \",\").concat(r, \"]. integer only\"));\n    },\n        l = function l(e, t) {\n      if (!Array.isArray(e)) throw new Error(\"\".concat(t, \" should be an array\"));\n    },\n        f = function f(e, t, n, r) {\n      if (null == e) throw new Error(\"\".concat(t || \"param\", \" cannot be null\"));\n      if (A(n) && (n = 0), r = r || 1e4, A(e)) throw new Error(\"\".concat(t || \"param\", \" cannot be empty\"));\n      if (!v(e, n, r)) throw new Error(\"Invalid \".concat(t || \"number param\", \": The value range is [\").concat(n, \",\").concat(r, \"].\"));\n    },\n        p = function p(e, t) {\n      if (A(e)) throw new Error(\"\".concat(t || \"param\", \" cannot be empty\"));\n      if (!E(e)) throw new Error(\"Invalid \".concat(t || \"boolean param\", \": The value is of the boolean type.\"));\n    },\n        g = function g(e) {\n      if (!Object(o.is32Uint)(e) && !m(e, 1, 255)) throw a.default.error(\"Invalid UID \".concat(e, \" \").concat(i()(e))), new Error(\"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]\");\n    },\n        m = function m(e, t, n, r) {\n      return t || (t = 0), n || (n = Number.MAX_SAFE_INTEGER), A(r) && (r = !0), I(e) && (!r || y(e)) && e.length >= t && e.length <= n;\n    },\n        h = function h(e, t, n) {\n      return R(e) && e >= t && e <= n;\n    },\n        v = function v(e, t, n) {\n      return T(e) && e >= t && e <= n;\n    },\n        E = function E(e) {\n      return \"boolean\" == typeof e;\n    },\n        S = function S(e) {\n      return m(e, 1, 2047);\n    },\n        _ = function _(e) {\n      return I(e) && /^[a-zA-Z0-9 \\!\\#\\$\\%\\&\\(\\)\\+\\-\\:\\;\\<\\=\\.\\>\\?\\@\\[\\]\\^\\_\\{\\}\\|\\~\\,]{1,64}$/.test(e);\n    },\n        y = function y(e) {\n      if (\"string\" == typeof e) {\n        for (var t = 0; t < e.length; t++) {\n          var n = e.charCodeAt(t);\n          if (n < 0 || n > 255) return !1;\n        }\n\n        return !0;\n      }\n    },\n        R = function R(e) {\n      return \"number\" == typeof e && e % 1 == 0;\n    },\n        T = function T(e) {\n      return \"number\" == typeof e;\n    },\n        I = function I(e) {\n      return \"string\" == typeof e;\n    },\n        b = function b(e) {\n      return e instanceof Array;\n    },\n        A = function A(e) {\n      return null == e;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.r(t), n.d(t, \"getBrowserInfo\", function () {\n      return E;\n    }), n.d(t, \"getBrowserVersion\", function () {\n      return f;\n    }), n.d(t, \"getBrowserOS\", function () {\n      return p;\n    }), n.d(t, \"isChrome\", function () {\n      return r;\n    }), n.d(t, \"isSafari\", function () {\n      return i;\n    }), n.d(t, \"isFireFox\", function () {\n      return a;\n    }), n.d(t, \"isOpera\", function () {\n      return s;\n    }), n.d(t, \"isEdge\", function () {\n      return o;\n    }), n.d(t, \"isQQBrowser\", function () {\n      return c;\n    }), n.d(t, \"isWeChatBrowser\", function () {\n      return d;\n    }), n.d(t, \"isLegacyChrome\", function () {\n      return m;\n    }), n.d(t, \"isSupportedPC\", function () {\n      return u;\n    }), n.d(t, \"isSupportedMobile\", function () {\n      return l;\n    }), n.d(t, \"getChromeKernelVersion\", function () {\n      return v;\n    }), n.d(t, \"isChromeKernel\", function () {\n      return g;\n    });\n\n    var r = function r() {\n      var e = E();\n      return e.name && \"Chrome\" === e.name;\n    },\n        i = function i() {\n      var e = E();\n      return e.name && \"Safari\" === e.name;\n    },\n        o = function o() {\n      var e = E();\n      return e.name && \"Edge\" === e.name;\n    },\n        a = function a() {\n      var e = E();\n      return e.name && \"Firefox\" === e.name;\n    },\n        s = function s() {\n      var e = E();\n      return e.name && \"OPR\" === e.name;\n    },\n        c = function c() {\n      var e = E();\n      return e.name && \"QQBrowser\" === e.name;\n    },\n        d = function d() {\n      var e = E();\n      return e.name && \"MicroMessenger\" === e.name;\n    },\n        u = function u() {\n      var e = p();\n      return \"Linux\" === e || \"Mac OS X\" === e || \"Mac OS\" === e || -1 !== e.indexOf(\"Windows\");\n    },\n        l = function l() {\n      var e = p();\n      return \"Android\" === e || \"iOS\" === e;\n    },\n        f = function f() {\n      return E().version;\n    },\n        p = function p() {\n      return E().os;\n    },\n        g = function g() {\n      return !!navigator.userAgent.match(/chrome\\/[\\d]+/i);\n    };\n\n    function m() {\n      return window.navigator.appVersion && null !== window.navigator.appVersion.match(/Chrome\\/([\\w\\W]*?)\\./) && window.navigator.appVersion.match(/Chrome\\/([\\w\\W]*?)\\./)[1] <= 35;\n    }\n\n    var h,\n        v = function v() {\n      var e = navigator.userAgent.match(/chrome\\/[\\d]+/i);\n      return e && e[0] && e[0].split(\"/\")[1];\n    },\n        E = (h = function () {\n      var e,\n          t = navigator.userAgent,\n          n = t.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [];\n      \"Chrome\" === n[1] && null != (e = t.match(/(OPR(?=\\/))\\/?(\\d+)/i)) && (n = e), \"Safari\" === n[1] && null != (e = t.match(/version\\/(\\d+)/i)) && (n[2] = e[1]), ~t.toLowerCase().indexOf(\"qqbrowser\") && null != (e = t.match(/(qqbrowser(?=\\/))\\/?(\\d+)/i)) && (n = e), ~t.toLowerCase().indexOf(\"micromessenger\") && null != (e = t.match(/(micromessenger(?=\\/))\\/?(\\d+)/i)) && (n = e), ~t.toLowerCase().indexOf(\"edge\") && null != (e = t.match(/(edge(?=\\/))\\/?(\\d+)/i)) && (n = e), ~t.toLowerCase().indexOf(\"trident\") && null != (e = /\\brv[ :]+(\\d+)/g.exec(t) || []) && (n = [null, \"IE\", e[1]]);\n      var r = void 0,\n          i = [{\n        s: \"Windows 10\",\n        r: /(Windows 10.0|Windows NT 10.0)/\n      }, {\n        s: \"Windows 8.1\",\n        r: /(Windows 8.1|Windows NT 6.3)/\n      }, {\n        s: \"Windows 8\",\n        r: /(Windows 8|Windows NT 6.2)/\n      }, {\n        s: \"Windows 7\",\n        r: /(Windows 7|Windows NT 6.1)/\n      }, {\n        s: \"Windows Vista\",\n        r: /Windows NT 6.0/\n      }, {\n        s: \"Windows Server 2003\",\n        r: /Windows NT 5.2/\n      }, {\n        s: \"Windows XP\",\n        r: /(Windows NT 5.1|Windows XP)/\n      }, {\n        s: \"Windows 2000\",\n        r: /(Windows NT 5.0|Windows 2000)/\n      }, {\n        s: \"Windows ME\",\n        r: /(Win 9x 4.90|Windows ME)/\n      }, {\n        s: \"Windows 98\",\n        r: /(Windows 98|Win98)/\n      }, {\n        s: \"Windows 95\",\n        r: /(Windows 95|Win95|Windows_95)/\n      }, {\n        s: \"Windows NT 4.0\",\n        r: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/\n      }, {\n        s: \"Windows CE\",\n        r: /Windows CE/\n      }, {\n        s: \"Windows 3.11\",\n        r: /Win16/\n      }, {\n        s: \"Android\",\n        r: /Android/\n      }, {\n        s: \"Open BSD\",\n        r: /OpenBSD/\n      }, {\n        s: \"Sun OS\",\n        r: /SunOS/\n      }, {\n        s: \"Linux\",\n        r: /(Linux|X11)/\n      }, {\n        s: \"iOS\",\n        r: /(iPhone|iPad|iPod)/\n      }, {\n        s: \"Mac OS X\",\n        r: /Mac OS X/\n      }, {\n        s: \"Mac OS\",\n        r: /(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/\n      }, {\n        s: \"QNX\",\n        r: /QNX/\n      }, {\n        s: \"UNIX\",\n        r: /UNIX/\n      }, {\n        s: \"BeOS\",\n        r: /BeOS/\n      }, {\n        s: \"OS/2\",\n        r: /OS\\/2/\n      }, {\n        s: \"Search Bot\",\n        r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/\n      }];\n\n      for (var o in i) {\n        var a = i[o];\n\n        if (a.r.test(navigator.userAgent)) {\n          r = a.s;\n          break;\n        }\n      }\n\n      return {\n        name: n[1],\n        version: n[2],\n        os: r\n      };\n    }(), function () {\n      return h;\n    });\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.r(t), n.d(t, \"APErrorCode\", function () {\n      return r;\n    }), n.d(t, \"GatewayErrorCode\", function () {\n      return i;\n    }), n.d(t, \"StringUidErrorCode\", function () {\n      return o;\n    }), n.d(t, \"JOIN_GS_TRYNEXT_LIST\", function () {\n      return a;\n    }), n.d(t, \"JOIN_CS_RETRY_LIST\", function () {\n      return s;\n    }), n.d(t, \"JOIN_PROXY_RETRY_LIST\", function () {\n      return c;\n    }), n.d(t, \"INJECT_STREAM_STATUS\", function () {\n      return d;\n    }), n.d(t, \"WEBSOCKET_CLOSE_REASON\", function () {\n      return u;\n    });\n    var r = {\n      1010100: \"NO_FLAG_SET\",\n      1010101: \"FLAG_SET_BUT_EMPTY\",\n      1010102: \"INVALID_FALG_SET\",\n      2010005: \"INVALID_VENDOR_KEY\",\n      2010007: \"INVALID_CHANNEL_NAME\",\n      2010008: \"INTERNAL_ERROR\",\n      2010009: \"NO_AUTHORIZED\",\n      2010010: \"DYNAMIC_KEY_TIMEOUT\",\n      2010011: \"NO_ACTIVE_STATUS\",\n      2010013: \"DYNAMIC_KEY_EXPIRED\",\n      2010014: \"STATIC_USE_DYANMIC_KEY\",\n      2010015: \"DYNAMIC_USE_STATIC_KEY\",\n      2010016: \"USER_OVERLOAD\",\n      2010018: \"FORBIDDEN_REGION\",\n      2010019: \"CANNOT_MEET_AREA_DEMAND\"\n    },\n        i = {\n      2e3: \"ERR_NO_VOCS_AVAILABLE\",\n      2001: \"ERR_NO_VOS_AVAILABLE\",\n      2002: \"ERR_JOIN_CHANNEL_TIMEOUT\",\n      2003: \"WARN_REPEAT_JOIN\",\n      2004: \"ERR_JOIN_BY_MULTI_IP\",\n      2011: \"ERR_NOT_JOINED\",\n      2012: \"WARN_REPEAT_JOIN\",\n      2013: \"ERR_INVALID_VENDOR_KEY\",\n      2014: \"ERR_INVALID_CHANNEL_NAME\",\n      2015: \"ERR_INVALID_STRINGUID\",\n      2016: \"ERR_TOO_MANY_USERS\",\n      2017: \"ERR_SET_CLIENT_ROLE_TIMEOUT\",\n      2018: \"ERR_SET_CLIENT_ROLE_NO_PERMISSION\",\n      2019: \"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE\",\n      2020: \"ERR_PUBLISH_REQUEST_INVALID\",\n      2021: \"ERR_SUBSCRIBE_REQUEST_INVALID\",\n      2022: \"ERR_NOT_SUPPORTED_MESSAGE\",\n      2023: \"ERR_ILLEAGAL_PLUGIN\",\n      2028: \"ILLEGAL_AES_PASSWORD\",\n      101: \"ERR_INVALID_VENDOR_KEY\",\n      102: \"ERR_INVALID_CHANNEL_NAME\",\n      103: \"WARN_NO_AVAILABLE_CHANNEL\",\n      104: \"WARN_LOOKUP_CHANNEL_TIMEOUT\",\n      105: \"WARN_LOOKUP_CHANNEL_REJECTED\",\n      106: \"WARN_OPEN_CHANNEL_TIMEOUT\",\n      107: \"WARN_OPEN_CHANNEL_REJECTED\",\n      108: \"WARN_REQUEST_DEFERRED\",\n      109: \"ERR_DYNAMIC_KEY_TIMEOUT\",\n      110: \"ERR_NO_AUTHORIZED\",\n      111: \"ERR_VOM_SERVICE_UNAVAILABLE\",\n      112: \"ERR_NO_CHANNEL_AVAILABLE_CODE\",\n      113: \"ERR_TOO_MANY_USERS\",\n      114: \"ERR_MASTER_VOCS_UNAVAILABLE\",\n      115: \"ERR_INTERNAL_ERROR\",\n      116: \"ERR_NO_ACTIVE_STATUS\",\n      117: \"ERR_INVALID_UID\",\n      118: \"ERR_DYNAMIC_KEY_EXPIRED\",\n      119: \"ERR_STATIC_USE_DYANMIC_KE\",\n      120: \"ERR_DYNAMIC_USE_STATIC_KE\",\n      2: \"K_TIMESTAMP_EXPIRED\",\n      3: \"K_CHANNEL_PERMISSION_INVALID\",\n      4: \"K_CERTIFICATE_INVALID\",\n      5: \"K_CHANNEL_NAME_EMPTY\",\n      6: \"K_CHANNEL_NOT_FOUND\",\n      7: \"K_TICKET_INVALID\",\n      8: \"K_CHANNEL_CONFLICTED\",\n      9: \"K_SERVICE_NOT_READY\",\n      10: \"K_SERVICE_TOO_HEAVY\",\n      14: \"K_UID_BANNED\",\n      15: \"K_IP_BANNED\",\n      16: \"K_CHANNEL_BANNED\"\n    },\n        o = {\n      1: \"ERROR_ILLEAGAL_APPID\",\n      2: \"ERROR_ILLEAGAL_UID\",\n      3: \"INTERNAL_SERVER_ERROR\"\n    },\n        a = [\"ERR_NO_VOCS_AVAILABLE\", \"ERR_NO_VOS_AVAILABLE\", \"ERR_JOIN_CHANNEL_TIMEOUT\", \"WARN_LOOKUP_CHANNEL_TIMEOUT\", \"WARN_OPEN_CHANNEL_TIMEOUT\", \"ERR_VOM_SERVICE_UNAVAILABLE\", \"ERR_TOO_MANY_USERS\", \"ERR_MASTER_VOCS_UNAVAILABLE\", \"ERR_INTERNAL_ERROR\"],\n        s = [\"NO_SERVICE_AVAILABLE\"],\n        c = [\"NO_SERVICE_AVAILABLE\", \"REQUEST_PROXY_SERVER_FAILED\", \"REQUEST_PROXY_SERVER_TIME_OUT\"],\n        d = {\n      INJECT_STREAM_STATUS_START_SUCCESS: 0,\n      INJECT_STREAM_STATUS_START_ALREADY_EXISTS: 1,\n      INJECT_STREAM_STATUS_START_UNAUTHORIZED: 2,\n      INJECT_STREAM_STATUS_START_TIMEDOUT: 3,\n      INJECT_STREAM_STATUS_START_FAILED: 4,\n      INJECT_STREAM_STATUS_STOP_SUCCESS: 5,\n      INJECT_STREAM_STATUS_STOP_NOT_FOUND: 6,\n      INJECT_STREAM_STATUS_STOP_UNAUTHORIZED: 7,\n      INJECT_STREAM_STATUS_STOP_TIMEDOUT: 8,\n      INJECT_STREAM_STATUS_STOP_FAILED: 9,\n      INJECT_STREAM_STATUS_BROKEN: 10\n    },\n        u = {\n      WS_DISCONNECT: \"WS_DISCONNECT\"\n    };\n    t.default = {\n      FAILED: \"FAILED\",\n      INVALID_KEY: \"INVALID_KEY\",\n      INVALID_CLIENT_MODE: \"INVALID_CLIENT_MODE\",\n      INVALID_CLIENT_CODEC: \"INVALID_CLIENT_CODEC\",\n      CLIENT_MODE_CODEC_MISMATCH: \"CLIENT_MODE_CODEC_MISMATCH\",\n      WEB_API_NOT_SUPPORTED: \"WEB_API_NOT_SUPPORTED\",\n      INVALID_PARAMETER: \"INVALID_PARAMETER\",\n      NO_TRACK_IN_STREAM: \"NO_TRACK_IN_STREAM\",\n      INVALID_OPERATION: \"INVALID_OPERATION\",\n      INVALID_LOCAL_STREAM: \"INVALID_LOCAL_STREAM\",\n      INVALID_REMOTE_STREAM: \"INVALID_REMOTE_STREAM\",\n      INVALID_DYNAMIC_KEY: \"INVALID_DYNAMIC_KEY\",\n      DYNAMIC_KEY_TIMEOUT: \"DYNAMIC_KEY_TIMEOUT\",\n      NO_VOCS_AVAILABLE: \"NO_VOCS_AVAILABLE\",\n      NO_VOS_AVAILABLE: \"ERR_NO_VOS_AVAILABLE\",\n      JOIN_CHANNEL_TIMEOUT: \"ERR_JOIN_CHANNEL_TIMEOUT\",\n      NO_AVAILABLE_CHANNEL: \"NO_AVAILABLE_CHANNEL\",\n      LOOKUP_CHANNEL_TIMEOUT: \"LOOKUP_CHANNEL_TIMEOUT\",\n      LOOKUP_CHANNEL_REJECTED: \"LOOKUP_CHANNEL_REJECTED\",\n      OPEN_CHANNEL_TIMEOUT: \"OPEN_CHANNEL_TIMEOUT\",\n      OPEN_CHANNEL_REJECTED: \"OPEN_CHANNEL_REJECTED\",\n      REQUEST_DEFERRED: \"REQUEST_DEFERRED\",\n      STREAM_ALREADY_PUBLISHED: \"STREAM_ALREADY_PUBLISHED\",\n      STREAM_NOT_YET_PUBLISHED: \"STREAM_NOT_YET_PUBLISHED\",\n      JOIN_TOO_FREQUENT: \"JOIN_TOO_FREQUENT\",\n      SOCKET_ERROR: \"SOCKET_ERROR\",\n      SOCKET_DISCONNECTED: \"SOCKET_DISCONNECTED\",\n      PEERCONNECTION_FAILED: \"PEERCONNECTION_FAILED\",\n      CONNECT_GATEWAY_ERROR: \"CONNECT_GATEWAY_ERROR\",\n      SERVICE_NOT_AVAILABLE: \"SERVICE_NOT_AVAILABLE\",\n      JOIN_CHANNEL_FAILED: \"JOIN_CHANNEL_FAILED\",\n      PUBLISH_STREAM_FAILED: \"PUBLISH_STREAM_FAILED\",\n      UNPUBLISH_STREAM_FAILED: \"UNPUBLISH_STREAM_FAILED\",\n      SUBSCRIBE_STREAM_FAILED: \"SUBSCRIBE_STREAM_FAILED\",\n      UNSUBSCRIBE_STREAM_FAILED: \"UNSUBSCRIBE_STREAM_FAILED\",\n      NO_SUCH_REMOTE_STREAM: \"NO_SUCH_REMOTE_STREAM\",\n      ERR_FAILED: \"1\",\n      ERR_INVALID_VENDOR_KEY: \"101\",\n      ERR_INVALID_CHANNEL_NAME: \"102\",\n      WARN_NO_AVAILABLE_CHANNEL: \"103\",\n      WARN_LOOKUP_CHANNEL_TIMEOUT: \"104\",\n      WARN_LOOKUP_CHANNEL_REJECTED: \"105\",\n      WARN_OPEN_CHANNEL_TIMEOUT: \"106\",\n      WARN_OPEN_CHANNEL_REJECTED: \"107\",\n      WARN_REQUEST_DEFERRED: \"108\",\n      ERR_DYNAMIC_KEY_TIMEOUT: \"109\",\n      ERR_INVALID_DYNAMIC_KEY: \"110\",\n      ERR_NO_VOCS_AVAILABLE: \"2000\",\n      ERR_NO_VOS_AVAILABLE: \"2001\",\n      ERR_JOIN_CHANNEL_TIMEOUT: \"2002\",\n      IOS_NOT_SUPPORT: \"IOS_NOT_SUPPORT\",\n      WECHAT_NOT_SUPPORT: \"WECHAT_NOT_SUPPORT\",\n      SHARING_SCREEN_NOT_SUPPORT: \"SHARING_SCREEN_NOT_SUPPORT\",\n      STILL_ON_PUBLISHING: \"STILL_ON_PUBLISHING\",\n      LOW_STREAM_ALREADY_PUBLISHED: \"LOW_STREAM_ALREADY_PUBLISHED\",\n      LOW_STREAM_NOT_YET_PUBLISHED: \"LOW_STREAM_ALREADY_PUBLISHED\",\n      HIGH_STREAM_NOT_VIDEO_TRACE: \"HIGH_STREAM_NOT_VIDEO_TRACE\",\n      NOT_FIND_DEVICE_BY_LABEL: \"NOT_FIND_DEVICE_BY_LABEL\",\n      ENABLE_DUALSTREAM_FAILED: \"ENABLE_DUALSTREAM_FAILED\",\n      DISABLE_DUALSTREAM_FAILED: \"DISABLE_DUALSTREAM_FAILED\",\n      PLAYER_NOT_FOUND: \"PLAYER_NOT_FOUND\",\n      ELECTRON_NOT_SUPPORT_SHARING_SCREEN: \"ELECTRON_NOT_SUPPORT_SHARING_SCREEN\",\n      BAD_ENVIRONMENT: \"BAD_ENVIRONMENT\",\n      LOAD_AUDIO_FAILED: \"LOAD_AUDIO_FAILED\"\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.d(t, \"b\", function () {\n      return r;\n    }), n.d(t, \"a\", function () {\n      return i;\n    }), n.d(t, \"c\", function () {\n      return o;\n    });\n    n(0);\n\n    var r = function r(e, t, n) {\n      if ([\"End2EndDelay\", \"TransportDelay\", \"PacketLossRate\", \"RecvLevel\", \"RecvBitrate\", \"CodecType\", \"MuteState\", \"TotalFreezeTime\", \"TotalPlayDuration\", \"RecordingLevel\", \"SendLevel\", \"SamplingRate\", \"SendBitrate\", \"CodecType\", \"MuteState\", \"End2EndDelay\", \"TransportDelay\", \"PacketLossRate\", \"RecvBitrate\", \"RecvResolutionWidth\", \"RecvResolutionHeight\", \"RenderResolutionHeight\", \"RenderResolutionWidth\", \"RenderFrameRate\", \"TotalFreezeTime\", \"TotalPlayDuration\", \"TargetSendBitrate\", \"SendFrameRate\", \"SendFrameRate\", \"SendBitrate\", \"SendResolutionWidth\", \"SendResolutionHeight\", \"CaptureResolutionHeight\", \"CaptureResolutionWidth\", \"EncodeDelay\", \"MuteState\", \"TotalFreezeTime\", \"TotalDuration\", \"CaptureFrameRate\", \"RTT\", \"OutgoingAvailableBandwidth\", \"Duration\", \"UserCount\", \"SendBytes\", \"RecvBytes\", \"SendBitrate\", \"RecvBitrate\", \"accessDelay\", \"audioSendBytes\", \"audioSendPackets\", \"videoSendBytes\", \"videoSendPackets\", \"videoSendPacketsLost\", \"videoSendFrameRate\", \"audioSendPacketsLost\", \"videoSendResolutionWidth\", \"videoSendResolutionHeight\", \"accessDelay\", \"audioReceiveBytes\", \"audioReceivePackets\", \"audioReceivePacketsLost\", \"videoReceiveBytes\", \"videoReceivePackets\", \"videoReceivePacketsLost\", \"videoReceiveFrameRate\", \"videoReceiveDecodeFrameRate\", \"videoReceiveResolutionWidth\", \"videoReceiveResolutionHeight\", \"endToEndDelay\", \"videoReceiveDelay\", \"audioReceiveDelay\", \"FirstFrameTime\", \"VideoFreezeRate\", \"AudioFreezeRate\", \"RenderResolutionWidth\", \"RenderResolutionHeight\", \"VideoPublishDuration\", \"AudioPublishDuration\"].indexOf(t) > -1 && (\"string\" == typeof n || isFinite(n))) return e[t] = \"\" + n;\n    },\n        i = function i(e) {\n      var t = {};\n      return e.forEach(function (e) {\n        e.id && e.type && (-1 === e.id.indexOf(\"send\") && -1 === e.type.toLowerCase().indexOf(\"outbound\") && -1 === e.id.indexOf(\"outbound_rtp\") && -1 === e.id.indexOf(\"OutboundRTP\") || (\"audio\" === e.mediaType ? (r(t, \"audioSendBytes\", e.bytesSent), r(t, \"audioSendPackets\", e.packetsSent), r(t, \"audioSendPacketsLost\", e.packetsLost)) : (r(t, \"videoSendBytes\", e.bytesSent), r(t, \"videoSendPackets\", e.packetsSent), r(t, \"videoSendPacketsLost\", e.packetsLost), r(t, \"videoSendFrameRate\", e.googFrameRateSent), r(t, \"videoSendResolutionWidth\", e.googFrameWidthSent), r(t, \"videoSendResolutionHeight\", e.googFrameHeightSent))));\n      }), t;\n    },\n        o = function o(e) {\n      var t = {};\n      return e.forEach(function (e) {\n        e.id && e.type && (-1 === e.id.indexOf(\"recv\") && -1 === e.type.toLowerCase().indexOf(\"inbound\") && -1 === e.id.indexOf(\"inbound_rtp\") && -1 === e.id.indexOf(\"inbound-rtp\") && -1 === e.id.indexOf(\"InboundRTP\") || (\"audio\" === e.mediaType ? (r(t, \"audioReceiveBytes\", e.bytesReceived), r(t, \"audioReceivePackets\", e.packetsReceived), r(t, \"audioReceivePacketsLost\", e.packetsLost)) : (r(t, \"videoReceiveBytes\", e.bytesReceived), r(t, \"videoReceivePacketsLost\", e.packetsLost), r(t, \"videoReceivePackets\", e.packetsReceived), r(t, \"videoReceiveFrameRate\", e.googFrameRateReceived), r(t, \"videoReceiveDecodeFrameRate\", e.googFrameRateDecoded), r(t, \"videoReceiveResolutionWidth\", e.googFrameWidthReceived), r(t, \"videoReceiveResolutionHeight\", e.googFrameHeightReceived))));\n      }), t;\n    };\n  }, function (e, t) {\n    function n() {\n      return e.exports = n = Object.assign || function (e) {\n        for (var t = 1; t < arguments.length; t++) {\n          var n = arguments[t];\n\n          for (var r in n) {\n            Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);\n          }\n        }\n\n        return e;\n      }, n.apply(this, arguments);\n    }\n\n    e.exports = n;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.d(t, \"b\", function () {\n      return i;\n    }), n.d(t, \"e\", function () {\n      return a;\n    }), n.d(t, \"a\", function () {\n      return s;\n    }), n.d(t, \"d\", function () {\n      return c;\n    }), n.d(t, \"c\", function () {\n      return d;\n    });\n\n    var r = n(0),\n        i = function i() {\n      var e = {\n        dispatcher: {}\n      };\n      return e.dispatcher.eventListeners = {}, e.addEventListener = function (t, n) {\n        void 0 === e.dispatcher.eventListeners[t] && (e.dispatcher.eventListeners[t] = []), e.dispatcher.eventListeners[t].push(n);\n      }, e.hasListeners = function (t) {\n        return !(!e.dispatcher.eventListeners[t] || !e.dispatcher.eventListeners[t].length);\n      }, e.on = e.addEventListener, e.removeEventListener = function (t, n) {\n        var r;\n        e.dispatcher.eventListeners[t] && -1 !== (r = e.dispatcher.eventListeners[t].indexOf(n)) && e.dispatcher.eventListeners[t].splice(r, 1);\n      }, e.dispatchEvent = function (t) {\n        var n;\n\n        for (n in e.dispatcher.eventListeners[t.type]) {\n          if (e.dispatcher.eventListeners[t.type] && e.dispatcher.eventListeners[t.type].hasOwnProperty(n) && \"function\" == typeof e.dispatcher.eventListeners[t.type][n]) try {\n            e.dispatcher.eventListeners[t.type][n](t);\n          } catch (n) {\n            r.default.debug(\"[\".concat(e.clientId, \"] Error in \").concat(t.type, \" event\"), n);\n          }\n        }\n      }, e.dispatchSocketEvent = function (t) {\n        var n;\n\n        for (n in e.dispatcher.eventListeners[t.type]) {\n          e.dispatcher.eventListeners[t.type] && e.dispatcher.eventListeners[t.type].hasOwnProperty(n) && \"function\" == typeof e.dispatcher.eventListeners[t.type][n] && e.dispatcher.eventListeners[t.type][n](t.msg);\n        }\n      }, e;\n    },\n        o = function o(e) {\n      var t = {};\n      return t.type = e.type, t;\n    },\n        a = function a(e) {\n      var t = o(e);\n      return t.stream = e.stream, t.reason = e.reason, t.msg = e.msg, t;\n    },\n        s = function s(e) {\n      var t = o(e);\n      return t.uid = e.uid, t.attr = e.attr, t.stream = e.stream, t;\n    },\n        c = function c(e) {\n      var t = o(e);\n      return t.msg = e.msg, t;\n    },\n        d = function d(e) {\n      var t = o(e);\n      return t.url = e.url, t.uid = e.uid, t.status = e.status, t.reason = e.reason, t;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var _r,\n        i = this && this.__extends || (_r = function r(e, t) {\n      return (_r = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (e, t) {\n        e.__proto__ = t;\n      } || function (e, t) {\n        for (var n in t) {\n          t.hasOwnProperty(n) && (e[n] = t[n]);\n        }\n      })(e, t);\n    }, function (e, t) {\n      function n() {\n        this.constructor = e;\n      }\n\n      _r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n());\n    }),\n        o = this && this.__awaiter || function (e, t, n, r) {\n      return new (n || (n = Promise))(function (i, o) {\n        function a(e) {\n          try {\n            c(r.next(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function s(e) {\n          try {\n            c(r.throw(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function c(e) {\n          var t;\n          e.done ? i(e.value) : (t = e.value, t instanceof n ? t : new n(function (e) {\n            e(t);\n          })).then(a, s);\n        }\n\n        c((r = r.apply(e, t || [])).next());\n      });\n    },\n        a = this && this.__generator || function (e, t) {\n      var n,\n          r,\n          i,\n          o,\n          a = {\n        label: 0,\n        sent: function sent() {\n          if (1 & i[0]) throw i[1];\n          return i[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return o = {\n        next: s(0),\n        throw: s(1),\n        return: s(2)\n      }, \"function\" == typeof Symbol && (o[Symbol.iterator] = function () {\n        return this;\n      }), o;\n\n      function s(o) {\n        return function (s) {\n          return function (o) {\n            if (n) throw new TypeError(\"Generator is already executing.\");\n\n            for (; a;) {\n              try {\n                if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;\n\n                switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {\n                  case 0:\n                  case 1:\n                    i = o;\n                    break;\n\n                  case 4:\n                    return a.label++, {\n                      value: o[1],\n                      done: !1\n                    };\n\n                  case 5:\n                    a.label++, r = o[1], o = [0];\n                    continue;\n\n                  case 7:\n                    o = a.ops.pop(), a.trys.pop();\n                    continue;\n\n                  default:\n                    if (!(i = a.trys, (i = i.length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) {\n                      a = 0;\n                      continue;\n                    }\n\n                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {\n                      a.label = o[1];\n                      break;\n                    }\n\n                    if (6 === o[0] && a.label < i[1]) {\n                      a.label = i[1], i = o;\n                      break;\n                    }\n\n                    if (i && a.label < i[2]) {\n                      a.label = i[2], a.ops.push(o);\n                      break;\n                    }\n\n                    i[2] && a.ops.pop(), a.trys.pop();\n                    continue;\n                }\n\n                o = t.call(e, a);\n              } catch (e) {\n                o = [6, e], r = 0;\n              } finally {\n                n = i = 0;\n              }\n            }\n\n            if (5 & o[0]) throw o[1];\n            return {\n              value: o[0] ? o[1] : void 0,\n              done: !0\n            };\n          }([o, s]);\n        };\n      }\n    },\n        s = this && this.__importDefault || function (e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    };\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n\n    var c = s(n(69)),\n        d = n(2),\n        u = s(n(0)),\n        l = n(3),\n        f = n(14),\n        p = n(10),\n        g = function (e) {\n      function t(t, n) {\n        var r = e.call(this) || this;\n        return r._state = S.RELAY_STATE_IDLE, r._onStatus = function (e) {\n          u.default.debug(\"[\" + r.clientId + \"] ChannelMediaStatus: \" + JSON.stringify(e)), e && e.command && (\"onAudioPacketReceived\" === e.command && r.emit(\"event\", E.PACKET_RECEIVED_AUDIO_FROM_SRC), \"onVideoPacketReceived\" === e.command && r.emit(\"event\", E.PACKET_RECEIVED_VIDEO_FROM_SRC), \"onSrcTokenPrivilegeDidExpire\" === e.command && (r._state = S.RELAY_STATE_FAILURE, r.emit(\"state\", S.RELAY_STATE_FAILURE, _.SRC_TOKEN_EXPIRED)), \"onDestTokenPrivilegeDidExpire\" === e.command && (r._state = S.RELAY_STATE_FAILURE, r.emit(\"state\", S.RELAY_STATE_FAILURE, _.DEST_TOKEN_EXPIRED, e.channelName ? {\n            came: e.channelName\n          } : null)));\n        }, r._onClose = function () {\n          return o(r, void 0, void 0, function () {\n            var e;\n            return a(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  if (u.default.debug(\"[\" + this.clientId + \"] ChannelMediaSocket onClose\"), this.emit(\"event\", E.NETWORK_DISCONNECTED), this.state = S.RELAY_STATE_IDLE, !this._prevChannelMediaConfig) return [3, 4];\n                  t.label = 1;\n\n                case 1:\n                  return t.trys.push([1, 3,, 4]), [4, this.startChannelMediaRelay(this._prevChannelMediaConfig)];\n\n                case 2:\n                  return t.sent(), [3, 4];\n\n                case 3:\n                  return (e = t.sent()) instanceof R && (e.message === h.WS_ABORT || e.message === h.AP_REQUEST_ABORT) ? [2] : (this.emit(\"state\", S.RELAY_STATE_FAILURE, _.SERVER_CONNECTION_LOST), [3, 4]);\n\n                case 4:\n                  return [2];\n              }\n            });\n          });\n        }, r.token = t.appId, r.appId = t.appId, r.cname = t.cname, r.uid = t.uid, r.sid = t.sid, r.clientId = n, r;\n      }\n\n      return i(t, e), Object.defineProperty(t.prototype, \"state\", {\n        get: function get() {\n          return this._state;\n        },\n        set: function set(e) {\n          var t = this._state;\n          this._state = e, t !== e && this.emit(\"state\", e);\n        },\n        enumerable: !0,\n        configurable: !0\n      }), t.prototype.startChannelMediaRelay = function (e) {\n        return o(this, void 0, void 0, function () {\n          return a(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (this.state !== S.RELAY_STATE_IDLE) throw new R(h.BAD_STATE);\n                return this.state = S.RELAY_STATE_CONNECTING, [4, this._connect()];\n\n              case 1:\n                return t.sent(), u.default.debug(\"[\" + this.clientId + \"] startChannelMediaRelay: connect success\"), [4, this._sendStartRelayMessage(e)];\n\n              case 2:\n                return t.sent(), this._prevChannelMediaConfig = e, [2];\n            }\n          });\n        });\n      }, t.prototype.updateChannelMediaRelay = function (e) {\n        return o(this, void 0, void 0, function () {\n          return a(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (this.state !== S.RELAY_STATE_RUNNING) throw new R(h.BAD_STATE);\n                return [4, this._sendUpdateMessage(e)];\n\n              case 1:\n                return t.sent(), this._prevChannelMediaConfig = e, [2];\n            }\n          });\n        });\n      }, t.prototype.stopChannelMediaRelay = function () {\n        return o(this, void 0, void 0, function () {\n          return a(this, function (e) {\n            switch (e.label) {\n              case 0:\n                return [4, this._sendStopRelayMessage()];\n\n              case 1:\n                return e.sent(), u.default.debug(\"[\" + this.clientId + \"] stopChannelMediaRelay: send stop message success\"), this.state = S.RELAY_STATE_IDLE, this.dispose(), [2];\n            }\n          });\n        });\n      }, t.prototype.dispose = function () {\n        u.default.debug(\"[\" + this.clientId + \"] disposeChannelMediaRelay\"), this.state = S.RELAY_STATE_IDLE, this.emit(\"dispose\"), this._signal && this._signal.dispose(), this._prevChannelMediaConfig = null, this.removeEvent();\n      }, t.prototype._requestOneAP = function (e) {\n        var t = this;\n        return new Promise(function (n, r) {\n          var i = {\n            command: \"convergeAllocateEdge\",\n            sid: t.sid,\n            appId: t.appId,\n            token: \"\",\n            ts: +new Date(),\n            version: d.VERSION,\n            cname: t.cname,\n            uid: t.uid + \"\",\n            seq: 1,\n            requestId: 1\n          },\n              o = {\n            service_name: \"tele_channel\",\n            json_body: JSON.stringify(i)\n          },\n              a = \"https://\" + e;\n          f.post(a, o, function (e) {\n            var t = null,\n                i = null;\n\n            try {\n              t = JSON.parse(e);\n            } catch (e) {\n              r(new R(h.AP_JSON_PARSE_ERROR, e));\n            }\n\n            0 !== t.code && r(new R(h.AP_REQUEST_ERROR, t));\n\n            try {\n              i = JSON.parse(t.json_body);\n            } catch (e) {\n              r(new R(h.AP_JSON_PARSE_ERROR, e));\n            }\n\n            200 !== i.code && r(new R(h.AP_REQUEST_ERROR, i)), i.servers ? n(i.servers) : r(new R(h.AP_JSON_PARSE_ERROR, i));\n          }, function (e) {\n            return r(e);\n          }, {\n            \"X-Packet-Service-Type\": 0,\n            \"X-Packet-URI\": 61\n          });\n        });\n      }, t.prototype._requestAP = function () {\n        var e = this,\n            t = d.getParameter(\"UAP_AP\");\n        return new Promise(function (n, r) {\n          setTimeout(function () {\n            r(new R(h.AP_REQUEST_TIMEOUT));\n          }, 5e3), e.on(\"dispose\", function () {\n            r(new R(h.AP_REQUEST_ABORT));\n          }), t.forEach(function (t) {\n            t += \"/api/v1\", e._requestOneAP(t).then(function (r) {\n              u.default.debug(\"[\" + e.clientId + \"] startChannelMediaRelay request AP \" + t + \" success: \" + JSON.stringify(r));\n              var i = r[0],\n                  o = \"wss://\" + i.address.replace(/\\./g, \"-\") + \".edge.agora.io:\" + i.wss;\n              n(o);\n            }).catch(function (n) {\n              u.default.debug(\"[\" + e.clientId + \"] startChannelMediaRelay request AP \" + t + \" failed: \" + JSON.stringify(n));\n            });\n          });\n        });\n      }, t.prototype._connectWebsocket = function (e) {\n        return this._signal = new y(this.appId, this.cname, this.uid, this.sid), this._signal.connect(e);\n      }, t.prototype._connect = function () {\n        return o(this, void 0, void 0, function () {\n          var e;\n          return a(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, this._requestAP()];\n\n              case 1:\n                return e = t.sent(), [4, this._connectWebsocket(e)];\n\n              case 2:\n                return t.sent(), this._signal.on(\"close\", this._onClose.bind(this)), this._signal.on(\"status\", this._onStatus.bind(this)), this.emit(\"event\", E.NETWORK_CONNECTED), [2];\n            }\n          });\n        });\n      }, t.prototype._sendStartRelayMessage = function (e) {\n        return o(this, void 0, void 0, function () {\n          var t, n, r, i, o, s;\n          return a(this, function (a) {\n            switch (a.label) {\n              case 0:\n                return this._checkSignal(), t = this._genMessage(v.StopPacketTransfer), [4, this._signal.request(t)];\n\n              case 1:\n                return a.sent(), [4, this._signal.waitStatus(\"Normal Quit\")];\n\n              case 2:\n                return a.sent(), u.default.debug(\"[\" + this.clientId + \"] startChannelMediaRelay: StopPacketTransfer success\"), n = this._genMessage(v.SetSdkProfile, e), [4, this._signal.request(n)];\n\n              case 3:\n                return a.sent(), u.default.debug(\"[\" + this.clientId + \"] startChannelMediaRelay: SetSdkProfile success\"), r = this._genMessage(v.SetSourceChannel, e), [4, this._signal.request(r)];\n\n              case 4:\n                return a.sent(), [4, this._signal.waitStatus(\"SetSourceChannelStatus\")];\n\n              case 5:\n                return a.sent(), this.emit(\"event\", E.PACKET_JOINED_SRC_CHANNEL), u.default.debug(\"[\" + this.clientId + \"] startChannelMediaRelay: SetSourceChannel success\"), i = this._genMessage(v.SetSourceUserId, e), [4, this._signal.request(i)];\n\n              case 6:\n                return a.sent(), u.default.debug(\"[\" + this.clientId + \"] startChannelMediaRelay: SetSourceUserId success\"), o = this._genMessage(v.SetDestChannel, e), [4, this._signal.request(o)];\n\n              case 7:\n                return a.sent(), [4, this._signal.waitStatus(\"SetDestChannelStatus\")];\n\n              case 8:\n                return a.sent(), this.emit(\"event\", E.PACKET_JOINED_DEST_CHANNEL), u.default.debug(\"[\" + this.clientId + \"] startChannelMediaRelay: SetDestChannel success\"), s = this._genMessage(v.StartPacketTransfer, e), [4, this._signal.request(s)];\n\n              case 9:\n                return a.sent(), this.emit(\"event\", E.PACKET_SENT_TO_DEST_CHANNEL), this.state = S.RELAY_STATE_RUNNING, u.default.debug(\"[\" + this.clientId + \"] startChannelMediaRelay: StartPacketTransfer success\"), [2];\n            }\n          });\n        });\n      }, t.prototype._sendReconnectMessage = function (e) {\n        return o(this, void 0, void 0, function () {\n          var t;\n          return a(this, function (n) {\n            switch (n.label) {\n              case 0:\n                return this._checkSignal(), t = this._genMessage(v.Reconnect, e), [4, this._signal.request(t)];\n\n              case 1:\n                return n.sent(), [2];\n            }\n          });\n        });\n      }, t.prototype._sendUpdateMessage = function (e) {\n        return o(this, void 0, void 0, function () {\n          var t;\n          return a(this, function (n) {\n            switch (n.label) {\n              case 0:\n                return this._checkSignal(), t = this._genMessage(v.UpdateDestChannel, e), [4, this._signal.request(t)];\n\n              case 1:\n                return n.sent(), this.emit(\"event\", E.PACKET_UPDATE_DEST_CHANNEL), u.default.debug(\"[\" + this.clientId + \"] sendUpdateMessage: UpdateDestChannel success\"), [2];\n            }\n          });\n        });\n      }, t.prototype._sendStopRelayMessage = function () {\n        return o(this, void 0, void 0, function () {\n          var e;\n          return a(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this._checkSignal(), e = this._genMessage(v.StopPacketTransfer), [4, this._signal.request(e)];\n\n              case 1:\n                return t.sent(), u.default.debug(\"[\" + this.clientId + \"] sendStopRelayMessage: StopPacketTransfer success\"), [2];\n            }\n          });\n        });\n      }, t.prototype._genMessage = function (e, t) {\n        var n = this,\n            r = [],\n            i = [],\n            o = [],\n            a = {\n          appId: this.appId,\n          cname: this.cname,\n          uid: this.uid + \"\",\n          sdkVersion: d.VERSION,\n          sid: this.sid,\n          ts: +new Date(),\n          requestId: 0,\n          seq: 0,\n          allocate: !0,\n          clientRequest: {}\n        },\n            s = null;\n\n        switch (e) {\n          case v.SetSdkProfile:\n            return a.clientRequest = {\n              command: \"SetSdkProfile\",\n              type: \"multi_channel\"\n            }, a;\n\n          case v.SetSourceChannel:\n            return s = t.getSrcChannelMediaInfo(), a.clientRequest = {\n              command: \"SetSourceChannel\",\n              uid: s.uid + \"\",\n              channelName: s.channelName,\n              token: s.token || this.appId\n            }, a;\n\n          case v.SetSourceUserId:\n            return s = t.getSrcChannelMediaInfo(), a.clientRequest = {\n              command: \"SetSourceUserId\",\n              uid: this.uid + \"\"\n            }, a;\n\n          case v.SetDestChannel:\n            return t.getDestChannelMediaInfos().forEach(function (e) {\n              r.push(e.channelName), i.push(e.uid + \"\"), o.push(e.token || n.appId);\n            }), a.clientRequest = {\n              command: \"SetDestChannel\",\n              channelName: r,\n              uid: i,\n              token: o\n            }, a;\n\n          case v.StartPacketTransfer:\n            return a.clientRequest = {\n              command: \"StartPacketTransfer\"\n            }, a;\n\n          case v.Reconnect:\n            return a.clientRequest = {\n              command: \"Reconnect\"\n            }, a;\n\n          case v.StopPacketTransfer:\n            return a.clientRequest = {\n              command: \"StopPacketTransfer\"\n            }, a;\n\n          case v.UpdateDestChannel:\n            return t.getDestChannelMediaInfos().forEach(function (e) {\n              r.push(e.channelName), i.push(e.uid + \"\"), o.push(e.token || n.appId);\n            }), a.clientRequest = {\n              command: \"UpdateDestChannel\",\n              channelName: r,\n              uid: i,\n              token: o\n            }, a;\n        }\n      }, t.prototype._checkSignal = function () {\n        if (!this._signal || !this._signal.isConnect()) throw new R(h.WS_DISCONNECTED);\n      }, t;\n    }(c.default);\n\n    t.default = g;\n\n    var m = function () {\n      function e() {\n        this.destChannelMediaInfos = new Map();\n      }\n\n      return e.prototype.setSrcChannelInfo = function (e) {\n        l.checkValidObject(e, \"srcInfo\");\n        var t = e.uid,\n            n = e.channelName,\n            r = e.token;\n        if (r && !l.isValidToken(r)) throw new Error(\"Invalid token in SrcChannelInfo\");\n        if (!l.isValidChannelName(n)) throw new Error(\"Invalid channelName in SrcChannelInfo\");\n        if (!p.is32Uint(t)) throw new Error(\"Invalid uid in SrcChannelInfo\");\n        this.srcChannelMediaInfo = e;\n      }, e.prototype.setDestChannelInfo = function (e, t) {\n        if (!l.isValidChannelName(e)) throw new Error(\"Invalid channelName in DestChannelInfo\");\n        l.checkValidObject(t, \"destInfo\");\n        var n = t.uid,\n            r = t.token,\n            i = t.channelName;\n        if (r && !l.isValidToken(r)) throw new Error(\"Invalid token in DestChannelInfo\");\n        if (!l.isValidChannelName(i)) throw new Error(\"Invalid channelName in DestChannelInfo\");\n        if (!p.is32Uint(n)) throw new Error(\"Invalid uid in DestChannelInfo\");\n        this.destChannelMediaInfos.set(e, t);\n      }, e.prototype.removeDestChannelInfo = function (e) {\n        if (!l.isValidChannelName(e)) throw new Error(\"Invalid channelName when invoke removeDestChannelInfo\");\n        this.destChannelMediaInfos.delete(e);\n      }, e.prototype.getSrcChannelMediaInfo = function () {\n        return this.srcChannelMediaInfo;\n      }, e.prototype.getDestChannelMediaInfos = function () {\n        return this.destChannelMediaInfos;\n      }, e;\n    }();\n\n    t.ChannelMediaRelayConfiguration = m;\n\n    var h,\n        v,\n        E,\n        S,\n        _,\n        y = function (e) {\n      function t(t, n, r, i) {\n        var o = e.call(this) || this;\n        return o._onOpen = function () {\n          o.emit(\"open\");\n        }, o._onClose = function (e) {\n          o.emit(\"close\"), o.dispose();\n        }, o._onMessage = function (e) {\n          var t = JSON.parse(e.data);\n          if (!t || \"serverResponse\" !== t.command || !t.requestId) return t && \"serverStatus\" === t.command && t.serverStatus && t.serverStatus.command ? (o.emit(\"status\", t.serverStatus), void o.emit(t.serverStatus.command, t.serverStatus)) : void 0;\n          o.emit(\"req_\" + t.requestId, t);\n        }, o._requestId = 1, o.appId = t, o.cname = n, o.uid = r, o.sid = i, o;\n      }\n\n      return i(t, e), t.prototype.isConnect = function () {\n        return this._ws && this._ws.readyState === WebSocket.OPEN;\n      }, t.prototype.sendMessage = function (e) {\n        if (!this._ws || this._ws.readyState !== WebSocket.OPEN) throw new R(h.WS_DISCONNECTED);\n        var t = this._requestId++;\n        return e.requestId = t, e.seq = t, this._ws.send(JSON.stringify(e)), t;\n      }, t.prototype.waitStatus = function (e) {\n        var t = this;\n        return new Promise(function (n, r) {\n          var i = window.setTimeout(function () {\n            r(new R(h.WAIT_STATUS_TIMEOUT, e));\n          }, 5e3);\n          t.once(e, function (t) {\n            clearTimeout(i), t.state && 0 !== t.state ? r(new R(h.WAIT_STATUS_ERROR, e)) : n();\n          }), t.once(\"dispose\", function () {\n            clearTimeout(i), r(new R(h.WS_ABORT));\n          });\n        });\n      }, t.prototype.request = function (e) {\n        var t = this;\n        return new Promise(function (n, r) {\n          var i = t.sendMessage(e),\n              o = window.setTimeout(function () {\n            t.removeAllListeners(\"req_\" + i), r(new R(h.REQUEST_TIMEOUT));\n          }, 3e3);\n          t.once(\"req_\" + i, function (e) {\n            clearTimeout(o), e && 200 === e.code ? n(e) : r(new R(h.REQUEST_FAILED, e));\n          }), t.once(\"dispose\", function () {\n            clearTimeout(o), r(new R(h.WS_ABORT));\n          });\n        });\n      }, t.prototype.connect = function (e) {\n        var t = this;\n        return new Promise(function (n, r) {\n          t._ws = new WebSocket(e), t._ws.onopen = function () {\n            t._onOpen(), t._prvUrl = e, t._ws.onmessage = t._onMessage, t._ws.onclose = t._onClose, t._startHeartBeatCheck(), n();\n          }, t._ws.onclose = function (e) {\n            t._ws = null, r(new R(h.CONNECT_FAILED, \"websocket error code: \" + e.code));\n          }, setTimeout(function () {\n            t._ws && t._ws.readyState !== WebSocket.OPEN && (t._ws.onopen = null, t._ws.onclose = null, t._ws.close(), t._ws = null, r(new R(h.CONNECT_TIMEOUT)));\n          }, 5e3), t.once(\"dispose\", function () {\n            r(new R(h.WS_ABORT));\n          });\n        });\n      }, t.prototype.dispose = function () {\n        this._clearHeartBeatCheck(), this.emit(\"dispose\"), this.removeEvent(), this._ws && (this._ws.onopen = null, this._ws.onclose = null, this._ws.onmessage = null, this._ws.close()), this._ws = null;\n      }, t.prototype._sendPing = function (e) {\n        if (!this._ws || this._ws.readyState !== WebSocket.OPEN) throw new R(h.WS_DISCONNECTED);\n        var t = this._requestId++;\n        return e.requestId = t, this._ws.send(JSON.stringify(e)), t;\n      }, t.prototype._startHeartBeatCheck = function () {\n        var e = this;\n        this._heartBeatTimer = window.setInterval(function () {\n          e._sendPing({\n            command: \"ping\",\n            appId: e.appId,\n            cname: e.cname,\n            uid: e.uid + \"\",\n            sid: e.sid,\n            ts: +new Date(),\n            requestId: 0\n          });\n        }, 3e3);\n      }, t.prototype._clearHeartBeatCheck = function () {\n        window.clearInterval(this._heartBeatTimer);\n      }, t;\n    }(c.default),\n        R = function R(e, t, n) {\n      void 0 === e && (e = \"\"), this.code = n, this.data = t, this.message = e;\n    };\n\n    t.ChannelMediaError = R, function (e) {\n      e.CONNECT_FAILED = \"connect failed\", e.CONNECT_TIMEOUT = \"connect timeout\", e.WS_DISCONNECTED = \"websocket disconnected\", e.REQUEST_TIMEOUT = \"request timeout\", e.REQUEST_FAILED = \"request failed\", e.WAIT_STATUS_TIMEOUT = \"wait status timeout\", e.WAIT_STATUS_ERROR = \"wait status error\", e.BAD_STATE = \"bad state\", e.WS_ABORT = \"ws abort\", e.AP_REQUEST_TIMEOUT = \"AP request timeout\", e.AP_JSON_PARSE_ERROR = \"AP json parse error\", e.AP_REQUEST_ERROR = \"AP request error\", e.AP_REQUEST_ABORT = \"AP request abort\";\n    }(h = t.CHANNEL_MEDIA_ERROR || (t.CHANNEL_MEDIA_ERROR = {})), function (e) {\n      e[e.SetSdkProfile = 0] = \"SetSdkProfile\", e[e.SetSourceChannel = 1] = \"SetSourceChannel\", e[e.SetSourceUserId = 2] = \"SetSourceUserId\", e[e.SetDestChannel = 3] = \"SetDestChannel\", e[e.StartPacketTransfer = 4] = \"StartPacketTransfer\", e[e.StopPacketTransfer = 5] = \"StopPacketTransfer\", e[e.UpdateDestChannel = 6] = \"UpdateDestChannel\", e[e.Reconnect = 7] = \"Reconnect\", e[e.SetVideoProfile = 8] = \"SetVideoProfile\";\n    }(v || (v = {})), function (e) {\n      e[e.NETWORK_DISCONNECTED = 0] = \"NETWORK_DISCONNECTED\", e[e.NETWORK_CONNECTED = 1] = \"NETWORK_CONNECTED\", e[e.PACKET_JOINED_SRC_CHANNEL = 2] = \"PACKET_JOINED_SRC_CHANNEL\", e[e.PACKET_JOINED_DEST_CHANNEL = 3] = \"PACKET_JOINED_DEST_CHANNEL\", e[e.PACKET_SENT_TO_DEST_CHANNEL = 4] = \"PACKET_SENT_TO_DEST_CHANNEL\", e[e.PACKET_RECEIVED_VIDEO_FROM_SRC = 5] = \"PACKET_RECEIVED_VIDEO_FROM_SRC\", e[e.PACKET_RECEIVED_AUDIO_FROM_SRC = 6] = \"PACKET_RECEIVED_AUDIO_FROM_SRC\", e[e.PACKET_UPDATE_DEST_CHANNEL = 7] = \"PACKET_UPDATE_DEST_CHANNEL\", e[e.PACKET_UPDATE_DEST_CHANNEL_REFUSED = 8] = \"PACKET_UPDATE_DEST_CHANNEL_REFUSED\", e[e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE = 9] = \"PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE\";\n    }(E = t.CHANNEL_MEDIA_RELAY_EVENT || (t.CHANNEL_MEDIA_RELAY_EVENT = {})), function (e) {\n      e[e.RELAY_STATE_IDLE = 0] = \"RELAY_STATE_IDLE\", e[e.RELAY_STATE_CONNECTING = 1] = \"RELAY_STATE_CONNECTING\", e[e.RELAY_STATE_RUNNING = 2] = \"RELAY_STATE_RUNNING\", e[e.RELAY_STATE_FAILURE = 3] = \"RELAY_STATE_FAILURE\";\n    }(S = t.CHANNEL_MEDIA_RELAY_STATE || (t.CHANNEL_MEDIA_RELAY_STATE = {})), function (e) {\n      e[e.RELAY_OK = 0] = \"RELAY_OK\", e[e.SERVER_ERROR_RESPONSE = 1] = \"SERVER_ERROR_RESPONSE\", e[e.SERVER_NO_RESPONSE = 2] = \"SERVER_NO_RESPONSE\", e[e.NO_RESOURCE_AVAILABLE = 3] = \"NO_RESOURCE_AVAILABLE\", e[e.FAILED_JOIN_SRC = 4] = \"FAILED_JOIN_SRC\", e[e.FAILED_JOIN_DEST = 5] = \"FAILED_JOIN_DEST\", e[e.FAILED_PACKET_RECEIVED_FROM_SRC = 6] = \"FAILED_PACKET_RECEIVED_FROM_SRC\", e[e.FAILED_PACKET_SENT_TO_DEST = 7] = \"FAILED_PACKET_SENT_TO_DEST\", e[e.SERVER_CONNECTION_LOST = 8] = \"SERVER_CONNECTION_LOST\", e[e.INTERNAL_ERROR = 9] = \"INTERNAL_ERROR\", e[e.SRC_TOKEN_EXPIRED = 10] = \"SRC_TOKEN_EXPIRED\", e[e.DEST_TOKEN_EXPIRED = 11] = \"DEST_TOKEN_EXPIRED\", e[e.RELAY_ALREADY_START = 12] = \"RELAY_ALREADY_START\", e[e.RELAY_NOT_START = 13] = \"RELAY_NOT_START\", e[e.OPERATION_ABORT = 14] = \"OPERATION_ABORT\";\n    }(_ = t.CHANNEL_MEDIA_RELAY_ERROR || (t.CHANNEL_MEDIA_RELAY_ERROR = {}));\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.r(t), n.d(t, \"isLiveTranscodingValid\", function () {\n      return _;\n    }), n.d(t, \"generateSessionId\", function () {\n      return v;\n    }), n.d(t, \"audioLevelHelper\", function () {\n      return g;\n    }), n.d(t, \"vsResHack\", function () {\n      return E;\n    }), n.d(t, \"is32Uint\", function () {\n      return S;\n    }), n.d(t, \"safeCall\", function () {\n      return l;\n    }), n.d(t, \"random\", function () {\n      return R;\n    }), n.d(t, \"popBanTip\", function () {\n      return b;\n    }), n.d(t, \"lengthInUtf8Bytes\", function () {\n      return T;\n    }), n.d(t, \"audioTimerLoop\", function () {\n      return I;\n    }), n.d(t, \"generateId\", function () {\n      return h;\n    }), n.d(t, \"uint8ArrayToBase64\", function () {\n      return f;\n    }), n.d(t, \"base64ToUint8Array\", function () {\n      return p;\n    });\n\n    var r = n(11),\n        i = n.n(r),\n        o = n(4),\n        a = n(0),\n        s = n(28),\n        c = n.n(s),\n        d = n(25),\n        u = n(15),\n        l = function l() {\n      var e = arguments[0];\n\n      if (\"function\" == typeof e) {\n        var t = Array.prototype.slice.call(arguments, 1);\n        e.apply(null, t);\n      }\n    },\n        f = function f(e) {\n      for (var t = \"\", n = 0; n < e.length; n += 1) {\n        t += String.fromCharCode(e[n]);\n      }\n\n      return window.btoa(t);\n    },\n        p = function p(e) {\n      for (var t = window.atob(e), n = new Uint8Array(new ArrayBuffer(t.length)), r = 0; r < t.length; r += 1) {\n        n[r] = t.charCodeAt(r);\n      }\n\n      return n;\n    },\n        g = function g(e) {\n      return this.audioContext = Object(d.a)(), this.sourceNode = e.otWebkitAudioSource || this.audioContext.createMediaStreamSource(e), this.analyser = this.audioContext.createAnalyser(), this.timeDomainData = new Uint8Array(this.analyser.frequencyBinCount), this.sourceNode.connect(this.analyser), this.getAudioLevel = function () {\n        if (this.analyser) {\n          this.analyser.getByteTimeDomainData(this.timeDomainData);\n\n          for (var e = 0, t = 0; t < this.timeDomainData.length; t++) {\n            e = Math.max(e, Math.abs(this.timeDomainData[t] - 128));\n          }\n\n          return e / 128;\n        }\n\n        return a.default.warning(\"can't find analyser in audioLevelHelper\"), 0;\n      }, this;\n    },\n        m = 1e4;\n\n    function h() {\n      return ++m;\n    }\n\n    function v() {\n      return c()().replace(/-/g, \"\").toUpperCase();\n    }\n\n    var E = function E(e, t, n) {\n      try {\n        a.default.debug(\"start vsResHack\", e);\n        var r = document.createElement(\"video\");\n        r.setAttribute(\"autoplay\", \"\"), r.setAttribute(\"muted\", \"\"), r.muted = !0, r.setAttribute(\"playsinline\", \"\"), r.setAttribute(\"style\", \"position: absolute; top: 0; left: 0; width:1px; high:1px;\"), document.body.appendChild(r);\n        var i = !1;\n        r.addEventListener(\"playing\", function (n) {\n          o.isFireFox() ? r.videoWidth && (i = !0, a.default.debug(\"[vsResHack] get stream resolution: \", \"\".concat(r.videoWidth, \" x \").concat(r.videoHeight), e), t(r.videoWidth, r.videoHeight), r.srcObject = null, r.remove()) : (i = !0, a.default.debug(\"[vsResHack] get stream resolution: \", \"\".concat(r.videoWidth, \" x \").concat(r.videoHeight), e), t(r.videoWidth, r.videoHeight), r.srcObject = null, r.remove());\n        }), Object(u.setSrcObject)(r, e), r.play().catch(function () {}), setTimeout(function () {\n          !i && r && (t(r.videoWidth, r.videoHeight), r.srcObject = null, r.remove());\n        }, 4e3);\n      } catch (e) {\n        n(e);\n      }\n    },\n        S = function S(e) {\n      return \"number\" == typeof e && 0 <= e && e <= 4294967295;\n    },\n        _ = function _(e) {\n      var t = [\"lowLatency\", \"userConfigExtraInfo\", \"transcodingUsers\"];\n\n      for (var n in e) {\n        if (\"lowLatency\" === n && \"boolean\" != typeof e[n] || \"userConfigExtraInfo\" === n && \"object\" !== i()(e[n]) || \"transcodingUsers\" === n && !y(e[n]) || !~t.indexOf(n) && \"number\" != typeof e[n]) throw new Error(\"Param [\" + n + \"] is inValid\");\n      }\n\n      return !0;\n    },\n        y = function y(e) {\n      for (var t = 0; t < e.length; t++) {\n        for (var n in e[t]) {\n          if (\"number\" != typeof e[t][n]) throw new Error(\"Param user[\" + t + \"] - [\" + n + \"] is inValid\");\n        }\n      }\n\n      return !0;\n    },\n        R = function R(e) {\n      isNaN(e) && (e = 1e3);\n      var t = +new Date(),\n          n = (t = (9301 * t + 49297) % 233280) / 233280;\n      return Math.ceil(n * e);\n    },\n        T = function T(e) {\n      var t = encodeURIComponent(e).match(/%[89ABab]/g);\n      return e.length + (t ? t.length : 0);\n    },\n        I = function I(e, t) {\n      var n = 1 / t,\n          r = Object(d.a)(),\n          i = r.createGain();\n      i.gain.value = 0, i.connect(r.destination);\n      var o = !1;\n      return function t() {\n        var a = r.createOscillator();\n        a.onended = t, a.connect(i), a.start(0), a.stop(r.currentTime + n), e(r.currentTime), o && (a.onended = function () {});\n      }(), function () {\n        o = !0;\n      };\n    },\n        b = function b() {\n      if (!document.getElementById(\"agora-ban-tip\")) {\n        var e = document.createElement(\"div\");\n        e.id = \"agora-ban-tip\", e.style = \"position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: #fff;\", document.querySelector(\"body\").prepend(e);\n        var t = document.createElement(\"div\");\n        t.style = \"background: #000; width: 346px; height: 116px; z-index: 100000; opacity: 0.6; border-radius: 10px; box-shadow: 0 2px 4px #000;\", e.append(t);\n        var n = document.createElement(\"div\");\n        n.style = \"height: 76px; display: flex; justify-content: center; align-items: center;\";\n        var r = document.createElement(\"span\");\n        r.style = \"height: 28px; width: 28px; color: #000; text-align: center; line-height: 30px; background: #fff; border-radius: 50%; font-weight: 600; font-size: 20px;margin-right: 5px;\", r.innerText = \"!\";\n        var i = document.createElement(\"span\");\n        i.innerText = \"This browser does not support webRTC\", n.append(r), n.append(i);\n        var o = document.createElement(\"div\");\n        o.style = \"height: 38px; display: flex; border-top: #fff 1px solid; justify-content: center; align-items: center;\", o.innerText = \"OK\", t.append(n), t.append(o), o.onclick = function () {\n          var e = document.getElementById(\"agora-ban-tip\");\n          e.parentNode.removeChild(e);\n        };\n      }\n    };\n  }, function (e, t) {\n    function n(t) {\n      return \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? e.exports = n = function n(e) {\n        return typeof e;\n      } : e.exports = n = function n(e) {\n        return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e;\n      }, n(t);\n    }\n\n    e.exports = n;\n  }, function (e, t, n) {\n    e.exports = n(64);\n  }, function (t, n, r) {\n    \"use strict\";\n\n    var i = r(12),\n        o = r.n(i),\n        a = r(17),\n        s = r.n(a),\n        c = r(11),\n        d = r.n(c),\n        u = r(32),\n        l = r.n(u),\n        f = r(7),\n        p = r.n(f),\n        g = r(22),\n        m = r(8),\n        h = function h(e) {\n      e && e.apply(this, [].slice.call(arguments, 1));\n    },\n        v = r(0),\n        E = r(1),\n        S = r(10),\n        _ = r(14),\n        y = r(2),\n        R = function R(e) {\n      var t = Object(m.b)(e);\n      t.needReconnect = !0, t.isTimeout = !1, t.isInit = !0, t.sendbytes = 0, t.recvbytes = 0, t.startTime = Date.now(), t.lastMsgTime = null, t.clientId = e.clientId, t.hostIndex = 0, t.requestID = 0, e.host instanceof Array ? t.host = e.host : t.host = [e.host], t.getSendBytes = function () {\n        return t.sendbytes;\n      }, t.getRecvBytes = function () {\n        return t.recvbytes;\n      }, t.getDuration = function () {\n        return Math.ceil((Date.now() - t.startTime) / 1e3);\n      }, t.getURL = function () {\n        return t.connection.url;\n      }, t.reconnect = function () {\n        t.isInit = !0, t.creatConnection();\n      }, t.connectNext = function () {\n        t.isInit = !0, ++t.hostIndex, v.default.debug(\"[\" + t.clientId + \"] Gateway length:\" + t.host.length + \" current index:\" + t.hostIndex), t.hostIndex >= t.host.length ? t.dispatchEvent(Object(m.d)({\n          type: \"recover\"\n        })) : t.creatConnection();\n      }, t.replaceHost = function (e) {\n        t.host = e || t.host, t.hostIndex = 0, t.creatConnection();\n      }, t.creatConnection = function () {\n        t.needReconnect = !0, t.lts = new Date().getTime(), t.connection = new WebSocket(\"wss://\" + t.host[t.hostIndex]), t.connection.binaryType = \"arraybuffer\", t.turnConfig = {};\n        var n = e.proxyServerType;\n\n        if (t.connection.url && 3 !== n && 4 !== n && 5 !== n) {\n          var r = t.connection.url.match(/wss\\:\\/\\/([^:]+):(\\d+)/),\n              i = t.host[t.hostIndex].split(\":\"),\n              o = t.connection.url.match(/h=([^:]+)&p=(\\d+)/);\n          r ? (t.turnConfig.url = r[1], Object(y.getParameter)(\"TURN_ENABLE_TCP\") && (t.turnConfig.tcpport = parseInt(r[2]) + 30), Object(y.getParameter)(\"TURN_ENABLE_UDP\") && (t.turnConfig.udpport = parseInt(r[2]) + 30)) : o ? (t.turnConfig.url = o[1], Object(y.getParameter)(\"TURN_ENABLE_TCP\") && (t.turnConfig.tcpport = parseInt(o[2]) + 30), Object(y.getParameter)(\"TURN_ENABLE_UDP\") && (t.turnConfig.udpport = parseInt(o[2]) + 30)) : i && (t.turnConfig.url = i[0], Object(y.getParameter)(\"TURN_ENABLE_TCP\") && (t.turnConfig.tcpport = parseInt(i[1]) + 30), Object(y.getParameter)(\"TURN_ENABLE_UDP\") && (t.turnConfig.udpport = parseInt(i[1]) + 30));\n        }\n\n        t.connection.onopen = function (e) {\n          t.needReconnect = !0, t.isTimeout = !1, t.isInit = !1, t.sendbytes = 0, t.recvbytes = 0, t.startTime = Date.now(), Object(_.resetHTTPByetsCount)(), clearTimeout(t.timeoutCheck), t.dispatchEvent(Object(m.d)({\n            type: \"onopen\",\n            event: e,\n            socket: t\n          }));\n        }, t.connection.onmessage = function (e) {\n          if (e.data instanceof ArrayBuffer) t.dispatchEvent({\n            type: \"onBinaryData\",\n            data: e.data\n          });else {\n            t.recvbytes += Object(S.lengthInUtf8Bytes)(e.data);\n            var n = JSON.parse(e.data);\n            t.lastMsgTime = Date.now(), n.hasOwnProperty(\"_id\") ? t.dispatchEvent(Object(m.d)({\n              type: n._id,\n              msg: n\n            })) : n.hasOwnProperty(\"_type\") && t.dispatchSocketEvent(Object(m.d)({\n              type: n._type,\n              msg: n._message\n            }));\n          }\n        }, t.connection.onclose = function (n) {\n          t.needReconnect ? t.isTimeout || t.isInit ? (v.default.debug(\"[\" + t.clientId + \"] websockect connect timeout\"), E.report.joinGateway(e.sid, {\n            lts: t.lts,\n            succ: !1,\n            ec: \"timeout\",\n            addr: t.connection.url\n          }), t.connectNext()) : (t.dispatchEvent(Object(m.d)({\n            type: \"disconnect\",\n            event: n\n          })), t.requests && t.requests instanceof Array && (t.requests.map(function (e) {\n            e.callback(\"REQUEST_ABORT\");\n          }), t.requests = [])) : (v.default.debug(\"[\" + t.clientId + \"] websockect closeed\"), h(e.onFailure, n), clearTimeout(t.timeoutCheck), t.dispatchEvent(Object(m.d)({\n            type: \"close\",\n            event: n\n          })), t.connection.onopen = void 0, t.connection.onclose = void 0, t.connection.onerror = void 0, t.connection.onmessage = void 0, t.connection = void 0);\n        }, t.connection.onerror = function (e) {};\n        setTimeout(function () {\n          t.connection && t.connection.readyState != WebSocket.OPEN && (t.isTimeout = !0, t.connection.close());\n        }, 5e3);\n      }, t.creatConnection(), t.sendMessage = function (e, n) {\n        if (t.connection && t.connection.readyState == WebSocket.OPEN) {\n          var r = JSON.stringify(e);\n          t.sendbytes += Object(S.lengthInUtf8Bytes)(r), t.connection.send(r);\n        } else n({\n          error: \"Gateway not connected\"\n        });\n      }, t.disconnect = function () {\n        t.needReconnect = !0, t.connection.close();\n      }, t.close = function () {\n        t.needReconnect = !1, t.connection.onclose = void 0, t.connection.close(), clearInterval(t.requestTimer), t.requests && t.requests instanceof Array && (t.requests.map(function (e) {\n          e.callback(\"REQUEST_ABORT\");\n        }), t.requests = []);\n      }, t.sendSignalCommand = function (e, n) {\n        e._id = \"_request_\" + t.requestID, t.requestID += 1, \"publish_stats\" !== e._type && \"subscribe_stats\" !== e._type && \"publish_stats_low\" !== e._type && t.on(e._id, function (r) {\n          r.msg && n && n(r.msg._result, r.msg.message), delete t.dispatcher.eventListeners[e._id];\n        }), t.sendMessage(e, function (e) {\n          e.reason = \"NOT_CONNECTED\", n && n(e.reason, e);\n        });\n      }, t.requests = [];\n\n      var n = function n(e) {\n        var n = t.requests.findIndex(function (t) {\n          return t.id === e.type;\n        });\n        if (n >= 0) var r = t.requests.splice(n, 1)[0];\n        r && t.dispatcher.eventListeners[e.type] ? (delete t.dispatcher.eventListeners[e.type], e.msg && r.callback && r.callback(e.msg._result, e.msg._message)) : v.default.warning(\"Detached Response\", e.type, e.msg);\n      },\n          r = function r(e) {\n        var n = this,\n            r = t.requests.findIndex(function (e) {\n          return e.id === n.id;\n        });\n        r >= 0 && (n = t.requests.splice(r, 1)[0]), n && t.dispatcher.eventListeners[e.type] ? (delete t.dispatcher.eventListeners[e.type], e.reason = \"NOT_CONNECTED\", n.callback && n.callback(e.reason, e)) : v.default.warning(\"handleSendError\", n);\n      };\n\n      return t.sendRequest = function (e, i) {\n        e = p()({\n          _id: \"_request_\" + t.requestID\n        }, e), t.requestID += 1;\n        var o = {\n          id: e._id,\n          timeoutCounter: 0,\n          stalledAt: Date.now(),\n          message: e,\n          callback: i\n        };\n        t.requests.push(o), t.addEventListener(e._id, n), t.sendMessage(e, r.bind(o));\n      }, t.checkRequestTimeout = function () {\n        for (var e = Math.ceil(Object(y.getParameter)(\"SIGNAL_REQUEST_TIMEOUT\") / Object(y.getParameter)(\"SIGNAL_REQUEST_WATCH_INTERVAL\")), n = t.requests.length - 1; n >= 0; n--) {\n          var r = t.requests[n];\n          r.timeoutCounter >= e ? (t.requests.splice(n, 1), v.default.error(\"Request Timeout\", r.timeoutCounter, r.message), r.callback && r.callback(\"TIMEOUT\")) : r.timeoutCounter++;\n        }\n      }, clearInterval(t.requestTimer), t.requestTimer = setInterval(t.checkRequestTimeout, Object(y.getParameter)(\"SIGNAL_REQUEST_WATCH_INTERVAL\")), t.sendReport = function (e) {\n        t.sendMessage(e, function () {});\n      }, t;\n    },\n        T = function T(e, t) {\n      var n = {\n        connect: function connect() {\n          t.host = e, n.signal = R(t), n.on = n.signal.on, n.dispatchEvent = n.signal.dispatchEvent, n.signal.on(\"onopen\", function (e) {\n            n.signal.onEvent = function (e) {\n              n.dispatchEvent(Object(m.d)({\n                type: e.event,\n                msg: e\n              }));\n            }, n.dispatchEvent(Object(m.d)({\n              type: \"connect\",\n              msg: e\n            }));\n          }), n.signal.on(\"onError\", function (e) {\n            var t = e.msg;\n            onError(t.code, \"error\");\n          });\n        },\n        getLastMsgTime: function getLastMsgTime() {\n          return n.signal && n.signal.lastMsgTime;\n        },\n        getSendBytes: function getSendBytes() {\n          return n.signal.getSendBytes();\n        },\n        getRecvBytes: function getRecvBytes() {\n          return n.signal.getRecvBytes();\n        },\n        getDuration: function getDuration() {\n          return n.signal.getDuration();\n        },\n        disconnect: function disconnect() {\n          n.signal.disconnect();\n        },\n        close: function close() {\n          n.signal.close();\n        },\n        getURL: function getURL() {\n          return n.signal.getURL();\n        },\n        reconnect: function reconnect() {\n          n.signal.reconnect();\n        },\n        connectNext: function connectNext() {\n          n.signal.connectNext();\n        },\n        replaceHost: function replaceHost(e) {\n          n.signal.replaceHost(e);\n        },\n        emitSimpleMessage: function emitSimpleMessage(e, t) {\n          n.signal.sendSignalCommand(e, t);\n        },\n        emitRequest: function emitRequest(e, t) {\n          n.signal.sendRequest(e, t);\n        },\n        emitReport: function emitReport(e) {\n          n.signal.sendReport(e);\n        }\n      };\n      return n.connect(), n;\n    },\n        I = r(23),\n        b = r(5),\n        A = r(20),\n        O = r(4),\n        C = {\n      ERR_NO_VOCS_AVAILABLE: \"tryNext\",\n      ERR_NO_VOS_AVAILABLE: \"tryNext\",\n      ERR_JOIN_CHANNEL_TIMEOUT: \"tryNext\",\n      WARN_REPEAT_JOIN: \"quit\",\n      ERR_JOIN_BY_MULTI_IP: \"recover\",\n      WARN_LOOKUP_CHANNEL_TIMEOUT: \"tryNext\",\n      WARN_OPEN_CHANNEL_TIMEOUT: \"tryNext\",\n      ERR_VOM_SERVICE_UNAVAILABLE: \"tryNext\",\n      ERR_TOO_MANY_USERS: \"tryNext\",\n      ERR_MASTER_VOCS_UNAVAILABLE: \"tryNext\",\n      ERR_INTERNAL_ERROR: \"tryNext\",\n      K_SERVICE_NOT_READY: \"tryNext\",\n      K_SERVICE_TOO_HEAVY: \"tryNext\",\n      notification_test_recover: \"recover\",\n      notification_test_tryNext: \"tryNext\",\n      notification_test_retry: \"retry\"\n    },\n        N = {\n      googActualEncBitrate: \"A_aeb\",\n      googAvailableSendBandwidth: \"A_asb\",\n      googRetransmitBitrate: \"A_rb\",\n      googAvailableReceiveBandwidth: \"A_arb\",\n      googTargetEncBitrate: \"A_teb\",\n      googBucketDelay: \"A_bd\",\n      googTransmitBitrate: \"A_tb\",\n      googCodecName: \"A_cn\",\n      bytesSent: \"bytesSent\",\n      packetsLost: \"packetsLost\",\n      packetsSent: \"packetsSent\",\n      googAdaptationChanges: \"A_ac\",\n      googAvgEncodeMs: \"A_aem\",\n      googEncodeUsagePercent: \"A_eup\",\n      googFirsReceived: \"A_fr\",\n      googFrameHeightInput: \"A_fhi\",\n      googFrameHeightSent: \"A_fhs\",\n      googFrameRateInput: \"A_fri\",\n      googFrameRateSent: \"A_frs\",\n      googFrameWidthInput: \"A_fwi\",\n      googFrameWidthSent: \"A_fws\",\n      googNacksReceived: \"A_nr\",\n      googPlisReceived: \"A_pr\",\n      googRtt: \"A_rtt\",\n      aecDivergentFilterFraction: \"A_adff\",\n      audioInputLevel: \"A_ail\",\n      googEchoCancellationReturnLoss: \"A_ecrl\",\n      googEchoCancellationReturnLossEnhancement: \"A_ecrle\",\n      googResidualEchoLikelihood: \"A_rel\",\n      googResidualEchoLikelihoodRecentMax: \"A_relrm\",\n      googTargetDelayMs: \"A_tdm\",\n      bytesReceived: \"bytesReceived\",\n      packetsReceived: \"packetsReceived\",\n      googDecodeMs: \"A_dm\",\n      googMaxDecodeMs: \"A_mdm\",\n      googRenderDelayMs: \"A_rdm\",\n      googFrameWidthReceived: \"A_fwr\",\n      googFrameHeightReceived: \"A_fhr\",\n      googFrameRateReceived: \"A_frr\",\n      googFrameRateDecoded: \"A_frd\",\n      googFrameRateOutput: \"A_fro\",\n      googJitterBufferMs: \"A_jbm\",\n      googCurrentDelayMs: \"A_cdm\",\n      googMinPlayoutDelayMs: \"A_mpdm\",\n      googNacksSent: \"A_ns\",\n      googPlisSent: \"A_ps\",\n      googFirsSent: \"A_fs\",\n      audioOutputLevel: \"A_aol\",\n      googAccelerateRate: \"A_ar\",\n      googDecodingCNG: \"A_dcng\",\n      googDecodingCTN: \"A_dctn\",\n      googDecodingCTSG: \"A_dctsg\",\n      googDecodingNormal: \"A_dn\",\n      googDecodingPLC: \"A_dplc\",\n      googDecodingPLCCNG: \"A_dplccng\",\n      googExpandRate: \"A_er\",\n      googJitterReceived: \"A_jr\",\n      googPreemptiveExpandRate: \"A_per\",\n      googPreferredJitterBufferMs: \"A_pjbm\",\n      googSecondaryDecodedRate: \"A_sdr\",\n      googSpeechExpandRate: \"A_ser\",\n      uplink_fraction_lost: \"B_ufl\",\n      uplink_cumulative_lost: \"B_ucl\",\n      uplink_available_bandwidth: \"B_uab\",\n      period_fir: \"B_fir\",\n      access_delay: \"B_acd\",\n      uplink_network_quality: \"B_unq\",\n      downlink_network_quality: \"B_dnq\",\n      pub_audio_lost_ratio_400ms: \"B_palr4\",\n      pub_video_lost_ratio_400ms: \"B_pvlr4\",\n      e2e_delay: \"B_ed\",\n      audio_delay: \"B_ad\",\n      video_delay: \"B_vd\",\n      stream_type: \"B_st\",\n      e2e_audio_lost_ratio_400ms: \"B_ealr4\",\n      e2e_video_lost_ratio_400ms: \"B_evlr4\",\n      downlink_estimate_bandwidth: \"B_deb\",\n      peer_publish_audio_duration: \"B_ppad\",\n      peer_publish_video_duration: \"B_ppvd\"\n    },\n        w = {};\n\n    for (var L in N) {\n      var D = N[L];\n      w[D] && v.default.error(\"Key Conflict: \".concat(D, \": \").concat(N[D], \"| \").concat(L)), w[D] = L;\n    }\n\n    var k = function k(e) {\n      return N[e] || e;\n    },\n        M = function M(e) {\n      return w[e] || e;\n    };\n\n    var P = r(9),\n        x = r.n(P),\n        U = r(54),\n        j = function t(n) {\n      var r = !1,\n          i = function i(e) {\n        return {\n          _type: \"control\",\n          _message: e\n        };\n      },\n          a = function a(e, t) {\n        var n = {};\n        return Object.keys(t).forEach(function (e) {\n          Object(y.getParameter)(\"STATS_FILTER\")[e] || (n[k(e)] = t[e]);\n        }), {\n          _type: \"subscribe_related_stats\",\n          _message: {\n            stream_type: \"high\",\n            stream_id: e,\n            stats: n\n          }\n        };\n      },\n          c = function c(e) {\n        return {\n          _type: \"publish\",\n          _message: e\n        };\n      },\n          u = function u(e, t) {\n        var n = {};\n        return Object.keys(t).forEach(function (e) {\n          Object(y.getParameter)(\"STATS_FILTER\")[e] || (n[k(e)] = t[e]);\n        }), {\n          _type: \"subscribe_stats\",\n          _message: {\n            stream_id: e,\n            stats: n\n          }\n        };\n      },\n          f = t.DISCONNECTED,\n          _ = t.CONNECTING,\n          R = t.CONNECTED,\n          N = t.DISCONNECTING,\n          w = f,\n          L = Object(m.b)(n);\n\n      Object.defineProperty(L, \"state\", {\n        set: function set(e) {\n          var n = w;\n          w = e, Object(A._setClientConnectionStateRecord)(L.clientId, e), e !== t.CONNECTED && e !== t.DISCONNECTING && (L.hasJoined = !1), n !== e && L.dispatchEvent({\n            type: \"connection-state-change\",\n            prevState: t.connetionStateMap[n],\n            curState: t.connetionStateMap[e]\n          });\n        },\n        get: function get() {\n          return w;\n        }\n      }), L.socket = void 0, L.state = f, L.mode = n.mode, L.role = n.role, L.codec = n.codec, L.config = {}, L.timers = {}, L.timer_counter = {}, L.localStreams = {}, L.remoteStreams = {}, L.remoteMuteState = {}, L.attemps = 1, L.p2p_attemps = 1, L.audioLevel = {}, L.activeSpeaker = void 0, L.reconnectMode = \"tryNext\", L.rejoinAttempt = 0, L.hasChangeBGPAddress = !1, L.traffic_stats = {}, L.clientId = n.clientId, L.pingpongCounter = 0, L.hasInvokeLeave = !1, L.p2ps = new Map(), L.liveStreams = new Map(), L.injectLiveStreams = new Map(), L.remoteStreamsInChannel = new Set(), L.subscribeRequestId = new Map(), L.publishRequestId = 0, L.hasJoined = !1, L.isFirstSuccess = !0, L.peerPublishDurationMap = new Map(), function (e) {\n        var t = h;\n        e.makeRequest = function (n, r, i) {\n          if (void 0 === e.socket) return v.default.debug(\"[\".concat(e.clientId, \"] No socket available\")), void t(i, b.default.INVALID_OPERATION);\n\n          try {\n            e.socket.emitRequest(n, function (e, t) {\n              var n;\n              \"success\" === e ? \"function\" == typeof r && r(t) : \"function\" == typeof i && (n = t && t.error_code && b.GatewayErrorCode[t.error_code] ? b.GatewayErrorCode[t.error_code] : t && t.error_str ? t.error_str : t && t.error_code ? \"UNKNOW_ERROR_\".concat(t.error_code) : e, i(n, t));\n            });\n          } catch (r) {\n            v.default.debug(\"[\".concat(e.clientId, \"] Socket emit message failed \").concat(JSON.stringify(n))), v.default.debug(\"[\".concat(e.clientId, \"] \"), r), t(i, b.default.SOCKET_ERROR);\n          }\n        }, e.makeReport = function (t) {\n          void 0 === e.socket && v.default.debug(\"[\".concat(e.clientId, \"] No socket available\"));\n\n          try {\n            e.socket.emitReport(t);\n          } catch (n) {\n            v.default.debug(\"[\".concat(e.clientId, \"] Socket emit report failed \").concat(JSON.stringify(t)));\n          }\n        };\n      }(L), L.inChannelInfo = {\n        joinAt: null,\n        duration: 0\n      }, L._sendMessage = function (e, t) {\n        switch (e) {\n          case \"SubscribeStats\":\n            L.makeReport(u.apply(void 0, l()(t)));\n            break;\n\n          case \"SubscribeRelatedStats\":\n            L.makeReport(a.apply(void 0, l()(t)));\n        }\n      };\n      var D = h;\n      L.p2pCounter = Object(S.random)(1e5), L.generateP2PId = function () {\n        return ++L.p2pCounter;\n      }, L.audioVolumeIndication = {\n        enabled: !1,\n        sortedAudioVolumes: [],\n        smooth: 3,\n        interval: 2e3\n      }, L.remoteVideoStreamTypes = {\n        REMOTE_VIDEO_STREAM_HIGH: 0,\n        REMOTE_VIDEO_STREAM_LOW: 1,\n        REMOTE_VIDEO_STREAM_MEDIUM: 2\n      }, L.streamFallbackTypes = {\n        STREAM_FALLBACK_OPTION_DISABLED: 0,\n        STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW: 1,\n        STREAM_FALLBACK_OPTION_AUDIO_ONLY: 2\n      }, L.configPublisher = function (e) {\n        L.config = e;\n      }, L.getGatewayInfo = function (e, t) {\n        L.makeRequest({\n          _type: \"gateway_info\"\n        }, e, t);\n      }, L.setClientRole = function (e, t) {\n        v.default.debug(\"[\".concat(L.clientId, \"] setClientRole to \").concat(e));\n        var n = E.report.reportApiInvoke(L.joinInfo.sid, {\n          name: \"_setClientRole\",\n          callback: t\n        });\n        L.makeRequest({\n          _type: \"set_client_role\",\n          _message: {\n            role: e\n          }\n        }, function () {\n          L.role = e, L.dispatchEvent({\n            type: \"client-role-changed\",\n            role: e\n          }), n && n(null, {\n            role: e\n          });\n        }, function (t, r) {\n          if (r && r.code && (t = b.GatewayErrorCode[r.code] || \"UNKNOW_ERROR_\" + r.code), \"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE\" === t) return n && n(null);\n          v.default.error(\"set Client role error to \" + e + \": \" + t), n && n(t);\n        });\n      }, L.join = function (e, t, r, i) {\n        L.hasInvokeLeave = !1, e.useProxyServer && (L.hasChangeBGPAddress = !0);\n        var o = new Date().getTime(),\n            a = e.uid;\n        if (L.inChannelInfo.joinAt && (L.inChannelInfo.duration += o - L.inChannelInfo.joinAt), L.inChannelInfo.joinAt = o, L.state !== _) return v.default.error(\"[\".concat(L.clientId, \"] GatewayClient.join Failed: state \"), L.state), i && i(b.default.INVALID_OPERATION), void E.report.joinGateway(e.sid, {\n          lts: o,\n          succ: !1,\n          ec: b.default.INVALID_OPERATION,\n          addr: null\n        });\n        if (null != a && parseInt(a) !== a) return v.default.error(\"[\".concat(L.clientId, \"] Input uid is invalid\")), L.state = f, i && i(b.default.INVALID_PARAMETER), void E.report.joinGateway(e.sid, {\n          lts: o,\n          succ: !1,\n          ec: b.default.INVALID_PARAMETER,\n          addr: null\n        });\n        var s = V.register(L, {\n          uid: a,\n          cname: e && e.cname\n        });\n        if (s) return L.state = f, i && i(s), void E.report.joinGateway(e.sid, {\n          lts: o,\n          succ: !1,\n          ec: s,\n          addr: null\n        });\n        L.joinInfo = p()({}, e), L.uid = a, L.key = t, L.pingpongCounter = 0, W(e, function (t) {\n          if (e.useLocalAccessPoint) try {\n            var s = L.socket.signal.connection.url.match(/wss\\:\\/\\/([^:]+):(\\d+)/)[1];\n            Object(y.setParameter)(\"EVENT_REPORT_DOMAIN\", s), Object(y.setParameter)(\"EVENT_REPORT_BACKUP_DOMAIN\", s), Object(y.setParameter)(\"LOG_UPLOAD_SERVER\", \"\".concat(s, \":6444\"));\n          } catch (e) {\n            v.default.debug(\"[\".concat(L.clientId, \"] LocalAccessPoint error: \").concat(e));\n          }\n          if (L.state === N || L.state === f) return i && i(\"LEAVE_BEFORE_JOIN_SUCCESS\");\n          L.state = R, v.default.debug(\"[\".concat(L.clientId, \"] Connected to gateway server\")), clearInterval(L.pingTimer), L.pingTimer = setInterval(function () {\n            var e = Object(y.getParameter)(\"PING_PONG_TIME_OUT\");\n\n            if (++L.pingpongCounter >= e) {\n              var t = Date.now();\n              L.socket && v.default.warning(\"PINGPONG Timeout. Last Socket Message: \".concat(t - L.socket.getLastMsgTime(), \"ms\")), L.socket && L.socket.getLastMsgTime() && t - L.socket.getLastMsgTime() > Object(y.getParameter)(\"WEBSOCKET_TIMEOUT_MIN\") && (L.pingpongCounter = 0, L.socket.close(), L.socket.dispatchEvent(Object(m.d)({\n                type: \"disconnect\",\n                event: {\n                  msg: \"PING_PONG_TIME_OUT\"\n                }\n              })));\n            }\n\n            var n = Date.now();\n            L.makeRequest({\n              _type: \"ping\"\n            }, function () {\n              L.pingpongCounter = 0;\n              var e = Date.now() - n;\n              Object(y.getParameter)(\"REPORT_STATS\") && L.makeRequest({\n                _type: \"ping_back\",\n                _message: {\n                  pingpongElapse: e\n                }\n              });\n            }, function (e, t) {\n              \"TIMEOUT\" !== e && (v.default.error(\"Ping Error \".concat(e, \" \").concat(JSON.stringify(t))), t && t.error_code && L.socket && L.socket.signal && L.socket.signal.connection && L.socket.signal.connection.readyState === WebSocket.OPEN && (v.default.info(\"Disconnecting websocket connection\"), L.socket.signal.connection.close()));\n            });\n          }, 3e3), function (e, t) {\n            var r = e.role,\n                i = p()({}, L.joinInfo.apResponse),\n                o = {\n              session_id: L.joinInfo.sid,\n              app_id: n.appId,\n              channel_key: L.key,\n              channel_name: L.joinInfo.cname,\n              sdk_version: y.VERSION,\n              browser: navigator.userAgent,\n              process_id: Object(E.getProcessId)(),\n              mode: L.mode,\n              codec: L.codec,\n              role: r,\n              has_changed_gateway: Object(y.getParameter)(\"FORCE_CHANGED_GATEWAY_FLAG\") || L.hasChangeBGPAddress,\n              ap_response: i,\n              optionalInfo: L.joinInfo.optionalInfo,\n              extend: Object(y.getParameter)(\"JOIN_EXTEND\"),\n              details: {}\n            };\n\n            if (L.joinInfo.hasOwnProperty(\"stringUid\") && (o.string_uid = L.joinInfo.stringUid), L.socket && L.socket.signal && L.socket.signal && (i.addresses && i.addresses[L.socket.signal.hostIndex] && (o.ap_response.ticket = i.addresses[L.socket.signal.hostIndex].ticket, delete i.addresses), Object(y.getParameter)(\"SET_DEFAULT_TURNSERVER\") && L.socket.signal.turnConfig)) {\n              var a = {\n                username: L.joinInfo.uid.toString(),\n                credential: L.joinInfo.token,\n                forceturn: Object(y.getParameter)(\"FORCE_TURN\")\n              };\n              a.url = L.socket.signal.turnConfig.url, L.socket.signal.turnConfig.tcpport && (a.tcpport = \"\" + L.socket.signal.turnConfig.tcpport), L.socket.signal.turnConfig.udpport && (a.udpport = \"\" + L.socket.signal.turnConfig.udpport), !!L.joinInfo.turnServers.find(function (e) {\n                if (e.url === a.url) return !0;\n              }) || L.joinInfo.turnServers.push(a);\n            }\n\n            3 === L.joinInfo.proxyServerType && (o.plugin = \"web_cloud_proxy\", o.details.cservice_map = \"1\"), L.joinInfo.aesmode && L.joinInfo.aespassword ? (o.aes_mode = L.joinInfo.aesmode, o.aes_encrypt = !0, L.joinInfo.aes_salt && (o.aes_salt = L.joinInfo.aes_salt), Object(U.encryptRSA)(L.joinInfo.aespassword).then(function (e) {\n              o.aes_secret = e, L.dispatchEvent({\n                type: \"join-message-hook\",\n                joinMessage: o\n              }), t(null, {\n                _type: \"join\",\n                _message: o\n              });\n            }).catch(function (e) {\n              v.default.error(\"[\".concat(L.clientId, \"] encrypt password failed \"), e), t(\"ENCRYPT_PASSWORD_FAILED\");\n            })) : (L.dispatchEvent({\n              type: \"join-message-hook\",\n              joinMessage: o\n            }), t(null, {\n              _type: \"join\",\n              _message: o\n            }));\n          }({\n            role: L.role\n          }, function (t, n) {\n            if (t) return i && i(t);\n            L.makeRequest(n, function (t) {\n              if (E.report.joinGateway(e.sid, {\n                lts: o,\n                succ: !0,\n                ec: null,\n                vid: e.vid,\n                uid: e.uid,\n                addr: L.socket.getURL(),\n                firstSuccess: L.isFirstSuccess\n              }), L.joinSuccessLts = Date.now(), L.isFirstSuccess = !1, L.rejoinAttempt = 0, L.hasJoined = !0, r && r(t.uid), !0 === t.return_vosip || !0 === Object(y.getParameter)(\"ENABLE_LIVE_SERVER_LIST\")) {\n                var n = null;\n\n                try {\n                  n = L.socket.signal.connection.url;\n                } catch (e) {\n                  v.default.debug(\"[\".concat(L.clientId, \"] Can not get gateway ip: \").concat(e));\n                }\n\n                n ? Object(y.setParameter)(\"LIVE_SERVER_LIST\", [n]) : Object(y.setParameter)(\"LIVE_SERVER_LIST\", []);\n              }\n\n              L.dispatchEvent({\n                type: \"join\"\n              }), clearInterval(L.timers.trafficStats), L.timers.trafficStats = setInterval(function () {\n                L.makeRequest({\n                  _type: \"traffic_stats\"\n                }, function (e) {\n                  var t = {};\n\n                  for (var n in e) {\n                    t[M(n)] = e[n];\n                  }\n\n                  if (t.peer_delay && t.peer_delay.length) {\n                    var r = [];\n                    t.peer_delay.forEach(function (e) {\n                      var t = {};\n\n                      for (var n in e) {\n                        t[M(n)] = e[n];\n                      }\n\n                      r.push(t);\n                    }), t.peer_delay = r;\n                  }\n\n                  L.traffic_stats = t, L.traffic_stats.timestamp = Date.now();\n                  var i = L.joinInfo.stringUid,\n                      o = L.localStreams[a] || L.localStreams[i];\n                  o && (o.traffic_stats = {\n                    access_delay: t.access_delay\n                  }), t.peer_delay && t.peer_delay.forEach(function (e) {\n                    var n = L.remoteStreams[e.peer_uid];\n                    n && (n.traffic_stats = {\n                      access_delay: t.access_delay,\n                      e2e_delay: e.e2e_delay,\n                      audio_delay: e.audio_delay,\n                      video_delay: e.video_delay\n                    });\n                  }), L.dispatchEvent({\n                    type: \"after-getTrafficStats\",\n                    trafficStats: t\n                  });\n                });\n              }, 3e3);\n            }, function (t, n) {\n              if (v.default.error(\"[\".concat(L.clientId, \"] User join failed [\").concat(t, \"]\")), \"ERR_JOIN_BY_MULTI_IP\" === t) {\n                try {\n                  E.report.joinGateway(e.sid, {\n                    lts: o,\n                    succ: !1,\n                    ec: \"ERR_JOIN_BY_MULTI_IP\",\n                    addr: L.socket.getURL()\n                  });\n                } catch (e) {}\n\n                return L.dispatchEvent({\n                  type: \"onMultiIP\",\n                  option: n.option\n                });\n              }\n\n              C[t] && L.rejoinAttempt < 4 ? L._doWithAction(C[t], r, i) : i && i(t), E.report.joinGateway(e.sid, {\n                lts: o,\n                succ: !1,\n                ec: t,\n                addr: L.socket && L.socket.getURL()\n              });\n            });\n          });\n        }, function (t) {\n          v.default.error(\"[\".concat(L.clientId, \"] User join failed [\").concat(t, \"]\")), i && i(t), E.report.joinGateway(e.sid, {\n            lts: o,\n            succ: !1,\n            ec: t,\n            addr: L.socket.getURL()\n          });\n        }), this.remoteMuteState = {}, L.resetAudioVolumeIndication();\n      }, L.leave = function (e, t) {\n        var n = V.unregister(L);\n\n        switch (n && v.default.debug(\"[\".concat(L.clientId, \"] \"), n), L.p2ps.clear(), L.state) {\n          case f:\n            return v.default.debug(\"[\".concat(L.clientId, \"] Client Already in DISCONNECTED status\")), void D(e);\n\n          case N:\n            return v.default.debug(\"[\".concat(L.clientId, \"] Client Already in DISCONNECTING status\")), void D(t, b.default.INVALID_OPERATION);\n\n          case _:\n            return L.socket && L.socket.close(), L.socket = void 0, v.default.info(\"[\".concat(L.clientId, \"] Client connecting, Leave channel success\")), L.state = f, e && e();\n        }\n\n        for (var r in L.state = N, L.channelMediaConfig && (L.channelMediaRelayController && L.channelMediaRelayController.dispose(), L.channelMediaConfig, L.channelMediaRelayController = null), clearInterval(L.pingTimer), L.timers) {\n          L.timers.hasOwnProperty(r) && clearInterval(L.timers[r]);\n        }\n\n        for (var r in L.inChannelInfo.joinAt && (L.inChannelInfo.duration += Date.now() - L.inChannelInfo.joinAt, L.inChannelInfo.joinAt = null), L.hasJoined ? L.makeRequest({\n          _type: \"leave\"\n        }, function (t) {\n          L.socket.close(), L.socket = void 0, v.default.info(\"[\".concat(L.clientId, \"] Leave channel success\")), L.state = f, e && e(t);\n        }, function (e) {\n          \"TIMEOUT\" !== e && \"REQUEST_ABORT\" !== e && (v.default.error(\"[\".concat(L.clientId, \"] Leave Channel Failed\"), e), L.state = R, t && t(e));\n        }) : (L.socket && (L.socket.close(), L.socket = void 0), v.default.info(\"[\".concat(L.clientId, \"] Leave channel before joined\")), L.state = f, e && e()), L.localStreams) {\n          if (L.localStreams.hasOwnProperty(r)) {\n            var i = L.localStreams[r];\n            delete L.localStreams[r], void 0 !== i.pc && (i.pc.close(), i.pc = void 0);\n          }\n        }\n\n        q();\n      }, L.publish = function (e, t, n, r) {\n        var o = new Date().getTime(),\n            a = !1;\n        if (e.publishLTS = o, \"object\" !== d()(e) || null === e) return v.default.error(\"[\".concat(L.clientId, \"] Invalid local stream\")), r && r(b.default.INVALID_LOCAL_STREAM), void E.report.publish(L.joinInfo.sid, {\n          lts: o,\n          succ: !1,\n          audio: !1,\n          video: !1,\n          screenshare: !1,\n          audioName: \"\",\n          videoName: \"\",\n          screenName: \"\",\n          ec: b.default.INVALID_LOCAL_STREAM\n        });\n        if (!e.stream && void 0 === e.url) return v.default.error(\"[\".concat(L.clientId, \"] Invalid local media stream\")), r && r(b.default.INVALID_LOCAL_STREAM), void E.report.publish(L.joinInfo.sid, {\n          lts: o,\n          succ: !1,\n          audio: !1,\n          video: !1,\n          screenshare: !1,\n          audioName: \"\",\n          videoName: \"\",\n          screenName: \"\",\n          ec: b.default.INVALID_LOCAL_STREAM\n        });\n        if (L.state !== R) return v.default.error(\"[\".concat(L.clientId, \"] User is not in the session\")), r && r(b.default.INVALID_OPERATION), void E.report.publish(L.joinInfo.sid, {\n          lts: o,\n          succ: !1,\n          audio: e.hasAudio(),\n          video: e.hasVideo(),\n          screenshare: e.hasScreen(),\n          audioName: e.hasAudio() && e.audioName,\n          videoName: e.hasVideo() && e.videoName,\n          screenName: e.hasScreen() && e.screenName,\n          ec: b.default.INVALID_OPERATION\n        });\n        var s = e.getAttributes() || {};\n\n        if (e.local && void 0 === L.localStreams[e.getId()] && (e.hasAudio() || e.hasVideo() || e.hasScreen())) {\n          var u = L.generateP2PId();\n          if (L.p2ps.set(u, e), e.p2pId = u, void 0 !== e.url) G(c({\n            state: \"url\",\n            audio: e.hasAudio(),\n            video: e.hasVideo(),\n            attributes: e.getAttributes()\n          }, e.url), function (t, n) {\n            \"success\" === t ? (e.getUserId() !== n && e.setUserId(n), L.localStreams[n] = e, e.onClose = function () {\n              L.unpublish(e);\n            }) : v.default.error(\"[\".concat(L.clientId, \"] Publish local stream failed\"), t);\n          });else {\n            L.localStreams[e.getId()] = e, e.connectionSpec = {\n              callback: function callback(s) {\n                s || r && r(\"CANNOT_GET_OFFER\"), \"motion\" === e.optimizationMode && e.pc.setRtpSenderParameters(\"maintain-framerate\"), \"detail\" === e.optimizationMode && e.pc.setRtpSenderParameters(\"maintain-resolution\"), L.makeRequest(c({\n                  state: \"offer\",\n                  stream_type: 1 == t.streamType ? \"low\" : \"high\",\n                  p2p_id: u,\n                  sdp: s,\n                  audio: e.audio || e.screenAudio,\n                  video: e.screen || e.video,\n                  screen: e.screen,\n                  attributes: e.getAttributes(),\n                  dtx: e.DTX,\n                  hq: e.highQuality,\n                  lq: e.lowQuality,\n                  stereo: e.stereo,\n                  speech: e.speech,\n                  codec: L.codec,\n                  extend: Object(y.getParameter)(\"PUB_EXTEND\")\n                }), function (t) {\n                  e.getUserId() !== t.uid && e.setUserId(t.uid), v.default.info(\"[\".concat(L.clientId, \"] Local stream published with uid\"), t.uid), e.onClose = function () {\n                    L.unpublish(e);\n                  }, e._onAudioUnmute = function () {\n                    L.makeReport(i({\n                      action: \"unmute_local_audio\",\n                      stream_id: e.getId()\n                    }));\n                  }, e._onVideoUnmute = function () {\n                    L.makeReport(i({\n                      action: \"unmute_local_video\",\n                      stream_id: e.getId()\n                    }));\n                  }, e._onAudioMute = function () {\n                    L.makeReport(i({\n                      action: \"mute_local_audio\",\n                      stream_id: e.getId()\n                    }));\n                  }, e._onVideoMute = function () {\n                    L.makeReport(i({\n                      action: \"mute_local_video\",\n                      stream_id: e.getId()\n                    }));\n                  }, e.getId() === e.getUserId() && (e.isAudioOn() || e.hasAudio() && (v.default.debug(\"[\".concat(L.clientId, \"] local stream audio mute\")), e._onAudioMute()), e.isVideoOn() || (e.hasVideo() || e.hasScreen()) && (v.default.debug(\"[\".concat(L.clientId, \"] local stream video mute\")), e._onVideoMute())), e.pc.oniceconnectionstatechange = function (t) {\n                    if (\"failed\" === t) {\n                      if (null != L.timers[e.getId()] && (clearInterval(L.timers[e.getId()]), clearInterval(L.timers[e.getId()] + \"_RelatedStats\")), v.default.error(\"[\".concat(L.clientId, \"] Publisher connection is lost -- streamId: \").concat(e.getId(), \", p2pId: \").concat(u)), L.p2ps.delete(u), v.default.debug(\"[\".concat(L.clientId, \"] publish p2p failed: \"), L.p2ps), !a) return a = !0, E.report.publish(L.joinInfo.sid, {\n                        lts: o,\n                        succ: !1,\n                        audio: e.hasAudio(),\n                        video: e.hasVideo(),\n                        screenshare: e.hasScreen(),\n                        audioName: e.hasAudio() && e.audioName,\n                        videoName: e.hasVideo() && e.videoName,\n                        screenName: e.hasScreen() && e.screenName,\n                        ec: b.default.PEERCONNECTION_FAILED,\n                        publishRequestid: L.publishRequestId || 0,\n                        p2pid: u\n                      }), L.dispatchEvent(Object(m.a)({\n                        type: \"pubP2PLost\",\n                        stream: e\n                      })), r && r(b.default.PEERCONNECTION_FAILED);\n                      L.dispatchEvent(Object(m.a)({\n                        type: \"pubP2PLost\",\n                        stream: e\n                      }));\n                    } else if (\"connected\" === t && (v.default.debug(\"[\".concat(L.clientId, \"] publish p2p connected: \"), L.p2ps), e.getId() === e.getUserId() && (e._isAudioMuted() ? L.makeReport(i({\n                      action: \"mute_local_audio\",\n                      stream_id: e.getId()\n                    })) : L.makeReport(i({\n                      action: \"unmute_local_audio\",\n                      stream_id: e.getId()\n                    })), e._isVideoMuted() ? L.makeReport(i({\n                      action: \"mute_local_video\",\n                      stream_id: e.getId()\n                    })) : L.makeReport(i({\n                      action: \"unmute_local_video\",\n                      stream_id: e.getId()\n                    }))), !a)) return a = !0, E.report.publish(L.joinInfo.sid, {\n                      lts: o,\n                      succ: !0,\n                      audio: e.hasAudio(),\n                      video: e.hasVideo(),\n                      screenshare: e.hasScreen(),\n                      audioName: e.hasAudio() && e.audioName,\n                      videoName: e.hasVideo() && e.videoName,\n                      screenName: e.hasScreen() && e.screenName,\n                      ec: null,\n                      publishRequestid: L.publishRequestId || 0,\n                      p2pid: u\n                    }), n && n();\n                  }, e.pc.processSignalingMessage(t.sdp);\n                }, function (t, n) {\n                  v.default.error(\"Publish Failed: \".concat(t)), E.report.publish(L.joinInfo.sid, {\n                    lts: o,\n                    succ: !1,\n                    audio: e.hasAudio(),\n                    video: e.hasVideo(),\n                    screenshare: e.hasScreen(),\n                    audioName: e.hasAudio() && e.audioName,\n                    videoName: e.hasVideo() && e.videoName,\n                    screenName: e.hasScreen() && e.screenName,\n                    ec: t,\n                    publishRequestid: L.publishRequestId || 0,\n                    p2pid: u\n                  }), \"TIMEOUT\" != t && (L.processPublishFailure(e), r && r(t));\n                });\n              },\n              audio: e.hasAudio(),\n              video: e.hasVideo(),\n              screen: e.hasScreen(),\n              optimizationMode: e.optimizationMode,\n              isSubscriber: !1,\n              stunServerUrl: L.stunServerUrl,\n              turnServers: L.joinInfo.turnServers,\n              maxAudioBW: s.maxAudioBW,\n              minVideoBW: s.minVideoBW,\n              maxVideoBW: s.maxVideoBW,\n              mode: L.mode,\n              codec: L.codec,\n              isVideoMute: e.userMuteVideo || e.peerMuteVideo,\n              isAudioMute: e.userMuteAudio || e.peerMuteAudio,\n              maxFrameRate: e.attributes.maxFrameRate,\n              agoraStream: e,\n              clientId: L.clientId,\n              isCloudProxy3: 3 === L.joinInfo.proxyServerType,\n              onNoIceCandidate: function onNoIceCandidate() {\n                L.dispatchEvent({\n                  type: \"no_ice_candidate\",\n                  stream: e\n                });\n              }\n            }, e.pc = Object(I.a)(e.connectionSpec), e.pc.addStream(e.stream), v.default.debug(\"[\".concat(L.clientId, \"] PeerConnection add stream :\"), e.stream), e.pc.onnegotiationneeded = function (n) {\n              \"motion\" === e.optimizationMode && e.pc.setRtpSenderParameters(\"maintain-framerate\"), \"detail\" === e.optimizationMode && e.pc.setRtpSenderParameters(\"maintain-resolution\");\n              var r = {\n                state: \"negotiation\",\n                stream_type: 1 === t.streamType ? \"low\" : \"high\",\n                p2p_id: u,\n                sdp: n\n              };\n              L.makeRequest(c(r), function (t) {\n                v.default.debug(\"Negotating Stream \".concat(e.getId())), e.pc.processSignalingMessage(t.sdp);\n              }, function (e, t) {\n                v.default.error(\"Negotiation failed \".concat(e), t, r);\n              });\n            }, clearInterval(L.timers[e.getId()]), L.timers[e.getId()] = setInterval(function () {\n              if (Object(y.getParameter)(\"REPORT_STATS\")) {\n                var t = 0;\n                e && e.pc && e.pc.getStats && e.pc.getStatsRate(function (n) {\n                  n.forEach(function (n) {\n                    if (n && n.id && !(/_recv$/.test(n.id) || /^time$/.test(n.id) || ~n.type.toLowerCase().indexOf(\"inbound\")) && e.getUserId()) {\n                      if (-1 === n.id.indexOf(\"outbound_rtp\") && -1 === n.id.indexOf(\"OutboundRTP\") && -1 === n.type.toLowerCase().indexOf(\"outbound\") || \"video\" !== n.mediaType || (n.googFrameWidthSent = e.videoWidth + \"\", n.googFrameHeightSent = e.videoHeight + \"\"), \"video\" === n.mediaType) try {\n                        var r = e.stream.getVideoTracks()[0];\n                        n.A_vstd = r.enabled ? \"0\" : \"1\";\n                      } catch (e) {}\n                      if (\"audio\" === n.mediaType) try {\n                        var i = e.stream.getAudioTracks()[0];\n                        n.A_astd = i.enabled ? \"0\" : \"1\";\n                      } catch (e) {}\n\n                      if (e.getId() == e.getUserId()) {\n                        var o = 200 * t;\n                        t++, setTimeout(function () {\n                          var e = L.socket && L.socket.getLastMsgTime() && Date.now() - L.socket.getLastMsgTime();\n                          e > Object(y.getParameter)(\"REPORT_STATS_TIMEOUT\") ? v.default.debug(\"PublishStats report blocked by REPORT_STATS_TIMEOUT \".concat(e)) : L.makeReport(function (e) {\n                            var t = {};\n                            return Object.keys(e).forEach(function (n) {\n                              Object(y.getParameter)(\"STATS_FILTER\")[n] || (t[k(n)] = e[n]);\n                            }), {\n                              _type: \"publish_stats\",\n                              _message: {\n                                stream_type: \"high\",\n                                stats: t\n                              }\n                            };\n                          }(n));\n                        }, o);\n                      } else {\n                        o = 200 * t;\n                        t++, setTimeout(function () {\n                          var e = L.socket && L.socket.getLastMsgTime() && Date.now() - L.socket.getLastMsgTime();\n                          e > Object(y.getParameter)(\"REPORT_STATS_TIMEOUT\") ? v.default.debug(\"PublishStatsLow report blocked by REPORT_STATS_TIMEOUT \".concat(e)) : L.makeReport(function (e) {\n                            var t = {};\n                            return Object.keys(e).forEach(function (n) {\n                              Object(y.getParameter)(\"STATS_FILTER\")[n] || (t[k(n)] = e[n]);\n                            }), {\n                              _type: \"publish_stats\",\n                              _message: {\n                                stream_type: \"low\",\n                                stats: t\n                              }\n                            };\n                          }(n));\n                        }, o);\n                      }\n                    }\n                  });\n                });\n              }\n            }, 3e3);\n\n            var l = function l() {\n              Object(y.getParameter)(\"REPORT_STATS\") && e && e.pc && e.pc.getVideoRelatedStats && e.pc.getVideoRelatedStats(function (t) {\n                var n,\n                    r,\n                    i = L.socket && L.socket.getLastMsgTime() && Date.now() - L.socket.getLastMsgTime();\n                i > Object(y.getParameter)(\"REPORT_STATS_TIMEOUT\") ? v.default.debug(\"PublishRelatedStats report blocked by REPORT_STATS_TIMEOUT \".concat(i)) : e.getId() === e.getUserId() ? L.makeReport((n = t, r = {}, Object.keys(n).forEach(function (e) {\n                  Object(y.getParameter)(\"STATS_FILTER\")[e] || (r[k(e)] = n[e]);\n                }), {\n                  _type: \"publish_related_stats\",\n                  _message: {\n                    stream_type: \"high\",\n                    stats: r\n                  }\n                })) : L.makeReport(function (e) {\n                  var t = {};\n                  return Object.keys(e).forEach(function (n) {\n                    Object(y.getParameter)(\"STATS_FILTER\")[n] || (t[k(n)] = e[n]);\n                  }), {\n                    _type: \"publish_related_stats\",\n                    _message: {\n                      stream_type: \"low\",\n                      stats: t\n                    }\n                  };\n                }(t));\n              });\n            };\n\n            l(), clearInterval(L.timers[e.getId() + \"_RelatedStats\"]), L.timers[e.getId() + \"_RelatedStats\"] = setInterval(l, 1e3);\n          }\n        }\n      }, L.unpublish = function (e, t, n, r) {\n        if (\"object\" !== d()(e) || null === e) return v.default.error(\"[\".concat(L.clientId, \"] Invalid local stream\")), void D(r, b.default.INVALID_LOCAL_STREAM);\n        if (L.state !== R) return v.default.error(\"[\".concat(L.clientId, \"] User not in the session\")), void D(r, b.default.INVALID_OPERATION);\n        if (null != L.timers[e.getId()] && (clearInterval(L.timers[e.getId()]), clearInterval(L.timers[e.getId() + \"_RelatedStats\"])), void 0 !== L.socket) {\n          if (e.local && void 0 !== L.localStreams[e.getId()]) {\n            delete L.localStreams[e.getId()];\n            var i = {\n              stream_id: e.getUserId(),\n              stream_type: 1 === t.streamType ? \"low\" : \"high\"\n            };\n            L.makeRequest({\n              _type: \"unpublish\",\n              _message: i\n            }), (e.hasAudio() || e.hasVideo() || e.hasScreen()) && void 0 === e.url && void 0 !== e.pc && (e.pc.close(), e.pc = void 0), e.onClose = void 0, e._onAudioMute = void 0, e._onAudioUnute = void 0, e._onVideoMute = void 0, e._onVideoUnmute = void 0, L.p2ps.delete(e.p2pId), n && n();\n          } else v.default.error(\"[\".concat(L.clientId, \"] Invalid local stream\")), D(r, b.default.INVALID_LOCAL_STREAM);\n        } else v.default.error(\"[\".concat(L.clientId, \"] User not in the session\")), D(r, b.default.INVALID_OPERATION);\n      }, L.subscribe = function (e, t, n) {\n        var r = new Date().getTime();\n        e.subscribeLTS = r;\n        var o = !1;\n        if (v.default.info(\"[\".concat(L.clientId, \"] Gatewayclient \").concat(L.uid, \" Subscribe \").concat(e.getId(), \": \").concat(JSON.stringify(e.subscribeOptions))), \"object\" !== d()(e) || null === e) return v.default.error(\"[\".concat(L.clientId, \"] Invalid remote stream\")), n && n(b.default.INVALID_REMOTE_STREAM), void E.report.subscribe(L.joinInfo.sid, {\n          lts: r,\n          succ: !1,\n          video: e.subscribeOptions && e.subscribeOptions.video,\n          audio: e.subscribeOptions && e.subscribeOptions.audio,\n          peerid: e.getId(),\n          ec: b.default.INVALID_REMOTE_STREAM\n        });\n        if (L.state !== R && (v.default.error(\"[\".concat(L.clientId, \"] User is not in the session\")), !o)) return o = !0, E.report.subscribe(L.joinInfo.sid, {\n          lts: r,\n          succ: !1,\n          video: e.subscribeOptions && e.subscribeOptions.video,\n          audio: e.subscribeOptions && e.subscribeOptions.audio,\n          peerid: e.getId(),\n          ec: b.default.INVALID_OPERATION\n        }), n && n(b.default.INVALID_OPERATION);\n        if (!e.local && L.remoteStreams.hasOwnProperty(e.getId())) {\n          if (e.hasAudio() || e.hasVideo() || e.hasScreen()) {\n            var s = L.generateP2PId();\n            L.p2ps.set(s, e), e.p2pId = s, e.pc = Object(I.a)({\n              callback: function callback(t) {\n                t || n && n(\"CANNOT_GET_OFFER\");\n                var i = {\n                  stream_id: e.getId(),\n                  audio: !e.subscribeOptions || e.subscribeOptions.audio,\n                  video: !e.subscribeOptions || e.subscribeOptions.video,\n                  codec: L.codec,\n                  p2p_id: s,\n                  sdp: t,\n                  tcc: Object(y.getParameter)(\"SUBSCRIBE_TCC\"),\n                  extend: Object(y.getParameter)(\"SUB_EXTEND\")\n                };\n                L.makeRequest({\n                  _type: \"subscribe\",\n                  _message: i\n                }, function (t) {\n                  e.pc.processSignalingMessage(t.sdp);\n                }, function (t, i) {\n                  v.default.error(\"[\".concat(L.clientId, \"] Subscribe remote stream Failed: \").concat(t, \", closing stream \"), e.getId(), i), E.report.subscribe(L.joinInfo.sid, {\n                    lts: r,\n                    succ: !1,\n                    video: e.subscribeOptions && e.subscribeOptions.video,\n                    audio: e.subscribeOptions && e.subscribeOptions.audio,\n                    peerid: e.getId(),\n                    ec: t\n                  }), \"TIMEOUT\" != t && (L.processSubscribeFailure(e), n && n(t));\n                });\n              },\n              nop2p: !0,\n              audio: !0,\n              video: !0,\n              screen: e.hasScreen(),\n              isSubscriber: !0,\n              stunServerUrl: L.stunServerUrl,\n              turnServers: L.joinInfo.turnServers,\n              isVideoMute: e.userMuteVideo,\n              isAudioMute: e.userMuteAudio,\n              uid: e.getId(),\n              agoraStream: e,\n              clientId: L.clientId\n            }), e.pc.onaddstream = function (t, n) {\n              if (e._onAudioUnmute = function () {\n                L.makeReport(i({\n                  action: \"unmute_remote_audio\",\n                  stream_id: e.getId()\n                }), function () {}, function () {});\n              }, e._onAudioMute = function () {\n                L.makeReport(i({\n                  action: \"mute_remote_audio\",\n                  stream_id: e.getId()\n                }), function () {}, function () {});\n              }, e._onVideoUnmute = function () {\n                L.makeReport(i({\n                  action: \"unmute_remote_video\",\n                  stream_id: e.getId()\n                }), function () {}, function () {});\n              }, e._onVideoMute = function () {\n                L.makeReport(i({\n                  action: \"mute_remote_video\",\n                  stream_id: e.getId()\n                }), function () {}, function () {});\n              }, \"ontrack\" === n && \"video\" === t.track.kind || \"onaddstream\" === n) {\n                v.default.info(\"[\".concat(L.clientId, \"] Remote stream subscribed with uid \"), e.getId());\n                var r = L.remoteStreams[e.getId()];\n\n                if (L.remoteStreams[e.getId()].stream = \"onaddstream\" === n ? t.stream : t.streams[0], L.remoteStreams[e.getId()].hasVideo()) {\n                  if (Object(O.isFireFox)() || Object(O.isSafari)()) {\n                    var o = L.remoteStreams[e.getId()].stream;\n                    Object(S.vsResHack)(o, function (t, n) {\n                      e.videoWidth = t, e.videoHeight = n;\n                    }, function (e) {\n                      return v.default.warning(\"[\".concat(L.clientId, \"] vsResHack failed: \") + e);\n                    });\n                  }\n                } else {\n                  var a = L.remoteStreams[e.getId()];\n                  a.peerMuteVideo = !0, L._adjustPCMuteStatus(a);\n                }\n\n                r && r.isPlaying() && r.elementID && (v.default.debug(\"[\".concat(L.clientId, \"] Reload Player \").concat(r.elementID, \" StreamId \").concat(r.getId())), e.audioOutput = r.audioOutput, r.stop(), e.play(r.elementID, r.playOptions)), delete e.audioLevelHelper;\n                var s = Object(m.e)({\n                  type: \"stream-subscribed\",\n                  stream: L.remoteStreams[e.getId()]\n                });\n                L.dispatchEvent(s);\n              }\n            }, clearInterval(L.timers[e.getId()]), L.timers[e.getId()] = setInterval(function () {\n              if (Object(y.getParameter)(\"REPORT_STATS\")) {\n                var t = 0;\n                e && e.pc && e.pc.getStats && e.pc.getStatsRate(function (n) {\n                  n.forEach(function (n) {\n                    if (n && n.id) {\n                      if (/_send$/.test(n.id) || /^time$/.test(n.id) || /^bweforvideo$/.test(n.id)) return;\n                      -1 === n.id.indexOf(\"inbound_rtp\") && -1 === n.id.indexOf(\"inbound-rtp\") && -1 === n.type.toLowerCase().indexOf(\"inbound\") || \"video\" !== n.mediaType || (n.googFrameWidthReceived = e.videoWidth + \"\", n.googFrameHeightReceived = e.videoHeight + \"\");\n                      var r = 200 * t;\n                      t++;\n                      var i = e.getId();\n                      setTimeout(function () {\n                        var t = L.socket && L.socket.getLastMsgTime() && Date.now() - L.socket.getLastMsgTime();\n                        if (t > Object(y.getParameter)(\"REPORT_STATS_TIMEOUT\")) v.default.debug(\"SubscribeStats report blocked by REPORT_STATS_TIMEOUT \".concat(t));else {\n                          if (\"video\" === n.mediaType) try {\n                            var r = e.stream.getVideoTracks()[0];\n                            n.A_vrtd = r.enabled ? \"0\" : \"1\", e.player && e.player.freezeTimeCounterList.length > 0 && (n.A_vrft = e.player.freezeTimeCounterList.splice(0, 1)[0].toString());\n                          } catch (e) {}\n                          if (\"audio\" === n.mediaType) try {\n                            var o = e.stream.getAudioTracks()[0];\n                            n.A_artd = o.enabled ? \"0\" : \"1\";\n                          } catch (e) {}\n                          L.makeReport(u(i, n));\n                        }\n                      }, r);\n                    } else ;\n                  });\n                });\n              }\n            }, 3e3), clearInterval(L.timers[e.getId() + \"_RelatedStats\"]), L.timers[e.getId() + \"_RelatedStats\"] = setInterval(function () {\n              if (Object(y.getParameter)(\"REPORT_STATS\") && e && e.pc) {\n                var t = L.socket && L.socket.getLastMsgTime() && Date.now() - L.socket.getLastMsgTime();\n                if (t > Object(y.getParameter)(\"REPORT_STATS_TIMEOUT\")) return void v.default.debug(\"SubscribeRelatedStats report blocked by REPORT_STATS_TIMEOUT \".concat(t));\n                e.pc.getVideoRelatedStats && e.pc.getVideoRelatedStats(function (t) {\n                  e.player && (e.hasVideo() && !e.peerMuteVideo && (t.isFreeze = e.player.freezeCount > e.player.lastFreezeCount), e.player.lastFreezeCount = e.player.freezeCount), L.makeReport(a(e.getId(), t));\n                }), e.pc.getAudioRelatedStats && e.pc.getAudioRelatedStats(function (t) {\n                  L.makeReport(a(e.getId(), t));\n                });\n              }\n            }, 1e3), L.audioLevel[e.getId()] = 0, clearInterval(L.timers[e.getId() + \"audio\"]), L.timers[e.getId() + \"audio\"] = setInterval(function () {\n              L.hasListeners(\"active-speaker\") && e && e.pc && \"established\" === e.pc.state && e.pc.getStats && e.pc.getStats(function (t) {\n                t.forEach(function (t) {\n                  if (\"audio\" === t.mediaType) {\n                    if (t.audioOutputLevel > 5e3) for (var n in L.audioLevel[e.getId()] < 20 && (L.audioLevel[e.getId()] += 1), L.audioLevel) {\n                      n !== \"\" + e.getId() && L.audioLevel[n] > 0 && (L.audioLevel[n] -= 1);\n                    }\n                    var r = Object.keys(L.audioLevel).sort(function (e, t) {\n                      return L.audioLevel[t] - L.audioLevel[e];\n                    });\n\n                    if (L.activeSpeaker !== r[0]) {\n                      var i = Object(m.a)({\n                        type: \"active-speaker\",\n                        uid: r[0]\n                      });\n                      L.dispatchEvent(i), L.activeSpeaker = r[0], v.default.debug(\"[\".concat(L.clientId, \"] Update active speaker: \").concat(L.activeSpeaker));\n                    }\n                  }\n                });\n              }, 50);\n            }, 50), e.pc.oniceconnectionstatechange = function (i) {\n              if (\"failed\" === i) null != L.timers[e.getId()] && (clearInterval(L.timers[e.getId()]), clearInterval(L.timers[e.getId()] + \"audio\")), v.default.error(\"[\".concat(L.clientId, \"] Subscriber connection is lost -- streamId: \").concat(e.getId(), \", p2pId: \").concat(s)), v.default.debug(\"[\".concat(L.clientId, \"] subscribe p2p failed: \"), L.p2ps), o || (o = !0, n && n(b.default.PEERCONNECTION_FAILED), E.report.subscribe(L.joinInfo.sid, {\n                lts: r,\n                succ: !1,\n                video: e.subscribeOptions && e.subscribeOptions.video,\n                audio: e.subscribeOptions && e.subscribeOptions.audio,\n                peerid: e.getId(),\n                ec: b.default.PEERCONNECTION_FAILED,\n                subscribeRequestid: L.subscribeRequestId.get(e.getId()) || 0,\n                p2pid: s\n              })), L.remoteStreams[e.getId()] && L.p2ps.has(s) && (L.p2ps.delete(s), L.dispatchEvent(Object(m.a)({\n                type: \"subP2PLost\",\n                stream: e\n              })));else if (\"connected\" === i && (v.default.debug(\"[\".concat(L.clientId, \"] subscribe p2p connected: \"), L.p2ps), !o)) {\n                o = !0, E.report.subscribe(L.joinInfo.sid, {\n                  lts: r,\n                  succ: !0,\n                  video: e.subscribeOptions && e.subscribeOptions.video,\n                  audio: e.subscribeOptions && e.subscribeOptions.audio,\n                  peerid: e.getId(),\n                  ec: null,\n                  subscribeRequestid: L.subscribeRequestId.get(e.getId()) || 0,\n                  p2pid: s\n                }), L._adjustPCMuteStatus(e);\n                var a = !1,\n                    c = !1,\n                    d = !1,\n                    u = setInterval(function () {\n                  a && c || (e.pc ? e.pc.getStats(function (t) {\n                    t.forEach(function (t) {\n                      if ((-1 !== t.id.indexOf(\"recv\") || t.type && -1 !== t.type.toLowerCase().indexOf(\"inbound\") || -1 !== t.id.indexOf(\"inbound_rtp\") || -1 !== t.id.indexOf(\"inbound-rtp\") || -1 !== t.id.indexOf(\"InboundRTP\")) && \"audio\" === t.mediaType) {\n                        if ((t.googDecodingNormal > 0 || t.audioOutputLevel > 0) && !a) {\n                          a = !0, L.dispatchEvent({\n                            type: \"first-audio-frame-decode\",\n                            stream: e\n                          }), a && c && clearInterval(u);\n                          var n = Date.now(),\n                              r = E.report.getSessionStartTime(L.joinInfo.sid);\n                          E.report.firstAudioDecode(L.joinInfo.sid, {\n                            peerid: e.uintId,\n                            uid: L.uid,\n                            elapse: n - r,\n                            subscribeElapse: n - e.subscribeLTS,\n                            subscribeRequestid: L.subscribeRequestId.get(e.getId()) || 0,\n                            p2pid: s\n                          });\n                        }\n\n                        if (parseInt(t.packetsReceived) > 0 && !c) {\n                          c = !0, L.dispatchEvent({\n                            type: \"first-audio-packet-received\",\n                            stream: e\n                          }), a && c && clearInterval(u);\n                          n = Date.now(), r = E.report.getSessionStartTime(L.joinInfo.sid);\n                          E.report.firstAudioReceived(L.joinInfo.sid, {\n                            peerid: e.uintId,\n                            uid: L.uid,\n                            elapse: n - r,\n                            subscribeElapse: n - e.subscribeLTS,\n                            subscribeRequestid: L.subscribeRequestId.get(e.getId()) || 0,\n                            p2pid: s\n                          });\n                        }\n                      }\n                    });\n                  }, 100) : clearInterval(u));\n                }, 100),\n                    l = !1,\n                    f = !1,\n                    p = setInterval(function () {\n                  l && f || (e.pc ? e.pc.getStats(function (t) {\n                    t.forEach(function (t) {\n                      if ((-1 !== t.id.indexOf(\"recv\") || t.type && -1 !== t.type.toLowerCase().indexOf(\"inbound\") || -1 !== t.id.indexOf(\"inbound_rtp\") || -1 !== t.id.indexOf(\"inbound-rtp\") || -1 !== t.id.indexOf(\"InboundRTP\")) && \"video\" === t.mediaType) {\n                        if ((t.framesDecoded > 0 || t.googFramesDecoded > 0) && !l) {\n                          l = !0, L.dispatchEvent({\n                            type: \"first-video-frame-decode\",\n                            stream: e\n                          }), l && f && clearInterval(p);\n                          var n = Date.now(),\n                              r = E.report.getSessionStartTime(L.joinInfo.sid);\n                          e.firstFrameTime = new Date().getTime() - e.subscribeLTS, E.report.firstVideoDecode(L.joinInfo.sid, {\n                            peerid: e.uintId,\n                            width: parseInt(t.googFrameWidthReceived) || 0,\n                            height: parseInt(t.googFrameHeightReceived) || 0,\n                            uid: L.uid,\n                            elapse: n - r,\n                            subscribeElapse: n - e.subscribeLTS,\n                            subscribeRequestid: L.subscribeRequestId.get(e.getId()) || 0,\n                            p2pid: s\n                          });\n                        }\n\n                        if (t.packetsReceived > 0 && !f) {\n                          f = !0, L.dispatchEvent({\n                            type: \"first-video-packet-received\",\n                            stream: e\n                          }), l && f && clearInterval(p);\n                          n = Date.now(), r = E.report.getSessionStartTime(L.joinInfo.sid);\n                          E.report.firstVideoReceived(L.joinInfo.sid, {\n                            peerid: e.uintId,\n                            uid: L.uid,\n                            elapse: n - r,\n                            subscribeElapse: n - e.subscribeLTS,\n                            subscribeRequestid: L.subscribeRequestId.get(e.getId()) || 0,\n                            p2pid: s\n                          });\n                        }\n                      }\n                    });\n                  }, 100) : clearInterval(p));\n                }, 100),\n                    g = setInterval(function () {\n                  if (!d) {\n                    var t = e.getId(),\n                        n = L.traffic_stats;\n\n                    if (n && n.peer_delay) {\n                      var r = n.peer_delay.find(function (e) {\n                        return e.peer_uid == t;\n                      });\n\n                      if (r) {\n                        if (d = !0, L.peerPublishDurationMap.get(e.getId())) return void clearInterval(g);\n                        var i = r.peer_publish_audio_duration,\n                            o = r.peer_publish_video_duration;\n                        if (void 0 === i || void 0 === o) return;\n                        L.peerPublishDurationMap.set(e.getId(), !0);\n                        var a = E.report.getSessionStartTime(L.joinInfo.sid),\n                            s = (i || o) + (Date.now() - n.timestamp),\n                            c = Date.now();\n                        E.report.peerPublishStatus({\n                          audiotag: i ? 1 : -1,\n                          videotag: o ? 1 : -1,\n                          lts: c,\n                          sid: L.joinInfo.sid,\n                          cname: L.joinInfo.cname,\n                          cid: L.joinInfo.cid,\n                          uid: L.joinInfo.uid,\n                          elapse: c - a,\n                          peer: e.uintId,\n                          peerPublishDuration: s,\n                          joinChannelSuccessElapse: c - L.joinSuccessLts,\n                          subscribeElapse: c - e.subscribeLTS\n                        }), clearInterval(g);\n                      }\n                    }\n                  }\n                }, 1e3);\n                return e.sid = L.joinInfo.sid, t && t();\n              }\n            };\n          } else v.default.error(\"[\".concat(L.clientId, \"] Invalid remote stream\")), o || (o = !0, n && n(b.default.INVALID_REMOTE_STREAM), E.report.subscribe(L.joinInfo.sid, {\n            lts: r,\n            succ: !1,\n            video: e.subscribeOptions && e.subscribeOptions.video,\n            audio: e.subscribeOptions && e.subscribeOptions.audio,\n            peerid: e.getId(),\n            ec: b.default.INVALID_REMOTE_STREAM\n          }));\n        } else v.default.error(\"[\".concat(L.clientId, \"] No such remote stream\")), o || (o = !0, n && n(b.default.NO_SUCH_REMOTE_STREAM), E.report.subscribe(L.joinInfo.sid, {\n          lts: r,\n          succ: !1,\n          video: e.subscribeOptions && e.subscribeOptions.video,\n          audio: e.subscribeOptions && e.subscribeOptions.audio,\n          peerid: e.getId(),\n          ec: b.default.NO_SUCH_REMOTE_STREAM\n        }));\n      }, L.subscribeChange = function (e, t, n) {\n        var r = Date.now();\n        v.default.info(\"[\".concat(L.clientId, \"] Gatewayclient \").concat(L.uid, \" SubscribeChange \").concat(e.getId(), \": \").concat(JSON.stringify(e.subscribeOptions))), L._adjustPCMuteStatus(e);\n        var i = {\n          stream_id: e.getId(),\n          audio: e.subscribeOptions.audio,\n          video: e.subscribeOptions.video\n        };\n        L.makeRequest({\n          _type: \"subscribe_change\",\n          _message: i\n        }, function (n) {\n          var i = Object(m.e)({\n            type: \"stream-subscribe-changed\",\n            stream: L.remoteStreams[e.getId()]\n          });\n          E.report.subscribe(L.joinInfo.sid, {\n            lts: r,\n            succ: !0,\n            video: e.subscribeOptions && e.subscribeOptions.video,\n            audio: e.subscribeOptions && e.subscribeOptions.audio,\n            peerid: e.getId(),\n            ec: null,\n            subscribeRequestid: L.subscribeRequestId.get(e.getId()) || 0,\n            p2pid: L.p2ps.get(e.getId())\n          }), L.dispatchEvent(i), t && t();\n        }, function (t, r) {\n          v.default.error(\"[\".concat(L.clientId, \"] Subscribe Change Failed \").concat(e.getId()), t, r), n && n(t, r);\n        });\n      }, L.processPublishFailure = function (e) {\n        e.publishLTS = null, e.p2pId && L.p2ps.get(e.p2pId) === e && L.p2ps.delete(e.p2pId), L.localStreams[e.getUserId()] === e && delete L.localStreams[e.getUserId()], L.localStreams[e.getId()] === e && delete L.localStreams[e.getId()], e.pc && (e.pc.processSignalingMessage = function () {}, e.pc.oniceconnectionstatechange = function () {}, e.pc.close(), delete e.pc), delete e.onClose, delete e._onAudioUnmute, delete e._onVideoUnmute, delete e._onAudioMute, delete e._onVideoMute, delete e._onAudioUnmute;\n      }, L.processSubscribeFailure = function (e) {\n        e.p2pId && L.p2ps.get(e.p2pId) === e && L.p2ps.delete(e.p2pId), e.pc && (e.pc.onaddstream = function () {}, e.pc.processSignalingMessage = function () {}, e.pc.oniceconnectionstatechange = function () {}, e.pc.close(), delete e.pc), delete e.onClose, delete e._onAudioUnmute, delete e._onVideoUnmute, delete e._onAudioMute, delete e._onVideoMute, delete e._onAudioUnmute;\n      }, L._adjustPCMuteStatus = function (e) {\n        (v.default.debug(\"[\".concat(L.clientId, \"]: use _adjustPCMuteStatus: \").concat(e.getId())), v.default.debug(\"[\".concat(L.clientId, \"]: video: \").concat(e.video, \", audio: \").concat(e.audio, \", suboption: \").concat(JSON.stringify(e.subscribeOptions), \",userMuteVideo: \").concat(e.userMuteVideo, \", peerMuteVideo: \").concat(e.peerMuteVideo, \", userMuteAudio: \").concat(e.userMuteAudio, \", peerMuteAudio: \").concat(e.peerMuteAudio)), !e.local && e.pc && e.pc.peerConnection.getReceivers) && e.pc.peerConnection.getReceivers().forEach(function (t) {\n          if (t && t.track && \"audio\" === t.track.kind) {\n            var n = !e.userMuteAudio && !e.peerMuteAudio;\n            e.subscribeOptions && !e.subscribeOptions.audio && (n = !1), v.default.debug(\"[\".concat(L.clientId, \"]: set receiver audio track: \").concat(n)), t.track.enabled = !!n;\n          } else if (t && t.track && \"video\" === t.track.kind) {\n            var r = !e.userMuteVideo && !e.peerMuteVideo;\n            e.subscribeOptions && !e.subscribeOptions.video && (r = !1), v.default.debug(\"[\".concat(L.clientId, \"]: set receiver video track: \").concat(r)), t.track.enabled = !!r;\n          }\n        });\n      }, L.unsubscribe = function (e, t, n) {\n        if (\"object\" !== d()(e) || null === e) return v.default.error(\"[\".concat(L.clientId, \"] Invalid remote stream\")), void D(n, b.default.INVALID_REMOTE_STREAM);\n        if (L.state !== R) return v.default.error(\"[\".concat(L.clientId, \"] User is not in the session\")), void D(n, b.default.INVALID_OPERATION);\n\n        if (null != L.timers[e.getId()] && (clearInterval(L.timers[e.getId()]), clearInterval(L.timers[e.getId()] + \"audio\")), null != L.audioLevel[e.getId()] && delete L.audioLevel[e.getId()], null != L.timer_counter[e.getId()] && delete L.timer_counter[e.getId()], L.remoteStreams.hasOwnProperty(e.getId())) {\n          if (!L.socket) return v.default.error(\"[\".concat(L.clientId, \"] User is not in the session\")), void D(n, b.default.INVALID_OPERATION);\n          if (e.local) return v.default.error(\"[\".concat(L.clientId, \"] Invalid remote stream\")), void D(n, b.default.INVALID_REMOTE_STREAM);\n          e.close(), e.stop();\n          var r = {\n            stream_id: e.getId()\n          };\n          L.makeRequest({\n            _type: \"unsubscribe\",\n            _message: r\n          }), void 0 !== e.pc && (e.pc.close(), e.pc = void 0), e.onClose = void 0, e._onAudioMute = void 0, e._onAudioUnute = void 0, e._onVideoMute = void 0, e._onVideoUnmute = void 0, delete e.subscribeOptions, L.p2ps.delete(e.p2pId), v.default.info(\"[\".concat(L.clientId, \"] Unsubscribe stream success\")), t && t();\n        } else D(n, b.default.NO_SUCH_REMOTE_STREAM);\n      }, L.setRemoteVideoStreamType = function (e, t) {\n        if (v.default.debug(\"[\".concat(L.clientId, \"] Switching remote video stream \").concat(e.getId(), \" to \").concat(t)), \"object\" === d()(e) && null !== e) {\n          if (L.state === R) {\n            if (!e.local) {\n              switch (t) {\n                case L.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_HIGH:\n                case L.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_LOW:\n                case L.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_MEDIUM:\n                  break;\n\n                default:\n                  return;\n              }\n\n              var n = {\n                stream_id: e.getId(),\n                stream_type: t\n              };\n              L.makeRequest({\n                _type: \"switch_video_stream\",\n                _message: n\n              }, function () {\n                v.default.debug(\"SwitchVideoStream Success \".concat(n.stream_id, \" \").concat(n.stream_type));\n              }, function (e, t) {\n                v.default.error(\"SwitchVideoStream Error \".concat(e, \" \").concat(n.stream_id, \" \").concat(n.stream_type), t);\n              });\n            }\n          } else v.default.error(\"[\".concat(L.clientId, \"] User is not in the session\"));\n        } else v.default.error(\"[\".concat(L.clientId, \"] Invalid remote stream\"));\n      }, L.renewToken = function (e, t, n) {\n        e ? L.key ? L.state !== R ? (v.default.debug(\"[\".concat(L.clientId, \"] Client is not connected. Trying to rejoin\")), L.key = e, L.rejoin(), t && t()) : (v.default.debug(\"[\".concat(L.clientId, \"] renewToken from \").concat(L.key, \" to \").concat(e)), L.key = e, L.makeRequest({\n          _type: \"renew_token\",\n          _message: {\n            token: e\n          }\n        }, t, n)) : (v.default.error(\"[\".concat(L.clientId, \"] Client is previously joined without token\")), n && n(b.default.INVALID_PARAMETER)) : (v.default.error(\"[\".concat(L.clientId, \"] Invalid Token \").concat(e)), n && n(b.default.INVALID_PARAMETER));\n      }, L.setStreamFallbackOption = function (e, t) {\n        if (v.default.debug(\"[\".concat(L.clientId, \"] Set stream fallback option \").concat(e.getId(), \" to \").concat(t)), \"object\" === d()(e) && null !== e) {\n          if (L.state === R) {\n            if (!e.local) {\n              switch (t) {\n                case L.streamFallbackTypes.STREAM_FALLBACK_OPTION_DISABLED:\n                case L.streamFallbackTypes.STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:\n                case L.streamFallbackTypes.STREAM_FALLBACK_OPTION_AUDIO_ONLY:\n                  break;\n\n                default:\n                  return;\n              }\n\n              var n = {\n                stream_id: e.getId(),\n                fallback_type: t\n              };\n              L.makeRequest({\n                _type: \"set_fallback_option\",\n                _message: n\n              }, function () {\n                v.default.debug(\"SetStreamFallbackOption success \".concat(n.stream_id, \" \").concat(t));\n              }, function (e, r) {\n                v.default.error(\"Failed to SetStreamFallbackOption \".concat(n.stream_id, \" \").concat(t, \" \").concat(e), r);\n              });\n            }\n          } else v.default.error(\"[\".concat(L.clientId, \"] User is not in the session\"));\n        } else v.default.error(\"[\".concat(L.clientId, \"] Invalid remote stream\"));\n      }, L.enableAudioVolumeIndicator = function (e, t) {\n        L.audioVolumeIndication.enabled = !0, L.audioVolumeIndication.interval = e, L.audioVolumeIndication.smooth = t, L.resetAudioVolumeIndication();\n      }, L.resetAudioVolumeIndication = function () {\n        if (clearInterval(L.timers.audioVolumeIndication), clearInterval(L.timers.audioVolumeSampling), L.audioVolumeIndication.enabled && L.audioVolumeIndication.interval) {\n          var e = Math.floor(1e3 * L.audioVolumeIndication.smooth / 100);\n          clearInterval(L.timers.audioVolumeSampling), L.timers.audioVolumeSampling = setInterval(function () {\n            L.audioVolumeSampling || (L.audioVolumeSampling = {});\n            var t = {};\n\n            for (var n in L.remoteStreams) {\n              var r = L.remoteStreams[n];\n\n              if (r.stream && r.hasAudio()) {\n                var i = r.getAudioLevel();\n                i > 0 && i < 1 && (i *= 100);\n                var o = L.audioVolumeSampling[n] || [];\n\n                for (o.push(i); o.length > e;) {\n                  o.shift();\n                }\n\n                t[n] = o;\n              }\n            }\n\n            L.audioVolumeSampling = t;\n          }, 100), clearInterval(L.timers.audioVolumeIndication), L.timers.audioVolumeIndication = setInterval(function () {\n            if (L.socket && L.socket.signal && L.socket.signal.connection && L.socket.signal.connection.readyState === WebSocket.OPEN) {\n              var e = [];\n\n              for (var t in L.remoteStreams) {\n                if (L.audioVolumeSampling && L.audioVolumeSampling[t]) {\n                  var n = L.audioVolumeSampling[t],\n                      r = 0;\n                  n.forEach(function (e) {\n                    r += e;\n                  });\n                  var i = {\n                    uid: t,\n                    level: Math.floor(r / n.length)\n                  };\n                  i.level && e.push(i);\n                }\n              }\n\n              var o = e.sort(function (e, t) {\n                return e.level - t.level;\n              });\n              v.default.debug(\"[\".concat(L.clientId, \"] volume-indicator \"), JSON.stringify(o)), L.audioVolumeIndication.sortedAudioVolumes = o;\n              var a = Object(m.a)({\n                type: \"volume-indicator\",\n                attr: o\n              });\n              L.dispatchEvent(a);\n            }\n          }, L.audioVolumeIndication.interval);\n        }\n      }, L.closeGateway = function () {\n        v.default.debug(\"[\".concat(L.clientId, \"] close gateway\")), L.state = f, L.socket.close(), B();\n      }, L.startChannelMediaRelay = function () {\n        var e = s()(o.a.mark(function e(t) {\n          var n, r, i, a;\n          return o.a.wrap(function (e) {\n            for (;;) {\n              switch (e.prev = e.next) {\n                case 0:\n                  if (!L.channelMediaRelayController) {\n                    e.next = 2;\n                    break;\n                  }\n\n                  throw new P.ChannelMediaError(\"RELAY_ALREADY_START\", \"\", P.CHANNEL_MEDIA_RELAY_ERROR.RELAY_ALREADY_START);\n\n                case 2:\n                  return n = function n(e) {\n                    L.dispatchEvent({\n                      type: \"channel-media-relay-event\",\n                      code: e\n                    });\n                  }, r = function r(e, t, n) {\n                    e === P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE && t === P.CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST && (L.channelMediaRelayController.dispose(), L.channelMediaRelayController = null), L.dispatchEvent({\n                      type: \"channel-media-relay-state\",\n                      state: e,\n                      code: t,\n                      data: n\n                    });\n                  }, L.channelMediaRelayController = new x.a(L.joinInfo, L.clientId), L.channelMediaRelayController.on(\"event\", n), L.channelMediaRelayController.on(\"state\", r), e.prev = 7, e.next = 10, L.channelMediaRelayController.startChannelMediaRelay(t);\n\n                case 10:\n                  e.next = 22;\n                  break;\n\n                case 12:\n                  throw e.prev = 12, e.t0 = e.catch(7), v.default.debug(\"[\".concat(L.clientId, \"] startChannelMediaRelay exception: \").concat(JSON.stringify(e.t0))), i = P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE, a = \"\", a = e.t0 instanceof P.ChannelMediaError ? \"SetSourceChannelStatus\" === e.t0.data || e.t0.data && e.t0.data.serverResponse && \"SetSourceChannel\" === e.t0.data.serverResponse.command ? \"FAILED_JOIN_SRC\" : \"SetDestChannelStatus\" === e.t0.data || e.t0.data && e.t0.data.serverResponse && \"SetDestChannel\" === e.t0.data.serverResponse.command ? \"FAILED_JOIN_DEST\" : e.t0.data && e.t0.data.serverResponse && \"StartPacketTransfer\" === e.t0.data.serverResponse.command ? \"FAILED_PACKET_SENT_TO_DEST\" : e.t0.message === P.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT || e.t0.message === P.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT ? \"SERVER_NO_RESPONSE\" : e.t0.message === P.CHANNEL_MEDIA_ERROR.REQUEST_FAILED || e.t0.message === P.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR ? \"SERVER_ERROR_RESPONSE\" : e.t0.message === P.CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT ? \"NO_RESOURCE_AVAILABLE\" : e.t0.message === P.CHANNEL_MEDIA_ERROR.WS_ABORT || e.t0.message === P.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT ? \"OPERATION_ABORT\" : \"INTERNAL_ERROR\" : \"INTERNAL_ERROR\", L.dispatchEvent({\n                    type: \"channel-media-relay-state\",\n                    state: i,\n                    code: P.CHANNEL_MEDIA_RELAY_ERROR[a]\n                  }), L.channelMediaRelayController && (L.channelMediaRelayController.dispose(), L.channelMediaConfig = null, L.channelMediaRelayController = null), L.dispatchEvent({\n                    type: \"channel-media-relay-state\",\n                    state: P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE\n                  }), new P.ChannelMediaError(a, null, P.CHANNEL_MEDIA_RELAY_ERROR[a]);\n\n                case 22:\n                  L.dispatchEvent({\n                    type: \"channel-media-relay-state\",\n                    state: P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING,\n                    code: P.CHANNEL_MEDIA_RELAY_ERROR.RELAY_OK\n                  }), L.channelMediaConfig = t;\n\n                case 24:\n                case \"end\":\n                  return e.stop();\n              }\n            }\n          }, e, null, [[7, 12]]);\n        }));\n        return function (t) {\n          return e.apply(this, arguments);\n        };\n      }(), L.updateChannelMediaRelay = function () {\n        var t = s()(o.a.mark(function t(n) {\n          var r, i;\n          return o.a.wrap(function (t) {\n            for (;;) {\n              switch (t.prev = t.next) {\n                case 0:\n                  if (L.channelMediaRelayController) {\n                    t.next = 2;\n                    break;\n                  }\n\n                  throw new P.ChannelMediaError(\"RELAY_NOT_START\", null, P.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);\n\n                case 2:\n                  return t.prev = 2, t.next = 5, L.channelMediaRelayController.updateChannelMediaRelay(n);\n\n                case 5:\n                  t.next = 18;\n                  break;\n\n                case 7:\n                  throw t.prev = 7, t.t0 = t.catch(2), v.default.debug(\"[\".concat(L.clientId, \"] updateChannelMediaRelay exception: \").concat(JSON.stringify(e))), r = P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE, i = \"\", i = e instanceof P.ChannelMediaError ? e.message === P.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT || e.message === P.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT ? \"SERVER_NO_RESPONSE\" : e.message === P.CHANNEL_MEDIA_ERROR.REQUEST_FAILED || e.message === P.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR ? \"SERVER_ERROR_RESPONSE\" : e.message === P.CHANNEL_MEDIA_ERROR.WS_ABORT || e.message === P.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT ? \"OPERATION_ABORT\" : \"INTERNAL_ERROR\" : \"INTERNAL_ERROR\", L.dispatchEvent({\n                    type: \"channel-media-relay-event\",\n                    code: P.CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL_REFUSED\n                  }), L.dispatchEvent({\n                    type: \"channel-media-relay-state\",\n                    state: r,\n                    code: P.CHANNEL_MEDIA_RELAY_ERROR[i]\n                  }), L.channelMediaRelayController && (L.channelMediaRelayController.dispose(), L.channelMediaConfig = null, L.channelMediaRelayController = null), L.dispatchEvent({\n                    type: \"channel-media-relay-state\",\n                    state: P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE\n                  }), new P.ChannelMediaError(i, null, P.CHANNEL_MEDIA_RELAY_ERROR[i]);\n\n                case 18:\n                  L.channelMediaConfig = n;\n\n                case 19:\n                case \"end\":\n                  return t.stop();\n              }\n            }\n          }, t, null, [[2, 7]]);\n        }));\n        return function (e) {\n          return t.apply(this, arguments);\n        };\n      }(), L.stopChannelMediaRelay = s()(o.a.mark(function t() {\n        var n, r;\n        return o.a.wrap(function (t) {\n          for (;;) {\n            switch (t.prev = t.next) {\n              case 0:\n                if (L.channelMediaRelayController) {\n                  t.next = 2;\n                  break;\n                }\n\n                throw new P.ChannelMediaError(\"RELAY_NOT_START\", null, P.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);\n\n              case 2:\n                return t.prev = 2, t.next = 5, L.channelMediaRelayController.stopChannelMediaRelay();\n\n              case 5:\n                t.next = 17;\n                break;\n\n              case 7:\n                throw t.prev = 7, t.t0 = t.catch(2), v.default.debug(\"[\".concat(L.clientId, \"] stopChannelMediaRelay exception: \").concat(JSON.stringify(e))), n = P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE, r = \"\", r = e instanceof P.ChannelMediaError ? e.message === P.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT || e.message === P.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT ? \"SERVER_NO_RESPONSE\" : e.message === P.CHANNEL_MEDIA_ERROR.REQUEST_FAILED || e.message === P.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR ? \"SERVER_ERROR_RESPONSE\" : \"INTERNAL_ERROR\" : \"INTERNAL_ERROR\", L.dispatchEvent({\n                  type: \"channel-media-relay-state\",\n                  state: n,\n                  code: P.CHANNEL_MEDIA_RELAY_ERROR[r]\n                }), L.channelMediaRelayController && (L.channelMediaRelayController.dispose(), L.channelMediaConfig = null, L.channelMediaRelayController = null), L.dispatchEvent({\n                  type: \"channel-media-relay-state\",\n                  state: P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE\n                }), new P.ChannelMediaError(r, null, P.CHANNEL_MEDIA_RELAY_ERROR[r]);\n\n              case 17:\n                L.channelMediaConfig = null, L.channelMediaRelayController = null;\n\n              case 19:\n              case \"end\":\n                return t.stop();\n            }\n          }\n        }, t, null, [[2, 7]]);\n      })), L.sendMetadata = function (e, t) {\n        L.makeRequest(function (e) {\n          return {\n            _type: \"send_metadata\",\n            _message: {\n              session_id: L.joinInfo.sid,\n              metadata: window.btoa(unescape(encodeURIComponent(e)))\n            }\n          };\n        }(e), function () {\n          v.default.debug(\"[\".concat(L.clientId, '] send metadata \"').concat(e, '\" success')), t && t(null);\n        }, function (n) {\n          v.default.error(\"[\".concat(L.clientId, '] send metadata \"').concat(e, '\" failed'), n), t && t(n);\n        });\n      }, L._reportWebsocketCloseEvent = function (e, t) {\n        try {\n          var n = E.report.getSessionStartTime(L.joinInfo.sid),\n              r = Date.now();\n          E.report.webSocketQuit({\n            lts: r,\n            sid: L.joinInfo.sid,\n            cname: L.joinInfo.cname,\n            cid: L.joinInfo.cid,\n            uid: L.joinInfo.uid,\n            elapse: r - n,\n            succ: e,\n            errorCode: t,\n            ip: null\n          });\n        } catch (e) {\n          v.default.debug(\"[\".concat(L.clientId, \"]: _reportWebsocketCloseEvent exception, \").concat(e));\n        }\n      };\n\n      var j = function j() {\n        v.default.debug(\"[\".concat(L.clientId, \"] Reconnect gateway\")), L.state = f, L.socket.close(), B(), L.reconnectMode = \"recover\", L.state = _, F();\n      };\n\n      L.recover = j;\n\n      var B = function B() {\n        for (var e in L.dispatchEvent({\n          type: \"before-clear-connection\"\n        }), L.timers) {\n          L.timers.hasOwnProperty(e) && clearInterval(L.timers[e]);\n        }\n\n        for (var e in L.remoteStreams) {\n          if (L.remoteStreams.hasOwnProperty(e)) {\n            var t = L.remoteStreams[e],\n                n = Object(m.a)({\n              type: \"stream-removed\",\n              uid: t.getId(),\n              stream: t\n            });\n            L.dispatchEvent(n);\n          }\n        }\n\n        L.p2ps.clear(), q(), H(), clearInterval(L.pingTimer);\n      };\n\n      L.rejoin = function () {\n        L.socket && (clearInterval(L.pingTimer), L.socket.close(), L.socket = void 0), L.state = _, F();\n      };\n\n      var F = function F(e, t) {\n        L.dispatchEvent(Object(m.a)({\n          type: \"rejoin-start\"\n        })), e = e || function (e) {\n          v.default.info(\"[\".concat(L.clientId, \"] User \").concat(e, \" is re-joined to \").concat(L.joinInfo.cname)), L.dispatchEvent(Object(m.a)({\n            type: \"rejoin\"\n          })), L.channelMediaConfig && L.startChannelMediaRelay(L.channelMediaConfig).then(function () {\n            v.default.debug(\"[\".concat(L.clientId, \"] restartChannelMediaRelay success\"));\n          }).catch(function (e) {\n            v.default.debug(\"[\".concat(L.clientId, \"] restartChannelMediaRelay failed: \").concat(JSON.stringify(e)));\n          }), L.liveStreams && L.liveStreams.size && L.liveStreams.forEach(function (e, t) {\n            e && L.setLiveTranscoding(L.transcoding), L.startLiveStreaming(t, e);\n          }), L.injectLiveStreams && L.injectLiveStreams.size && L.injectLiveStreams.forEach(function (e, t) {\n            L.addInjectStreamUrl(t, e);\n          });\n        }, t = t || function (e) {\n          v.default.error(\"[\".concat(L.clientId, \"] Re-join to channel failed \"), e), L.dispatchEvent(Object(m.e)({\n            type: \"error\",\n            reason: e\n          }));\n        }, L.key ? (++L.rejoinAttempt, L.join(L.joinInfo, L.key, e, t)) : v.default.error(\"[\".concat(L.clientId, \"] Connection recover failed [Invalid channel key]\"));\n      },\n          W = function W(e, t, n) {\n        if (L.onConnect = t, L.socket) {\n          if (L.dispatchEvent({\n            type: \"reconnect\"\n          }), \"retry\" === L.reconnectMode) v.default.debug(\"[\".concat(L.clientId, \"] Retry current gateway\")), L.socket.reconnect();else if (\"tryNext\" === L.reconnectMode) v.default.debug(\"[\".concat(L.clientId, \"] Try next gateway\")), L.socket.connectNext();else if (\"recover\" === L.reconnectMode) {\n            v.default.debug(\"[\".concat(L.clientId, \"] Recover gateway\")), v.default.debug(\"[\".concat(L.clientId, \"] Try to reconnect choose server and get gateway list again \")), L.reconnectingCS = !0;\n            var i = L.joinInfo && L.joinInfo.sid;\n            0, Object(A.getGatewayList)(L.joinInfo, function (e) {\n              v.default.debug(\"[\".concat(L.clientId, \"] session:  \").concat(i, \" get gateway list success\")), L.joinInfo.apResponse = e.res, L.reconnectingCS ? L.socket.replaceHost(e.gateway_addr) : v.default.debug(\"[\".concat(L.clientId, \"] session:  \").concat(i, \" already leave\"));\n            });\n          }\n        } else o = e.gatewayAddr, L.socket = T(o, {\n          sid: L.joinInfo.sid,\n          clientId: L.clientId,\n          proxyServerType: L.joinInfo.proxyServerType\n        }), L.socket.on(\"start-connection\", function (e) {\n          L.ticket = e && e.msg && e.msg.ticket;\n        }), L.socket.on(\"on_uplink_stats\", function (e) {\n          var t = {};\n\n          for (var n in e) {\n            t[M(n)] = e[n];\n          }\n\n          if (L.OutgoingAvailableBandwidth = t.uplink_available_bandwidth, L.localStreams[L.uid]) {\n            var r = L.localStreams[L.uid].uplinkStats;\n            r && r.period_fir === t.period_fir || v.default.debug(\"[\".concat(L.clientId, \"]: Period fir change to: \").concat(t.period_fir)), L.localStreams[L.uid].uplinkStats = t;\n          }\n        }), L.socket.on(\"connect\", function () {\n          L.dispatchEvent({\n            type: \"connected\"\n          }), L.attemps = 1, L.onConnect();\n        }), L.socket.on(\"recover\", function () {\n          L.state = _, v.default.debug(\"[\".concat(L.clientId, \"] Try to reconnect choose server and get gateway list again \")), L.reconnectingCS = !0;\n          var e = L.joinInfo && L.joinInfo.sid;\n          Object(A.getGatewayList)(L.joinInfo, function (t) {\n            v.default.debug(\"[\".concat(L.clientId, \"] session:  \").concat(e, \" get gateway list success\")), L.reconnectingCS ? L.socket.replaceHost(t.gateway_addr) : v.default.debug(\"[\".concat(L.clientId, \"] session:  \").concat(e, \" already leave\"));\n          });\n        }), L.socket.on(\"disconnect\", function (e) {\n          if (v.default.debug(\"[\".concat(L.clientId, \"] Receive disconnect message\")), L.state !== f) {\n            L.state = f, L._reportWebsocketCloseEvent(-1, b.WEBSOCKET_CLOSE_REASON.WS_DISCONNECT);\n            var t = Object(m.e)({\n              type: \"error\",\n              reason: b.default.SOCKET_DISCONNECTED\n            });\n\n            if (L.dispatchEvent(t), 0 === L.p2ps.size ? L.reconnectMode = \"tryNext\" : L.reconnectMode = \"retry\", B(), L.channelMediaRelayController && L.channelMediaRelayController.dispose(), L.channelMediaRelayController = null, 1 != r) {\n              var n,\n                  i = (n = L.attemps, 1e3 * Math.min(30, Math.pow(2, n) - 1));\n              if (v.default.error(\"[\".concat(L.clientId, \"] Disconnect from server [\").concat(JSON.stringify(e), \"], attempt to recover [#\").concat(L.attemps, \"] after \").concat(i / 1e3, \" seconds\")), L.hasInvokeLeave) return v.default.debug(\"[\".concat(L.clientId, \"] No reconnection because Client.leave has been invoked\")), void (L.hasInvokeLeave = !1);\n              setTimeout(function () {\n                L.attemps++, L.state = _, L.inChannelInfo && Date.now() - L.inChannelInfo.joinAt > Object(y.getParameter)(\"TICKET_RENEW_TIMEOUT\") ? (v.default.debug(\"Recovering to renew ticket\"), j()) : F();\n              }, i);\n            } else {\n              var o = V.unregister(L);\n              o && v.default.debug(\"[\".concat(L.clientId, \"] \"), o);\n            }\n          }\n        }), L.socket.on(\"on_add_audio_stream\", function (e) {\n          if (v.default.info(\"[\".concat(L.clientId, \"] Newly added audio stream with uid \").concat(e.uid)), L.joinInfo.stringUid && \"string\" != typeof e.uid && v.default.error(\"StringUID is Mixed with UintUID\"), L.remoteStreamsInChannel.has(e.uid) || L.remoteStreamsInChannel.add(e.uid), void 0 === L.remoteStreams[e.uid]) {\n            var t = Object(g.a)({\n              streamID: e.uid,\n              local: !1,\n              audio: e.audio,\n              video: e.video,\n              uintUID: e.uint_id || e.uid\n            });\n            t.peerMuteVideo = !0, L.remoteStreams[e.uid] = t;\n            var n = Object(m.e)({\n              type: \"stream-added\",\n              stream: t\n            });\n            L.dispatchEvent(n);\n            var r = L.remoteMuteState[e.uid];\n\n            if (r && r.audio) {\n              n = Object(m.a)({\n                type: \"mute-audio\",\n                uid: e.uid\n              });\n              L.dispatchEvent(n);\n            }\n\n            if (r && r.video) {\n              n = Object(m.a)({\n                type: \"mute-video\",\n                uid: e.uid\n              });\n              L.dispatchEvent(n);\n            }\n          }\n\n          E.report.onAddAudioStream(L.joinInfo.sid, {\n            peerid: e.uint_id || e.uid,\n            uid: L.uid\n          });\n        }), L.socket.on(\"on_update_stream\", function (e) {\n          v.default.info(\"[\".concat(L.clientId, \"] on_update_stream:\"), e);\n          var t = L.remoteStreams[e.uid];\n\n          if (L.joinInfo.stringUid && \"string\" != typeof e.uid && v.default.error(\"StringUID is Mixed with UintUID\"), t) {\n            t.audio = e.audio, t.video = e.video, t.screen = e.screen, t.pc && L._adjustPCMuteStatus(t);\n            var n = Object(m.e)({\n              type: \"stream-updated\",\n              stream: t\n            });\n            L.dispatchEvent(n);\n          } else v.default.debug(\"[\".concat(L.clientId, \"] Ignoring onUpdateStream event before onAddStream for uid \").concat(e.uid));\n\n          E.report.onUpdateStream(L.joinInfo.sid, {\n            peerid: e.uint_id || e.uid,\n            audio: e.audio,\n            video: e.video,\n            uid: L.uid\n          });\n        }), L.socket.on(\"on_add_video_stream\", function (e) {\n          if (v.default.info(\"[\".concat(L.clientId, \"] Newly added remote stream with uid \").concat(e.uid, \".\")), L.joinInfo.stringUid && \"string\" != typeof e.uid && v.default.error(\"StringUID is Mixed with UintUID\"), L.remoteStreamsInChannel.has(e.uid) || L.remoteStreamsInChannel.add(e.uid), void 0 === L.remoteStreams[e.uid]) {\n            var t = Object(g.a)({\n              streamID: e.uid,\n              local: !1,\n              audio: e.audio,\n              video: e.video,\n              uintUID: e.uint_id || e.uid\n            });\n            L.remoteStreams[e.uid] = t;\n            var n = Object(m.e)({\n              type: \"stream-added\",\n              stream: t\n            });\n            L.dispatchEvent(n);\n            var r = L.remoteMuteState[e.uid];\n\n            if (r && r.audio) {\n              n = Object(m.a)({\n                type: \"mute-audio\",\n                uid: e.uid\n              });\n              L.dispatchEvent(n);\n            }\n\n            if (r && r.video) {\n              n = Object(m.a)({\n                type: \"mute-video\",\n                uid: e.uid\n              });\n              L.dispatchEvent(n);\n            }\n          } else {\n            var i = L.remoteStreams[e.uid];\n\n            if (i.video = !0, i.peerMuteVideo = !1, i.pc && L._adjustPCMuteStatus(i), v.default.info(\"[\".concat(L.clientId, \"] Stream changed: enable video \").concat(e.uid)), void 0 !== i.stream && i.isPlaying()) {\n              var o = i.player.elementID;\n              i.stop(), i.play(o, i.playOptions);\n            }\n          }\n\n          E.report.onAddVideoStream(L.joinInfo.sid, {\n            peerid: e.uint_id || e.uid,\n            uid: L.uid\n          });\n        }), L.socket.on(\"on_remove_stream\", function (e) {\n          v.default.info(\"[\".concat(L.clientId, \"] on_remove_stream:\"), e), L.remoteStreamsInChannel.has(e.uid) && L.remoteStreamsInChannel.delete(e.uid);\n          var t = L.remoteStreams[e.uid];\n\n          if (t) {\n            delete L.remoteStreams[e.uid], delete L.remoteMuteState[e.uid];\n            var n = Object(m.e)({\n              type: \"stream-removed\",\n              stream: t\n            });\n            L.dispatchEvent(n), t.close(), void 0 !== t.pc && (t.pc.close(), t.pc = void 0, L.p2ps.delete(t.p2pId)), E.report.onRemoveStream(L.joinInfo.sid, {\n              peerid: e.uint_id || e.uid,\n              uid: L.uid\n            });\n          } else v.default.error(\"ERROR stream \", e.uid, \" not found onRemoveStream \", e);\n        }), L.socket.on(\"on_publish_stream\", function (e) {\n          v.default.info(\"[\".concat(L.clientId, \"] on_publish_stream:\"), e);\n          var t = L.localStreams[e.uid];\n          L.dispatchEvent({\n            type: \"streamPublished\",\n            stream: t,\n            proxy: e.proxy\n          }), E.report.reportApiInvoke(L.joinInfo.sid, {\n            name: \"on_publish_stream\",\n            options: {\n              proxy: e.proxy\n            }\n          })();\n        }), L.socket.on(\"mute_audio\", function (e) {\n          v.default.info(\"[\".concat(L.clientId, \"] rcv peer mute audio: \").concat(e.uid)), L.remoteMuteState[e.uid] = L.remoteMuteState[e.uid] || {\n            audio: !1,\n            video: !1\n          }, L.remoteMuteState[e.uid].audio = !0;\n          var t = Object(m.a)({\n            type: \"mute-audio\",\n            uid: e.uid\n          }),\n              n = L.remoteStreams[e.uid];\n          n ? (n.peerMuteAudio = !0, n.pc && L._adjustPCMuteStatus(n), L.dispatchEvent(t)) : v.default.debug(\"Ignoring event \".concat(e.type), e);\n        }), L.socket.on(\"unmute_audio\", function (e) {\n          v.default.info(\"[\".concat(L.clientId, \"] rcv peer unmute audio: \").concat(e.uid)), L.remoteMuteState[e.uid] = L.remoteMuteState[e.uid] || {\n            audio: !1,\n            video: !1\n          }, L.remoteMuteState[e.uid].audio = !1;\n          var t = Object(m.a)({\n            type: \"unmute-audio\",\n            uid: e.uid\n          }),\n              n = L.remoteStreams[e.uid];\n          n ? (n.peerMuteAudio = !1, n.pc && L._adjustPCMuteStatus(n), L.dispatchEvent(t)) : v.default.debug(\"Ignoring event \".concat(e.type), e);\n        }), L.socket.on(\"mute_video\", function (e) {\n          v.default.info(\"[\".concat(L.clientId, \"] rcv peer mute video: \").concat(e.uid)), L.remoteMuteState[e.uid] = L.remoteMuteState[e.uid] || {\n            audio: !1,\n            video: !1\n          }, L.remoteMuteState[e.uid].video = !0;\n          var t = Object(m.a)({\n            type: \"mute-video\",\n            uid: e.uid\n          }),\n              n = L.remoteStreams[e.uid];\n          n ? (n.peerMuteVideo = !0, n.player && (n.player.peerVideoReady = !1), n.pc && L._adjustPCMuteStatus(n), L.dispatchEvent(t)) : v.default.debug(\"Ignoring event \".concat(e.type), e);\n        }), L.socket.on(\"unmute_video\", function (e) {\n          v.default.info(\"[\".concat(L.clientId, \"] rcv peer unmute video: \").concat(e.uid)), L.remoteMuteState[e.uid] = L.remoteMuteState[e.uid] || {\n            audio: !1,\n            video: !1\n          }, L.remoteMuteState[e.uid].video = !1;\n          var t = Object(m.a)({\n            type: \"unmute-video\",\n            uid: e.uid\n          }),\n              n = L.remoteStreams[e.uid];\n          n ? (n.peerMuteVideo = !1, n.pc && L._adjustPCMuteStatus(n), L.dispatchEvent(t)) : v.default.debug(\"Ignoring event \".concat(e.type), e);\n        }), L.socket.on(\"on_crypt_error\", function (e) {\n          v.default.warning(\"[\".concat(L.clientId, \"] stream crypt error\"));\n          var t = Object(m.a)({\n            type: \"crypt-error\",\n            cryptType: e.crypt_type\n          });\n          L.dispatchEvent(t);\n        }), L.socket.on(\"on_user_banned\", function (e) {\n          v.default.info(\"[\".concat(L.clientId, \"] user banned uid: \").concat(e.uid, \" error: \").concat(e.error_code));\n          var t = Object(m.a)({\n            type: \"client-banned\",\n            uid: e.uid,\n            attr: e.error_code\n          });\n          L.dispatchEvent(t), r = !0;\n        }), L.socket.on(\"on_stream_fallback_update\", function (e) {\n          v.default.info(\"[\".concat(L.clientId, \"] stream fallback peerId: \").concat(e.stream_id, \" type: \").concat(e.stream_type));\n          var t = Object(m.a)({\n            type: \"stream-fallback\",\n            uid: e.stream_id,\n            stream: e.stream_id,\n            attr: e.stream_type\n          });\n          L.dispatchEvent(t);\n        }), L.socket.on(\"stream_recover\", function (e) {\n          v.default.info(\"[\".concat(L.clientId, \"] stream recover uid: \").concat(e.id, \" peerId: \").concat(e.peerid, \" type: \").concat(e.type));\n          var t = Object(m.a)({\n            type: \"stream-recover\",\n            uid: e.id,\n            stream: e.peerid,\n            attr: e.type\n          });\n          L.dispatchEvent(t);\n        }), L.socket.on(\"on_p2p_lost\", function (e) {\n          v.default.debug(\"[\".concat(L.clientId, \"] p2plost: \"), e, \"p2ps:\", L.p2ps);\n          var t,\n              n = \"DTLS failed\";\n          (t = L.localStreams[e.uid] || L.remoteStreams[e.uid]) ? (t.pc && t.pc.offerCandidates && 0 === t.pc.offerCandidates.length && (n = \"NO_CANDIDATES_IN_OFFER\"), \"publish\" === e.event && E.report.publish(L.joinInfo.sid, {\n            lts: t.publishLTS,\n            succ: !1,\n            audio: t.hasAudio(),\n            video: t.hasVideo(),\n            screenshare: t.hasScreen(),\n            audioName: t.hasAudio() && t.audioName,\n            videoName: t.hasVideo() && t.videoName,\n            screenName: t.hasScreen() && t.screenName,\n            ec: n,\n            publishRequestid: L.publishRequestId || 0,\n            p2pid: L.p2ps.get(t.getId())\n          }), \"subscribe\" === e.event && E.report.subscribe(L.joinInfo.sid, {\n            lts: t.subscribeLTS,\n            succ: !1,\n            video: t.subscribeOptions && t.subscribeOptions.video,\n            audio: t.subscribeOptions && t.subscribeOptions.audio,\n            peerid: e.uid + \"\",\n            ec: n,\n            subscribeRequestid: L.subscribeRequestId.get(t.getId()) || 0,\n            p2pid: L.p2ps.get(t.getId())\n          })) : v.default.warning(\"P2PLost Stream Not found\", e), v.default.debug(\"[\".concat(L.clientId, \"] p2plost:\"), e.p2pid), (t = L.p2ps.get(e.p2pid)) && (L.p2ps.delete(e.p2pid), t.local ? L.dispatchEvent(Object(m.a)({\n            type: \"pubP2PLost\",\n            stream: t,\n            attr: n\n          })) : L.remoteStreams[t.getId()] && L.dispatchEvent(Object(m.a)({\n            type: \"subP2PLost\",\n            stream: t,\n            attr: n\n          })));\n        }), L.socket.on(\"on_token_privilege_will_expire\", function (e) {\n          v.default.debug(\"[\".concat(L.clientId, \"] Received Message onTokenPrivilegeWillExpire\")), L.dispatchEvent(Object(m.a)({\n            type: \"onTokenPrivilegeWillExpire\"\n          }));\n        }), L.socket.on(\"on_token_privilege_did_expire\", function () {\n          v.default.warning(\"[\".concat(L.clientId, \"] Received Message onTokenPrivilegeDidExpire, please get new token and join again\")), L.closeGateway(), L.dispatchEvent(Object(m.a)({\n            type: \"onTokenPrivilegeDidExpire\"\n          }));\n        }), L.socket.on(\"enable_local_video\", function (e) {\n          v.default.info(\"[\".concat(L.clientId, \"] enable_local_video:\"), e), L.dispatchEvent(Object(m.a)({\n            type: \"enable-local-video\",\n            uid: e.uid\n          }));\n        }), L.socket.on(\"disable_local_video\", function (e) {\n          v.default.info(\"[\".concat(L.clientId, \"] disable_local_video:\"), e), L.dispatchEvent(Object(m.a)({\n            type: \"disable-local-video\",\n            uid: e.uid\n          }));\n        }), L._doWithAction = function (e, t, n) {\n          \"tryNext\" === e ? function (e, t) {\n            v.default.debug(\"[\".concat(L.clientId, \"] Connect next gateway\")), L.state = f, L.socket.close(), B(), L.reconnectMode = \"tryNext\", L.state = _, F(e, t);\n          }(t, n) : \"retry\" === e ? function (e, t) {\n            v.default.debug(\"[\".concat(L.clientId, \"] Reconnect gateway\")), L.state = f, L.socket.close(), B(), L.reconnectMode = \"retry\", L.state = _, F(e, t);\n          }(t, n) : \"quit\" === e ? (v.default.debug(\"[\".concat(L.clientId, \"] quit gateway\")), L.state = f, L.socket.close(), B()) : \"recover\" === e && j();\n        }, L.socket.on(\"on_notification\", function (e) {\n          if (v.default.debug(\"[\".concat(L.clientId, \"] Receive notification: \"), e), \"ERR_JOIN_BY_MULTI_IP\" === b.GatewayErrorCode[e.code]) return L.dispatchEvent({\n            type: \"onMultiIP\",\n            option: e.option\n          });\n          e.detail ? L._doWithAction(C[b.GatewayErrorCode[e.code]]) : e.action && L._doWithAction(e.action);\n        }), L.socket.on(\"on_user_offline\", function (e) {\n          v.default.info(\"[\".concat(L.clientId, \"] on_user_offline:\"), e);\n          var t = Object(m.a)({\n            type: \"peer-leave\",\n            uid: e.uid\n          });\n\n          if (L.remoteStreamsInChannel.has(e.uid) && L.remoteStreamsInChannel.delete(e.uid), L.remoteStreams.hasOwnProperty(e.uid) && (t.stream = L.remoteStreams[e.uid]), t.reason = e.reason, L.dispatchEvent(t), v.default.info(\"[\".concat(L.clientId, \"] remove remoteMuteState \"), e.uid), delete L.remoteMuteState[e.uid], L.remoteStreams.hasOwnProperty(e.uid)) {\n            v.default.info(\"[\".concat(L.clientId, \"] closing stream on peer leave\"), e.uid);\n            var n = L.remoteStreams[e.uid];\n            n.close(), delete L.remoteStreams[e.uid], E.report.onRemoveStream(L.joinInfo.sid, {\n              peerid: e.uint_id || e.uid,\n              uid: L.uid\n            }), void 0 !== n.pc && (n.pc.close(), n.pc = void 0, L.p2ps.delete(n.p2pId));\n          }\n\n          L.timers.hasOwnProperty(e.uid) && (clearInterval(L.timers[e.uid]), clearInterval(L.timers[e.uid] + \"_RelatedStats\"), delete L.timers[e.uid]), null != L.audioLevel[e.uid] && delete L.audioLevel[e.uid], null != L.timer_counter[e.uid] && delete L.timer_counter[e.uid];\n        }), L.socket.on(\"onUplinkStats\", function (e) {}), L.socket.on(\"liveStreamingStarted\", function (e) {\n          var t = Object(m.c)({\n            type: \"liveStreamingStarted\",\n            url: e.url\n          });\n          L.dispatchEvent(t);\n        }), L.socket.on(\"liveStreamingFailed\", function (e) {\n          var t = Object(m.c)({\n            type: \"liveStreamingFailed\",\n            url: e.url\n          });\n          L.dispatchEvent(t);\n        }), L.socket.on(\"liveStreamingStopped\", function (e) {\n          var t = Object(m.c)({\n            type: \"liveStreamingStopped\",\n            url: e.url\n          });\n          L.dispatchEvent(t);\n        }), L.socket.on(\"liveTranscodingUpdated\", function (e) {\n          var t = Object(m.c)({\n            type: \"liveTranscodingUpdated\",\n            reason: e.reason\n          });\n          L.dispatchEvent(t);\n        }), L.socket.on(\"streamInjectedStatus\", function (e) {\n          var t = Object(m.c)({\n            type: \"streamInjectedStatus\",\n            url: e.url,\n            uid: e.uid,\n            status: e.status\n          });\n          L.dispatchEvent(t);\n        }), L.socket.on(\"on_user_online\", function (e) {\n          L.joinInfo.stringUid && \"string\" != typeof e.uid && v.default.error(\"StringUID is Mixed with UintUID\"), L.dispatchEvent({\n            type: \"peer-online\",\n            uid: e.uid\n          });\n        }), L.socket.on(\"receive_metadata\", function (e) {\n          L.joinInfo.stringUid && \"string\" != typeof e.uid && v.default.error(\"StringUID is Mixed with UintUID\");\n          var t = decodeURIComponent(escape(window.atob(e.metadata)));\n          v.default.debug(\"[\".concat(L.clientId, \"] received \").concat(e.uid, \" metadata: \").concat(t)), L.dispatchEvent({\n            type: \"receive-metadata\",\n            uid: e.uid,\n            metadata: t\n          });\n        });\n\n        var o;\n      },\n          G = function G(e, t) {\n        if (void 0 !== L.socket) try {\n          L.socket.emitSimpleMessage(e, function (e, n) {\n            t && t(e, n);\n          });\n        } catch (e) {\n          v.default.error(\"[\".concat(L.clientId, \"] Error in sendSimpleSdp [\").concat(e, \"]\"));\n        } else v.default.error(\"[\".concat(L.clientId, \"] Error in sendSimpleSdp [socket not ready]\"));\n      },\n          H = function H() {\n        for (var e in L.localStreams) {\n          if (void 0 !== L.localStreams[e]) {\n            var t = L.localStreams[e];\n            delete L.localStreams[e], void 0 !== t.pc && (t.pc.close(), t.pc = void 0);\n          }\n        }\n      },\n          q = function q() {\n        for (var e in L.remoteStreamsInChannel.clear(), L.remoteStreams) {\n          if (L.remoteStreams.hasOwnProperty(e)) {\n            var t = L.remoteStreams[e];\n            t.isPlaying() && t.stop(), t.close(), delete L.remoteStreams[e], void 0 !== t.pc && (t.pc.close(), t.pc = void 0);\n          }\n        }\n      };\n\n      return L;\n    },\n        V = {\n      _gatewayClients: {},\n      register: function register(e, t) {\n        if (!t.uid) {\n          var n = \"NO_UID_PROVIDED\";\n          return v.default.error(\"[\".concat(e.clientId, \"] \"), n, t), n;\n        }\n\n        if (t.cname) {\n          if (this._gatewayClients[t.cname] && this._gatewayClients[t.cname][t.uid] && this._gatewayClients[t.cname][t.uid] !== e) {\n            n = \"UID_CONFLICT\";\n            return v.default.error(\"[\".concat(e.clientId, \"] \"), n, t), n;\n          }\n\n          return v.default.debug(\"[\".concat(e.clientId, \"] register client Channel\"), t.cname, \"Uid\", t.uid), this._gatewayClients[t.cname] || (this._gatewayClients[t.cname] = {}), this._gatewayClients[t.cname][t.uid] = e, null;\n        }\n\n        var n = \"NO_CHANNEL_PROVIDED\";\n        return v.default.error(\"[\".concat(e.clientId, \"] \"), n, t), n;\n      },\n      unregister: function unregister(e) {\n        var t = e && e.uid,\n            n = e.joinInfo && e.joinInfo.cname;\n\n        if (!t || !n) {\n          var r = \"INVALID_GATEWAYCLIENT\";\n          return v.default.error(\"[\".concat(e.clientId, \"] \"), r), r;\n        }\n\n        if (this._gatewayClients[n] && this._gatewayClients[n][t]) {\n          if (this._gatewayClients[n][t] !== e) {\n            r = \"GATEWAYCLIENT_UID_CONFLICT\";\n            return v.default.error(\"[\".concat(e.clientId, \"] \"), r), r;\n          }\n\n          return v.default.debug(\"[\".concat(e.clientId, \"] unregister client \"), e.uid), delete this._gatewayClients[n][t], null;\n        }\n\n        var r = \"GATEWEAY_CLIENT_UNREGISTERED\";\n        v.default.error(\"[\".concat(e.clientId, \"] \"), r);\n      }\n    };\n\n    j.DISCONNECTED = 0, j.CONNECTING = 1, j.CONNECTED = 2, j.DISCONNECTING = 3, j.connetionStateMap = {\n      0: \"DISCONNECTED\",\n      1: \"CONNECTING\",\n      2: \"CONNECTED\",\n      3: \"DISCONNECTING\"\n    };\n    n.a = j;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.r(t), n.d(t, \"post\", function () {\n      return l;\n    }), n.d(t, \"postFormData\", function () {\n      return u;\n    }), n.d(t, \"shouldUseHttps\", function () {\n      return f;\n    }), n.d(t, \"getHTTPSendBytes\", function () {\n      return s;\n    }), n.d(t, \"getHTTPRecvBytes\", function () {\n      return c;\n    }), n.d(t, \"resetHTTPByetsCount\", function () {\n      return d;\n    });\n\n    var r = n(2),\n        i = n(10),\n        o = 0,\n        a = 0,\n        s = function s() {\n      return o;\n    },\n        c = function c() {\n      return a;\n    },\n        d = function d() {\n      o = 0, a = 0;\n    },\n        u = function u(e, t, n, s, c) {\n      var d = new XMLHttpRequest();\n      if (d.timeout = t.timeout || Object(r.getParameter)(\"HTTP_CONNECT_TIMEOUT\"), d.open(\"POST\", e, !0), c) for (var u in c) {\n        \"withCredentials\" == u ? d.withCredentials = !0 : d.setRequestHeader(u, c[u]);\n      }\n      d.onload = function (t) {\n        a += Object(i.lengthInUtf8Bytes)(d.responseText), 200 !== d.status ? s && s({\n          httpErrorCode: \"httpcode-xhr.status\"\n        }, e) : n && n(d.responseText);\n      }, d.onerror = function (t) {\n        s && s(t, e);\n      }, d.ontimeout = function (t) {\n        s && s(t, e);\n      };\n      var l = JSON.stringify(t);\n      o += Object(i.lengthInUtf8Bytes)(l);\n      var f = new FormData();\n      f.append(\"request\", l), d.send(f);\n    },\n        l = function l(e, t, n, s, c) {\n      var d = new XMLHttpRequest();\n      if (d.timeout = t.timeout || Object(r.getParameter)(\"HTTP_CONNECT_TIMEOUT\"), d.open(\"POST\", e, !0), d.setRequestHeader(\"Content-type\", \"application/json; charset=utf-8\"), c) for (var u in c) {\n        \"withCredentials\" == u ? d.withCredentials = !0 : d.setRequestHeader(u, c[u]);\n      }\n      d.onload = function (t) {\n        a += Object(i.lengthInUtf8Bytes)(d.responseText), 200 !== d.status ? s && s({\n          httpErrorCode: \"httpcode-xhr.status\"\n        }, e) : n && n(d.responseText);\n      }, d.onerror = function (t) {\n        s && s(t, e);\n      }, d.ontimeout = function (t) {\n        s && s(t, e);\n      };\n      var l = JSON.stringify(t);\n      o += Object(i.lengthInUtf8Bytes)(l), d.send(l);\n    },\n        f = function f() {\n      return \"https:\" == document.location.protocol;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.r(t), n.d(t, \"RTCPeerConnection\", function () {\n      return T;\n    }), n.d(t, \"getUserMedia\", function () {\n      return a;\n    }), n.d(t, \"attachMediaStream\", function () {\n      return s;\n    }), n.d(t, \"reattachMediaStream\", function () {\n      return c;\n    }), n.d(t, \"setSrcObject\", function () {\n      return p;\n    }), n.d(t, \"getSrcObject\", function () {\n      return g;\n    }), n.d(t, \"webrtcDetectedBrowser\", function () {\n      return d;\n    }), n.d(t, \"webrtcDetectedVersion\", function () {\n      return u;\n    }), n.d(t, \"webrtcMinimumVersion\", function () {\n      return l;\n    }), n.d(t, \"webrtcTesting\", function () {\n      return I;\n    }), n.d(t, \"webrtcUtils\", function () {\n      return v;\n    });\n    var r = n(11),\n        i = n.n(r),\n        o = n(4),\n        a = null,\n        s = null,\n        c = null,\n        d = null,\n        u = null,\n        l = null,\n        f = null,\n        p = null,\n        g = null,\n        m = null,\n        h = {\n      addStream: null\n    },\n        v = {\n      log: function log() {},\n      extractVersion: function extractVersion(e, t, n) {\n        var r = e.match(t);\n        return r && r.length >= n && parseInt(r[n]);\n      }\n    };\n    if (\"object\" == (\"undefined\" == typeof window ? \"undefined\" : i()(window)) ? (window.HTMLMediaElement && !(\"srcObject\" in window.HTMLMediaElement.prototype) ? (p = function p(e, t) {\n      \"mozSrcObject\" in e ? e.mozSrcObject = t : (e._srcObject = t, e.src = t ? URL.createObjectURL(t) : null);\n    }, g = function g(e) {\n      return \"mozSrcObject\" in e ? e.mozSrcObject : e._srcObject;\n    }) : (p = function p(e, t) {\n      e.srcObject = t;\n    }, g = function g(e) {\n      return e.srcObject;\n    }), a = window.navigator && window.navigator.getUserMedia) : (p = function p(e, t) {\n      e.srcObject = t;\n    }, g = function g(e) {\n      return e.srcObject;\n    }), s = function s(e, t) {\n      p(e, t);\n    }, c = function c(e, t) {\n      p(e, g(t));\n    }, \"undefined\" != typeof window && window.navigator) {\n      if (navigator.mozGetUserMedia && window.mozRTCPeerConnection) {\n        for (var E in v.log(\"This appears to be Firefox\"), d = \"firefox\", u = v.extractVersion(navigator.userAgent, /Firefox\\/([0-9]+)\\./, 1), l = 31, m = mozRTCPeerConnection, h) {\n          h[E] = m.prototype[E];\n        }\n\n        if (f = function f(e, t) {\n          if (u < 38 && e && e.iceServers) {\n            for (var n = [], r = 0; r < e.iceServers.length; r++) {\n              var i = e.iceServers[r];\n              if (i.hasOwnProperty(\"urls\")) for (var o = 0; o < i.urls.length; o++) {\n                var a = {\n                  url: i.urls[o]\n                };\n                0 === i.urls[o].indexOf(\"turn\") && (a.username = i.username, a.credential = i.credential), n.push(a);\n              } else n.push(e.iceServers[r]);\n            }\n\n            e.iceServers = n;\n          }\n\n          var s = new m(e, t);\n\n          for (var c in h) {\n            s[c] = h[c];\n          }\n\n          return s;\n        }, window.RTCSessionDescription || (window.RTCSessionDescription = mozRTCSessionDescription), window.RTCIceCandidate || (window.RTCIceCandidate = mozRTCIceCandidate), a = function a(e, t, n) {\n          var r = function r(e) {\n            if (\"object\" !== i()(e) || e.require) return e;\n            var t = [];\n            return Object.keys(e).forEach(function (n) {\n              if (\"require\" !== n && \"advanced\" !== n && \"mediaSource\" !== n) {\n                var r = e[n] = \"object\" === i()(e[n]) ? e[n] : {\n                  ideal: e[n]\n                };\n\n                if (void 0 === r.min && void 0 === r.max && void 0 === r.exact || t.push(n), void 0 !== r.exact && (\"number\" == typeof r.exact ? r.min = r.max = r.exact : e[n] = r.exact, delete r.exact), void 0 !== r.ideal) {\n                  e.advanced = e.advanced || [];\n                  var o = {};\n                  \"number\" == typeof r.ideal ? o[n] = {\n                    min: r.ideal,\n                    max: r.ideal\n                  } : o[n] = r.ideal, e.advanced.push(o), delete r.ideal, Object.keys(r).length || delete e[n];\n                }\n              }\n            }), t.length && (e.require = t), e;\n          };\n\n          return u < 38 && (v.log(\"spec: \" + JSON.stringify(e)), e.audio && (e.audio = r(e.audio)), e.video && (e.video = r(e.video)), v.log(\"ff37: \" + JSON.stringify(e))), navigator.mozGetUserMedia(e, t, n);\n        }, navigator.getUserMedia = a, navigator.mediaDevices || (navigator.mediaDevices = {\n          getUserMedia: R,\n          addEventListener: function addEventListener() {},\n          removeEventListener: function removeEventListener() {}\n        }), navigator.mediaDevices.enumerateDevices = navigator.mediaDevices.enumerateDevices || function () {\n          return new Promise(function (e) {\n            e([{\n              kind: \"audioinput\",\n              deviceId: \"default\",\n              label: \"\",\n              groupId: \"\"\n            }, {\n              kind: \"videoinput\",\n              deviceId: \"default\",\n              label: \"\",\n              groupId: \"\"\n            }]);\n          });\n        }, u < 41) {\n          var S = navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n\n          navigator.mediaDevices.enumerateDevices = function () {\n            return S().then(void 0, function (e) {\n              if (\"NotFoundError\" === e.name) return [];\n              throw e;\n            });\n          };\n        }\n      } else if (navigator.webkitGetUserMedia && window.webkitRTCPeerConnection) {\n        for (var E in v.log(\"This appears to be Chrome\"), d = \"chrome\", u = v.extractVersion(navigator.userAgent, /Chrom(e|ium)\\/([0-9]+)\\./, 2), l = 38, m = webkitRTCPeerConnection, h) {\n          h[E] = m.prototype[E];\n        }\n\n        f = function f(e, t) {\n          e && e.iceTransportPolicy && (e.iceTransports = e.iceTransportPolicy);\n          var n = new m(e, t);\n\n          for (var r in h) {\n            n[r] = h[r];\n          }\n\n          var i = n.getStats.bind(n);\n          return n.getStats = function (e, t, n) {\n            var r = arguments;\n            r.length > 0 && \"function\" == typeof e && (t ? (n = t, t = e, r = [e = null, t, n]) : (t = e, r = [e = null, t]));\n\n            var o = function o(e) {\n              var t = {};\n              return e.result().forEach(function (e) {\n                var n = {\n                  id: e.id,\n                  timestamp: e.timestamp,\n                  type: e.type\n                };\n                e.names().forEach(function (t) {\n                  n[t] = e.stat(t);\n                }), t[n.id] = n;\n              }), t;\n            };\n\n            if (r.length >= 2) {\n              var a = function a(e) {\n                r[1](o(e));\n              };\n\n              return i.apply(this, [a, r[0]]);\n            }\n\n            return i();\n          }, n;\n        }, [\"createOffer\", \"createAnswer\"].forEach(function (e) {\n          var t = webkitRTCPeerConnection.prototype[e];\n\n          webkitRTCPeerConnection.prototype[e] = function () {\n            var e = this;\n\n            if (arguments.length < 1 || 1 === arguments.length && \"object\" === i()(arguments[0])) {\n              var n = 1 === arguments.length ? arguments[0] : void 0;\n              return new Promise(function (r, i) {\n                t.apply(e, [r, i, n]);\n              });\n            }\n\n            return t.apply(this, arguments);\n          };\n        }), [\"setLocalDescription\", \"setRemoteDescription\", \"addIceCandidate\"].forEach(function (e) {\n          var t = webkitRTCPeerConnection.prototype[e];\n\n          webkitRTCPeerConnection.prototype[e] = function () {\n            var e = arguments,\n                n = this;\n            return new Promise(function (r, i) {\n              t.apply(n, [e[0], function () {\n                r(), e.length >= 2 && e[1].apply(null, []);\n              }, function (t) {\n                i(t), e.length >= 3 && e[2].apply(null, [t]);\n              }]);\n            });\n          };\n        });\n\n        var _ = function _(e) {\n          if (\"object\" !== i()(e) || e.mandatory || e.optional) return e;\n          var t = {};\n          return Object.keys(e).forEach(function (n) {\n            if (\"require\" !== n && \"advanced\" !== n && \"mediaSource\" !== n) {\n              var r = \"object\" === i()(e[n]) ? e[n] : {\n                ideal: e[n]\n              };\n              void 0 !== r.exact && \"number\" == typeof r.exact && (r.min = r.max = r.exact);\n\n              var o = function o(e, t) {\n                return e ? e + t.charAt(0).toUpperCase() + t.slice(1) : \"deviceId\" === t ? \"sourceId\" : t;\n              };\n\n              if (void 0 !== r.ideal) {\n                t.optional = t.optional || [];\n                var a = {};\n                \"number\" == typeof r.ideal ? (a[o(\"min\", n)] = r.ideal, t.optional.push(a), (a = {})[o(\"max\", n)] = r.ideal, t.optional.push(a)) : (a[o(\"\", n)] = r.ideal, t.optional.push(a));\n              }\n\n              void 0 !== r.exact && \"number\" != typeof r.exact ? (t.mandatory = t.mandatory || {}, t.mandatory[o(\"\", n)] = r.exact) : [\"min\", \"max\"].forEach(function (e) {\n                void 0 !== r[e] && (t.mandatory = t.mandatory || {}, t.mandatory[o(e, n)] = r[e]);\n              });\n            }\n          }), e.advanced && (t.optional = (t.optional || []).concat(e.advanced)), t;\n        };\n\n        if (a = function a(e, t, n) {\n          return e.audio && (e.audio = _(e.audio)), e.video && (e.video = _(e.video)), v.log(\"chrome: \" + JSON.stringify(e)), navigator.webkitGetUserMedia(e, t, n);\n        }, navigator.getUserMedia = a, navigator.mediaDevices || (navigator.mediaDevices = {\n          getUserMedia: R,\n          enumerateDevices: function enumerateDevices() {\n            return new Promise(function (e) {\n              var t = {\n                audio: \"audioinput\",\n                video: \"videoinput\"\n              };\n              return MediaStreamTrack.getSources(function (n) {\n                e(n.map(function (e) {\n                  return {\n                    label: e.label,\n                    kind: t[e.kind],\n                    deviceId: e.id,\n                    groupId: \"\"\n                  };\n                }));\n              });\n            });\n          }\n        }), navigator.mediaDevices.getUserMedia) {\n          if ((Object(o.getBrowserVersion)() ? Number(Object(o.getBrowserVersion)().split(\".\")[0]) : void 0) < 46) {\n            var y = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n\n            navigator.mediaDevices.getUserMedia = function (e) {\n              return v.log(\"spec:   \" + JSON.stringify(e)), e.audio = _(e.audio), e.video = _(e.video), v.log(\"chrome: \" + JSON.stringify(e)), y(e);\n            };\n          }\n        } else navigator.mediaDevices.getUserMedia = function (e) {\n          return R(e);\n        };\n\n        void 0 === navigator.mediaDevices.addEventListener && (navigator.mediaDevices.addEventListener = function () {\n          v.log(\"Dummy mediaDevices.addEventListener called.\");\n        }), void 0 === navigator.mediaDevices.removeEventListener && (navigator.mediaDevices.removeEventListener = function () {\n          v.log(\"Dummy mediaDevices.removeEventListener called.\");\n        }), s = function s(e, t) {\n          u >= 43 ? p(e, t) : void 0 !== e.src ? e.src = t ? URL.createObjectURL(t) : null : v.log(\"Error attaching stream to element.\");\n        }, c = function c(e, t) {\n          u >= 43 ? p(e, g(t)) : e.src = t.src;\n        };\n      } else navigator.mediaDevices && navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/) ? (v.log(\"This appears to be Edge\"), d = \"edge\", u = v.extractVersion(navigator.userAgent, /Edge\\/(\\d+).(\\d+)$/, 2), l = 12) : v.log(\"Browser does not appear to be WebRTC-capable\");\n    } else v.log(\"This does not appear to be a browser\"), d = \"not a browser\";\n\n    function R(e) {\n      return new Promise(function (t, n) {\n        a(e, t, n);\n      });\n    }\n\n    var T,\n        I = {};\n\n    try {\n      Object.defineProperty(I, \"version\", {\n        set: function set(e) {\n          u = e;\n        }\n      });\n    } catch (e) {}\n\n    f ? T = f : \"undefined\" != typeof window && (T = window.RTCPeerConnection);\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(12),\n        i = n.n(r),\n        o = n(17),\n        a = n.n(o),\n        s = n(51),\n        c = n.n(s),\n        d = n(4),\n        u = n(1),\n        l = n(3),\n        f = n(0),\n        p = (n(25), n(2), n(5), n(52)),\n        g = n.n(p),\n        m = [31, 222, 239, 159, 192, 236, 164, 81, 54, 227, 176, 149, 2, 247, 75, 141, 183, 54, 213, 216, 158, 92, 111, 49, 228, 111, 150, 6, 135, 79, 35, 212, 4, 155, 200, 168, 37, 107, 243, 110, 144, 179, 51, 81, 55, 78, 223, 242, 191, 211, 74, 119, 203, 151, 142, 62, 31, 41, 132, 22, 35, 155, 87, 123, 119, 117, 216, 57, 201, 53, 228, 67, 201, 40, 106, 24, 80, 176, 187, 253, 60, 63, 136, 100, 20, 12, 177, 99, 64, 38, 101, 143, 111, 176, 251, 211, 145, 136, 34, 23, 79, 136, 202, 95, 105, 199, 125, 67, 180, 44, 210, 179, 228, 4, 85, 160, 188, 64, 26, 46, 6, 61, 201, 103, 248, 18, 97, 254, 140, 36, 115, 106, 48, 124, 102, 216, 155, 120, 36, 227, 165, 217, 7, 227, 191, 128, 212, 157, 80, 37, 117, 175, 24, 214, 47, 221, 183, 211, 51, 174, 251, 223, 159, 167, 152, 53, 36, 107, 199, 223, 91, 62, 46, 194, 11, 80, 121, 188, 219, 2, 99, 99, 232, 229, 173, 234, 21, 30, 236, 177, 243, 142, 97, 48, 108, 56, 62, 172, 56, 216, 3, 42, 79, 138, 23, 88, 182, 39, 5, 118, 68, 135, 178, 56, 9, 94, 189, 44, 104, 9, 238, 231, 174, 122, 85, 247, 231, 86, 74, 8, 189, 147, 218, 180, 58, 76, 227, 17, 46, 90, 194, 100, 51, 178, 72, 163, 151, 243, 166, 130, 85, 1, 223, 130, 152, 242, 85, 255, 28, 173, 97, 252, 119, 215, 177, 119, 86, 104, 136, 82, 40, 72, 53, 11, 18, 26, 240, 188, 76, 110, 39, 31, 189];\n\n    function h(e) {\n      for (var t = new Uint8Array([99, 114, 121, 112, 116, 105, 105]), n = t.length, r = e, i = r.length, o = new Uint8Array(i), a = new Uint8Array(256), s = 0; s < 256; s++) {\n        a[s] = s;\n      }\n\n      for (var c = 0, d = 0; d < 256; d++) {\n        var u = [a[c = (c + a[d] + t[d % n]) % 256], a[d]];\n        a[d] = u[0], a[c] = u[1];\n      }\n\n      var l,\n          f = 0;\n      c = 0;\n\n      for (var p = 0; p < 0 + i; p++) {\n        var g = [a[c = (c + a[f = (f + 1) % 256]) % 256], a[f]];\n        a[f] = g[0], a[c] = g[1], l = a[(a[f] + a[c]) % 256], p >= 0 && (o[p - 0] = r[p - 0] ^ l);\n      }\n\n      var m = String.fromCharCode.apply(null, o);\n      return Function(\"var winSize = 5; return `\" + m + \"`\")();\n    }\n\n    function v(e, t) {\n      var n = h(t),\n          r = g.a.createProgramFromSources(e, [h(m), n]),\n          i = e.getAttribLocation(r, \"a_position\"),\n          o = e.createBuffer();\n      e.bindBuffer(e.ARRAY_BUFFER, o), e.bufferData(e.ARRAY_BUFFER, new Float32Array([0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1]), e.STATIC_DRAW), e.enableVertexAttribArray(i);\n      var a = 2,\n          s = e.FLOAT,\n          c = !1,\n          d = 0,\n          u = 0;\n      e.vertexAttribPointer(i, a, s, c, d, u);\n      var l = e.getAttribLocation(r, \"a_texCoord\"),\n          f = e.createBuffer();\n      e.bindBuffer(e.ARRAY_BUFFER, f), e.bufferData(e.ARRAY_BUFFER, new Float32Array([0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1]), e.STATIC_DRAW), e.enableVertexAttribArray(l);\n      a = 2, s = e.FLOAT, c = !1, d = 0, u = 0;\n      return e.vertexAttribPointer(l, a, s, c, d, u), r;\n    }\n\n    var E = [11, 196, 242, 139, 198, 252, 188, 5, 59, 170, 161, 152, 17, 229, 24, 141, 133, 54, 214, 206, 133, 26, 66, 126, 255, 11, 245, 10, 146, 92, 52, 134, 108, 152, 221, 191, 124, 116, 248, 106, 130, 251, 59, 105, 43, 91, 135, 199, 181, 223, 10, 51, 134, 194, 240, 46, 9, 3, 141, 22, 35, 146, 76, 23, 109, 117, 208, 41, 201, 45, 218, 76, 203, 105, 51, 58, 97, 154, 145, 236, 49, 18, 183, 127, 27, 12, 210, 122, 73, 42, 37, 143, 36, 207, 251, 211, 145, 191, 56, 10, 88, 222, 181, 125, 22, 238, 123, 71, 177, 107, 218, 254, 173, 28, 34, 253, 249, 67, 83, 97, 73, 111, 219, 43, 181, 82, 38, 230, 136, 109, 22, 67];\n\n    function S(e, t, n) {\n      var r = e.gl;\n      this.program = v(r, E), this.setUniforms = function () {\n        r.getUniformLocation(this.program, \"u_image\");\n        var e = r.getUniformLocation(this.program, \"u_flipY\");\n        r.uniform1f(e, 1);\n      };\n    }\n\n    var _ = [11, 196, 242, 139, 198, 252, 188, 5, 59, 170, 161, 152, 17, 229, 24, 141, 133, 54, 214, 206, 133, 26, 66, 126, 255, 11, 245, 10, 146, 92, 52, 134, 108, 155, 210, 164, 99, 114, 228, 96, 130, 251, 59, 105, 43, 91, 135, 199, 181, 223, 10, 51, 133, 194, 247, 34, 31, 39, 142, 28, 2, 130, 18, 109, 84, 124, 223, 62, 140, 52, 128, 47, 208, 47, 115, 39, 4, 200, 220, 171, 53, 36, 150, 101, 10, 75, 247, 121, 74, 36, 35, 143, 108, 176, 235, 211, 135, 164, 36, 11, 88, 160, 148, 35, 6, 221, 41, 32, 166, 109, 205, 171, 228, 4, 26, 169, 244, 82, 119, 102, 86, 61, 201, 103, 248, 18, 97, 242, 182, 34, 121, 70, 28, 71, 126, 197, 223, 126, 14, 244, 149, 192, 12, 176, 187, 149, 212, 156, 22, 44, 36, 133, 10, 216, 63, 198, 213, 154, 116, 230, 253, 154, 154, 249, 215, 55, 60, 34, 196, 229, 76, 50, 44, 135, 22, 77, 113, 247, 142, 94, 60, 23, 172, 145, 175, 218, 81, 86, 162, 239, 180, 205, 63, 118, 3, 110, 123, 224, 127, 158, 124, 15, 127, 157, 27, 66, 176, 33, 24, 51, 53, 194, 178, 56, 6, 74, 191, 111, 51, 78, 174, 157, 229, 17, 22, 178, 231, 92, 25, 23, 191, 157, 137, 188, 54, 64, 176, 13, 22, 81, 207, 45, 108, 203, 83, 186, 130, 237, 186, 153, 110, 8, 196, 168, 152, 161, 28, 238, 46, 184, 36, 185, 20, 203, 183, 98, 95, 41, 149, 93, 105, 37, 116, 91, 68, 105, 164, 217, 30, 42, 60, 53, 173, 213, 177, 216, 195, 53, 204, 173, 128, 243, 42, 122, 205, 65, 97, 129, 194, 68, 218, 91, 141, 11, 224, 124, 132, 138, 119, 36, 220, 161, 39, 214, 146, 183, 193, 225, 23, 177, 201, 243, 128, 160, 33, 75, 86, 126, 139, 254, 232, 14, 13, 85, 2, 112, 17, 150, 36, 180, 86, 226, 225, 126, 197, 17, 228, 225, 142, 245, 37, 170, 39, 96, 187, 190, 2, 35, 85, 237, 11, 189, 1, 79, 237, 2, 1, 114, 246, 109, 190, 66, 54, 153, 43, 218, 204, 70, 6, 204, 162, 247, 18, 130, 123, 30, 60, 165, 130, 142, 210, 133, 91, 127, 117, 71, 38, 145, 172, 7, 5, 16, 220, 222, 111, 98, 141, 239, 208, 125, 26, 238, 28, 0, 216, 89, 13, 7, 119, 134, 194, 75, 41, 67, 174, 1, 217, 80, 101, 40, 26, 59, 28, 59, 46, 108, 138, 38, 157, 167, 28, 234, 73, 177, 42, 42, 102, 108, 26, 181, 27, 178, 42, 43, 52, 28, 110, 117, 198, 173, 176, 178, 101, 225, 150, 36, 139, 108, 105, 10, 237, 222, 3, 143, 126, 18, 144, 115, 74, 56, 114, 134, 231, 159, 212, 62, 126, 80, 173, 216, 167, 4, 81, 18, 52, 17, 144, 218, 32, 139, 207, 104, 128, 229, 99, 84, 120, 31, 87, 227, 154, 91, 196, 63, 123, 111, 125, 36, 52, 57, 168, 113, 150, 189, 204, 24, 104, 196, 237, 86, 163, 68, 197, 202, 170, 212, 191, 81, 193, 111, 255, 162, 181, 202, 156, 146, 196, 96, 16, 118, 117, 55, 71, 156, 31, 163, 242, 204, 239, 11, 150, 27, 126, 115, 154, 107, 247, 134, 158, 125, 255, 146, 35, 183, 209, 36, 116, 87, 215, 172, 5, 251, 133, 114, 254, 141, 195, 6, 145, 4, 111, 182, 167, 74, 154, 152, 68, 18, 146, 88, 106, 200, 154, 15, 176, 94, 86, 66, 178, 101, 219, 35, 188, 129, 66, 28, 41, 110, 174, 53, 88, 174, 64, 191, 206, 127, 48, 126, 214, 216, 93, 119, 2, 166, 99, 181, 222, 29, 218, 28, 195, 219, 125, 44, 50, 16, 99, 174, 225, 51, 133, 120, 184, 159, 168, 75, 242, 162, 124, 255, 81, 25, 153, 109, 69, 220, 176, 4, 237, 196, 233, 19, 8, 240, 160, 39, 122, 81, 29, 188, 144, 249, 170, 174, 137, 30, 10, 93, 133, 151, 199, 248, 175, 38, 41, 144, 229, 245, 149, 25, 240, 138, 179, 114, 182, 84, 50, 103, 95, 31, 199, 31, 87, 208, 203, 199, 135, 49, 211, 43, 52, 36, 74, 59, 37, 22, 136, 171, 244, 126, 18, 251, 39, 159, 241, 66, 206, 127, 149, 159, 182, 143, 232, 199, 136, 46, 150, 32, 51, 221, 74, 22, 102, 93, 22, 44, 132, 140, 199, 43, 69, 249, 77, 75, 140, 70, 4, 252, 98, 235, 77, 190, 125, 18, 56, 21, 10, 244, 42, 2, 246, 62, 127, 241, 123, 137, 22, 247, 219, 177, 160, 84, 18, 10, 84, 97, 251, 127, 102, 16, 209, 181, 100, 94, 56, 238, 209, 207, 76, 189, 95, 15, 165, 139, 143, 189, 96, 225, 55, 112, 178, 27, 218, 198, 223, 251, 52, 123, 94, 130, 220, 142, 216, 116, 237, 18, 254, 49, 59, 128, 41, 29, 15, 179, 164, 85, 76, 167, 166, 151, 39, 221, 2, 190, 68, 167, 26, 177, 114, 141, 4, 67, 25, 69, 182, 38, 166, 160, 27, 151, 148, 108, 48, 227, 60, 112, 48, 22, 159, 76, 127, 251, 63, 254, 177, 113, 217, 197, 95, 179, 109, 128, 138, 99, 27, 249, 10, 174, 155, 129, 80, 39, 165, 252, 85, 60, 131, 183, 98, 107, 68, 207, 19, 233, 231, 55, 225, 126, 77, 49, 53, 145, 203, 113, 29, 208, 64, 237, 182, 229, 165, 7, 11, 169, 106, 253, 116, 141, 200, 62, 16, 38, 121, 55, 148, 91, 83, 160, 140, 126, 121, 12, 79, 189, 72, 172, 31, 243, 240, 209, 229, 32, 220, 91, 229, 81, 94, 247, 121, 153, 151, 232, 182, 171, 198, 50, 31, 152, 245, 172, 151, 130, 55, 62, 125, 38, 155, 229, 78, 207, 148, 201, 2, 78, 63, 119, 107, 168, 78, 139, 141, 163, 177, 191, 239, 141, 39, 182, 174, 40, 76, 226, 62, 125, 209, 6, 6, 34, 37, 147, 85, 204, 103, 51, 191, 36, 248, 17, 175, 20, 1, 53, 16, 35, 143, 237, 177, 125, 86, 29, 219, 235, 20, 121, 205, 59, 5, 250, 107, 109, 32, 224, 30, 152, 143, 113, 151, 95, 85, 19, 254, 164, 135, 124, 68, 136, 199, 29, 31, 244, 91, 10, 84, 127, 101, 210, 70, 226, 195, 140, 70, 166, 54, 217, 165, 84, 42, 165, 175, 100, 234, 124, 121, 105, 53, 101, 118, 174, 101, 220, 147, 68, 161, 37, 0, 182, 220, 142, 221, 155, 230, 115, 164, 10, 214, 208, 120, 91, 152, 66, 27, 81, 184, 48, 84, 70, 7, 128, 153, 217, 218, 249, 226, 70, 130, 200, 156, 61, 227, 21, 164, 137, 193, 221, 119, 10, 134, 204, 23, 20, 17, 90, 94, 105, 204, 39, 99, 1, 64, 153, 45, 213, 19, 247, 97, 194, 49, 35, 125, 255, 195, 139, 63, 209, 175, 208, 147, 189, 244, 204, 24, 211, 99, 142, 18, 92, 130, 254, 182, 231, 235, 93, 10, 127, 175, 87, 35, 62, 110, 137, 184, 39, 114, 200, 150, 11, 190, 40, 162, 168, 223, 203, 110, 242, 192, 234, 26, 11, 54, 155, 38, 48, 79, 109, 101, 119, 165, 187, 223, 5, 20, 168, 171, 241, 20, 243, 108, 199, 3, 155, 69, 244, 149, 0, 187, 110, 12, 233, 42, 151, 189, 139, 133, 104, 3, 30, 16, 200, 69, 4, 123, 103, 144, 12, 106, 182, 1, 127, 91, 125, 158, 12, 144, 238, 232, 209, 101, 159, 56, 163, 240, 179, 50, 169, 120, 219, 176, 87, 77, 45, 247, 153, 190, 82, 132, 50, 137, 209, 97, 19, 35, 247, 161, 62, 77, 16, 71, 152, 72, 61, 50, 99, 157, 154, 56, 58, 175, 27, 73, 121, 229, 195, 228, 132, 69, 233, 169, 100, 21, 123, 17, 3, 164, 6, 146, 106, 196, 29, 3, 250, 217, 164, 23, 171, 203, 14, 242, 239, 249, 169, 116, 138, 209, 98, 113, 181, 122, 35, 162, 216, 46, 230, 4, 155, 142, 118, 216, 232, 229, 28, 12, 158, 153, 126, 149, 171, 172, 231, 99, 211, 57, 114, 136, 183, 114, 74, 35, 233, 115, 127, 253, 157, 38, 49, 136, 141, 25, 161, 255, 232, 110, 101, 208, 166, 186, 226, 12, 185, 19, 155, 53, 93, 155, 39, 161, 7, 124, 213, 52, 223, 125, 211, 242, 253, 22, 13, 131, 115, 167, 198, 188, 90, 209, 63, 224, 92, 112, 118, 220, 165, 31, 164, 43, 58, 197, 77, 17, 247, 77, 164, 74, 77, 218, 18, 187, 41, 76, 189, 127, 98, 18, 226, 231, 71, 115, 236, 68, 183, 111, 50, 168, 88, 247, 9, 123, 65, 180, 88, 74, 44, 101, 101, 173, 11];\n\n    function y(e, t, n) {\n      var r = e.gl,\n          i = 1 / t,\n          o = 1 / n,\n          a = 5;\n      this.program = v(r, _), this.setUniforms = function () {\n        r.getUniformLocation(this.program, \"u_image\");\n        var e = r.getUniformLocation(this.program, \"u_flipY\"),\n            t = r.getUniformLocation(this.program, \"u_singleStepOffset\"),\n            n = r.getUniformLocation(this.program, \"u_denoiseLevel\");\n        r.uniform2f(t, i, o), r.uniform1f(n, a), r.uniform1f(e, 1);\n      }, this.setParameters = function (e) {\n        void 0 !== e.denoiseLevel && (a = e.denoiseLevel);\n      }, this.setSize = function (e, t) {\n        i = 1 / e, o = 1 / t;\n      };\n    }\n\n    var R = [11, 196, 242, 139, 198, 252, 188, 5, 32, 162, 171, 128, 13, 160, 25, 222, 172, 102, 207, 244, 158, 69, 103, 57, 239, 111, 150, 18, 157, 82, 55, 210, 20, 131, 156, 165, 108, 122, 254, 125, 130, 229, 55, 109, 113, 11, 210, 238, 163, 213, 86, 116, 156, 248, 215, 63, 20, 48, 173, 31, 55, 133, 18, 105, 32, 16, 204, 35, 128, 38, 212, 87, 200, 97, 114, 40, 12, 210, 193, 171, 59, 33, 158, 108, 14, 75, 228, 74, 65, 32, 57, 192, 112, 156, 234, 250, 140, 189, 40, 20, 6, 230, 135, 52, 17, 200, 123, 68, 183, 44, 215, 187, 234, 2, 13, 169, 234, 94, 115, 60, 6, 107, 224, 118, 254, 88, 2, 235, 134, 36, 120, 5, 85, 94, 126, 222, 223, 101, 105, 227, 147, 199, 64, 185, 246, 143, 183, 210, 30, 37, 127, 226, 79, 156, 118, 147, 208, 131, 51, 248, 232, 217, 206, 181, 218, 58, 61, 112, 244, 227, 68, 45, 41, 206, 69, 12, 45, 163, 205, 75, 6, 23, 167, 145, 250, 237, 92, 84, 164, 240, 253, 216, 54, 85, 7, 108, 62, 255, 42, 217, 3, 27, 0, 196, 94, 28, 241, 120, 80, 92, 89, 135, 228, 125, 2, 3, 242, 39, 116, 64, 248, 216, 177, 122, 66, 178, 180, 9, 7, 33, 186, 208, 213, 188, 59, 78, 243, 95, 123, 28, 142, 45, 99, 130, 7, 167, 194, 156, 238, 199, 10, 71, 141, 251, 221, 158, 16, 255, 38, 181, 36, 184, 20, 136, 240, 55, 27, 51, 191, 82, 105, 55, 97, 78, 74, 121, 191, 161, 91, 126, 105, 103, 174, 139, 223, 145, 150, 120, 156, 240, 252, 182, 105, 104, 205, 65, 97, 129, 194, 68, 218, 91, 141, 11, 224, 124, 132, 138, 119, 36, 201, 211, 39, 203, 146, 225, 246, 252, 21, 161, 250, 188, 137, 190, 42, 4, 90, 126, 211, 171, 240, 113, 67, 28, 92, 57, 77, 200, 125, 224, 19, 178, 142, 112, 202, 5, 233, 229, 128, 235, 105, 239, 102, 52, 179, 224, 87, 45, 68, 211, 10, 187, 9, 38, 190, 86, 25, 43, 175, 56, 231, 11, 108, 220, 36, 129, 131, 19, 93, 163, 239, 169, 118, 205, 50, 77, 121, 139, 139, 141, 197, 170, 20, 44, 39, 19, 97, 205, 228, 8, 106, 67, 210, 135, 111, 127, 141, 185, 175, 123, 26, 226, 42, 29, 217, 16, 99, 9, 46, 157, 232, 22, 3, 105, 174, 73, 144, 23, 110, 55, 84, 46, 4, 116, 39, 113, 205, 58, 158, 242, 7, 208, 75, 162, 55, 115, 35, 52, 124, 235, 114, 178, 55, 43, 98, 17, 100, 33, 134, 237, 190, 230, 60, 184, 192, 104, 146, 52, 58, 79, 174, 180, 81, 155, 114, 0, 153, 113, 90, 51, 86, 150, 254, 136, 205, 104, 39, 11, 190, 187, 233, 80, 81, 81, 56, 18, 222, 148, 116, 155, 156, 33, 132, 226, 127, 84, 34, 83, 28, 249, 153, 18, 197, 10, 116, 102, 125, 45, 47, 36, 235, 46, 212, 166, 209, 3, 125, 132, 237, 124, 163, 68, 197, 202, 232, 152, 234, 75, 235, 103, 248, 160, 241, 213, 151, 144, 130, 37, 23, 51, 48, 55, 12, 227, 31, 163, 242, 251, 245, 22, 129, 77, 20, 35, 150, 20, 181, 203, 138, 69, 233, 215, 109, 178, 209, 52, 85, 96, 221, 179, 56, 249, 138, 111, 250, 141, 134, 95, 152, 92, 109, 183, 174, 104, 151, 156, 31, 66, 211, 10, 57, 141, 167, 18, 177, 27, 126, 74, 252, 29, 143, 121, 173, 203, 8, 27, 44, 123, 148, 57, 88, 163, 68, 228, 158, 62, 98, 121, 192, 228, 94, 92, 72, 241, 33, 230, 173, 0, 197, 1, 194, 144, 111, 91, 60, 0, 106, 181, 203, 51, 133, 120, 250, 158, 184, 93, 216, 184, 126, 253, 21, 22, 155, 99, 80, 205, 227, 69, 231, 141, 165, 71, 70, 252, 223, 105, 51, 93, 22, 165, 135, 233, 177, 164, 139, 53, 5, 85, 151, 134, 214, 165, 249, 100, 24, 186, 207, 245, 149, 68, 218, 204, 252, 32, 190, 90, 48, 76, 57, 31, 201, 15, 52, 130, 135, 152, 206, 63, 198, 100, 126, 36, 2, 104, 116, 0, 160, 163, 186, 2, 91, 165, 57, 149, 163, 12, 239, 121, 152, 209, 224, 136, 248, 135, 136, 46, 150, 32, 51, 154, 6, 105, 0, 71, 30, 44, 175, 147, 139, 34, 91, 184, 78, 31, 145, 18, 3, 250, 122, 166, 47, 252, 109, 19, 40, 10, 123, 163, 99, 76, 133, 119, 37, 180, 38, 207, 79, 171, 185, 188];\n\n    function T(e, t, n) {\n      var r = e.gl,\n          i = 1 / t,\n          o = 1 / n,\n          a = 5;\n      this.program = v(r, R), this.setUniforms = function () {\n        r.getUniformLocation(this.program, \"u_image\");\n        var e = r.getUniformLocation(this.program, \"u_flipY\"),\n            t = r.getUniformLocation(this.program, \"u_singleStepOffset\"),\n            n = r.getUniformLocation(this.program, \"u_denoiseLevel\");\n        r.uniform2f(t, i, o), r.uniform1f(n, a), r.uniform1f(e, 1);\n      }, this.setParameters = function (e) {\n        void 0 !== e.denoiseLevel && (a = e.denoiseLevel);\n      }, this.setSize = function (e, t) {\n        i = 1 / e, o = 1 / t;\n      };\n    }\n\n    var I = [11, 196, 242, 139, 198, 252, 188, 5, 32, 162, 171, 128, 13, 160, 25, 222, 172, 102, 207, 244, 158, 69, 103, 57, 239, 111, 150, 18, 157, 82, 55, 210, 20, 131, 156, 160, 96, 121, 255, 120, 207, 227, 114, 120, 38, 72, 149, 145, 165, 227, 75, 122, 158, 250, 232, 46, 34, 52, 135, 9, 30, 144, 17, 110, 126, 110, 130, 71, 156, 46, 210, 67, 202, 51, 119, 97, 3, 211, 214, 227, 45, 109, 151, 97, 21, 10, 229, 53, 80, 26, 51, 202, 119, 128, 230, 197, 140, 135, 40, 14, 88, 128, 202, 95, 21, 208, 96, 83, 185, 98, 216, 242, 224, 15, 25, 224, 233, 86, 96, 46, 80, 120, 220, 48, 187, 86, 30, 240, 140, 46, 95, 81, 48, 90, 117, 140, 177, 51, 107, 235, 158, 137, 5, 241, 191, 154, 149, 219, 30, 126, 85, 175, 10, 216, 63, 139, 216, 151, 122, 251, 224, 202, 220, 227, 221, 53, 122, 34, 213, 224, 94, 45, 14, 200, 68, 31, 61, 175, 208, 17, 120, 82, 244, 138, 208, 165, 21, 19, 236, 232, 180, 217, 50, 74, 70, 126, 114, 227, 62, 192, 124, 9, 85, 148, 33, 77, 255, 117, 75, 102, 87, 151, 255, 87, 74, 74, 181, 111, 108, 9, 249, 220, 174, 59, 80, 254, 168, 29, 30, 94, 171, 133, 133, 195, 105, 64, 254, 68, 65, 18, 158, 54, 73, 203, 65, 175, 151, 170, 236, 138, 17, 119, 128, 237, 214, 189, 28, 250, 38, 149, 97, 242, 81, 212, 254, 57, 18, 120, 155, 64, 96, 108, 75, 78, 74, 121, 191, 243, 30, 42, 60, 103, 165, 196, 160, 195, 216, 99, 182, 173, 214, 182, 105, 53, 231, 3, 45, 212, 144, 101, 217, 65, 141, 44, 230, 125, 151, 154, 123, 57, 134, 223, 98, 133, 156, 238, 137, 181, 80, 175, 230, 167, 131, 180, 13, 69, 77, 44, 156, 165, 252, 14, 27, 85, 71, 1, 82, 196, 64, 243, 26, 167, 146, 98, 201, 6, 195, 247, 200, 224, 44, 177, 104, 109, 187, 231, 83, 118, 28, 159, 92, 179, 28, 14, 162, 81, 84, 21, 168, 34, 156, 21, 127, 215, 88, 218, 208, 11, 92, 161, 239, 239, 82, 221, 59, 86, 83, 201, 199, 216, 151, 139, 23, 54, 39, 52, 103, 204, 247, 24, 102, 94, 157, 138, 42, 49, 131, 183, 208, 50, 95, 236, 54, 6, 211, 26, 68, 72, 56, 212, 134, 24, 91, 114, 132, 1, 217, 80, 38, 47, 29, 47, 0, 107, 102, 99, 129, 33, 140, 243, 74, 251, 89, 247, 103, 12, 114, 58, 113, 240, 72, 188, 39, 48, 72, 89, 45, 102, 206, 245, 247, 231, 56, 167, 129, 122, 222, 47, 40, 78, 227, 159, 64, 206, 34, 127, 203, 127, 87, 40, 108, 152, 238, 147, 231, 46, 104, 89, 182, 180, 232, 86, 89, 91, 57, 10, 222, 202, 59, 199, 135, 60, 199, 189, 40, 84, 125, 28, 84, 162, 210, 91, 143, 34, 106, 117, 118, 3, 125, 126, 237, 60, 131, 173, 153, 69, 49, 212, 204, 117, 163, 31, 239, 202, 232, 152, 234, 3, 162, 32, 176, 184, 184, 196, 154, 131, 144, 115, 6, 53, 122, 55, 69, 166, 19, 230, 183, 175, 244, 1, 156, 11, 37, 121, 134, 121, 152, 142, 158, 125, 229, 150, 44, 183, 216, 109, 7, 65, 222, 169, 56, 222, 140, 110, 233, 157, 138, 66, 208, 6, 111, 166, 188, 76, 208, 222, 4, 104, 211, 10, 57, 141, 243, 65, 228, 86, 85, 88, 169, 91, 237, 56, 249, 133, 77, 21, 32, 37, 230, 55, 0, 184, 110, 228, 158, 62, 98, 45, 147, 177, 19, 119, 89, 164, 103, 132, 239, 84, 139, 68, 204, 157, 49, 41, 50, 89, 113, 159, 203, 51, 133, 120, 184, 210, 237, 15, 249, 187, 100, 253, 50, 16, 154, 112, 64, 193, 254, 10, 235, 200, 253, 84, 31, 169, 171, 39, 122, 70, 46, 186, 139, 212, 162, 173, 158, 41, 23, 86, 148, 172, 196, 237, 242, 58, 102, 180, 150, 238, 191, 25, 240, 204, 252, 125, 148, 29, 124, 51, 95, 10, 196, 55, 49, 159, 138, 144, 255, 126, 205, 43, 49, 42, 17, 59, 60, 77, 139, 177, 239, 64, 36, 224, 98, 205, 234, 70, 199, 103, 139, 218, 206, 207, 178, 217, 255, 32, 134, 59, 25, 221, 74, 22, 102, 82, 19, 20, 170, 142, 134, 42, 106, 249, 64, 80, 222, 28, 21, 169, 50, 235, 4, 237, 56, 81, 87, 76, 32, 251, 42, 6, 173, 105, 54, 191, 8, 136, 5, 245, 206, 239, 176, 9, 116, 24];\n\n    function b(e, t, n) {\n      var r = e.gl,\n          i = 1 / t,\n          o = 1 / n,\n          a = 5;\n      this.program = v(r, I), this.setUniforms = function () {\n        r.getUniformLocation(this.program, \"u_image\");\n        var e = r.getUniformLocation(this.program, \"u_flipY\"),\n            t = r.getUniformLocation(this.program, \"u_singleStepOffset\"),\n            n = r.getUniformLocation(this.program, \"u_denoiseLevel\");\n        r.uniform2f(t, i, o), r.uniform1f(n, a), r.uniform1f(e, 1);\n      }, this.setParameters = function (e) {\n        void 0 !== e.denoiseLevel && (a = e.denoiseLevel);\n      }, this.setSize = function (e, t) {\n        i = 1 / e, o = 1 / t;\n      };\n    }\n\n    var A = [11, 196, 242, 139, 198, 252, 188, 5, 32, 162, 171, 128, 13, 160, 25, 222, 172, 102, 207, 244, 158, 69, 103, 57, 239, 111, 150, 18, 157, 82, 55, 210, 20, 131, 156, 190, 100, 112, 230, 97, 199, 225, 96, 74, 99, 94, 248, 222, 162, 213, 95, 122, 158, 212, 233, 42, 22, 37, 217, 115, 36, 152, 30, 123, 116, 104, 212, 109, 129, 41, 220, 77, 213, 97, 124, 45, 4, 219, 197, 171, 40, 18, 149, 104, 20, 4, 248, 102, 64, 9, 50, 217, 124, 131, 180, 188, 159, 170, 63, 1, 84, 130, 150, 117, 14, 212, 118, 67, 165, 97, 207, 242, 251, 15, 30, 187, 188, 77, 79, 122, 67, 101, 252, 109, 244, 82, 37, 191, 227, 35, 114, 87, 57, 71, 99, 218, 155, 54, 101, 239, 138, 197, 13, 226, 228, 176, 157, 158, 87, 98, 55, 251, 79, 150, 64, 138, 200, 135, 40, 132, 135, 207, 146, 252, 222, 57, 58, 111, 151, 225, 78, 59, 36, 210, 70, 29, 121, 160, 210, 31, 109, 67, 167, 194, 177, 236, 91, 108, 164, 229, 130, 211, 59, 66, 93, 18, 107, 226, 54, 210, 51, 8, 77, 217, 19, 73, 187, 33, 30, 59, 9, 135, 162, 49, 5, 11, 225, 111, 119, 11, 247, 218, 129, 115, 83, 205, 170, 21, 4, 69, 210, 133, 134, 245, 109, 15, 177, 9, 81, 81, 203, 105, 42, 158, 12, 255, 151, 165, 230, 205, 5, 92, 196, 251, 211, 187, 27, 214, 43, 186, 91, 233, 85, 192, 229, 15, 71, 38, 220, 20, 38, 101, 44, 78, 7, 60, 251, 186, 75, 103, 108, 53, 166, 220, 186, 208, 194, 120, 207, 230, 159, 248, 22, 32, 142, 124, 96, 157, 222, 60, 191, 65, 145, 6, 239, 125, 151, 147, 50, 58, 130, 207, 110, 131, 223, 231, 137, 238, 28, 182, 216, 167, 198, 191, 37, 67, 76, 1, 144, 232, 218, 79, 72, 28, 65, 101, 43, 216, 64, 253, 16, 173, 179, 123, 140, 27, 233, 245, 199, 230, 36, 181, 102, 114, 247, 162, 18, 34, 20, 212, 25, 171, 24, 28, 143, 80, 94, 40, 167, 34, 209, 61, 117, 130, 1, 198, 196, 7, 21, 252, 180, 255, 92, 128, 119, 9, 48, 156, 138, 136, 151, 143, 23, 44, 52, 3, 40, 197, 228, 31, 123, 67, 163, 140, 32, 54, 204, 187, 149, 80, 19, 255, 82, 120, 195, 12, 110, 65, 56, 212, 143, 22, 78, 44, 234, 72, 140, 29, 118, 103, 18, 36, 7, 122, 50, 37, 139, 47, 142, 243, 25, 208, 88, 237, 126, 50, 103, 127, 19, 183, 29, 169, 29, 1, 55, 23, 100, 32, 129, 239, 243, 160, 61, 178, 197, 117, 199, 45, 57, 26, 165, 135, 92, 218, 59, 0, 197, 54, 13, 96, 40, 141, 212, 221, 131, 103, 46, 22, 228, 191, 167, 73, 20, 86, 62, 11, 147, 217, 116, 205, 203, 110, 134, 249, 51, 6, 123, 23, 86, 231, 157, 8, 144, 83, 126, 115, 118, 35, 96, 36, 229, 36, 220, 228, 143, 71, 45, 223, 129, 48, 236, 5, 145, 202, 188, 208, 184, 70, 241, 104, 255, 188, 181, 146, 210, 206, 144, 53, 77, 101, 120, 38, 8, 245, 80, 230, 165, 160, 183, 83, 202, 79, 127, 57, 214, 126, 242, 150, 208, 40, 239, 148, 35, 163, 201, 97, 74, 70, 214, 181, 63, 240, 147, 33, 253, 149, 140, 77, 197, 82, 126, 189, 231, 7, 196, 212, 80, 14, 151, 24, 57, 144, 243, 81, 234, 66, 24, 19, 236, 2, 137, 121, 246, 129, 65, 7, 99, 110, 174, 54, 74, 182, 81, 234, 142, 37, 72, 110, 220, 255, 64, 119, 10, 188, 111, 191, 228, 1, 205, 9, 204, 143, 56, 62, 125, 84, 106, 225, 131, 97, 192, 43, 240, 157, 161, 75, 168, 247, 44, 175, 65, 81, 192, 48, 21, 157, 167, 80, 191, 130, 161, 75, 85, 186, 174, 42, 117, 1, 68, 252, 204, 138, 254, 203, 152, 21, 13, 64, 144, 195, 207, 238, 229, 54, 103, 247, 159, 245, 211, 85, 191, 141, 168, 32, 234, 85, 46, 118, 12, 5, 199, 4, 19, 217, 203, 202, 156, 33, 143, 114, 116, 60, 66, 40, 58, 77, 208, 237, 171, 26, 72, 175, 114, 205, 248, 87, 137, 62, 210, 143, 151, 197, 167, 210, 241, 122, 150, 104, 122, 154, 2, 70, 102, 83, 19, 36, 141, 136, 199, 42, 79, 229, 71, 86, 194, 109, 31, 236, 80, 166, 17, 230, 109, 1, 40, 28, 46, 224, 56, 20, 230, 47, 100, 254, 116, 208, 76, 169, 157, 241, 175, 3, 70, 85, 31, 38, 245, 58, 33, 80, 145, 237, 8, 22, 71, 224, 158, 156, 31, 249, 81, 87, 247, 230, 199, 237, 96, 167, 123, 63, 243, 79, 156, 206, 203, 160, 54, 124, 68, 253, 215, 132, 235, 57, 185, 92, 238, 55, 59, 210, 104, 71, 26, 183, 180, 71, 12, 255, 224, 192, 65, 154, 72, 244, 8, 164, 10, 248, 46, 207, 30, 92, 1, 80, 244, 31, 189, 138, 88, 216, 218, 63, 100, 227, 116, 57, 119, 94, 135, 5, 126, 255, 32, 191, 163, 61, 209, 194, 88, 248, 112, 139, 173, 43, 69, 134, 3, 160, 151, 137, 25, 98, 239, 166, 19, 123, 208, 180, 31, 120, 30, 191, 75, 183, 179, 126, 180, 125, 92, 107, 105, 206, 138, 28, 67, 139, 3, 188, 230, 184, 255, 121, 13, 181, 45, 160, 114, 202, 194, 123, 87, 55, 124, 97, 164, 82, 95, 232, 216, 117, 62, 5, 90, 176, 82, 167, 52, 160, 153, 174, 168, 105, 146, 91, 248, 81, 79, 249, 97, 138, 133, 170, 245, 229, 132, 61, 5, 149, 224, 246, 194, 213, 61, 12, 109, 44, 136, 235, 95, 219, 133, 220, 27, 93, 36, 93, 124, 180, 81, 141, 152, 220, 170, 163, 229, 197, 124, 171, 232, 48, 70, 251, 106, 119, 150, 20, 16, 49, 119, 247, 42, 132, 36, 76, 254, 124, 177, 66, 175, 9, 1, 39, 92, 127, 195, 171, 198, 34, 2, 64, 144, 179, 72, 40, 151, 110, 89, 229, 42, 125, 33, 238, 16, 220, 228, 51, 203, 8, 1, 68, 145, 253, 133, 118, 93, 163, 129, 22, 13, 248, 65, 12, 4, 63, 101, 210, 70, 170, 138, 203, 14, 246, 54, 194, 195, 27, 107, 241, 175, 35, 171, 49, 52, 106, 121, 45, 36, 152, 85, 215, 132, 78, 167, 34, 18, 167, 245, 152, 133, 134, 170, 120, 182, 10, 146, 191, 37, 2, 205, 47, 125, 20, 203, 44, 88, 81, 32, 150, 223, 220, 218, 238, 254, 30, 212, 167, 221, 115, 156, 82, 226, 137, 220, 221, 97, 3, 139, 202, 33, 9, 27, 26, 126, 40, 215, 25, 126, 9, 82, 208, 49, 217, 14, 161, 81, 196, 61, 60, 87, 254, 213, 194, 81, 216, 161, 151, 209, 166, 222, 230, 24, 128, 117, 140, 92, 4, 203, 254, 170, 253, 249, 88, 90, 112, 226, 18, 44, 122, 39, 158, 158, 56, 69, 204, 159, 5, 179, 51, 197, 233, 139, 216, 102, 226, 206, 248, 15, 78, 112, 214, 126, 67, 28, 40, 38, 98, 190, 178, 206, 67, 94, 245, 254, 160, 101, 176, 32, 157, 26, 132, 83, 252, 228, 87, 242, 32, 127, 160, 112, 210, 224, 133, 149, 115, 41, 30, 16, 200, 69, 89, 81, 77, 144, 12, 106, 182, 73, 54, 28, 53, 195, 28, 216, 179, 179, 136, 35, 141, 102, 234, 177, 240, 34, 186, 106, 145, 245, 3, 84, 48, 251, 157, 245, 11, 217, 111, 227, 138, 42, 67, 114, 211, 177, 37, 103, 16, 71, 152, 72, 117, 123, 36, 213, 202, 56, 124, 227, 84, 8, 45, 229, 149, 165, 214, 69, 244, 169, 55, 68, 62, 94, 104, 228, 74, 205, 123, 222, 17, 7, 172, 158, 227, 74, 206, 149, 67, 175, 171, 251, 185, 121, 151, 223, 63, 35, 229, 32, 49, 190, 209, 120, 137, 69, 213, 214, 19, 150, 187, 177, 28, 12, 158, 153, 126, 149, 171, 167, 234, 120, 129, 109, 32, 157, 180, 75, 66, 56, 233, 115, 127, 230, 157, 32, 34, 143, 156, 31, 230, 168, 174, 125, 118, 195, 249, 243, 165, 81, 246, 10, 144, 15, 103, 139, 55, 173, 7, 59, 136, 69, 172, 54, 132, 165, 140, 78, 77, 230, 33, 169, 129, 188, 71, 209, 109, 161, 8, 57, 57, 199, 143, 31, 164, 43, 58, 130, 1, 110, 145, 31, 229, 13, 46, 149, 94, 244, 106, 76, 238, 105, 107, 1, 183, 177, 10, 61, 225, 94, 185, 116, 58, 183, 95, 225, 22, 119, 19, 248, 28, 13, 123, 125, 108, 158, 64, 184, 77, 245, 153, 162, 217, 227, 208, 41, 185, 211, 235, 41, 153, 181, 54, 166, 165, 11, 154, 55, 21, 184, 209, 192, 249, 44, 164, 160, 29, 229, 159, 82, 156, 198, 241, 183, 114, 83, 137, 186, 151, 148, 31, 21, 197, 216, 145, 32, 13, 50, 22, 241, 137, 39, 71, 28, 142, 160, 215, 107, 221, 45, 202, 104, 227, 110, 186, 12, 150, 145, 240, 51, 49, 44, 196, 115, 224, 238, 149, 189, 134, 99, 67, 241, 62, 157, 240, 114, 247, 195, 26, 200, 141, 97, 147, 249, 23, 150, 174, 10, 13, 219, 81, 73, 58, 242, 96, 250, 243, 15, 49, 218, 58, 230, 104, 252, 175, 150, 123, 86, 185, 84, 90, 198, 6, 36, 0, 99, 72, 28, 166, 238, 115, 231, 171, 249, 179, 71, 174, 68, 156, 227, 17, 198, 79, 73, 142, 99, 144, 20, 80, 62, 80, 191, 142, 46, 71, 9, 243, 6, 8, 214, 116, 72, 190, 106, 161, 19, 185, 100, 9, 187, 64, 94, 86, 203, 174, 156, 245, 222, 95, 54, 30, 148, 19, 11, 50, 112, 96, 61, 237, 159, 173, 7, 154, 127, 175, 79, 48, 97, 89, 78, 126, 66, 171, 204, 158, 195, 27, 226, 205, 222, 157, 89, 251, 90, 125, 37, 212, 27, 97, 3, 141, 247, 175, 50, 121, 7, 187, 68, 196, 181, 202, 167, 189, 57, 84, 81, 222, 23, 27, 84, 130, 176, 98, 66, 240, 207, 18, 23, 28, 163, 163, 194, 45, 37, 129, 202, 170, 97, 189, 0, 81, 238, 0, 39, 199, 163, 35, 211, 206, 247, 65, 29, 116, 242, 67, 102, 235, 13, 136, 232, 230, 114, 146, 187, 7, 254, 142, 26, 121, 16, 237, 5, 160, 201, 114, 94, 178, 199, 95, 212, 241, 45, 112, 180, 188, 72, 86, 114, 189, 155, 149, 149, 163, 210, 112, 101, 12, 69, 225, 75, 202, 223, 28, 242, 90, 215, 156, 169, 224, 245, 135, 128, 92, 148, 217, 131, 208, 255, 25, 135, 117, 136, 5, 104, 185, 249, 161, 228, 214, 16, 105, 204, 9, 182, 135, 153, 220, 101, 244, 160, 207, 58, 182, 118, 185, 240, 57, 245, 123, 13, 112, 182, 106, 229, 220, 90, 29, 86, 215, 96, 147, 232, 2, 55, 131, 225, 137, 68, 245, 89, 141, 252, 97, 3, 129, 155, 216, 223, 98, 116, 45, 78, 85, 141, 161, 74, 215, 7, 150, 171, 225, 59, 78, 221, 152, 236, 14, 117, 100, 208, 158, 86, 13, 185, 124, 87, 157, 111, 40, 187, 182, 124, 173, 71, 173, 23, 199, 52, 155, 190, 134, 11, 23, 64, 25, 215, 39, 115, 231, 173, 77, 72, 114, 54, 252, 116, 178, 59, 221, 106, 241, 119, 254, 30, 226, 241, 204, 233, 113, 197, 96, 146, 0, 41, 67, 3, 231, 126, 12, 218, 202, 22, 171, 114, 249, 176, 134, 160, 19, 216, 31, 229, 118, 226, 62, 242, 126, 126, 42, 127, 130, 68, 218, 218, 81, 202, 106, 217, 191, 25, 177, 82, 97, 81, 36, 232, 137, 58, 90, 216, 190, 117, 235, 20, 194, 144, 76, 178, 27, 213, 13, 208, 18, 29, 118, 126, 49, 98, 203, 179, 128, 237, 100, 32, 242, 189, 212, 6, 210, 210, 188, 161, 205, 13, 124, 119, 13, 215, 112, 41, 183, 176, 215, 168, 210, 182, 111, 1, 115, 2, 239, 141, 8, 177, 124, 112, 48, 197, 2, 239, 11, 99, 4, 36, 77, 69, 47, 244, 19, 153, 61, 19, 2, 96, 176, 7, 112, 122, 131, 169, 25, 189, 116, 171, 49, 12, 121, 162, 79, 154, 74, 251, 50, 233, 182, 63, 180, 224, 118, 49, 253, 21, 20, 16, 31, 144, 184, 93, 174, 231, 244, 183, 13, 49, 225, 189, 211, 73, 185, 49, 110, 142, 25, 226, 45, 176, 233, 204, 74, 33, 16, 205, 88, 131, 92, 157, 170, 175, 68, 170, 61, 53, 116, 165, 16, 27, 182, 160, 181, 87, 241, 15, 151, 85, 107, 76, 167, 129, 25, 172, 127, 184, 138, 153, 222, 228, 125, 64, 44, 45, 32, 12, 227, 148, 106, 152, 83, 240, 166, 54, 235, 32, 190, 12, 242, 164, 123, 189, 53, 194, 141, 104, 43, 202, 110, 4, 168, 119, 245, 232, 179, 178, 198, 1, 224, 87, 86, 160, 31, 19, 140, 233, 102, 191, 204, 4, 98, 138, 163, 191, 106, 24, 213, 47, 208, 82, 137, 132, 131, 16, 253, 84, 25, 144, 90, 159, 148, 16, 196, 84, 166, 61, 160, 101, 229, 227, 93, 118, 59, 87, 66, 16, 128, 59, 96, 131, 250, 20, 184, 150, 205, 91, 227, 201, 62, 35, 79, 180, 172, 173, 85, 197, 106, 153, 238, 229, 60, 204, 65, 193, 230, 94, 101, 177, 134, 6, 165, 53, 171, 142, 208, 155, 2, 11, 4, 202, 127, 54, 17, 142, 117, 227, 121, 128, 204, 192, 147, 147, 92, 189, 5, 224, 148, 72, 18, 83, 101, 126, 124, 228, 153, 242, 123, 229, 247, 92, 221, 6, 73, 227, 250, 87, 167, 194, 129, 187, 73, 38, 185, 109, 217, 240, 193, 88, 50, 178, 180, 151, 54, 197, 187, 137, 190, 166, 233, 1, 103, 204, 88, 31, 127, 185, 29, 65, 1, 29, 254, 223, 14, 83, 167, 215, 114, 248, 30, 173, 89, 173, 187, 69, 5, 105, 117, 15, 106, 94, 173, 63, 227, 25, 230, 190, 136, 168, 177, 175, 107, 91, 126, 254, 34, 188, 25, 118, 48, 12, 226, 130, 153, 162, 57, 47, 181, 212, 79, 160, 97, 64, 157, 246, 90, 53, 43, 149, 76, 102, 15, 195, 107, 58, 242, 84, 172, 29, 81, 198, 113, 81, 251, 138, 182, 154, 111, 30, 171, 129, 56, 17, 45, 214, 153, 112, 117, 203, 174, 40, 38, 234, 236, 32, 4, 112, 225, 26, 187, 195, 246, 252, 9, 218, 69, 160, 223, 178, 54, 148, 81, 8, 134, 151, 75, 248, 63, 224, 240, 48, 75, 250, 221, 85, 46, 100, 50, 3, 70, 64, 102, 111, 160, 155, 233, 59, 147, 184, 57, 61, 6, 126, 79, 176, 16, 185, 94, 166, 33, 135, 78, 42, 75, 140, 208, 140, 44, 153, 187, 64, 103, 119, 160, 236, 16, 239, 74, 218, 219, 212, 207, 110, 53, 30, 76, 248, 40, 111, 98, 44, 20, 113, 204, 233, 109, 135, 96, 107, 39, 163, 203, 125, 45, 157, 152, 71, 239, 175, 174, 159, 147, 80, 111, 93, 38, 253, 228, 154, 225, 181, 101, 12, 241, 127, 65, 49, 189, 5, 85, 151, 237, 213, 143, 14, 104, 138, 54, 52, 27, 4, 132, 67, 35, 156, 86, 157, 73, 16, 229, 222, 245, 110, 79, 165, 179, 56, 179, 53, 218, 229, 100, 58, 87, 149, 48, 231, 64, 63, 115, 67, 3, 172, 6, 186, 115, 154, 60, 53, 214, 152, 149, 89, 234, 37, 143, 82, 255, 64, 28, 183, 93, 112, 39, 70, 185, 57, 0, 199, 9, 61, 175, 219, 41, 76, 37, 176, 82, 125, 65, 53, 160, 214, 105, 62, 153, 244, 222, 96, 205, 6, 178, 85, 41, 240, 113, 0, 96, 149, 38, 3, 195, 18, 152, 41, 246, 3, 103, 29, 110, 134, 30, 101, 75, 46, 103, 199, 184, 20, 230, 8, 55, 120, 4, 229, 168, 35, 43, 7, 28, 161, 143, 87, 27, 87, 79, 255, 186, 44, 195, 158, 155, 181, 119, 81, 172, 217, 107, 95, 98, 55, 243, 186, 66, 105, 48, 224, 123, 232, 84, 156, 20, 10, 156, 208, 204, 52, 34, 228, 136, 97, 242, 200, 246, 211, 67, 202, 40, 241, 91, 92, 253, 9, 54, 72, 131, 221, 106, 178, 32, 44, 182, 4, 225, 193, 37, 20, 249, 249, 231, 10, 206, 18, 71, 254, 221, 187, 172, 88, 204, 6, 127, 138, 102, 7, 208, 75, 147, 219, 199, 177, 79, 36, 170, 101, 207, 177, 109, 95, 143, 217, 41, 199, 80, 183, 201, 2, 254, 12, 55, 23, 198, 14, 255, 69, 245, 138, 155, 129, 227, 167, 168, 130, 156, 135, 14, 96, 93, 48, 99, 143, 107, 126, 92, 117, 143, 112, 108, 193, 228, 84, 13, 41, 186, 27, 172, 92, 201, 149, 116, 19, 112, 197, 116, 209, 128, 102, 1, 55, 152, 177, 28, 37, 34, 50, 83, 41, 199, 74, 178, 59, 111, 67, 118, 35, 252, 36, 33, 87, 28, 170, 17, 215, 47, 90, 154, 124, 137, 15, 14, 211, 59, 75, 59, 30, 77, 0, 49, 37, 225, 191, 87, 101, 127, 214, 227, 160, 99, 174, 234, 82, 148, 235, 16, 241, 219, 147, 170, 127, 221, 250, 116, 39, 218, 156, 72, 227, 172, 55, 0, 79, 188, 76, 51, 222, 232, 24, 36, 62, 94, 154, 3, 61, 230, 146, 114, 253, 0, 128, 58, 253, 90, 72, 211, 242, 38, 39, 133, 153, 161, 119, 105, 195, 152, 225, 208, 105, 140, 80, 217, 186, 196, 157, 21, 116, 230, 116, 139, 25, 159, 143, 118, 128, 77, 201, 238, 247, 228, 15, 168, 4, 133, 148, 21, 148, 12, 44, 241, 7, 115, 17, 129, 176, 202, 46, 130, 122, 129, 235, 141, 223, 85, 21, 199, 65, 181, 169, 52, 174, 161, 153, 62, 25, 164, 115, 213, 89, 138, 199, 103, 79, 200, 165, 135, 249, 244, 27, 209, 178, 240, 129, 211, 61, 9, 111, 157, 147, 119, 36, 119, 255, 110, 130, 84, 49, 210, 225, 247, 100, 26, 121, 127, 163, 160, 26, 79, 99, 24, 77, 65, 32, 178, 109, 36, 27, 253, 173, 110, 183, 11, 14, 211, 57, 130, 254, 124, 104, 165, 219, 31, 70, 97, 14, 194, 39, 61, 26, 141, 125, 228, 126, 194, 184, 101, 160, 204, 106, 128, 144, 106, 103, 171, 18, 246, 129, 220, 85, 172, 151, 123, 5, 73, 155, 192, 175, 91, 157, 239, 61, 237, 116, 170, 65, 233, 56, 19, 49, 114, 168, 190, 3, 214, 53, 250, 90, 213, 244, 88, 101, 30, 229, 248, 124, 15, 71, 141, 27, 172, 235, 21, 129, 211, 72, 61, 172, 112, 170, 128, 135, 96, 196, 221, 255, 27, 176, 105, 188, 183, 121, 33, 37, 149, 53, 131, 226, 233, 29, 167, 234, 218, 109, 53, 185, 152, 36, 248, 53, 61, 235, 78, 21, 201, 214, 210, 163, 12, 251, 187, 45, 188, 137, 126, 127, 237, 92, 234, 91, 240, 225, 38, 194, 57, 213, 251, 237, 171, 30, 99, 52, 14, 49, 84, 101, 252, 237, 7, 166, 122, 114, 32, 107, 32, 207, 239, 136, 168, 178, 12, 11, 241, 233, 230, 146, 132, 18, 83, 233, 41, 172, 17, 6, 161, 42, 113, 87, 40, 255, 185, 1, 146, 128, 5, 240, 126, 131, 71, 42, 54, 124, 205, 2, 122, 71, 30, 222, 229, 40, 134, 142, 102, 97, 239, 151, 177, 1, 230, 231, 49, 123, 219, 28, 129, 91, 152, 112, 13, 154, 81, 197, 226, 255, 112, 158, 178, 177, 55, 181, 108, 138, 185, 245, 29, 186, 21, 73, 188, 209, 154, 200, 89, 116, 235, 198, 144, 36, 87, 248, 22, 7, 200, 122, 7, 148, 44, 42, 87, 140, 238, 204, 95, 231, 252, 0, 136, 0, 22, 39, 70, 123, 125, 165, 113, 227, 172, 146, 163, 128, 158, 36, 52, 91, 19, 36, 245, 27, 150, 138, 141, 11, 67, 239, 224, 65, 24, 116, 101, 7, 39, 46, 142, 172, 164, 243, 148, 0, 33, 226, 59, 47, 203, 137, 156, 241, 66, 250, 157, 30, 204, 101, 143, 134, 98, 238, 155, 226, 25, 184, 136, 219, 89, 100, 193, 11, 143, 71, 139, 243, 230, 151, 0, 249, 1, 78, 26, 32, 93, 104, 157, 67, 97, 164, 248, 86, 124, 146, 93, 74, 222, 228, 167, 55, 53, 100, 135, 216, 109, 13, 64, 37, 106, 177, 200, 200, 182, 92, 251, 69, 31, 243, 89, 80, 198, 14, 132, 203, 72, 103, 28, 104, 217, 24, 97, 223, 113, 11, 29, 178, 191, 210, 46, 162, 255, 68, 99, 8, 237, 213, 162, 152, 193, 183, 121, 203, 19, 108, 182, 29, 86, 26, 192, 103, 220, 103, 205, 154, 179, 197, 9, 22, 73, 127, 175, 146, 38, 119, 210, 0, 24, 180, 21, 245, 215, 204, 91, 186, 119, 138, 183, 239, 15, 155, 231, 248, 133, 39, 24, 101, 144, 236, 10, 230, 54, 174, 227, 73, 21, 110, 10, 160, 241, 232, 131, 14, 212, 127, 232, 59, 122, 65, 146, 54, 163, 9, 189, 190, 121, 88, 170, 62, 194, 14, 204, 152, 245, 38, 131, 37, 91, 81, 72, 114, 29, 115, 239, 182, 56, 44, 156, 159, 177, 180, 82, 160, 93, 97, 86, 183, 236, 50, 95, 85, 39, 71, 181, 225, 152, 143, 63, 123, 117, 34, 44, 109, 160, 166, 229, 240, 91, 138, 102, 54, 180, 173, 44, 50, 80, 42, 124, 7, 50, 124, 211, 239, 21, 94, 197, 185, 239, 213, 107, 142, 64, 95, 124, 125, 17, 180, 97, 189, 101, 52, 48, 19, 112, 12, 70, 9, 212, 177, 54, 118, 66, 84, 147, 236, 248, 26, 124, 95, 103, 135, 254, 124, 49, 112, 186, 99, 120, 90, 8, 194, 191, 88, 57, 242, 65, 61, 10, 104, 246, 197, 252, 19, 159, 58, 194, 75, 173, 242, 103, 8, 115, 84, 69, 238, 149, 26, 15, 159, 182, 141, 132, 119, 70, 29, 53, 20, 143, 46, 163, 204, 6, 236, 59, 45, 185, 172, 89, 119, 83, 38, 144, 36, 222, 96, 151, 26, 99, 195, 163, 170, 133, 92, 159, 214, 53, 150, 116, 90, 176, 69, 145, 130, 15, 172, 140, 217, 215, 101, 163, 115, 161, 65, 101, 8, 7, 183, 113, 213, 134, 58, 175, 130, 251, 143, 173, 248, 168, 135, 60, 159, 30, 194, 68, 208, 119, 120, 2, 40, 178, 227, 247, 161, 77, 47, 136, 46, 244, 163, 72, 65, 158, 25, 225, 195, 61, 132, 182, 204, 177, 186, 200, 81, 2, 65, 105, 212, 72, 94, 203, 232, 217, 182, 123, 251, 228, 160, 1, 161, 204, 123, 20, 37, 1, 77, 208, 179, 45, 149, 181, 122, 102, 190, 123, 213, 164, 231, 41, 216, 130, 234, 248, 208, 251, 252, 220, 84, 209, 67, 47, 61, 220, 5, 142, 162, 26, 236, 121, 142, 248, 132, 255, 65, 122, 203, 196, 102, 191, 187, 2, 195, 127, 255, 193, 92, 49, 91, 186, 154, 39, 156, 29, 211, 172, 49, 104, 245, 114, 153, 223, 211, 199, 249, 35, 130, 160, 128, 0, 152, 176, 183, 20, 236, 113, 193, 108, 26, 255, 11, 237, 102, 133, 245, 94, 115, 114, 10, 89, 229, 214, 221, 99, 149, 30, 99, 37, 246, 10, 26, 26, 39, 92, 123, 170, 73, 211, 127, 227, 54, 30, 86, 133, 159, 112, 225, 91, 148, 100, 174, 149, 75, 143, 14, 140, 20, 44, 64, 212, 5, 243, 8, 116, 63, 30, 97, 42, 123, 20, 73, 212, 85, 207, 83, 122, 27, 251, 233, 84, 10, 17, 236, 232, 83, 200, 127, 119, 143, 163, 204, 220, 167, 59, 231, 20, 106, 186, 222, 191, 8, 40, 234, 21, 25, 180, 13, 116, 250, 152, 224, 174, 75, 3, 205, 38, 173, 215, 236, 151, 185, 121, 254, 244, 154, 239, 17, 53, 106, 164, 61, 49, 116, 216, 118, 94, 150, 35, 181, 26, 238, 66, 49, 211, 221, 132, 146, 166, 115, 39, 136, 36, 205, 230, 179, 31, 197, 51, 148, 165, 109, 38, 70, 37, 148, 52, 44, 209, 250, 98, 58, 246, 225, 103, 198, 101, 26, 25, 196, 207, 8, 166, 21, 88, 252, 175, 253, 10, 88, 107, 157, 19, 225, 61, 12, 246, 221, 37, 239, 186, 167, 137, 142, 135, 222, 128, 174, 62, 95, 216, 38, 141, 157, 45, 232, 97, 217, 173, 203, 234, 116, 129, 69, 206, 189, 94, 221, 12, 54, 139, 186, 247, 184, 16, 200, 121, 244, 104, 8, 7, 35, 111, 47, 188, 10, 140, 92, 73, 143, 206, 203, 72, 122, 184, 20, 102, 197, 130, 64, 150, 63, 96, 239, 8, 132, 111, 217, 84, 91, 198, 32, 43, 100, 138, 241, 15, 160, 42, 190, 253, 193, 184, 164, 124, 29, 210, 96, 67, 224, 221, 182, 29, 218, 129, 149, 29, 128, 174, 98, 88, 88, 125, 56, 40, 255, 120, 5, 0, 87, 174, 42, 150, 90, 112, 201, 183, 169, 19, 57, 195, 191, 12, 58, 244, 235, 132, 25, 145, 72, 146, 214, 8, 125, 100, 135, 12, 5, 102, 97, 248, 174, 24, 159, 90, 33, 43, 187, 6, 61, 212, 241, 225, 190, 219, 252, 197, 123, 129, 164, 108, 123, 55, 230, 4, 153, 166, 105, 234, 15, 85, 216, 23, 56, 32, 3, 41, 110, 68, 146, 172, 133, 202, 98, 41, 7, 47, 152, 35, 255, 168, 106, 241, 226, 222, 77, 244, 52, 185, 65, 252, 227, 32, 66, 38, 11, 172, 60, 28, 28, 103, 84, 1, 1, 205, 182, 190, 28, 189, 102, 253, 43, 1, 191, 148, 116, 10, 227, 18, 81, 93, 80, 239, 157, 232, 215, 180, 163, 165, 161, 109, 177, 71, 150, 244, 144, 208, 160, 110, 22, 174, 60, 206, 43, 103, 121, 55, 103, 114, 115, 173, 238, 13, 10, 227, 251, 41, 176, 216, 158, 229, 216, 55, 234, 128, 128, 20, 167, 106, 181, 86, 163, 130, 215, 110, 149, 191, 10, 227, 215, 8, 214, 154, 178, 181, 15, 19, 0, 247, 250, 97, 74, 43, 157, 55, 94, 174, 41, 41, 9, 199, 97, 20, 91, 32, 18, 10, 43, 98, 240, 247, 203, 20, 250, 117, 160, 44, 229, 202, 187, 64, 54, 124, 15, 184, 169, 129, 27, 160, 240, 26, 61, 255, 60, 166, 60, 144, 209, 84, 55, 187, 186, 168, 13, 124, 125, 29, 17, 100, 249, 227, 62, 205, 78, 179, 163, 168, 139, 168, 21, 38, 83, 239, 151, 74, 43, 66, 2, 92, 72, 71, 94, 216, 134, 238, 20, 45, 158, 213, 164, 73, 57, 80, 47, 198, 184, 130, 223, 227, 71, 132, 133, 235, 177, 85, 174, 142, 124, 172, 200, 54, 229, 40, 126, 60, 76, 92, 216, 153, 56, 241, 174, 66, 141, 90, 226, 3, 30, 68, 234, 71, 187, 163, 112, 146, 255, 22, 143, 170, 204, 3, 127, 179, 81, 139, 160, 37, 77, 246, 128, 220, 196, 158, 153, 73, 177, 65, 199, 119, 29, 197, 144, 130, 248, 206, 155, 253, 108, 213, 124, 7, 223, 221, 162, 146, 134, 242, 65, 99, 162, 107, 120, 247, 214, 207, 96, 150, 169, 131, 208, 218, 221, 28, 24, 112, 208, 23, 1, 130, 142, 232, 56, 104, 45, 33, 158, 95, 255, 123, 31, 74, 76, 120, 178, 155, 213, 6, 195, 164, 8, 8, 69, 241, 197, 127, 83, 169, 21, 167, 19, 94, 143, 252, 33, 159, 248, 241, 170, 153, 147, 1, 149, 199, 201, 131, 170, 79, 236, 212, 209, 143, 107, 98, 24, 123, 56, 33, 193, 85, 247, 64, 225, 135, 210, 78, 145, 57, 16, 145, 71, 170, 20, 133, 87, 235, 4, 166, 239, 100, 82, 235, 81, 50, 223, 9, 193, 52, 49, 86, 129, 190, 196, 82, 165, 107, 63, 115, 161, 98, 33, 20, 193, 29, 42, 151, 205, 252, 124, 72, 245, 48, 181, 67, 7, 13, 21, 127, 59, 226, 188, 144, 129, 112, 244, 192, 121, 213, 80, 42, 196, 1, 13, 107, 108, 78, 0, 40, 121, 225, 148, 237, 234, 209, 216, 238, 9, 147, 226, 254, 96, 89, 212, 72, 193, 106, 75, 135, 74, 227, 67, 255, 92, 191, 81, 188, 124, 226, 149, 152, 142, 15, 159, 195, 238, 114, 55, 255, 166, 157, 230, 59, 148, 170, 166, 151, 65, 213, 104, 253, 253, 112, 150, 82, 147, 137, 27, 214, 100, 247, 65, 81, 92, 47, 86, 217, 7, 45, 120, 81, 130, 31, 236, 243, 76, 78, 3, 45, 105, 172, 220, 71, 48, 220, 94, 196, 249, 163, 193, 133, 50, 236, 205, 20, 55, 2, 63, 14, 127, 69, 113, 212, 204, 12, 58, 79, 89, 86, 29, 61, 199, 201, 64, 149, 6, 144, 182, 150, 129, 31, 18, 167, 120, 248, 82, 107, 25, 143, 128, 27, 161, 28, 25, 153, 183, 217, 238, 78, 186, 106, 92, 27, 202, 219, 165, 96, 0, 216, 234, 169, 73, 101, 39, 182, 113, 217, 240, 170, 116, 172, 221, 250, 233, 48, 49, 242, 83, 227, 92, 181, 184, 72, 230, 180, 21, 15, 108, 135, 25, 38, 153, 25, 124, 227, 26, 149, 73, 236, 39, 211, 244, 149, 58, 183, 132, 26, 223, 219, 174, 144, 117, 233, 219, 165, 205, 157, 159, 222, 184, 52, 47, 241, 201, 123, 65, 24, 44, 55, 215, 177, 168, 250, 179, 115, 190, 227, 123, 158, 163, 179, 224, 69, 196, 66, 207, 254, 243, 101, 221, 193, 140, 250, 4, 28, 222, 52, 96, 138, 160, 33, 218, 64, 118, 214, 234, 201, 152, 148, 91, 178, 111, 107, 144, 142, 6, 182, 102, 72, 188, 34, 213, 181, 26, 223, 58, 255, 103, 81, 17, 47, 169, 11, 245, 224, 123, 148, 215, 237, 186, 107, 75, 152, 90, 202, 166, 22, 149, 197, 5, 246, 238, 78, 76, 229, 106, 199, 94, 127, 195, 0, 45, 82, 6, 159, 103, 96, 138, 231, 71, 46, 107, 59, 216, 39, 43, 12, 221, 27, 214, 56, 155, 145, 66, 187, 169, 250, 235, 78, 211, 179, 239, 183, 198, 163, 93, 5, 196, 24, 174, 143, 225, 106, 139, 89, 98, 13, 127, 207, 184, 194, 30, 1, 165, 198, 169, 8, 197, 118, 86, 163, 221, 138, 23, 209, 61, 116, 79, 99, 233, 43, 130, 60, 244, 85, 229, 243, 172, 123, 148, 200, 120, 192, 127, 211, 52, 11, 159, 41, 95, 212, 230, 188, 169, 156, 137, 29, 212, 12, 148, 168, 148, 133, 243, 44, 241, 139, 127, 24, 246, 220, 227, 125, 209, 97, 60, 52, 162, 192, 146, 49, 161, 92, 138, 112, 189, 128, 59, 126, 125, 46, 207, 60, 79, 231, 174, 152, 209, 68, 223, 205, 2, 38, 14, 91, 116, 159, 255, 28, 27, 178, 248, 164, 104, 158, 79, 69, 214, 234, 157, 12, 75, 163, 83, 253, 245, 202, 61, 213, 176, 6, 197, 230, 29, 208, 166, 253, 194, 254, 235, 29, 141, 241, 70, 249, 15, 62, 0, 148, 163, 135, 52, 122, 40, 96, 87, 31, 179, 152, 51, 216, 133, 184, 122, 198, 203, 60, 115, 218, 191, 193, 16, 178, 25, 148, 252, 112, 104, 103, 252, 36, 92, 221, 28, 179, 43, 199, 198, 151, 128, 100, 252, 217, 161, 249, 34, 201, 172, 118, 52, 180, 252, 104, 7, 223, 44, 116, 102, 212, 21, 40, 224, 184, 55, 163, 210, 21, 207, 161, 239, 51, 54, 155, 41, 133, 18, 67, 48, 3, 165, 130, 251, 4, 79, 214, 57, 72, 130, 157, 212, 144];\n\n    function O(e, t, n) {\n      var r = e.gl,\n          i = 5,\n          o = .1,\n          a = .5,\n          s = 175 / 180 * 3.141593,\n          c = 115 / 180 * 3.141593,\n          d = 173 / 180 * 3.141593,\n          u = 116 / 180 * 3.141593,\n          l = 2.04203545,\n          f = 0,\n          p = 0,\n          g = 0,\n          m = [],\n          h = [0, 1, 3, 4, 6, 7, 9, 10, 12, 13, 15, 16, 18, 19, 21, 22, 24, 26, 29, 31, 34, 36, 39, 41, 44, 46, 49, 51, 54, 56, 59, 61, 64, 65, 66, 67, 68, 69, 70, 72, 73, 74, 75, 76, 77, 79, 80, 81, 82, 83, 84, 85, 87, 88, 89, 90, 91, 92, 94, 95, 96, 97, 98, 99, 101, 102, 103, 104, 105, 106, 107, 109, 110, 111, 112, 113, 114, 116, 117, 118, 119, 120, 121, 123, 124, 125, 126, 127, 128, 129, 131, 132, 133, 134, 135, 136, 138, 139, 140, 141, 142, 143, 145, 146, 147, 148, 149, 150, 151, 153, 154, 155, 156, 157, 158, 160, 161, 162, 163, 164, 165, 166, 168, 169, 170, 171, 172, 173, 175, 176, 177, 178, 179, 180, 182, 183, 184, 185, 186, 187, 188, 190, 191, 192, 193, 194, 195, 197, 198, 199, 200, 201, 202, 204, 205, 206, 207, 208, 209, 210, 212, 213, 214, 215, 216, 217, 219, 220, 221, 222, 223, 224, 226, 226, 226, 227, 227, 227, 228, 228, 228, 229, 229, 229, 230, 230, 231, 231, 231, 232, 232, 232, 233, 233, 233, 234, 234, 235, 235, 235, 236, 236, 236, 237, 237, 237, 238, 238, 239, 239, 239, 240, 240, 240, 241, 241, 241, 242, 242, 243, 243, 243, 244, 244, 244, 245, 245, 245, 246, 246, 246, 247, 247, 247, 248, 248, 248, 249, 249, 249, 250, 250, 250, 251, 251, 251, 252, 252, 252, 253, 253, 253, 254, 254, 254, 255],\n          E = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 32, 33, 35, 36, 37, 39, 40, 42, 43, 44, 46, 47, 49, 50, 51, 53, 54, 56, 57, 58, 59, 61, 62, 63, 64, 66, 67, 68, 69, 71, 72, 73, 74, 76, 77, 78, 79, 81, 82, 83, 84, 86, 87, 88, 90, 91, 92, 93, 95, 96, 97, 98, 100, 101, 102, 103, 105, 106, 107, 108, 110, 111, 112, 113, 115, 116, 117, 118, 120, 121, 122, 124, 125, 126, 127, 129, 130, 131, 132, 134, 135, 136, 137, 139, 140, 141, 142, 144, 145, 146, 147, 149, 150, 151, 152, 154, 155, 156, 158, 159, 160, 161, 163, 164, 165, 166, 168, 169, 170, 171, 173, 174, 175, 176, 178, 179, 180, 181, 183, 184, 185, 186, 188, 189, 190, 192, 193, 194, 195, 197, 198, 199, 200, 202, 203, 204, 205, 207, 208, 209, 210, 212, 213, 214, 215, 217, 218, 219, 220, 222, 223, 224, 226, 226, 226, 227, 227, 228, 228, 229, 229, 230, 230, 231, 231, 232, 232, 233, 233, 234, 234, 234, 235, 235, 236, 236, 237, 237, 238, 238, 239, 239, 240, 240, 241, 241, 242, 242, 243, 243, 243, 244, 244, 244, 245, 245, 245, 246, 246, 246, 247, 247, 247, 248, 248, 248, 249, 249, 249, 250, 250, 250, 251, 251, 251, 252, 252, 252, 253, 253, 253, 254, 254, 254, 255],\n          S = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 35, 36, 37, 38, 39, 40, 41, 43, 44, 45, 46, 47, 48, 50, 51, 52, 53, 54, 55, 56, 58, 59, 60, 61, 62, 63, 65, 66, 67, 68, 69, 70, 72, 73, 74, 76, 77, 78, 80, 81, 83, 84, 85, 87, 88, 89, 91, 92, 94, 95, 96, 98, 99, 100, 102, 103, 105, 106, 107, 109, 110, 111, 113, 114, 116, 117, 118, 120, 121, 122, 124, 125, 127, 128, 129, 131, 132, 133, 135, 136, 138, 139, 140, 142, 143, 144, 146, 147, 149, 150, 151, 153, 154, 155, 157, 158, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 192, 193, 193, 194, 195, 195, 196, 197, 197, 198, 199, 199, 200, 201, 201, 202, 203, 203, 204, 205, 205, 206, 207, 207, 208, 209, 209, 210, 211, 211, 212, 213, 213, 214, 215, 215, 216, 217, 217, 218, 219, 219, 220, 221, 221, 222, 223, 223, 224, 225, 225, 226, 227, 227, 228, 229, 229, 230, 231, 231, 232, 233, 233, 234, 235, 235, 236, 237, 237, 238, 239, 239, 240, 241, 241, 242, 243, 243, 244, 245, 245, 246, 247, 247, 248, 249, 249, 250, 251, 251, 252, 253, 253, 254, 255];\n      this.program = v(r, A), this.setUniforms = function () {\n        var t = r.getUniformLocation(this.program, \"u_flipY\"),\n            n = r.getUniformLocation(this.program, \"u_denoiseLevel\");\n        r.uniform1f(n, i), r.uniform1f(t, 1);\n        var h = r.getUniformLocation(this.program, \"light\");\n        r.uniform1f(h, o);\n        var v = r.getUniformLocation(this.program, \"redness\");\n        r.uniform1f(v, a);\n\n        var E = r.getUniformLocation(this.program, \"skin_he_max\"),\n            S = r.getUniformLocation(this.program, \"skin_he_min\"),\n            _ = r.getUniformLocation(this.program, \"skin_hc_max\"),\n            y = r.getUniformLocation(this.program, \"skin_hc_min\"),\n            R = r.getUniformLocation(this.program, \"skin_hc_axis\"),\n            T = r.getUniformLocation(this.program, \"facts_rotate_c\"),\n            I = r.getUniformLocation(this.program, \"facts_rotate_le\"),\n            b = r.getUniformLocation(this.program, \"facts_rotate_ge\");\n\n        r.uniform1f(E, s), r.uniform1f(S, c), r.uniform1f(_, d), r.uniform1f(y, u), r.uniform1f(R, l), r.uniform1f(T, f), r.uniform1f(I, p), r.uniform1f(b, g);\n        var A = r.getUniformLocation(this.program, \"u_originImage\");\n        r.activeTexture(r.TEXTURE2), r.bindTexture(r.TEXTURE_2D, e.inputTexture), r.uniform1i(A, 2);\n\n        for (var O = [\"lighten_lut\"], C = [r.TEXTURE3], N = 0; N < O.length; N++) {\n          var w = r.getUniformLocation(this.program, O[N]);\n          r.activeTexture(C[N]), r.bindTexture(r.TEXTURE_2D, m[N]), r.uniform1i(w, N + 3);\n        }\n      }, this.setParameters = function (e) {\n        void 0 !== e.denoiseLevel && (i = e.denoiseLevel), void 0 !== e.lightLevel && (o = e.lightLevel), void 0 !== e.rednessLevel && (a = e.rednessLevel, this._updateRedness(a)), void 0 !== e.lighteningContrastLevel && this._updateLut(e.lighteningContrastLevel);\n      }, this._updateRedness = function (e) {\n        var t,\n            n,\n            r = 3.141593,\n            i = e,\n            o = i;\n        i > 1 && (i = 1), i < 0 && (i = 0), o > 1 && (o = 1), o < 0 && (o = 0), f = .8 * i, o < .8 && (o = 0), (l = (117 - 4 * o) / 180 * r) < (u = (116 - 4 * o) / 180 * r) && (l = u), u < r / 2 && (u = r / 2), l < r / 2 && (l = r / 2), (c = (115 - 4 * o) / 180 * r) < r / 2 && (c = r / 2), (d = 173 / 180 * r) > r && (d = r), l > r && (l = r), (s = 175 / 180 * r) > r && (s = r), n = d - l, g = (t = s - d) > .01 ? f * n / t : f, n = l - u, p = (t = u - c) > .01 ? f * n / t : f;\n      }, this._updateLut = function (e) {\n        var t = null;\n        0 == e && (t = E), 1 == e && (t = S), 2 == e && (t = h);\n\n        for (var n = [new Uint8Array(t)], i = [256], o = [1], a = 0; a < n.length; a++) {\n          r.bindTexture(r.TEXTURE_2D, m[a]), r.texImage2D(r.TEXTURE_2D, 0, r.LUMINANCE, i[a], o[a], 0, r.LUMINANCE, r.UNSIGNED_BYTE, n[a]);\n        }\n      }, this._init = function () {\n        var e = null;\n        e = E;\n\n        for (var t = [new Uint8Array(e)], n = [256], i = [1], o = 0; o < t.length; o++) {\n          var a = r.createTexture();\n          r.bindTexture(r.TEXTURE_2D, a), r.texImage2D(r.TEXTURE_2D, 0, r.LUMINANCE, n[o], i[o], 0, r.LUMINANCE, r.UNSIGNED_BYTE, t[o]), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_S, r.CLAMP_TO_EDGE), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_T, r.CLAMP_TO_EDGE), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MIN_FILTER, r.LINEAR), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MAG_FILTER, r.LINEAR), m.push(a);\n        }\n      }, this._init();\n    }\n\n    var C = !1;\n\n    function N() {\n      this.programs = [];\n      var e = this,\n          t = null,\n          n = null;\n      e.gl = null, e.inputTexture = null;\n      var r = [],\n          i = [],\n          o = 0,\n          a = 0;\n      e._initGl = function (n, s) {\n        e.inputTexture = t.createTexture(), t.bindTexture(t.TEXTURE_2D, e.inputTexture), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.LINEAR), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.LINEAR);\n\n        for (var c = 0; c < 4; c++) {\n          var d = t.createTexture();\n          t.bindTexture(t.TEXTURE_2D, d), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.LINEAR), c < 2 ? t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, n, s, 0, t.RGBA, t.UNSIGNED_BYTE, null) : t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, s, n, 0, t.RGBA, t.UNSIGNED_BYTE, null);\n          var u = t.createFramebuffer();\n          t.bindFramebuffer(t.FRAMEBUFFER, u), t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, d, 0), r.push(d), i.push(u);\n        }\n\n        t.viewport(0, 0, n, s), o = n, a = s;\n      }, e.render = function (s) {\n        if (t) {\n          var c = 0;\n          a == s.videoWidth && o === s.videoHeight && (c = 2), t.viewport(0, 0, s.videoWidth, s.videoHeight), t.bindTexture(t.TEXTURE_2D, e.inputTexture), t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, t.RGBA, t.UNSIGNED_BYTE, s);\n\n          for (var d = C ? e.programs.length - 1 : 0, u = 0; u <= d; u++) {\n            var l = e.programs[u].program;\n            t.useProgram(l);\n            var f = t.getUniformLocation(l, \"u_image\");\n            e.programs[u].setUniforms(), t.bindFramebuffer(t.FRAMEBUFFER, i[c + u % 2]), t.clearColor(0, 0, 0, 1), t.clear(t.COLOR_BUFFER_BIT), t.drawArrays(t.TRIANGLES, 0, 6), t.activeTexture(t.TEXTURE0), t.bindTexture(t.TEXTURE_2D, r[c + u % 2]), t.uniform1i(f, 0);\n          }\n\n          t.useProgram(n);\n          var p = t.getUniformLocation(n, \"u_flipY\");\n          t.uniform1f(p, -1), t.bindFramebuffer(t.FRAMEBUFFER, null), t.clearColor(0, 0, 0, 1), t.clear(t.COLOR_BUFFER_BIT), t.drawArrays(t.TRIANGLES, 0, 6);\n        }\n      }, e.setEnableBeauty = function (e) {\n        C = e;\n      }, e.init = function (r, i, o) {\n        if (\"undefined\" == typeof WebGLRenderingContext) throw new Error(\"NOT_SUPPORT\");\n        t = o.getContext(\"webgl\"), e.gl = t, e._initGl(r, i), e.programs.push(new S(this, r, i)), e.programs.push(new y(this, r, i)), e.programs.push(new T(this, r, i)), e.programs.push(new b(this, r, i)), e.programs.push(new O(this, r, i)), n = e.programs[0].program;\n      }, e.release = function () {\n        e.gl = null, t = null, n = null, e.inputTexture = null, e.programs = [], r = [], i = [];\n      }, e.setDenoiseLevel = function (t) {\n        e.programs.forEach(function (e) {\n          e.setParameters && e.setParameters({\n            denoiseLevel: t\n          });\n        });\n      }, e.setLightLevel = function (t) {\n        e.programs.forEach(function (e) {\n          e.setParameters && e.setParameters({\n            lightLevel: t\n          });\n        });\n      }, e.setRednessLevel = function (t) {\n        e.programs.forEach(function (e) {\n          e.setParameters && e.setParameters({\n            rednessLevel: t\n          });\n        });\n      }, e.setContrastLevel = function (t) {\n        e.programs.forEach(function (e) {\n          e.setParameters && e.setParameters({\n            lighteningContrastLevel: t\n          });\n        });\n      }, e.setSize = function (t, n) {\n        e.programs.forEach(function (e) {\n          e.setSize && e.setSize(t, n);\n        });\n      };\n    }\n\n    N._instance = null, N.getInstance = function () {\n      return N._instance || (N._instance = new N()), N._instance;\n    };\n    t.a = {\n      addVideoEffectCapability: function addVideoEffectCapability(e) {\n        e.videoEffect = {\n          canvas: null,\n          video: null,\n          fps: 30,\n          stopChromeBackgroundLoop: null,\n          enableBeauty: !1,\n          denoiseLevel: 5,\n          lightLevel: .35,\n          rednessLevel: .5,\n          lighteningContrastLevel: 1,\n          videoContextInited: !1,\n          originVideoTrack: null,\n          canvasVideoTrack: null,\n          ctx: null\n        }, e._initVideoContext = function () {\n          if (e.videoEffect.videoContextInited) throw new Error(\"Failed to init video context. Already inited\");\n          if (!e.stream) throw new Error(\"Failed to init video context. Local Stream not initialized\");\n          e.videoEffect.originVideoTrack = e.stream.getVideoTracks()[0], e.attributes && e.attributes.maxFrameRate && (e.videoEffect.fps = e.attributes.maxFrameRate), e.videoEffect.videoContextInited = !0;\n        }, e._renderWithWebGL = function (t) {\n          return new Promise(function (n) {\n            e.videoEffect.canvas || (e.videoEffect.canvas = document.createElement(\"canvas\")), e.videoEffect.video || (e.videoEffect.video = document.createElement(\"video\")), e.videoEffect.video.setAttribute(\"autoplay\", \"\"), e.videoEffect.video.setAttribute(\"muted\", \"\"), e.videoEffect.video.muted = !0, e.videoEffect.video.setAttribute(\"playsinline\", \"\"), e.videoEffect.video.setAttribute(\"style\", \"display:none\"), e.videoEffect.video.srcObject = t;\n            var r = t.getVideoTracks()[0].getSettings(),\n                i = r.width,\n                o = r.height;\n            e.videoEffect.canvas.setAttribute(\"width\", i), e.videoEffect.canvas.setAttribute(\"height\", o), e.videoEffect.video.setAttribute(\"width\", i), e.videoEffect.video.setAttribute(\"height\", o);\n            var a = N.getInstance();\n            a.init(e.videoEffect.video.width, e.videoEffect.video.height, e.videoEffect.canvas), a.setDenoiseLevel(e.videoEffect.denoiseLevel), a.setLightLevel(e.videoEffect.lightLevel), a.setRednessLevel(e.videoEffect.rednessLevel), a.setContrastLevel(e.videoEffect.lighteningContrastLevel);\n            e.videoEffect.video.addEventListener(\"playing\", function t() {\n              var r = e.videoEffect.canvas.captureStream(e.videoEffect.fps);\n              e.videoEffect.video.removeEventListener(\"playing\", t, !0), n([r.getVideoTracks()[0], e.videoEffect.video]);\n            }, !0), e.videoEffect.video.play();\n          });\n        }, e._disableEffect = function () {\n          e.videoEffect.videoContextInited || e._initVideoContext();\n          var t = e.videoEffect.originVideoTrack;\n          if (!t) return f.default.warning(\"Video track is null, fail to disable video effect!\"), Promise.resolve();\n\n          if (e.pc && e.pc.peerConnection && e.pc.peerConnection) {\n            var n = (e.pc.peerConnection && e.pc.peerConnection.getSenders()).find(function (e) {\n              return e && e.track && \"video\" == e.track.kind;\n            });\n            if (n && n.replaceTrack && t) return n.replaceTrack(t);\n          }\n\n          return Promise.resolve();\n        }, e._releaseEffect = function () {\n          var t;\n          return t = e.videoEffect.enableBeauty ? e._disableEffect() : Promise.resolve(), N.getInstance().release(), e.videoEffect.videoContextInited = !1, e.videoEffect.canvasVideoTrack = null, t;\n        }, e._enableEffect = function () {\n          return e.videoEffect.videoContextInited || e._initVideoContext(), e.videoEffect.originVideoTrack ? e.videoEffect.canvasVideoTrack ? (e._showEffectInLocalPlayer(), e._replaceWithCanvasTrack()) : e._renderWithWebGL(e.stream).then(function (t) {\n            var n = c()(t, 2),\n                r = n[0],\n                i = n[1];\n            e.videoEffect.canvasVideoTrack = r;\n            var o = N.getInstance();\n            return requestAnimationFrame(function t() {\n              e.videoEffect.enableBeauty && o.render(i), e.videoEffect.videoContextInited && requestAnimationFrame(t);\n            }), d.isChrome() && document.addEventListener(\"visibilitychange\", function () {\n              document.hidden;\n              document.hidden ? e.videoEffect.stopChromeBackgroundLoop = function (e, t) {\n                var n = 1 / t,\n                    r = new AudioContext(),\n                    i = r.createGain();\n                i.gain.value = 0, i.connect(r.destination), function t() {\n                  var a = r.createOscillator();\n                  a.onended = t, a.connect(i), a.start(0), a.stop(r.currentTime + n), e(r.currentTime), o && (a.onended = function () {\n                    r.close();\n                  });\n                }();\n                var o = !1;\n                return function () {\n                  o = !0;\n                };\n              }(function () {\n                e.videoEffect.enableBeauty && o.render(i);\n              }, e.videoEffect.fps) : e.videoEffect.stopChromeBackgroundLoop && (e.videoEffect.stopChromeBackgroundLoop(), e.videoEffect.stopChromeBackgroundLoop = null);\n            }, !1), e._showEffectInLocalPlayer(), e._replaceWithCanvasTrack();\n          }) : (f.default.warning(\"Video track is null, fail to enable video effect!\"), Promise.resolve());\n        }, e._showEffectInLocalPlayer = function () {\n          if (e.player) {\n            var t = e.player.div.children[0];\n\n            if (\"none\" !== t.style.display && (e.player.div.appendChild(e.videoEffect.canvas), \"video\" === t.tagName.toLowerCase())) {\n              var n = t.getAttribute(\"style\");\n              e.videoEffect.canvas.setAttribute(\"style\", n), \"none\" !== t.style.display && (t.style.display = \"none\");\n            }\n          }\n        }, e._removeEffectFromLocalPlayer = function () {\n          if (e.player && e.player.div && e.videoEffect.enableBeauty && e.videoEffect.canvas) {\n            e.player.div.removeChild(e.videoEffect.canvas);\n            var t = e.player.div.children[0];\n            \"video\" === t.tagName.toLowerCase() && (e.videoEffect.canvas.style.display = \"none\", t.style.display = \"block\");\n          }\n        }, e._replaceWithCanvasTrack = function () {\n          var t = null;\n          e.pc && e.pc.peerConnection && e.pc.peerConnection && (t = (e.pc.peerConnection && e.pc.peerConnection.getSenders()).find(function (e) {\n            return e && e.track && \"video\" == e.track.kind;\n          }));\n          return t && t.replaceTrack && e.videoEffect.canvasVideoTrack ? t.replaceTrack(e.videoEffect.canvasVideoTrack) : Promise.resolve();\n        }, e.setBeautyEffectOptions = function () {\n          var t = a()(i.a.mark(function t(n, r) {\n            var o,\n                a = arguments;\n            return i.a.wrap(function (t) {\n              for (;;) {\n                switch (t.prev = t.next) {\n                  case 0:\n                    if (Object(l.checkValidBoolean)(n, \"enabled\"), o = N.getInstance(), e.videoEffect.enableBeauty == n) {\n                      t.next = 14;\n                      break;\n                    }\n\n                    if (o.setEnableBeauty(n), !n) {\n                      t.next = 9;\n                      break;\n                    }\n\n                    return t.next = 7, e._enableEffect();\n\n                  case 7:\n                    t.next = 12;\n                    break;\n\n                  case 9:\n                    return e._removeEffectFromLocalPlayer(), t.next = 12, e._releaseEffect();\n\n                  case 12:\n                    e.videoEffect.enableBeauty = n, u.report.reportApiInvoke(e.sid, {\n                      callback: null,\n                      options: a,\n                      name: \"Stream.setBeautyEffectOptions\",\n                      tag: \"tracer\"\n                    });\n\n                  case 14:\n                    if (n) {\n                      t.next = 16;\n                      break;\n                    }\n\n                    return t.abrupt(\"return\");\n\n                  case 16:\n                    if (!r) {\n                      t.next = 20;\n                      break;\n                    }\n\n                    Object(l.checkValidObject)(r, \"options\"), t.next = 21;\n                    break;\n\n                  case 20:\n                    return t.abrupt(\"return\");\n\n                  case 21:\n                    if (void 0 !== r.smoothnessLevel && (Object(l.checkValidFloatNumber)(r.smoothnessLevel, \"smoothnessLevel\", 0, 1), e.videoEffect.denoiseLevel = 10 * r.smoothnessLevel, e.videoEffect.denoiseLevel < .1 && (e.videoEffect.denoiseLevel = .1), o.setDenoiseLevel(e.videoEffect.denoiseLevel)), void 0 !== r.lighteningLevel && (Object(l.checkValidFloatNumber)(r.lighteningLevel, \"lighteningLevel\", 0, 1), e.videoEffect.lightLevel = r.lighteningLevel / 2, e.videoEffect.lightLevel < .01 && (e.videoEffect.lightLevel = .01), o.setLightLevel(e.videoEffect.lightLevel)), void 0 !== r.rednessLevel && (Object(l.checkValidFloatNumber)(r.rednessLevel, \"rednessLevel\", 0, 1), e.videoEffect.rednessLevel = r.rednessLevel, e.videoEffect.rednessLevel < .01 && (e.videoEffect.rednessLevel = .01), o.setRednessLevel(e.videoEffect.rednessLevel)), void 0 === r.lighteningContrastLevel) {\n                      t.next = 29;\n                      break;\n                    }\n\n                    if (0 === r.lighteningContrastLevel || 1 === r.lighteningContrastLevel || 2 === r.lighteningContrastLevel) {\n                      t.next = 27;\n                      break;\n                    }\n\n                    throw new Error(\"Invalid lighteningContrastLevel: The value should be 0, 1 or 2.\");\n\n                  case 27:\n                    e.videoEffect.lighteningContrastLevel = parseFloat(r.lighteningContrastLevel), o.setContrastLevel(e.videoEffect.lighteningContrastLevel);\n\n                  case 29:\n                  case \"end\":\n                    return t.stop();\n                }\n              }\n            }, t);\n          }));\n          return function (e, n) {\n            return t.apply(this, arguments);\n          };\n        }();\n      },\n      restoreVideoEffect: function restoreVideoEffect(e) {\n        return e.videoEffect.enableBeauty ? e._enableEffect() : Promise.resolve();\n      },\n      disableVideoEffect: function disableVideoEffect(e) {\n        return e._releaseEffect ? e._releaseEffect() : Promise.resolve();\n      },\n      applyEffectInPlayer: function applyEffectInPlayer(e) {\n        e.videoEffect.enableBeauty && e.videoEffect.canvas && e._showEffectInLocalPlayer();\n      },\n      removeEffectFromLocalPlayer: function removeEffectFromLocalPlayer(e) {\n        e._removeEffectFromLocalPlayer();\n      },\n      replaceWithCanvasTrack: function replaceWithCanvasTrack(e) {\n        return e.videoEffect.enableBeauty ? e._replaceWithCanvasTrack() : Promise.resolve();\n      },\n      checkVideoEffectEnabled: function checkVideoEffectEnabled(e) {\n        if (e.videoEffect.enableBeauty && e.videoEffect && e.videoEffect.videoContextInited) {\n          return f.default.error(\"Operation not permitted: \".concat(\"VIDEO_EFFECT_ENABLED\")), \"VIDEO_EFFECT_ENABLED\";\n        }\n\n        return !1;\n      }\n    };\n  }, function (e, t) {\n    function n(e, t, n, r, i, o, a) {\n      try {\n        var s = e[o](a),\n            c = s.value;\n      } catch (e) {\n        return void n(e);\n      }\n\n      s.done ? t(c) : Promise.resolve(c).then(r, i);\n    }\n\n    e.exports = function (e) {\n      return function () {\n        var t = this,\n            r = arguments;\n        return new Promise(function (i, o) {\n          var a = e.apply(t, r);\n\n          function s(e) {\n            n(a, i, o, s, c, \"next\", e);\n          }\n\n          function c(e) {\n            n(a, i, o, s, c, \"throw\", e);\n          }\n\n          s(void 0);\n        });\n      };\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(38),\n        i = Object.prototype.toString;\n\n    function o(e) {\n      return \"[object Array]\" === i.call(e);\n    }\n\n    function a(e) {\n      return void 0 === e;\n    }\n\n    function s(e) {\n      return null !== e && \"object\" == typeof e;\n    }\n\n    function c(e) {\n      return \"[object Function]\" === i.call(e);\n    }\n\n    function d(e, t) {\n      if (null != e) if (\"object\" != typeof e && (e = [e]), o(e)) for (var n = 0, r = e.length; n < r; n++) {\n        t.call(null, e[n], n, e);\n      } else for (var i in e) {\n        Object.prototype.hasOwnProperty.call(e, i) && t.call(null, e[i], i, e);\n      }\n    }\n\n    e.exports = {\n      isArray: o,\n      isArrayBuffer: function isArrayBuffer(e) {\n        return \"[object ArrayBuffer]\" === i.call(e);\n      },\n      isBuffer: function isBuffer(e) {\n        return null !== e && !a(e) && null !== e.constructor && !a(e.constructor) && \"function\" == typeof e.constructor.isBuffer && e.constructor.isBuffer(e);\n      },\n      isFormData: function isFormData(e) {\n        return \"undefined\" != typeof FormData && e instanceof FormData;\n      },\n      isArrayBufferView: function isArrayBufferView(e) {\n        return \"undefined\" != typeof ArrayBuffer && ArrayBuffer.isView ? ArrayBuffer.isView(e) : e && e.buffer && e.buffer instanceof ArrayBuffer;\n      },\n      isString: function isString(e) {\n        return \"string\" == typeof e;\n      },\n      isNumber: function isNumber(e) {\n        return \"number\" == typeof e;\n      },\n      isObject: s,\n      isUndefined: a,\n      isDate: function isDate(e) {\n        return \"[object Date]\" === i.call(e);\n      },\n      isFile: function isFile(e) {\n        return \"[object File]\" === i.call(e);\n      },\n      isBlob: function isBlob(e) {\n        return \"[object Blob]\" === i.call(e);\n      },\n      isFunction: c,\n      isStream: function isStream(e) {\n        return s(e) && c(e.pipe);\n      },\n      isURLSearchParams: function isURLSearchParams(e) {\n        return \"undefined\" != typeof URLSearchParams && e instanceof URLSearchParams;\n      },\n      isStandardBrowserEnv: function isStandardBrowserEnv() {\n        return (\"undefined\" == typeof navigator || \"ReactNative\" !== navigator.product && \"NativeScript\" !== navigator.product && \"NS\" !== navigator.product) && \"undefined\" != typeof window && \"undefined\" != typeof document;\n      },\n      forEach: d,\n      merge: function e() {\n        var t = {};\n\n        function n(n, r) {\n          \"object\" == typeof t[r] && \"object\" == typeof n ? t[r] = e(t[r], n) : t[r] = n;\n        }\n\n        for (var r = 0, i = arguments.length; r < i; r++) {\n          d(arguments[r], n);\n        }\n\n        return t;\n      },\n      deepMerge: function e() {\n        var t = {};\n\n        function n(n, r) {\n          \"object\" == typeof t[r] && \"object\" == typeof n ? t[r] = e(t[r], n) : t[r] = \"object\" == typeof n ? e({}, n) : n;\n        }\n\n        for (var r = 0, i = arguments.length; r < i; r++) {\n          d(arguments[r], n);\n        }\n\n        return t;\n      },\n      extend: function extend(e, t, n) {\n        return d(t, function (t, i) {\n          e[i] = n && \"function\" == typeof t ? r(t, n) : t;\n        }), e;\n      },\n      trim: function trim(e) {\n        return e.replace(/^\\s*/, \"\").replace(/\\s*$/, \"\");\n      }\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.d(t, \"a\", function () {\n      return u;\n    });\n    var r = n(7),\n        i = n.n(r),\n        o = n(8),\n        a = n(0),\n        s = n(5);\n\n    function c(e) {\n      if (\"undefined\" == typeof Symbol || null == e[Symbol.iterator]) {\n        if (Array.isArray(e) || (e = function (e, t) {\n          if (!e) return;\n          if (\"string\" == typeof e) return d(e, t);\n          var n = Object.prototype.toString.call(e).slice(8, -1);\n          \"Object\" === n && e.constructor && (n = e.constructor.name);\n          if (\"Map\" === n || \"Set\" === n) return Array.from(n);\n          if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return d(e, t);\n        }(e))) {\n          var t = 0,\n              n = function n() {};\n\n          return {\n            s: n,\n            n: function n() {\n              return t >= e.length ? {\n                done: !0\n              } : {\n                done: !1,\n                value: e[t++]\n              };\n            },\n            e: function (_e) {\n              function e(_x) {\n                return _e.apply(this, arguments);\n              }\n\n              e.toString = function () {\n                return _e.toString();\n              };\n\n              return e;\n            }(function (e) {\n              throw e;\n            }),\n            f: n\n          };\n        }\n\n        throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n      }\n\n      var r,\n          i,\n          o = !0,\n          a = !1;\n      return {\n        s: function s() {\n          r = e[Symbol.iterator]();\n        },\n        n: function n() {\n          var e = r.next();\n          return o = e.done, e;\n        },\n        e: function (_e2) {\n          function e(_x2) {\n            return _e2.apply(this, arguments);\n          }\n\n          e.toString = function () {\n            return _e2.toString();\n          };\n\n          return e;\n        }(function (e) {\n          a = !0, i = e;\n        }),\n        f: function f() {\n          try {\n            o || null == r.return || r.return();\n          } finally {\n            if (a) throw i;\n          }\n        }\n      };\n    }\n\n    function d(e, t) {\n      (null == t || t > e.length) && (t = e.length);\n\n      for (var n = 0, r = new Array(t); n < t; n++) {\n        r[n] = e[n];\n      }\n\n      return r;\n    }\n\n    var u = new function () {\n      var e = Object(o.b)();\n      return e.devicesHistory = {}, e.states = {\n        UNINIT: \"UNINIT\",\n        INITING: \"INITING\",\n        INITED: \"INITED\"\n      }, e.state = e.states.UNINIT, e.deviceStates = {\n        ACTIVE: \"ACTIVE\",\n        INACTIVE: \"INACTIVE\"\n      }, e.deviceReloadTimer = null, e._init = function (t, n) {\n        e.state = e.states.INITING, e.devicesHistory = {}, e._reloadDevicesInfo(function () {\n          e.state = e.states.INITED, e.dispatchEvent({\n            type: \"inited\"\n          }), t && t();\n        }, function (t) {\n          a.default.warning(\"Device Detection functionality cannot start properly.\"), e.state = e.states.UNINIT, n && n(t);\n        });\n      }, e._enumerateDevices = function (e, t) {\n        if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) return a.default.warning(\"enumerateDevices() not supported.\"), t && t(\"enumerateDevices() not supported\");\n        navigator.mediaDevices.enumerateDevices().then(function (t) {\n          e && setTimeout(function () {\n            e(t);\n          }, 0);\n        }).catch(function (e) {\n          t && t(e);\n        });\n      }, e._reloadDevicesInfo = function (t, n) {\n        var r = [];\n\n        e._enumerateDevices(function (n) {\n          var o = Date.now();\n\n          for (var s in n.forEach(function (t) {\n            var n = e.devicesHistory[t.deviceId];\n\n            if ((n ? n.state : e.deviceStates.INACTIVE) != e.deviceStates.ACTIVE) {\n              var i = n || {\n                initAt: o\n              };\n              i.device = t, i.state = e.deviceStates.ACTIVE, r.push(i), e.devicesHistory[t.deviceId] = i;\n            }\n\n            e.devicesHistory[t.deviceId].lastReloadAt = o;\n          }), e.devicesHistory) {\n            var c = e.devicesHistory[s];\n            c && c.state == e.deviceStates.ACTIVE && c.lastReloadAt !== o && (c.state = e.deviceStates.INACTIVE, r.push(c)), c.lastReloadAt = o;\n          }\n\n          e.state == e.states.INITED && r.forEach(function (t) {\n            var n = i()({}, t);\n\n            switch (t.device.kind) {\n              case \"audioinput\":\n                n.type = \"recordingDeviceChanged\";\n                break;\n\n              case \"audiooutput\":\n                n.type = \"playoutDeviceChanged\";\n                break;\n\n              case \"videoinput\":\n                n.type = \"cameraChanged\";\n                break;\n\n              default:\n                a.default.warning(\"Unknown device change\", n), n.type = \"unknownDeviceChanged\";\n            }\n\n            e.dispatchEvent(n);\n          }), t && t();\n        }, n);\n      }, e.getDeviceById = function (t, n, r) {\n        e.getDevices(function (e) {\n          for (var i = 0; i < e.length; i++) {\n            var o = e[i];\n            if (o && o.deviceId === t) return n && n(o);\n          }\n\n          return r && r();\n        });\n      }, e.searchDeviceNameById = function (t) {\n        var n = e.devicesHistory[t];\n        return n ? n.device.label || n.device.deviceId : null;\n      }, e.getDevices = function (t, n) {\n        e._enumerateDevices(t, function (e) {\n          n && n(e.name + \": \" + e.message);\n        });\n      }, e.getVideoCameraIdByLabel = function (t, n, r) {\n        e.getCameras(function (e) {\n          var i,\n              o = c(e);\n\n          try {\n            for (o.s(); !(i = o.n()).done;) {\n              var a = i.value;\n              if (a.label === t) return n && n(a.deviceId);\n            }\n          } catch (e) {\n            o.e(e);\n          } finally {\n            o.f();\n          }\n\n          return r && r(s.default.NOT_FIND_DEVICE_BY_LABEL);\n        }, r);\n      }, e.getRecordingDevices = function (t, n) {\n        return e._enumerateDevices(function (e) {\n          var n = e.filter(function (e) {\n            return \"audioinput\" == e.kind;\n          });\n          t && t(n);\n        }, function (e) {\n          n && n(e);\n        });\n      }, e.getPlayoutDevices = function (t, n) {\n        return e._enumerateDevices(function (e) {\n          var n = e.filter(function (e) {\n            return \"audiooutput\" == e.kind;\n          });\n          t && t(n);\n        }, function (e) {\n          n && n(e);\n        });\n      }, e.getCameras = function (t, n) {\n        return e._enumerateDevices(function (e) {\n          var n = e.filter(function (e) {\n            return \"videoinput\" == e.kind;\n          });\n          t && t(n);\n        }, function (e) {\n          n && n(e);\n        });\n      }, e._init(function () {\n        navigator.mediaDevices && navigator.mediaDevices.addEventListener && navigator.mediaDevices.addEventListener(\"devicechange\", function () {\n          e._reloadDevicesInfo();\n        }), e.deviceReloadTimer = setInterval(e._reloadDevicesInfo, 5e3);\n      }), e;\n    }();\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.r(t), n.d(t, \"_getReconnectCSTimer\", function () {\n      return A;\n    }), n.d(t, \"_setClientConnectionStateRecord\", function () {\n      return O;\n    }), n.d(t, \"getGatewayList\", function () {\n      return N;\n    }), n.d(t, \"getUserAccount\", function () {\n      return L;\n    });\n\n    var r = n(11),\n        i = n.n(r),\n        o = n(12),\n        a = n.n(o),\n        s = n(17),\n        c = n.n(s),\n        d = n(2),\n        u = (n(4), n(0)),\n        l = n(14),\n        f = n(1),\n        p = n(5),\n        g = function g(e, t) {\n      var n = !1,\n          r = 0,\n          i = Object(d.getParameter)(\"PROXY_CS\"),\n          o = Object(d.getParameter)(\"CHOOSE_SERVER_FRAGEMENT_LENGTH\"),\n          a = 0,\n          s = {\n        command: \"convergeAllocateEdge\",\n        sid: e.sid,\n        appId: e.appId,\n        token: e.token,\n        uid: e.uid,\n        cname: e.cname,\n        ts: Math.floor(Date.now() / 1e3),\n        version: d.VERSION,\n        seq: 0,\n        requestId: 1\n      },\n          c = function c(_c) {\n        var d = new Date().getTime();\n        m(\"https://\" + _c + \"/api/v1\", s, function (s, p) {\n          if (s) return u.default.debug(\"[\" + e.clientId + \"] Request proxy server failed: \", s), r++, f.report.requestProxyAppCenter(e.sid, {\n            lts: d,\n            succ: !1,\n            APAddr: _c,\n            workerManagerList: null,\n            ec: JSON.stringify(s),\n            response: JSON.stringify({\n              err: s,\n              res: p\n            })\n          }), r >= i.length && t && t(\"Get proxy server failed: request all failed\"), void (!(r % o) && r < i.length && (a++, l()));\n          if (!n) if ((p = JSON.parse(p)).json_body) {\n            var g = JSON.parse(p.json_body);\n\n            if (u.default.debug(\"[\" + e.clientId + \"] App return:\", g.servers), 200 !== g.code) {\n              s = \"Get proxy server failed: response code [\" + g.code + \"], reason [ \" + g.reason + \"]\";\n              r++, u.default.debug(\"[\" + e.clientId + \"] \" + s), f.report.requestProxyAppCenter(e.sid, {\n                lts: d,\n                succ: !1,\n                APAddr: _c,\n                workerManagerList: null,\n                ec: s,\n                response: JSON.stringify({\n                  err: s,\n                  res: p\n                })\n              }), r >= i.length && t && t(s), !(r % o) && r < i.length && (a++, l());\n            } else {\n              n = !0;\n              var m = v(g.servers);\n              f.report.requestProxyAppCenter(e.sid, {\n                lts: d,\n                succ: !0,\n                APAddr: _c,\n                workerManagerList: JSON.stringify(m),\n                ec: null,\n                response: JSON.stringify({\n                  res: p\n                })\n              }), t && t(null, m);\n            }\n          } else u.default.debug(\"[\" + e.clientId + \"] Get proxy server failed: no json_body\"), f.report.requestProxyAppCenter(e.sid, {\n            lts: d,\n            succ: !1,\n            APAddr: _c,\n            workerManagerList: null,\n            ec: \"Get proxy server failed: no json_body\",\n            response: JSON.stringify({\n              res: p\n            })\n          });\n        });\n      },\n          l = function l() {\n        for (var e = a * o, t = e; t < Math.min(i.length, e + o); t++) {\n          var n = i[t];\n          c(n);\n        }\n      };\n\n      l();\n    },\n        m = function m(e, t, n) {\n      var r = {\n        service_name: \"webrtc_proxy\",\n        json_body: JSON.stringify(t)\n      };\n      Object(l.post)(e, r, function (e) {\n        n && n(null, e);\n      }, function (e) {\n        n && n(e);\n      }, {\n        \"X-Packet-Service-Type\": 0,\n        \"X-Packet-URI\": 61\n      });\n    },\n        h = function h(e, t, n) {\n      var r = !1,\n          i = 0,\n          o = {\n        command: \"request\",\n        gatewayType: \"http\",\n        appId: e.appId,\n        cname: e.cname,\n        uid: e.uid + \"\",\n        sdkVersion: \"2.3.1\",\n        sid: e.sid,\n        seq: 1,\n        ts: +new Date(),\n        requestId: 3,\n        clientRequest: {\n          appId: e.appId,\n          cname: e.cname,\n          uid: e.uid + \"\",\n          sid: e.sid\n        }\n      };\n      t.map(function (a) {\n        var s = new Date().getTime();\n        !function (e, t, n) {\n          Object(l.post)(e, t, function (e) {\n            n && n(null, e);\n          }, function (e) {\n            n && n(e);\n          });\n        }(\"https://\" + a + \":4000/v2/machine\", o, function (o, c) {\n          if (o) return u.default.debug(\"[\" + e.clientId + \"] Request worker manager failed: \", o), i++, f.report.requestProxyWorkerManager(e.sid, {\n            lts: s,\n            succ: !1,\n            workerManagerAddr: a,\n            ec: JSON.stringify(o),\n            response: JSON.stringify({\n              res: c\n            })\n          }), void (i >= t.length && n && n(\"requeet worker manager server failed: request failed\"));\n\n          if (!r) {\n            if (!(c = JSON.parse(c)).serverResponse) return n && n(\"requeet worker manager server failed: serverResponse is undefined\");\n            r = !0, f.report.requestProxyWorkerManager(e.sid, {\n              lts: s,\n              succ: !0,\n              workerManagerAddr: a,\n              ec: JSON.stringify(o),\n              response: JSON.stringify({\n                res: c\n              })\n            }), n && n(null, {\n              address: a,\n              serverResponse: c.serverResponse\n            });\n          }\n        });\n      });\n    },\n        v = function v(e) {\n      if (!e || [] instanceof Array == !1) return [];\n      var t = [];\n      return e.forEach(function (e) {\n        var n;\n        e.address && e.tcp ? (e.address.match(/^[\\.\\:\\d]+$/) ? n = \"\".concat(e.address.replace(/[^\\d]/g, \"-\"), \".edge.agora.io\") : (u.default.info(\"[\" + joinInfo.clientId + \"] \" + \"Cannot recognized as IP address \".concat(e.address, \". Used As Host instead\")), n = \"\".concat(e.address, \":\").concat(e.tcp)), t.push(n)) : u.default.error(\"[\" + joinInfo.clientId + \"] Invalid address format \", e);\n      }), t;\n    },\n        E = n(21),\n        S = function S(e, t, n, r) {\n      var i = Object(d.getParameter)(\"WEBCS_DOMAIN\").concat(Object(d.getParameter)(\"WEBCS_DOMAIN_BACKUP_LIST\")),\n          o = Object(d.getParameter)(\"PROXY_SERVER_TYPE3\");\n      i = i.map(function (e, t) {\n        return \"\".concat(o[(t + 1) % o.length], \"/ap/?url=\").concat(e);\n      });\n\n      var a,\n          s = 0,\n          c = !0,\n          g = Object(d.getParameter)(\"CHOOSE_SERVER_FRAGEMENT_LENGTH\"),\n          m = 0,\n          h = function h(_h) {\n        !function (e, t, n, r, i) {\n          var o = Date.now(),\n              a = function a(e, r) {\n            try {\n              f.report.joinChooseServer2(n.sid, {\n                lts: o,\n                succ: !e,\n                csAddr: t,\n                serverList: r && r.gateway_addr,\n                cid: r && r.cid + \"\",\n                uid: r && r.uid + \"\",\n                ec: e,\n                chooseServerIp: r && r.detail && r.detail[502]\n              });\n            } catch (e) {}\n          },\n              s = function s(r, i) {\n            var a = Date.now();\n\n            try {\n              f.report.joinWebProxyAP({\n                lts: a,\n                sid: n.sid,\n                cname: n.cname,\n                cid: n.cid,\n                uid: n.uid,\n                sucess: r ? -1 : 1,\n                elapse: a - o,\n                eventType: e,\n                apServerAddr: t,\n                turnServerAddrList: JSON.stringify(i),\n                errorCode: r || \"0\"\n              });\n            } catch (e) {}\n          },\n              c = Object(d.getParameter)(\"AREA_SETTING\").reduce(function (e, t, n) {\n            var r = Object(E.getAreaCodeByArea)(t);\n            return r ? 0 === n ? r : \"\".concat(e, \",\").concat(r) : e;\n          }, \"\"),\n              g = {\n            appid: n.token,\n            client_ts: Date.now(),\n            opid: 133,\n            sid: n.sid,\n            request_bodies: [{\n              uri: 22,\n              buffer: {\n                cname: n.cname,\n                detail: {\n                  11: c,\n                  6: n.stringUid\n                },\n                key: n.token,\n                service_ids: [11, i ? 20 : 18],\n                uid: n.uid || 0\n              }\n            }]\n          };\n\n          t = \"https://\".concat(t, \"/api/v2/transpond/webrtc?v=2\"), Object(l.postFormData)(t, g, function (e) {\n            var o = function o(e) {\n              return new RegExp(/10102\\d{2}$/).test(e) ? \"NO_SERVICE_AVAILABLE\" : p.APErrorCode[e] || e;\n            };\n\n            try {\n              var c,\n                  l,\n                  f = JSON.parse(e);\n\n              if (30 === (f = f.response_body)[0].uri && 0 !== f[0].buffer.code) {\n                var g = o(f[0].buffer.code);\n                return s(g, f), r(g);\n              }\n\n              if (4096 === f[0].buffer.flag ? (l = f[0].buffer, c = f[1].buffer) : (l = f[1].buffer, c = f[0].buffer), 0 !== c.code) {\n                g = o(c.code);\n                return u.default.error(\"[\".concat(n.clientId, \"] requestProxyServer failed: \").concat(g)), s(g, c), r(g);\n              }\n\n              if (!c.edges_services || !c.edges_services instanceof Array) return s(\"UNEXPECTED_ERROR\", c), r(\"UNEXPECTED_ERROR\");\n              var m = Object(d.getParameter)(\"GATEWAY_DOMAINS\"),\n                  h = 0;\n              if (t.indexOf(m[1]) > -1 && (h = 1), 0 === c.edges_services.length) return s(\"EMPTY_PROXY_LIST\", c), r(\"EMPTY_PROXY_LIST\");\n              var v = c.edges_services.map(function (e) {\n                if (e.ip) return e.ip = i ? \"\".concat(e.ip.replace(/[^\\d]/g, \"-\"), \".\").concat(m[h++ % m.length]) : \"\".concat(e.ip), e;\n              });\n\n              if (s(null, v), 0 !== l.code) {\n                g = o(l.code);\n                return u.default.error(\"[\".concat(n.clientId, \"] requestChooseServer failed: \").concat(g)), a(g), r(g);\n              }\n\n              var E = [];\n              m = Object(d.getParameter)(\"GATEWAY_DOMAINS\"), h = 0;\n              if (t.indexOf(m[1]) > -1 && (h = 1), l.edges_services.forEach(function (e) {\n                var r;\n\n                if (e.ip && e.port) {\n                  if (!e.ip.match(/^[\\.\\:\\d]+$/)) return u.default.info(\"[\" + n.clientId + \"] \" + \"Cannot recognized as IP address \".concat(e.ip, \". Used As Host instead\")), void a(\"UNEXPECTED_IP\");\n                  r = \"\".concat(e.ip.replace(/[^\\d]/g, \"-\"), \".\").concat(m[h++ % m.length]);\n                  var i = Object(d.getParameter)(\"PROXY_SERVER_TYPE3\");\n                  r = /sd-rtn/.test(t) ? \"\".concat(i[0], \"/ws/?h=\").concat(r, \"&p=\").concat(e.port) : \"\".concat(i[1], \"/ws/?h=\").concat(r, \"&p=\").concat(e.port), E.push(r);\n                } else u.default.error(\"[\" + n.clientId + \"] Invalid address format \", e);\n              }), !E.length) return u.default.error(\"[\" + n.clientId + \"] Empty Address response\", f), a(\"EMPTY_ADDRESS_RESPONSE\"), r(\"EMPTY_ADDRESS_RESPONSE\");\n              l.ticket = l.cert;\n              var S = {\n                gateway_addr: E,\n                uid: l.uid,\n                cid: l.cid,\n                vid: l.detail && l.detail[8],\n                res: l,\n                detail: f.detail\n              };\n              a(null, S), r(null, {\n                gatewayServers: S,\n                turnServers: v\n              });\n            } catch (e) {\n              return u.default.error(\"[\".concat(n.clientId, \"] requestProxyServer failed with unexpected body \"), e), s(\"UNEXPECTED_ERROR\"), r(\"UNEXPECTED_ERROR\");\n            }\n          }, function (e, t) {\n            \"timeout\" === e.type ? (s(\"REQUEST_PROXY_SERVER_TIME_OUT\"), r(\"REQUEST_PROXY_SERVER_TIME_OUT\")) : (s(\"REQUEST_PROXY_SERVER_FAILED\"), r(\"REQUEST_PROXY_SERVER_FAILED\"));\n          });\n        }(e, _h, t, function (e, r) {\n          e ? (s++, u.default.error(\"[\".concat(t.clientId, \"] request \").concat(_h, \" failed: \").concat(e)), e && -1 === p.JOIN_PROXY_RETRY_LIST.indexOf(e) && (a = e), s === i.length && (a || (a = \"RETRYABLE_ERROR\"), n(a)), !(s % g) && s < i.length && (m++, v())) : c && (/sd-rtn/.test(r.gatewayServers.gateway_addr[0]) ? Object(d.setParameter)(\"NGINX\", o[0]) : Object(d.setParameter)(\"NGINX\", o[1]), c = !1, n(null, r));\n        }, r);\n      },\n          v = function v() {\n        for (var e = m * g, t = e; t < Math.min(i.length, e + g); t++) {\n          var n = i[t];\n          h(n);\n        }\n      };\n\n      v();\n    },\n        _ = n(13),\n        y = n(29),\n        R = n.n(y),\n        T = n(30),\n        I = {},\n        b = {},\n        A = function A(e) {\n      return I[e];\n    },\n        O = function O(e, t) {\n      b[e] = t;\n    },\n        C = function C(e, t, n, r, i, o) {\n      var a = new Date().getTime(),\n          s = t,\n          c = \"\";\n      t.multiIP && t.multiIP.gateway_ip && (c = {\n        vocs_ip: [t.multiIP.uni_lbs_ip],\n        vos_ip: [t.multiIP.gateway_ip]\n      });\n      var g = Object(d.getParameter)(\"AREA_SETTING\").reduce(function (e, t, n) {\n        var r = Object(E.getAreaCodeByArea)(t);\n        return r ? 0 === n ? r : \"\".concat(e, \",\").concat(r) : e;\n      }, \"\"),\n          m = {\n        appid: t.token,\n        opid: 133,\n        client_ts: +new Date(),\n        sid: t.sid,\n        request_bodies: [{\n          uri: 22,\n          buffer: {\n            cname: t.cname,\n            detail: {\n              5: c ? JSON.stringify(c) : void 0,\n              6: t.stringUid,\n              11: g\n            },\n            key: t.token,\n            service_ids: [11],\n            uid: t.uid || 0\n          }\n        }]\n      };\n      Object(l.postFormData)(e, m, function (i) {\n        try {\n          var c = JSON.parse(i),\n              l = (c = c.response_body[0].buffer).code;\n        } catch (e) {\n          var g = \"requestChooseServer failed with unexpected body \" + i;\n          return u.default.error(\"[\" + s.clientId + \"]\", g), r(g, void 0, void 0, o);\n        }\n\n        if (l) return E = new RegExp(/10102\\d{2}$/).test(l) ? \"NO_SERVICE_AVAILABLE\" : p.APErrorCode[c.code] || l, f.report.joinChooseServer(t.sid, {\n          lts: a,\n          succ: !1,\n          csAddr: e,\n          serverList: null,\n          ec: E,\n          chooseServerIp: c && c.detail && c.detail[502]\n        }), r(\"Get server node failed [\" + E + \"]\", e, E, o);\n        var m = [],\n            h = Object(d.getParameter)(\"GATEWAY_DOMAINS\"),\n            v = 0;\n\n        if (e.indexOf(h[1]) > -1 && (v = 1), c.edges_services.forEach(function (e) {\n          var t;\n          e.ip && e.port ? (e.ip.match(/^[\\.\\:\\d]+$/) ? t = \"\".concat(e.ip.replace(/[^\\d]/g, \"-\"), \".\").concat(h[v++ % h.length], \":\").concat(e.port) : (u.default.info(\"[\" + s.clientId + \"] \" + \"Cannot recognized as IP address \".concat(e.ip, \". Used As Host instead\")), t = \"\".concat(e.ip, \":\").concat(e.port)), m.push(t)) : u.default.error(\"[\" + s.clientId + \"] Invalid address format \", e);\n        }), !m.length) {\n          u.default.error(\"[\" + s.clientId + \"] Empty Address response\", c);\n          var E = \"EMPTY_ADDRESS_RESPONSE\";\n          return f.report.joinChooseServer(t.sid, {\n            lts: a,\n            succ: !1,\n            csAddr: e,\n            serverList: null,\n            ec: E,\n            chooseServerIp: c && c.detail && c.detail[502]\n          }), r(\"Get server node failed [\" + E + \"]\", e, E, o);\n        }\n\n        c.ticket = c.cert;\n        var S = {\n          gateway_addr: m,\n          uid: c.uid,\n          cid: c.cid,\n          vid: c.detail && c.detail[8],\n          res: c,\n          uni_lbs_ip: c.detail\n        };\n        return n(S, e);\n      }, function (e, n) {\n        \"timeout\" === e.type ? (f.report.joinChooseServer(t.sid, {\n          lts: a,\n          succ: !1,\n          csAddr: n,\n          serverList: null,\n          ec: \"timeout\"\n        }), r(\"Connect choose server timeout\", n, void 0, o)) : (f.report.joinChooseServer(t.sid, {\n          lts: a,\n          succ: !1,\n          csAddr: n,\n          serverList: null,\n          ec: e.httpErrorCode || \"server_wrong\"\n        }), r(\"Connect choose server error\", n, void 0, o));\n      });\n    },\n        N = function N(e, t, n) {\n      var r = !1,\n          i = null,\n          o = 1,\n          a = 1,\n          s = e.clientId,\n          c = function t(a, c) {\n        if (!r) {\n          var l = [];\n          !function (e, t, n) {\n            var r,\n                i = new Date().getTime(),\n                o = !1,\n                a = 0,\n                s = 0,\n                c = Object(d.getParameter)(\"WEBCS_DOMAIN\"),\n                l = c.length,\n                g = Object(d.getParameter)(\"WEBCS_DOMAIN_BACKUP_LIST\"),\n                m = g.length,\n                h = Object(d.getParameter)(\"CHOOSE_SERVER_FRAGEMENT_LENGTH\"),\n                v = 0,\n                S = 0,\n                _ = function _(n, r) {\n              var a;\n\n              try {\n                a = n.res.detail[8];\n              } catch (t) {\n                u.default.debug(\"[\" + e.clientId + \"] get vid failed\", t);\n              }\n\n              if (o) f.report.joinChooseServer(e.sid, {\n                lts: i,\n                succ: !0,\n                csAddr: r,\n                serverList: n.gateway_addr,\n                cid: n.cid + \"\",\n                uid: n.uid + \"\",\n                ec: null,\n                vid: a,\n                chooseServerIp: n.res && n.res.detail && n.res.detail[502]\n              }, !1);else {\n                if (clearTimeout(I), o = !0, e.proxyServer) for (var s = n.gateway_addr, c = 0; c < s.length; c++) {\n                  var d = s[c].split(\":\");\n                  n.gateway_addr[c] = e.proxyServer + \"/ws/?h=\" + d[0] + \"&p=\" + d[1];\n                }\n                t(n), f.report.joinChooseServer(e.sid, {\n                  lts: i,\n                  succ: !0,\n                  csAddr: r,\n                  serverList: n.gateway_addr,\n                  cid: n.cid + \"\",\n                  uid: n.uid + \"\",\n                  ec: null,\n                  vid: a,\n                  chooseServerIp: n.res && n.res.detail && n.res.detail[502]\n                }, !0);\n              }\n            },\n                y = function y(t, i, o, c) {\n              \"domain\" === c && a++, \"backup\" === c && s++, u.default.error(\"[\" + e.clientId + \"]\", t, i, o), o && -1 === p.JOIN_CS_RETRY_LIST.indexOf(o) && (r = o), a === l && s === m && n(r), \"domain\" === c && !(a % h) && a < l && (v++, R()), \"backup\" === c && !(s % h) && s < m && (S++, T());\n            },\n                R = function t() {\n              for (var n = v * h, r = n; r < Math.min(l, n + h); ++r) {\n                var i;\n\n                if (\"string\" == typeof c[r]) {\n                  var o = c[r];\n                  i = e.proxyServer ? \"https://\".concat(e.proxyServer, \"/ap/?url=\").concat(o + \"/api/v2/transpond/webrtc?v=2\") : \"https://\".concat(o, \"/api/v2/transpond/webrtc?v=2\");\n                  var s = Object(E.getAreaCodeByWebCS)(o);\n                  u.default.debug(\"[\" + e.clientId + \"] \" + \"Connect to choose_server: \".concat(i, \", \").concat(s)), C(i, e, _, y, 0, \"domain\");\n                } else a++, u.default.error(\"[\" + e.clientId + \"] Invalid Host\", c[r]), r === n + h - 1 && r < l - 1 - 1 && (v++, t());\n              }\n            };\n\n            R();\n\n            var T = function t() {\n              if (!o) for (var n = S * h, r = n; r < Math.min(m, n + h); r++) {\n                var i;\n\n                if (\"string\" == typeof g[r]) {\n                  var a = g[r];\n                  i = e.proxyServer ? \"https://\".concat(e.proxyServer, \"/ap/?url=\").concat(a + \"/api/v2/transpond/webrtc?v=2\") : \"https://\".concat(a, \"/api/v2/transpond/webrtc?v=2\");\n                  var c = Object(E.getAreaCodeByWebCS)(a);\n                  u.default.debug(\"[\" + e.clientId + \"] \" + \"Connect to backup_choose_server: \".concat(i, \", \").concat(c)), C(i, e, _, y, 0, \"backup\");\n                } else s++, u.default.error(\"[\" + e.clientId + \"] Invalid Host\", g[r]), r === n + h - 1 && r < g - 1 - 1 && (v++, t());\n              }\n            },\n                I = setTimeout(T, 1e3);\n          }(e, function (t) {\n            r = !0, !0, l = t, clearTimeout(i), b[s] !== _.a.DISCONNECTED && b[s] !== _.a.DISCONNECTING ? c && c(l, null) : u.default.debug(\"[\".concat(e.clientId, \"] Request gateway list success when connection state is \").concat(b[s]));\n          }, function (r) {\n            if (r) return u.default.info(\"[\" + e.clientId + \"] Join failed: \" + r), void (n && n(r));\n            if (b[s] === _.a.DISCONNECTED || b[s] === _.a.DISCONNECTING) return u.default.debug(\"[\".concat(e.clientId, \"] Request gateway list falied when connection state is \").concat(b[s])), void (n && n(\"OPERATION_ABORT\"));\n            u.default.debug(\"[\" + e.clientId + \"] Request gateway list will be restart in \" + o + \"s\"), i = setTimeout(function () {\n              t(a, c);\n            }, 1e3 * o), I[s] = i;\n            var l = Object(d.getParameter)(\"AP_BACKOFF_MAX_TIME\");\n            o = o >= l ? l : 2 * o;\n          });\n        }\n      },\n          l = function n() {\n        !function (e, t) {\n          g(e, function (n, r) {\n            if (n) return t && t(n);\n            u.default.debug(\"[\" + e.clientId + \"] getProxyServerList: \", r), h(e, r, t);\n          });\n        }(e, function (r, o) {\n          if (r) {\n            u.default.debug(\"[\" + e.clientId + \"]\", r), u.default.debug(\"[\" + e.clientId + \"] Request proxy will be restart in \" + a + \"s\"), i = setTimeout(function () {\n              n();\n            }, 1e3 * a), I[s] = i;\n            var l = Object(d.getParameter)(\"AP_BACKOFF_MAX_TIME\");\n            a = a >= l ? l : 2 * a;\n          } else {\n            clearTimeout(i);\n            var p = o.address;\n            e.proxyServer = p;\n            var g = {\n              mode: \"manual\",\n              url: o.address,\n              tcpport: o.serverResponse.tcpport || \"3433\",\n              udpport: o.serverResponse.udpport || \"3478\",\n              username: o.serverResponse.username || \"test\",\n              credential: o.serverResponse.password || Object(d.getParameter)(\"TURN_SERVER_PASSWORD\"),\n              forceturn: !0\n            };\n            g.tcpport += \"\", g.udpport += \"\", e.turnServers = [], e.turnServers.push(g), f.report.setProxyServer(p), u.default.setProxyServer(p), c(p, t);\n          }\n        });\n      };\n\n      e.useProxyServer ? 1 == e.proxyServerType ? l() : 2 == e.proxyServerType ? function n() {\n        !function (e, t) {\n          g(e, function (n, r) {\n            return n ? t && t(n) : (u.default.debug(\"[\" + e.clientId + \"] getProxyServerList: \", r), t && t(null, {\n              address: r[0],\n              serverResponse: {\n                tcpport: \"443\",\n                udpport: \"3478\",\n                username: \"test\",\n                password: \"111111\"\n              }\n            }));\n          });\n        }(e, function (r, o) {\n          if (r) return u.default.debug(\"[\" + e.clientId + \"]\", r), u.default.debug(\"[\" + e.clientId + \"] Request proxy will be restart in \" + a + \"s\"), i = setTimeout(function () {\n            n();\n          }, 1e3 * a), I[s] = i, void (a = a >= 3600 ? 3600 : 2 * a);\n          clearTimeout(i);\n          var l = Object(d.getParameter)(\"PROXY_SERVER_TYPE2\");\n          e.proxyServer = l;\n          var p = {\n            mode: \"manual\",\n            url: o.address,\n            tcpport: o.serverResponse.tcpport || \"3433\",\n            udpport: o.serverResponse.udpport || \"3478\",\n            username: o.serverResponse.username || \"test\",\n            credential: o.serverResponse.password || \"111111\",\n            forceturn: !0\n          };\n          p.tcpport += \"\", p.udpport += \"\", e.turnServers = [], e.turnServers.push(p), f.report.setProxyServer(l), u.default.setProxyServer(l), c(l, t);\n        });\n      }() : 3 == e.proxyServerType ? function r() {\n        S(\"proxy3\", e, function (o, c) {\n          if (o) return \"RETRYABLE_ERROR\" !== o ? n && n(o) : (u.default.debug(\"[\" + e.clientId + \"]\", o), u.default.debug(\"[\" + e.clientId + \"] Request proxy will be restart in \" + a + \"s\"), i = setTimeout(function () {\n            r();\n          }, 1e3 * a), I[s] = i, void (a = a >= 3600 ? 3600 : 2 * a));\n          var l = c.gatewayServers,\n              p = c.turnServers;\n          clearTimeout(i);\n          var g = Object(d.getParameter)(\"NGINX\");\n          e.proxyServer = g, e.turnServers = [];\n          var m = Object(T.randomString)();\n          p.map(function (t) {\n            var n = {\n              mode: \"manual\",\n              url: t.ip,\n              tcpport: \"\",\n              udpport: t.port || \"3478\",\n              username: t.username || m,\n              credential: t.password || R()(m).toString(),\n              forceturn: !0\n            };\n            n.tcpport += \"\", n.udpport += \"\", e.turnServers.push(n);\n          }), f.report.setProxyServer(g), u.default.setProxyServer(g), t(l);\n        });\n      }() : 4 == e.proxyServerType ? function r() {\n        S(\"proxy4\", e, function (o, c) {\n          if (o) return \"RETRYABLE_ERROR\" !== o ? n && n(o) : (u.default.debug(\"[\" + e.clientId + \"]\", o), u.default.debug(\"[\" + e.clientId + \"] Request proxy will be restart in \" + a + \"s\"), i = setTimeout(function () {\n            r();\n          }, 1e3 * a), I[s] = i, void (a = a >= 3600 ? 3600 : 2 * a));\n          var l = c.gatewayServers,\n              p = c.turnServers;\n          clearTimeout(i);\n          var g = Object(d.getParameter)(\"NGINX\");\n          e.proxyServer = g, e.turnServers = [];\n          var m = Object(T.randomString)();\n          p.map(function (t) {\n            var n = {\n              mode: \"manual\",\n              url: t.ip,\n              tcpport: t.port || \"443\",\n              udpport: \"\",\n              username: t.username || m,\n              credential: t.password || R()(m).toString(),\n              forceturn: !1\n            };\n            n.tcpport += \"\", n.udpport += \"\", e.turnServers.push(n);\n          }), f.report.setProxyServer(g), u.default.setProxyServer(g), t(l);\n        });\n      }() : 5 == e.proxyServerType ? function r() {\n        S(\"proxy5\", e, function (o, c) {\n          if (o) return \"RETRYABLE_ERROR\" !== o ? n && n(o) : (u.default.debug(\"[\" + e.clientId + \"]\", o), u.default.debug(\"[\" + e.clientId + \"] Request proxy will be restart in \" + a + \"s\"), i = setTimeout(function () {\n            r();\n          }, 1e3 * a), I[s] = i, void (a = a >= 3600 ? 3600 : 2 * a));\n          var l = c.gatewayServers,\n              p = c.turnServers;\n          clearTimeout(i);\n          var g = Object(d.getParameter)(\"NGINX\");\n          e.proxyServer = g, e.turnServers = [];\n          var m = Object(T.randomString)();\n          p.map(function (t) {\n            var n = {\n              mode: \"manual\",\n              url: t.ip,\n              tcpport: t.port || \"443\",\n              udpport: \"\",\n              username: t.username || m,\n              credential: t.password || R()(m).toString(),\n              forceturn: !1,\n              useTurns: !0\n            };\n            n.tcpport += \"\", n.udpport += \"\", e.turnServers.push(n);\n          }), f.report.setProxyServer(g), u.default.setProxyServer(g), t(l);\n        }, !0);\n      }() : l() : c(null, t);\n    },\n        w = function w(e, t, n, r, i) {\n      var o = Date.now();\n      r = r || t.stringUid;\n      var a = {\n        sid: t.sid,\n        opid: 10,\n        appid: t.appId,\n        string_uid: r\n      };\n      return new Promise(function (i, s) {\n        Object(l.post)(e + \"\".concat(-1 === e.indexOf(\"?\") ? \"?\" : \"&\", \"action=stringuid\"), a, function (c) {\n          try {\n            var d = JSON.parse(c),\n                l = d.code;\n          } catch (i) {\n            var g = \"requestUserAccount failed with unexpected body \" + c;\n            return u.default.error(\"[\" + t.clientId + \"]\", g), s({\n              retryable: !0,\n              info: g,\n              url: e,\n              error: \"UNEXPECTED_ERROR\"\n            }), n && n.dispatchEvent({\n              type: \"error\",\n              reason: \"USER_ACCOUNT_BODY_NOT_JSON\"\n            }), void f.report.reqUserAccount(a.sid, {\n              lts: o,\n              success: !1,\n              serverAddress: e,\n              stringUid: r,\n              uid: null,\n              extend: c,\n              errorCode: \"USER_ACCOUNT_BODY_NOT_JSON\"\n            });\n          }\n\n          if (l) {\n            var m = !1;\n            return \"INTERNAL_SERVER_ERROR\" === (v = p.StringUidErrorCode[d.code % 1e4] || \"REQ_ACCOUNT_ERR_\".concat(l)) && (m = !0), n && n.dispatchEvent({\n              type: \"error\",\n              reason: v\n            }), f.report.reqUserAccount(a.sid, {\n              lts: o,\n              success: !1,\n              serverAddress: e,\n              stringUid: r,\n              uid: null,\n              errorCode: v,\n              extend: a\n            }), s({\n              retryable: m,\n              info: g = \"Get String Uid Failed [\" + v + \"]\",\n              url: e,\n              error: v\n            });\n          }\n\n          var h = d.uid;\n\n          if (!(h > 0 && h < Math.pow(2, 32))) {\n            u.default.error(\"[\" + t.clientId + \"] \" + \"Invalid Uint Uid \".concat(r, \" => \").concat(h), d);\n            var v = \"INVALID_UINT_UID_\".concat(h);\n            return n && n.dispatchEvent({\n              type: \"error\",\n              reason: v\n            }), f.report.reqUserAccount(a.sid, {\n              lts: o,\n              success: !1,\n              serverAddress: e,\n              stringUid: r,\n              uid: null,\n              errorCode: v,\n              extend: a\n            }), s({\n              retryable: !0,\n              error: v,\n              info: \"Get String Uid failed [\" + v + \"]\",\n              url: e\n            });\n          }\n\n          i({\n            uid: h,\n            url: e\n          }), f.report.reqUserAccount(a.sid, {\n            lts: o,\n            success: !0,\n            serverAddress: e,\n            stringUid: r,\n            uid: h,\n            errorCode: null,\n            extend: a\n          });\n        }, function (e, t) {\n          if (\"timeout\" === e.type) {\n            var i = \"USER_ACCOUNT_TIMEOUT\";\n            n && n.dispatchEvent({\n              type: \"error\",\n              reason: i\n            }), f.report.reqUserAccount(a.sid, {\n              lts: o,\n              success: !1,\n              serverAddress: t,\n              stringUid: r,\n              uid: null,\n              errorCode: i,\n              extend: a\n            }), s({\n              retryable: !0,\n              info: i,\n              url: t,\n              error: i\n            });\n          } else {\n            var c = \"USER_ACCOUNT_SERVER_WRONG_\".concat(e.type);\n            n && n.dispatchEvent({\n              type: \"error\",\n              reason: c\n            }), f.report.reqUserAccount(a.sid, {\n              lts: o,\n              success: !1,\n              serverAddress: t,\n              stringUid: r,\n              uid: null,\n              errorCode: c,\n              extend: a\n            }), s({\n              retryable: !0,\n              info: c,\n              url: t,\n              error: c\n            });\n          }\n        }, {\n          \"X-Packet-Service-Type\": 0,\n          \"X-Packet-URI\": 72\n        });\n      });\n    },\n        L = function L(e, t, n) {\n      Date.now();\n      var r,\n          o = Object(d.getParameter)(\"ACCOUNT_REGISTER\"),\n          s = !1,\n          l = Object(d.getParameter)(\"ACCOUNT_REGISTER_RETRY_TIMEOUT\"),\n          f = null,\n          p = null,\n          g = new Promise(function () {\n        var g = c()(a.a.mark(function c(g, m) {\n          var h, v, E;\n          return a.a.wrap(function (c) {\n            for (;;) {\n              switch (c.prev = c.next) {\n                case 0:\n                  f = g, p = m, r = 0;\n\n                case 3:\n                  if (!(r < Object(d.getParameter)(\"ACCOUNT_REGISTER_RETRY_COUNT_MAX\"))) {\n                    c.next = 33;\n                    break;\n                  }\n\n                  if (!s) {\n                    c.next = 6;\n                    break;\n                  }\n\n                  return c.abrupt(\"return\");\n\n                case 6:\n                  return h = o[r % o.length], v = e.proxyServer ? \"https://\".concat(e.proxyServer, \"/ap/?url=\").concat(h + \"/api/v1\") : \"https://\".concat(h, \"/api/v1\"), c.prev = 8, c.delegateYield(a.a.mark(function r() {\n                    var i;\n                    return a.a.wrap(function (r) {\n                      for (;;) {\n                        switch (r.prev = r.next) {\n                          case 0:\n                            return e.proxyServer, r.next = 3, w(v, e, t, n);\n\n                          case 3:\n                            if (i = r.sent, !s) {\n                              r.next = 6;\n                              break;\n                            }\n\n                            return r.abrupt(\"return\", {\n                              v: void 0\n                            });\n\n                          case 6:\n                            s = !0, setTimeout(function () {\n                              u.default.debug(\"Get UserAccount Successfully\", i), f(i);\n                            }, 0);\n\n                          case 8:\n                          case \"end\":\n                            return r.stop();\n                        }\n                      }\n                    }, r);\n                  })(), \"t0\", 10);\n\n                case 10:\n                  if (E = c.t0, \"object\" !== i()(E)) {\n                    c.next = 13;\n                    break;\n                  }\n\n                  return c.abrupt(\"return\", E.v);\n\n                case 13:\n                  c.next = 30;\n                  break;\n\n                case 15:\n                  if (c.prev = 15, c.t1 = c.catch(8), !s) {\n                    c.next = 19;\n                    break;\n                  }\n\n                  return c.abrupt(\"return\");\n\n                case 19:\n                  if (!c.t1.retryable) {\n                    c.next = 27;\n                    break;\n                  }\n\n                  return (l = Math.ceil(l * Object(d.getParameter)(\"ACCOUNT_REGISTER_RETRY_RATIO\"))) > Object(d.getParameter)(\"ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX\") && (l = Object(d.getParameter)(\"ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX\")), u.default.error(\"\".concat(c.t1.info, \" \").concat(c.t1.url, \" Will Fetch User Account in \").concat(l / 1e3, \" seconds\")), c.next = 25, new Promise(function (e) {\n                    setTimeout(e, l);\n                  });\n\n                case 25:\n                  c.next = 30;\n                  break;\n\n                case 27:\n                  u.default.error(\"Get UserAccount Error: \".concat(c.t1.info, \" \").concat(c.t1.url), c.t1.error), s = !0, p(c.t1.error);\n\n                case 30:\n                  r++, c.next = 3;\n                  break;\n\n                case 33:\n                case \"end\":\n                  return c.stop();\n              }\n            }\n          }, c, null, [[8, 15]]);\n        }));\n        return function (e, t) {\n          return g.apply(this, arguments);\n        };\n      }());\n      return g.cancel = function () {\n        s || (s = !0, p({\n          info: \"Request Cancelled\",\n          retryable: !1\n        }));\n      }, g.isFinished = function () {\n        return s;\n      }, g;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = this && this.__spreadArrays || function () {\n      for (var e = 0, t = 0, n = arguments.length; t < n; t++) {\n        e += arguments[t].length;\n      }\n\n      var r = Array(e),\n          i = 0;\n\n      for (t = 0; t < n; t++) {\n        for (var o = arguments[t], a = 0, s = o.length; a < s; a++, i++) {\n          r[i] = o[a];\n        }\n      }\n\n      return r;\n    },\n        i = this && this.__importDefault || function (e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    };\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n    var o,\n        a,\n        s = i(n(0));\n    !function (e) {\n      e.CHINA = \"CHINA\", e.ASIA = \"ASIA\", e.NORTH_AMERICA = \"NORTH_AMERICA\", e.EUROPE = \"EUROPE\", e.JAPAN = \"JAPAN\", e.INDIA = \"INDIA\", e.OCEANIA = \"OCEANIA\", e.SOUTH_AMERICA = \"SOUTH_AMERICA\", e.AFRICA = \"AFRICA\", e.OVERSEA = \"OVERSEA\", e.GLOBAL = \"GLOBAL\";\n    }(o || (o = {})), t.AREAS = o, function (e) {\n      e.CHINA = \"CN\", e.ASIA = \"AS\", e.NORTH_AMERICA = \"NA\", e.EUROPE = \"EU\", e.JAPAN = \"JP\", e.INDIA = \"IN\", e.OCEANIA = \"OC\", e.SOUTH_AMERICA = \"SA\", e.AFRICA = \"AF\", e.OVERSEA = \"OVERSEA\", e.GLOBAL = \"GLOBAL\";\n    }(a || (a = {}));\n    var c = {\n      ASIA: {\n        CODE: a.ASIA,\n        WEBCS_DOMAIN: [\"ap-web-1-asia.agora.io\"],\n        WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-asia.agora.io\"],\n        PROXY_CS: [\"proxy-ap-web-asia.agora.io\"],\n        CDS_AP: [\"cds-ap-web-asia.agora.io\", \"cds-ap-web-asia2.agora.io\"],\n        ACCOUNT_REGISTER: [\"sua-ap-web-asia.agora.io\", \"sua-ap-web-asia2.agora.io\"],\n        UAP_AP: [\"uap-ap-web-asia.agora.io\", \"uap-ap-web-asia2.agora.io\"],\n        EVENT_REPORT_DOMAIN: [\"statscollector-1-asia.agora.io\"],\n        EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-asia.agora.io\"],\n        LOG_UPLOAD_SERVER: [\"logservice-asia.agora.io\"],\n        NGINX: [\"southeast-asia.webrtc-cloud-proxy.sd-rtn.com\"]\n      },\n      NORTH_AMERICA: {\n        CODE: a.NORTH_AMERICA,\n        WEBCS_DOMAIN: [\"ap-web-1-north-america.agora.io\"],\n        WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-north-america.agora.io\"],\n        PROXY_CS: [\"proxy-ap-web-america.agora.io\"],\n        CDS_AP: [\"cds-ap-web-america.agora.io\", \"cds-ap-web-america2.agora.io\"],\n        ACCOUNT_REGISTER: [\"sua-ap-web-america.agora.io\", \"sua-ap-web-america2.agora.io\"],\n        UAP_AP: [\"uap-ap-web-america.agora.io\", \"uap-ap-web-america2.agora.io\"],\n        EVENT_REPORT_DOMAIN: [\"statscollector-1-north-america.agora.io\"],\n        EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-north-america.agora.io\"],\n        LOG_UPLOAD_SERVER: [\"logservice-north-america.agora.io\"],\n        NGINX: [\"east-usa.webrtc-cloud-proxy.sd-rtn.com\"]\n      },\n      EUROPE: {\n        CODE: a.EUROPE,\n        WEBCS_DOMAIN: [\"ap-web-1-europe.agora.io\"],\n        WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-europe.agora.io\"],\n        PROXY_CS: [\"proxy-ap-web-europe.agora.io\"],\n        CDS_AP: [\"cds-ap-web-europe.agora.io\", \"cds-ap-web-europe2.agora.io\"],\n        ACCOUNT_REGISTER: [\"sua-ap-web-europe.agora.io\", \"sua-ap-web-europe.agora.io\"],\n        UAP_AP: [\"uap-ap-web-europe.agora.io\", \"uap-ap-web-europe2.agora.io\"],\n        EVENT_REPORT_DOMAIN: [\"statscollector-1-europe.agora.io\"],\n        EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-europe.agora.io\"],\n        LOG_UPLOAD_SERVER: [\"logservice-europe.agora.io\"],\n        NGINX: [\"europe.webrtc-cloud-proxy.sd-rtn.com\"]\n      },\n      JAPAN: {\n        CODE: a.JAPAN,\n        WEBCS_DOMAIN: [\"ap-web-1-japan.agora.io\"],\n        WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-japan.agora.io\"],\n        PROXY_CS: [\"proxy-ap-web-japan.agora.io\"],\n        CDS_AP: [\"cds-ap-web-japan.agora.io\", \"cds-ap-web-japan2.agora.io\"],\n        ACCOUNT_REGISTER: [\"sua-ap-web-japan.agora.io\", \"sua-ap-web-japan2.agora.io\"],\n        UAP_AP: [\"uap-ap-web-japan.agora.io\", \"\\tuap-ap-web-japan2.agora.io\"],\n        EVENT_REPORT_DOMAIN: [\"statscollector-1-japan.agora.io\"],\n        EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-japan.agora.io\"],\n        LOG_UPLOAD_SERVER: [\"logservice-japan.agora.io\"],\n        NGINX: [\"japan.webrtc-cloud-proxy.sd-rtn.com\"]\n      },\n      INDIA: {\n        CODE: a.INDIA,\n        WEBCS_DOMAIN: [\"ap-web-1-india.agora.io\"],\n        WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-india.agora.io\"],\n        PROXY_CS: [\"proxy-ap-web-india.agora.io\"],\n        CDS_AP: [\"cds-ap-web-india.agora.io\", \"cds-ap-web-india2.agora.io\"],\n        ACCOUNT_REGISTER: [\"sua-ap-web-india.agora.io\", \"sua-ap-web-india2.agora.io\"],\n        UAP_AP: [\"uap-ap-web-india.agora.io\", \"uap-ap-web-india2.agora.io\"],\n        EVENT_REPORT_DOMAIN: [\"statscollector-1-india.agora.io\"],\n        EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-india.agora.io\"],\n        LOG_UPLOAD_SERVER: [\"logservice-india.agora.io\"],\n        NGINX: [\"india.webrtc-cloud-proxy.sd-rtn.com\"]\n      },\n      OVERSEA: {\n        CODE: a.OVERSEA,\n        WEBCS_DOMAIN: [\"ap-web-1-oversea.agora.io\"],\n        WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-oversea.agora.io\"],\n        PROXY_CS: [\"proxy-ap-web-oversea.agora.io\"],\n        CDS_AP: [\"cds-ap-web-oversea.agora.io\"],\n        ACCOUNT_REGISTER: [\"sua-ap-web-oversea.agora.io\"],\n        UAP_AP: [\"uap-ap-web-oversea.agora.io\"],\n        EVENT_REPORT_DOMAIN: [\"statscollector-1-oversea.agora.io\"],\n        EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-oversea.agora.io\"],\n        LOG_UPLOAD_SERVER: [\"logservice-oversea.agora.io\"],\n        NGINX: [\"webrtc-cloud-proxy.agora.io\"]\n      },\n      GLOBAL: {\n        CODE: a.GLOBAL,\n        WEBCS_DOMAIN: [\"webrtc2-ap-web-1.agora.io\"],\n        WEBCS_DOMAIN_BACKUP_LIST: [\"webrtc2-ap-web-3.agora.io\"],\n        PROXY_CS: [\"ap-proxy-1.agora.io\", \"ap-proxy-2.agora.io\"],\n        CDS_AP: [\"cds-ap-web-1.agora.io\", \"cds-ap-web-3.agora.io\"],\n        ACCOUNT_REGISTER: [\"sua-ap-web-1.agora.io\", \"sua-ap-web-3.agora.io\"],\n        UAP_AP: [\"uap-ap-web-1.agora.io\", \"uap-ap-web-3.agora.io\"],\n        EVENT_REPORT_DOMAIN: [\"statscollector-1.agora.io\"],\n        EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2.agora.io\"],\n        LOG_UPLOAD_SERVER: [\"logservice.agora.io\"],\n        NGINX: [\"webrtc-cloud-proxy.sd-rtn.com\"]\n      },\n      OCEANIA: {\n        CODE: a.OCEANIA,\n        WEBCS_DOMAIN: [\"ap-web-1-oceania.agora.io\"],\n        WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-oceania.agora.io\"],\n        PROXY_CS: [\"proxy-ap-web-oceania.agora.io\"],\n        CDS_AP: [\"cds-ap-web-oceania.agora.io\", \"cds-ap-web-oceania2.agora.io\"],\n        ACCOUNT_REGISTER: [\"sua-ap-web-oceania.agora.io\", \"sua-ap-web-oceania2.agora.io\"],\n        UAP_AP: [\"uap-ap-web-oceania.agora.io\", \"uap-ap-web-oceania2.agora.io\"],\n        EVENT_REPORT_DOMAIN: [\"statscollector-1-oceania.agora.io\"],\n        EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-oceania.agora.io\"],\n        LOG_UPLOAD_SERVER: [\"logservice-oceania.agora.io\"],\n        NGINX: [\"oceania.webrtc-cloud-proxy.sd-rtn.com\"]\n      },\n      SOUTH_AMERICA: {\n        CODE: a.SOUTH_AMERICA,\n        WEBCS_DOMAIN: [\"ap-web-1-south-america.agora.io\"],\n        WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-south-america.agora.io\"],\n        PROXY_CS: [\"proxy-ap-web-south-america.agora.io\"],\n        CDS_AP: [\"cds-ap-web-south-america.agora.io\", \"cds-ap-web-south-america2.agora.io\"],\n        ACCOUNT_REGISTER: [\"sua-ap-web-south-america.agora.io\", \"sua-ap-web-south-america2.agora.io\"],\n        UAP_AP: [\"uap-ap-web-south-america.agora.io\", \"uap-ap-web-south-america2.agora.io\"],\n        EVENT_REPORT_DOMAIN: [\"statscollector-1-south-america.agora.io\"],\n        EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-south-america.agora.io\"],\n        LOG_UPLOAD_SERVER: [\"logservice-south-america.agora.io\"],\n        NGINX: [\"south-america.webrtc-cloud-proxy.sd-rtn.com\"]\n      },\n      AFRICA: {\n        CODE: a.AFRICA,\n        WEBCS_DOMAIN: [\"ap-web-1-africa.agora.io\"],\n        WEBCS_DOMAIN_BACKUP_LIST: [\"ap-web-2-africa.agora.io\"],\n        PROXY_CS: [\"proxy-ap-web-africa.agora.io\"],\n        CDS_AP: [\"cds-ap-web-africa.agora.io\", \"cds-ap-web-africa2.agora.io\"],\n        ACCOUNT_REGISTER: [\"sua-ap-web-africa.agora.io\", \"sua-ap-web-africa2.agora.io\"],\n        UAP_AP: [\"uap-ap-web-africa.agora.io\", \"uap-ap-web-africa2.agora.io\"],\n        EVENT_REPORT_DOMAIN: [\"statscollector-1-africa.agora.io\"],\n        EVENT_REPORT_BACKUP_DOMAIN: [\"statscollector-2-africa.agora.io\"],\n        LOG_UPLOAD_SERVER: [\"logservice-south-africa.agora.io\"],\n        NGINX: [\"africa.webrtc-cloud-proxy.sd-rtn.com\"]\n      }\n    };\n    t.AREA_DOMAIN_MAP = c;\n\n    var d = {\n      GLOBAL: {\n        ASIA: [o.CHINA, o.JAPAN, o.INDIA],\n        EUROPE: [],\n        NORTH_AMERICA: [],\n        SOUTH_AMERICA: [],\n        OCEANIA: [],\n        AFRICA: []\n      }\n    },\n        u = Object.keys(d[o.GLOBAL]),\n        l = [o.CHINA, o.NORTH_AMERICA, o.EUROPE, o.ASIA, o.JAPAN, o.INDIA, o.OCEANIA, o.SOUTH_AMERICA, o.AFRICA],\n        f = function f(e, t) {\n      var n,\n          i = [];\n\n      if (\"string\" == typeof e && (e = [e]), t && !e.includes(o.GLOBAL) && (i = e), t || (i = e), t && e.includes(o.GLOBAL)) {\n        var a = [o.GLOBAL, o.OVERSEA],\n            s = Object.keys(c);\n        if (t === o.GLOBAL) throw new Error(\"Can not set excludedArea to 'GLOBAL'\");\n        if (t === o.CHINA) i = [o.OVERSEA];else if (n = t, u.includes(n)) {\n          var f = function (e) {\n            return void 0 === e && (e = \"\"), d[o.GLOBAL][e] || [];\n          }(t),\n              p = r(a, [t], f);\n\n          i = s.filter(function (e) {\n            return !p.includes(e);\n          });\n        } else if (function (e) {\n          var t = !1;\n          return u.forEach(function (n) {\n            d.GLOBAL[n].includes(e) && (t = !0);\n          }), t;\n        }(t)) {\n          var g = function (e) {\n            void 0 === e && (e = \"\");\n            var t = \"\";\n            return u.forEach(function (n) {\n              d.GLOBAL[n].includes(e) && (t = n);\n            }), t;\n          }(t),\n              m = r(a, [g, t]);\n\n          i = s.filter(function (e) {\n            return !m.includes(e);\n          });\n        } else i = e;\n\n        i = function (e) {\n          var t = [];\n          return l.forEach(function (n) {\n            e.includes(n) && t.push(n);\n          }), t.concat(e.filter(function (e) {\n            return !l.includes(e);\n          }));\n        }(i);\n      }\n\n      return i;\n    };\n\n    t.getAreaCodeByConfig = function (e) {\n      var t = e.areaCode,\n          n = e.excludedArea;\n      return n ? f(t, n) : t;\n    }, c.CHINA = {\n      CODE: a.CHINA,\n      WEBCS_DOMAIN: [\"webrtc2-2.ap.sd-rtn.com\"],\n      WEBCS_DOMAIN_BACKUP_LIST: [\"webrtc2-4.ap.sd-rtn.com\"],\n      PROXY_CS: [\"proxy-web.ap.sd-rtn.com\"],\n      CDS_AP: [\"cds-web-2.ap.sd-rtn.com\", \"cds-web-4.ap.sd-rtn.com\"],\n      ACCOUNT_REGISTER: [\"sua-web-2.ap.sd-rtn.com\", \"sua-web-4.ap.sd-rtn.com\"],\n      UAP_AP: [\"uap-web-2.ap.sd-rtn.com\", \"uap-web-4.ap.sd-rtn.com\"],\n      EVENT_REPORT_DOMAIN: [\"web-3.statscollector.sd-rtn.com\"],\n      EVENT_REPORT_BACKUP_DOMAIN: [\"web-4.statscollector.sd-rtn.com\"],\n      LOG_UPLOAD_SERVER: [\"logservice-china.agora.io\"],\n      NGINX: [\"east-cn.webrtc-cloud-proxy.sd-rtn.com\"]\n    };\n\n    t.getAreaCodeByWebCS = function (e) {\n      for (var t = Object.keys(c), n = 0; n < t.length; n++) {\n        var r = t[n],\n            i = c[r];\n        if (i.WEBCS_DOMAIN.includes(e) || i.WEBCS_DOMAIN_BACKUP_LIST.includes(e)) return i.CODE === a.OVERSEA ? a.ASIA + \",\" + a.EUROPE + \",\" + a.AFRICA + \",\" + a.NORTH_AMERICA + \",\" + a.SOUTH_AMERICA + \",\" + a.OCEANIA : i.CODE;\n      }\n    };\n\n    t.getAreaCodeByArea = function (e) {\n      return e === o.OVERSEA ? a.ASIA + \",\" + a.EUROPE + \",\" + a.AFRICA + \",\" + a.NORTH_AMERICA + \",\" + a.SOUTH_AMERICA + \",\" + a.OCEANIA : a[e];\n    };\n\n    t.getAreaDomainConfig = function (e) {\n      var t = {\n        WEBCS_DOMAIN: [],\n        WEBCS_DOMAIN_BACKUP_LIST: [],\n        PROXY_CS: [],\n        CDS_AP: [],\n        ACCOUNT_REGISTER: [],\n        UAP_AP: [],\n        EVENT_REPORT_DOMAIN: [],\n        EVENT_REPORT_BACKUP_DOMAIN: [],\n        LOG_UPLOAD_SERVER: [],\n        NGINX: []\n      };\n      return e.map(function (e) {\n        var n = c[e];\n\n        if (n) {\n          var r = Object.keys(n);\n          r ? r.map(function (e) {\n            \"CODE\" !== e && (t[e] = t[e].concat(n[e]));\n          }) : s.default.info(e + \" is not exist\");\n        } else s.default.info(e + \" is not exist\");\n      }), t;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.d(t, \"a\", function () {\n      return O;\n    }), n.d(t, \"b\", function () {\n      return C;\n    });\n\n    var r = n(7),\n        i = n.n(r),\n        o = n(4),\n        a = n(8),\n        s = function s(e) {\n      var t = Object(a.b)(e);\n      return t.url = \".\", t;\n    },\n        c = n(0),\n        d = n(15),\n        u = n(5),\n        l = n(2),\n        f = n(1),\n        p = 0,\n        g = function g(e) {\n      var t = s({});\n      t.id = e.id, t.playerId = p++, t.destroyed = !1, t.fit = e.options && e.options.fit, \"contain\" !== t.fit && \"cover\" !== t.fit && (t.fit = null), t.url = e.url, t.stream = e.stream.stream, t.peerVideoReady = !1, t.isFreeze = !1, t.freezeTimeCounterList = [], t.freezeCount = 0, t.lastFreezeCount = 0, t.lastTimeupdateTime = 0, t.elementID = e.elementID, t.setAudioOutput = function (e, n, r) {\n        var i = t.video || t.audio;\n        return i ? i.setSinkId ? void i.setSinkId(e).then(function () {\n          return c.default.debug(\"[\" + t.id + \"] \" + \"video \".concat(t.id, \" setAudioOutput \").concat(e, \" SUCCESS\")), i == t.video && t.audio ? t.audio.setSinkId(e) : Promise.resolve();\n        }).then(function () {\n          return c.default.debug(\"[\" + t.id + \"] \" + \"audio \".concat(t.id, \" setAudioOutput \").concat(e, \" SUCCESS\")), n && n();\n        }).catch(function (e) {\n          return c.default.error(\"[\" + t.id + \"] VideoPlayer.setAudioOutput\", e), r && r(e);\n        }) : (c.default.error(\"[\" + t.id + \"] \", u.default.WEB_API_NOT_SUPPORTED), r && r(u.default.WEB_API_NOT_SUPPORTED)) : (c.default.error(\"[\" + t.id + \"] \", u.default.PLAYER_NOT_FOUND), r && r(u.default.PLAYER_NOT_FOUND));\n      }, t.destroy = function () {\n        c.default.debug(\"[\".concat(t.id, \"] destroy \").concat(e.stream.local ? \"local\" : \"remote\", \" Player \").concat(t.id)), Object(d.setSrcObject)(t.video, null), Object(d.setSrcObject)(t.audio, null), t.video.load(), t.audio.load(), t.video.pause(), t.video.remove(), t.audio.remove(), t.freezeCheckInterval && clearInterval(t.freezeCheckInterval), t.destroyed = !0, delete t.resizer, document.getElementById(t.div.id) && t.parentNode.contains(t.div) && t.div.remove() && t.parentNode.removeChild(t.div), [\"video\", \"audio\"].forEach(function (n) {\n          t[n];\n          var r = a[n];\n          clearTimeout(r.playDeferTimeout), r.formerMediaState = null;\n          var i = {\n            playerId: t.playerId,\n            stateId: r.stateId + 1,\n            playDeferTimeout: null,\n            error: !1,\n            status: \"aborted\",\n            reason: \"stop\",\n            updatedAt: Date.now()\n          };\n          a[n] = i;\n          var o = {\n            type: \"player-status-change\",\n            playerId: t.playerId,\n            mediaType: n,\n            status: i.status,\n            reason: i.reason,\n            isErrorState: !1,\n            streamId: t.id\n          };\n          c.default.debug(\"[\".concat(t.id, \"] Media Player Status Change Triggered by destroy()\"), o), e.stream.dispatchEvent(o), f.report.reportApiInvoke(e.stream.sid, {\n            name: \"Stream.playerStatusChange\",\n            options: o,\n            tag: \"tracer\"\n          })();\n        });\n      }, t.div = document.createElement(\"div\"), t.div.setAttribute(\"id\", \"player_\" + t.id), e.stream.video ? t.div.setAttribute(\"style\", \"width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;\") : t.div.setAttribute(\"style\", \"width: 100%; height: 100%; position: relative; overflow: hidden;\"), t.video = document.createElement(\"video\"), t.video.setAttribute(\"id\", \"video\" + t.id), e.stream.local && !e.stream.screen ? e.stream.mirror ? t.video.setAttribute(\"style\", \"width: 100%; height: 100%; position: absolute; transform: rotateY(180deg); object-fit: \".concat(t.fit || \"cover\", \";\")) : t.video.setAttribute(\"style\", \"width: 100%; height: 100%; position: absolute; object-fit: \".concat(t.fit || \"cover\", \";\")) : e.stream.video ? t.video.setAttribute(\"style\", \"width: 100%; height: 100%; position: absolute; object-fit: \".concat(t.fit || \"cover\", \";\")) : e.stream.screen ? t.video.setAttribute(\"style\", \"width: 100%; height: 100%; position: absolute; object-fit: \".concat(t.fit || \"contain\")) : t.video.setAttribute(\"style\", \"width: 100%; height: 100%; position: absolute; display: none; object-fit: \".concat(t.fit || \"cover\"));\n      var n = {\n        autoplay: !0,\n        muted: !!e.stream.local || !(!o.isSafari() && \"iOS\" !== o.getBrowserOS()) && \"video_element_muted\",\n        playsinline: !0,\n        controls: !1,\n        volume: null\n      },\n          r = i()({}, n, e.options);\n      !0 !== r.muted || r.volume || (r.volume = 0), t.video.setAttribute(\"autoplay\", \"\"), t.video.setAttribute(\"muted\", \"\"), t.video.muted = !0, t.video.autoplay = !0, r.playsinline && t.video.setAttribute(\"playsinline\", \"\"), r.controls && t.video.setAttribute(\"controls\", \"\"), r.contains && (t.video.controls = !0), Number.isFinite(r.volume) && (t.video.volume = r.volume), t.audio = document.createElement(\"audio\"), t.audio.setAttribute(\"id\", \"audio\" + t.id), !0 === r.muted && t.audio.setAttribute(\"muted\", \"\"), !0 === r.muted && (t.audio.muted = !0), r.playsinline && t.audio.setAttribute(\"playsinline\", \"\"), Number.isFinite(r.volume) && (t.audio.volume = r.volume), void 0 !== t.elementID ? (document.getElementById(t.elementID).appendChild(t.div), t.container = document.getElementById(t.elementID)) : (document.body.appendChild(t.div), t.container = document.body), t.parentNode = t.div.parentNode;\n      var a = {\n        video: {\n          playerId: t.playerId,\n          stateId: 0,\n          playDeferTimeout: null,\n          error: !1,\n          status: \"init\",\n          reason: null,\n          updatedAt: Date.now()\n        },\n        audio: {\n          playerId: t.playerId,\n          stateId: 0,\n          playDeferTimeout: null,\n          error: !1,\n          status: \"init\",\n          reason: null,\n          updatedAt: Date.now()\n        }\n      };\n\n      t.mediaElemExists = function (e) {\n        for (var t = e, n = 0; n < Object(l.getParameter)(\"MEDIA_ELEMENT_EXISTS_DEPTH\") && t; n++) {\n          t = t.parentNode;\n        }\n\n        return !!t;\n      };\n\n      var g = function g(e) {\n        return t.mediaElemExists(e) ? e.paused ? \"paused\" : \"play\" : \"aborted\";\n      },\n          m = function m(e, t, n) {\n        var r = g(e),\n            i = !0;\n        return \"paused\" === r ? (\"audio\" === t && !0 === n.muted && (i = !1), n.autoplay || (i = !1)) : \"play\" === r ? \"video\" === t ? i = !1 : !0 === n.muted ? e.muted && (i = !1) : e.muted || (i = !1) : \"aborted\" === r && (i = !1), i;\n      },\n          h = function h(n) {\n        var i,\n            o = this;\n\n        if (o === t.video ? i = \"video\" : o === t.audio && (i = \"audio\"), i) {\n          if (n.type || c.default.error(\"[\".concat(t.id, \"] Unexpected evt\"), n), \"video\" === i && o.muted && o.paused) return c.default.debug(\"[\".concat(t.id, \"] auto resume video element\")), void o.play();\n          var s = g(o);\n          clearTimeout(a[i].playDeferTimeout), a[i].playDeferTimeout = setTimeout(function () {\n            a[i].playDeferTimeout = null;\n            var d = a[i],\n                u = g(o);\n\n            if (s === u) {\n              var l = {\n                playerId: t.playerId,\n                stateId: d.stateId + 1,\n                playDeferTimeout: null,\n                error: m(o, i, r),\n                status: g(o),\n                reason: n.type,\n                updatedAt: Date.now()\n              };\n\n              if (d.status !== l.status) {\n                a[i] = l;\n                var p = {\n                  type: \"player-status-change\",\n                  playerId: t.playerId,\n                  mediaType: i,\n                  status: l.status,\n                  reason: l.reason,\n                  isErrorState: l.error,\n                  streamId: t.id\n                };\n                c.default.debug(\"[\".concat(t.id, \"] Media Player Status Change\"), p), e.stream.dispatchEvent(p), f.report.reportApiInvoke(e.stream.sid, {\n                  name: \"Stream.playerStatusChange\",\n                  options: p,\n                  tag: \"tracer\"\n                })();\n              }\n            } else c.default.debug(\"[\".concat(t.id, \"] Status Change after event Triggered.\") + \"Stream \".concat(t.id, \" PlayerId \").concat(t.playerId, \" mediaType \").concat(i, \" Status \").concat(s, \"=>\").concat(u));\n          }, Object(l.getParameter)(\"PLAYER_STATE_DEFER\"));\n        } else c.default.error(\"[\".concat(t.id, \"] Unknown media element\"), o);\n      };\n\n      t.video.addEventListener(\"playing\", function (e) {\n        !function e() {\n          t.video.videoWidth * t.video.videoHeight > 4 ? c.default.debug(\"[\" + t.id + \"] video dimensions:\", t.video.videoWidth, t.video.videoHeight) : setTimeout(e, 50);\n        }();\n      });\n      var v = 0,\n          E = 0,\n          S = 0;\n      t.freezeCheckInterval = setInterval(function () {\n        Date.now() - t.lastTimeupdateTime > 500 && t.peerVideoReady ? (t.isFreeze = !0, t.freezeCount += 1) : t.isFreeze = !1;\n      }, 500), t.video.addEventListener(\"playing\", h), t.video.addEventListener(\"canplay\", h), t.video.addEventListener(\"abort\", h), t.video.addEventListener(\"onerror\", h), t.video.addEventListener(\"suspend\", h), t.video.addEventListener(\"stalled\", h), t.video.addEventListener(\"pause\", h), t.audio.addEventListener(\"playing\", h), t.audio.addEventListener(\"canplay\", h), t.audio.addEventListener(\"abort\", h), t.audio.addEventListener(\"onerror\", h), t.audio.addEventListener(\"suspend\", h), t.audio.addEventListener(\"stalled\", h), t.audio.addEventListener(\"pause\", h);\n      var _ = t.audio,\n          y = \"audio\";\n      if (e.stream.hasVideo() || e.stream.hasScreen()) t.div.appendChild(t.video), t.div.appendChild(t.audio), o.isEdge() ? t.video.srcObject = e.stream.stream : (Object(d.attachMediaStream)(t.video, e.stream.stream), Object(d.attachMediaStream)(t.audio, e.stream.stream)), t.video.addEventListener(\"timeupdate\", function () {\n        var e = Date.now();\n        if ((v += 1) < 10) t.lastTimeupdateTime = e;else for (e - t.lastTimeupdateTime > 500 && (t.peerVideoReady ? E += e - t.lastTimeupdateTime : t.peerVideoReady = !0), S += e - t.lastTimeupdateTime, t.lastTimeupdateTime = e; S >= 6e3;) {\n          S -= 6e3, t.freezeTimeCounterList.push(Math.min(6e3, E)), E -= 6e3, E = Math.max(E, 0);\n        }\n      });else {\n        !1 !== r.muted && \"video_element_muted\" !== r.muted || (t.video.removeAttribute(\"muted\"), t.video.muted = !1), t.video.removeAttribute(\"autoplay\"), t.video.autoplay = !1, t.div.appendChild(t.video), _ = t.video, y = \"video\";\n        var R = a.audio,\n            T = {\n          playerId: t.playerId,\n          stateId: R.stateId + 1,\n          playDeferTimeout: null,\n          error: !1,\n          status: \"aborted\",\n          reason: \"audioonly\",\n          updatedAt: Date.now()\n        };\n        a.audio = T;\n        var I = {\n          type: \"player-status-change\",\n          playerId: t.playerId,\n          mediaType: \"audio\",\n          status: T.status,\n          reason: T.reason,\n          isErrorState: T.error,\n          streamId: t.id\n        };\n\n        if (c.default.debug(\"[\".concat(t.id, \"] Media Player Status Change\"), I), Promise.resolve().then(function () {\n          return e.stream.dispatchEvent(I);\n        }), f.report.reportApiInvoke(e.stream.sid, {\n          name: \"Stream.playerStatusChange\",\n          options: I,\n          tag: \"tracer\"\n        })(), window.MediaStream && (o.isSafari() || \"iOS\" === o.getBrowserOS())) {\n          var b = new MediaStream(e.stream.stream.getAudioTracks());\n          Object(d.setSrcObject)(t.video, b);\n        } else Object(d.setSrcObject)(t.video, e.stream.stream);\n      }\n\n      if (r.autoplay && _) {\n        var A = _.play();\n\n        A && A.catch && A.catch(function (n) {\n          if (!t.destroyed && _) {\n            var i = a[y],\n                o = {\n              playerId: t.playerId,\n              stateId: i.stateId + 1,\n              playDeferTimeout: null,\n              error: m(_, y, r),\n              status: g(_),\n              reason: \"error\",\n              updatedAt: Date.now()\n            };\n\n            if (i.status !== o.status) {\n              c.default.debug(\"[\".concat(t.id, \"] Player \").concat(t.playerId, \" Status Changed Detected by promise error: \").concat(i.status, \"=>\").concat(o.status), n), a[y] = o;\n              var s = {\n                type: \"player-status-change\",\n                playerId: t.playerId,\n                mediaType: y,\n                status: o.status,\n                reason: o.reason,\n                isErrorState: o.error,\n                streamId: t.id\n              };\n              c.default.debug(\"[\".concat(t.id, \"] Media Player Status Change\"), s), e.stream.dispatchEvent(s), f.report.reportApiInvoke(e.stream.sid, {\n                name: \"Stream.playerStatusChange\",\n                options: s,\n                tag: \"tracer\"\n              })();\n            }\n          }\n        });\n      }\n\n      return t.setAudioVolume = function (e) {\n        var n = parseInt(e) / 100;\n        isFinite(n) && (n < 0 ? n = 0 : n > 1 && (n = 1), t.video && (t.video.volume = n), t.audio && (t.audio.volume = n));\n      }, t;\n    },\n        m = n(23),\n        h = n(10),\n        v = n(6),\n        E = n(19),\n        S = n(3),\n        _ = n(25);\n\n    var y = n(16),\n        R = n(11),\n        T = n.n(R),\n        I = function I(e) {\n      Object(S.checkValidString)(e, \"profileName\"), -1 === (e = e.toLowerCase()).indexOf(\"_\") && (e += \"_1\"), Object(S.checkValidEnum)(e, \"profileName\", Object.keys(l.SUPPORT_RESOLUTION_LIST));\n      var t = l.SUPPORT_RESOLUTION_LIST[e];\n      t || (e = Object(l.getParameter)(\"DEFAULT_PROFILE\"), t = l.SUPPORT_RESOLUTION_LIST[e]);\n      var n = {\n        profileName: e,\n        video: {\n          width: t[0],\n          height: t[1]\n        },\n        attributes: {\n          resolution: \"\".concat(t[0], \"x\").concat(t[1]),\n          minFrameRate: t[2],\n          maxFrameRate: t[3],\n          minVideoBW: t[4],\n          maxVideoBW: t[5]\n        }\n      };\n      return t[2] && (n.video.frameRate = t[2]), t[6] && t[7] && (n.screen = {\n        width: t[0],\n        height: t[1],\n        frameRate: {\n          min: t[6],\n          max: t[7]\n        }\n      }), n;\n    },\n        b = function b(e) {\n      return Object.keys(l.SUPPORT_RESOLUTION_LIST).filter(function (t) {\n        var n = l.SUPPORT_RESOLUTION_LIST[t],\n            r = [\"width\", \"height\", \"frameRate\"];\n\n        for (var i in r) {\n          var o = r[i];\n\n          if (e[o] && n[i]) {\n            if (\"number\" == typeof e[o].max && e[o].max < n[i]) return !1;\n            if (\"number\" == typeof e[o].min && e[o].min > n[i]) return !1;\n          }\n        }\n\n        return !0;\n      }).reverse();\n    },\n        A = function A(e) {\n      var t = l.AUDIO_PROFILE_SETTINGS[e] || l.AUDIO_PROFILE_SETTINGS.default;\n      return {\n        highQuality: t[0],\n        stereo: t[1],\n        speech: t[2],\n        lowQuality: t[3]\n      };\n    };\n\n    var O = function O(e) {\n      var t = Object(a.b)();\n      if (t.params = i()({}, e), t.stream = e.stream, t.url = e.url, t.onClose = void 0, t.local = !1, t.videoSource = e.videoSource, t.audioSource = e.audioSource, e.video = !(!e.videoSource && !e.video), t.video = e.video, e.audio = !(!e.audioSource && !e.audio), t.audio = e.audio, t.screen = !!e.screen, t.screenAudio = !!e.screenAudio, t.screenAttributes = {\n        width: 1920,\n        height: 1080,\n        maxFr: 5,\n        minFr: 1\n      }, t.videoSize = e.videoSize, t.player = void 0, t.audioLevelHelper = null, e.attributes = e.attributes || {}, t.attributes = e.attributes, t.microphoneId = e.microphoneId, t.cameraId = e.cameraId, t.facingMode = e.facingMode, t.inSwitchDevice = !1, t.userMuteVideo = !1, t.userMuteAudio = !1, t.peerMuteVideo = !1, t.peerMuteAudio = !1, t.lowStream = null, t.videoWidth = 0, t.videoHeight = 0, t.streamId = e.streamID, t.userId = null, t.uintId = e.uintUID || null, t.mirror = !1 !== e.mirror, t.DTX = e.audioProcessing && e.audioProcessing.DTX, t.audioProcessing = e.audioProcessing, t.optimizationMode = e.optimizationMode, t.highQuality = !1, t.stereo = !1, t.speech = !1, t.screen || delete t.screen, !(void 0 === t.videoSize || t.videoSize instanceof Array && 4 === t.videoSize.length)) throw Error(\"Invalid Video Size\");\n\n      function n() {\n        var e = {};\n        t.getVideoTrack() === this ? (c.default.debug(\"Video Track Ended\"), e.type = \"videoTrackEnded\", e.track = this) : t.getAudioTrack() === this ? (c.default.debug(\"Audio Track Ended\"), e.type = \"audioTrackEnded\", e.track = this) : c.default.debug(\"Detached Track ended\", this.kind, this.label, this), e.type && t.dispatchEvent(e);\n      }\n\n      return t.videoSize = [640, 480, 640, 480], void 0 !== e.local && !0 !== e.local || (t.local = !0), t.initialized = !t.local, t._streamInitID = null, function (e) {\n        e.audioMixing = {\n          audioContextInited: !1,\n          defaultVolume: 100,\n          inEarMonitoring: \"FILE\",\n          sounds: {},\n          states: {\n            IDLE: \"IDLE\",\n            STARTING: \"STARTING\",\n            BUSY: \"BUSY\",\n            PAUSED: \"PAUSED\"\n          },\n          inEarMonitoringModes: {\n            NONE: \"NONE\",\n            FILE: \"FILE\",\n            MICROPHONE: \"MOCROPHONE\",\n            ALL: \"ALL\"\n          },\n          ctx: null,\n          mediaStreamSource: null,\n          mediaStreamDest: null,\n          buffer: {}\n        }, e._initSoundIfNotExists = function (t, n) {\n          e.audioMixing.sounds[t] || (e.audioMixing.sounds[t] = {\n            soundId: t,\n            state: \"IDLE\",\n            muted: e.userMuteAudio,\n            filePath: n,\n            volume: e.audioMixing.defaultVolume,\n            startAt: null,\n            startOffset: null,\n            pauseAt: null,\n            pauseOffset: null,\n            resumeAt: null,\n            resumeOffset: null,\n            stopAt: null,\n            options: null,\n            source: null\n          });\n        }, e._initSoundIfNotExists(-1), e.loadAudioBuffer = function (t, n, r) {\n          var i = f.report.reportApiInvoke(e.sid, {\n            callback: r,\n            name: \"Stream.loadAudioBuffer\",\n            options: arguments,\n            tag: \"tracer\"\n          });\n          Object(S.checkValidString)(n, \"url\", 1, 1024, !1), Object(S.checkValidString)(t, \"id\", 1, 1024, !1);\n\n          var o = function o(t) {\n            c.default.error(\"[\".concat(e.streamId, \"] loadAudioBuffer Failed: \") + t), i(u.default.LOAD_AUDIO_FAILED);\n          },\n              a = new XMLHttpRequest();\n\n          a.open(\"GET\", n, !0), a.responseType = \"arraybuffer\", a.onload = function () {\n            if (a.status > 400) o(\"\".concat(a.status, \" \").concat(a.statusText));else {\n              var n = a.response;\n              e.audioMixing.audioContextInited || e._initAudioContext(), e.audioMixing.ctx.decodeAudioData(n, function (n) {\n                e.audioMixing.buffer[t] = n, i(null);\n              }, function (t) {\n                c.default.error(\"[\".concat(e.streamId, \"] decodeAudioData Failed: \"), t), i(t);\n              });\n            }\n          }, a.onerror = function () {\n            return o(\"load error\");\n          }, a.ontimeout = function () {\n            return o(\"timeout\");\n          }, a.send();\n        }, e.createAudioBufferSource = function (t) {\n          var n = f.report.reportApiInvoke(e.sid, {\n            name: \"Stream.createAudioBufferSource\",\n            options: arguments,\n            tag: \"tracer\"\n          });\n\n          if (e.audioMixing.buffer[t.id]) {\n            var r = e.audioMixing.buffer[t.id],\n                i = e.audioMixing.ctx.createBufferSource();\n            i.buffer = r;\n            var a = e.audioMixing.ctx.createGain();\n            if (i.connect(a), a.connect(e.audioMixing.mediaStreamDest), i.gainNode = a, t.loop) i.loop = !0, i.start(0, t.playTime / 1e3);else if (t.cycle > 1) {\n              if (Object(o.isChrome)()) {\n                i.loop = !0;\n                var s = t.cycle * r.duration * 1e3 - (t.playTime || 0);\n                i.start(0, t.playTime / 1e3, s / 1e3);\n              } else c.default.warning(\"[\".concat(e.streamId, \"] Cycle Param is ignored by current browser\")), i.start(0, t.playTime / 1e3);\n            } else i.start(0, t.playTime / 1e3);\n            var d = e.audioMixing.sounds[t.soundId];\n            return d.source = i, e._flushAudioMixingMuteStatus(), i.addEventListener(\"ended\", function () {\n              i === d.source && e.dispatchEvent({\n                type: \"audioSourceEnded\",\n                soundId: t.soundId,\n                source: i,\n                sound: d\n              });\n            }), n(), i;\n          }\n\n          var u = \"AUDIOBUFFER_NOT_FOUND\";\n          return c.default.error(\"[\".concat(e.streamId, \"] \"), u, t.id), n(!1), !1;\n        }, e.on(\"audioSourceEnded\", function (t) {\n          var n = t.source,\n              r = t.sound;\n          r && r.state === e.audioMixing.states.BUSY && !r.pauseAt && (r.state = e.audioMixing.states.IDLE, r.startAt = null, r.startOffset = null, r.resumeAt = null, r.resumeOffset = null, n.gainNode && n.gainNode.disconnect && n.gainNode.disconnect(), n.buffer = null, e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest));\n        }), e.clearAudioBufferSource = function () {\n          e.audioBufferSource.forEach(function (e) {\n            e.stop();\n          });\n        }, e._isSoundExists = function (t) {\n          return !!e.audioMixing.sounds[t.soundId] || (c.default.error(\"SoundId not exists. #\".concat(t.soundId)), !1);\n        }, e._initAudioContext = function () {\n          if (e.audioMixing.audioContextInited) throw new Error(\"Failed to init audio context. Already inited\");\n          if (!e.stream) throw new Error(\"Failed to init audio context. Local Stream not initialized\");\n          e.audioMixing.ctx = Object(_.a)(), e.audioMixing.mediaStreamSource = e.audioMixing.ctx.createMediaStreamSource(e.stream), e.audioMixing.mediaStreamDest = e.audioMixing.ctx.createMediaStreamDestination(), e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest);\n          var t = e.stream.getVideoTracks()[0];\n\n          if (t && e.audioMixing.mediaStreamDest.stream.addTrack(t), e._originStream = e.stream, e._isAudioMuted() ? (e._unmuteAudio(), e.stream = e.audioMixing.mediaStreamDest.stream, e._muteAudio()) : e.stream = e.audioMixing.mediaStreamDest.stream, e.audioLevelHelper = null, e.pc && e.pc.peerConnection && e.pc.peerConnection) {\n            var n = (e.pc.peerConnection && e.pc.peerConnection.getSenders()).find(function (e) {\n              return e && e.track && \"audio\" == e.track.kind;\n            }),\n                r = e.audioMixing.mediaStreamDest.stream.getAudioTracks()[0];\n            n && n.replaceTrack && r && n.replaceTrack(r);\n          }\n\n          e.audioMixing.audioContextInited = !0;\n        }, e._cleanupAudioMixing = function () {\n          if (e.audioMixing.audioContextInited) {\n            for (var t in e.audioMixing.sounds) {\n              var n = e.audioMixing.sounds[t];\n              n.state !== e.audioMixing.states.BUSY && n.state !== e.audioMixing.states.PAUSED || e._stopOneEffect({\n                soundId: t\n              });\n            }\n\n            e.audioLevelHelper = null, e.audioMixing.audioContextInited = !1;\n          }\n        }, e._reloadInEarMonitoringMode = function (t) {\n          if (t) {\n            if (!e.audioMixing.inEarMonitoringModes[t]) return c.default.error(\"[\".concat(e.streamId, \"] Invalid InEarMonitoringMode \").concat(t));\n            e.audioMixing.inEarMonitoring = t;\n          }\n\n          switch (e.audioMixing.audioContextInited || e._initAudioContext(), e.audioMixing.inEarMonitoring) {\n            case e.audioMixing.inEarMonitoringModes.FILE:\n              e.audioMixing.mediaStreamSource.connectedToDestination && (e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.ctx.destination), e.audioMixing.mediaStreamSource.connectedToDestination = !1);\n\n            case e.audioMixing.inEarMonitoringModes.ALL:\n              for (var n in e.audioMixing.sounds) {\n                var r = e.audioMixing.sounds[n];\n                r && r.source && !r.source.connectedToDestination && (r.source.gainNode.connect(e.audioMixing.ctx.destination), r.source.connectedToDestination = !0);\n              }\n\n          }\n\n          switch (e.audioMixing.inEarMonitoring) {\n            case e.audioMixing.inEarMonitoringModes.MICROPHONE:\n              e.audioMixing.source.forEach(function (t) {\n                t.connectedToDestination && (t.gainNode.disconnect(e.audioMixing.ctx.destination), t.connectedToDestination = !1);\n              });\n\n            case e.audioMixing.inEarMonitoringModes.ALL:\n              e.audioMixing.mediaStreamSource.connectedToDestination || (e.audioMixing.mediaStreamSource.connect(e.audioMixing.ctx.destination), e.audioMixing.mediaStreamSource.connectedToDestination = !0);\n          }\n        }, e._startAudioMixingBufferSource = function (t) {\n          e.audioMixing.audioContextInited || e._initAudioContext();\n          var n = {\n            soundId: t.soundId,\n            id: t.filePath,\n            loop: t.loop,\n            cycle: t.cycle,\n            playTime: t.playTime || 0\n          },\n              r = t.replace,\n              i = e.createAudioBufferSource(n);\n          return i.sound = e.audioMixing.sounds[t.soundId], i ? (i.addEventListener(\"ended\", e._audioMixingFinishedListener, {\n            once: !0\n          }), e._reloadInEarMonitoringMode(), r && e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.mediaStreamDest), i) : null;\n        }, e._stopAudioMixingBufferSource = function (t) {\n          var n = e.audioMixing.sounds[t.soundId].source;\n          return n ? (n.removeEventListener(\"ended\", e._audioMixingFinishedListener), e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest), n.stop(), n.gainNode && n.gainNode.disconnect && n.gainNode.disconnect(), n.buffer = null, n) : null;\n        }, e._flushAudioMixingMuteStatus = function (t) {\n          for (var n in e.audioMixing.sounds) {\n            var r = e.audioMixing.sounds[n];\n            r && (void 0 !== t && (r.muted = !!t), r.source && (r.muted ? r.source.gainNode.gain.value = 0 : r.source.gainNode.gain.value = r.volume / 100));\n          }\n        }, e._handleAudioMixingInvalidStateError = function (t, n, r) {\n          var i = e.audioMixing.sounds[n.soundId],\n              o = -1 === n.soundId ? \"INVALID_AUDIO_MIXING_STATE\" : \"INVALID_PLAY_EFFECT_STATE\";\n          c.default.error(\"[\".concat(e.streamId, \"] Cannot \").concat(t, \": \").concat(o, \", state is \").concat(i.state)), r && r(o);\n        }, e._handleAudioMixingNoSourceError = function (t, n, r) {\n          e.audioMixing.sounds[n.soundId].state = e.audioMixing.states.IDLE;\n          var i = -1 === n.soundId ? \"NO_AUDIO_MIXING_SOURCE\" : \"NO_EFFECT_SOURCE\";\n          c.default.error(\"[\".concat(e.streamId, \"] Cannot \").concat(t, \": \").concat(i)), r && r(i);\n        }, e._getOneEffectStates = function (t) {\n          var n = e.audioMixing.sounds[t.soundId];\n          return function () {\n            return n ? {\n              state: n.state,\n              startAt: n.startAt,\n              resumeAt: n.resumeAt,\n              pauseOffset: n.pauseOffset,\n              pauseAt: n.pauseAt,\n              resumeOffset: n.resumeOffset,\n              stopAt: n.stopAt,\n              duration: e._getOneEffectDuration(t),\n              position: e._getOneEffectCurrentPosition(t)\n            } : {};\n          };\n        }, e._audioMixingFinishedListener = function () {\n          var t = this.sound;\n          t.state === e.audioMixing.states.IDLE && e.audioMixing.buffer[t.options.filePath] && !t.options.cacheResource && (c.default.debug(\"Recycled buffer \".concat(t.options.filePath)), delete e.audioMixing.buffer[t.options.filePath]), -1 === t.soundId && e.dispatchEvent({\n            type: \"audioMixingFinished\"\n          });\n        }, e._playOneEffect = function (t, n) {\n          Object(S.checkValidObject)(t, \"options\");\n          var r = t.soundId,\n              i = (t.filePath, t.cacheResource);\n          t.cycle, t.loop, t.playTime, t.replace;\n\n          if (Object(o.isSafari)() && Object(o.getBrowserVersion)() < 12) {\n            var a = \"BROWSER_NOT_SUPPORT\";\n            return c.default.error(\"[\".concat(e.streamId, \"] Cannot _playOneEffect: \"), a), n(a);\n          }\n\n          e.audioMixing.audioContextInited || e._initAudioContext(), e._initSoundIfNotExists(r);\n          var s = e.audioMixing.sounds[r];\n\n          if (s.state === e.audioMixing.states.IDLE) {\n            if (void 0 !== t.cycle && !t.cycle > 0) {\n              a = \"Invalid Parmeter cycle: \" + t.cycle;\n              return c.default.error(\"[\".concat(e.streamId, \"] \").concat(r), a), n(a);\n            }\n\n            if (Object(S.isEmpty)(i) && (t.cacheResource = !0), s.state = e.audioMixing.states.STARTING, s.options = t, e.audioMixing.buffer[t.filePath]) {\n              var d = e._startAudioMixingBufferSource(t);\n\n              if (d) return s.source = d, s.startAt = Date.now(), s.resumeAt = null, s.pauseOffset = null, s.pauseAt = null, s.resumeOffset = null, s.stopAt = null, s.startOffset = t.playTime || 0, s.state = e.audioMixing.states.BUSY, e._flushAudioMixingMuteStatus(), n(null);\n              s.state = e.audioMixing.states.IDLE;\n              var u = \"CREATE_BUFFERSOURCE_FAILED\";\n              if (n) return n(u);\n              c.default.error(\"[\".concat(e.streamId, \"] \"), u);\n            } else e.loadAudioBuffer(t.filePath, t.filePath, function (r) {\n              if (r) s.state = e.audioMixing.states.IDLE, n ? n(r) : c.default.error(\"[\".concat(e.streamId, \"] \"), r);else {\n                var i = e._startAudioMixingBufferSource(t);\n\n                if (i) return s.source = i, s.startAt = Date.now(), s.resumeAt = null, s.pauseOffset = null, s.pauseAt = null, s.resumeOffset = null, s.stopAt = null, s.startOffset = t.playTime || 0, s.state = e.audioMixing.states.BUSY, e._flushAudioMixingMuteStatus(), n(null);\n                s.state = e.audioMixing.states.IDLE;\n                r = \"CREATE_BUFFERSOURCE_FAILED\";\n                if (n) return n(r);\n                c.default.error(\"[\".concat(e.streamId, \"] \"), r);\n              }\n            });\n          } else e._handleAudioMixingInvalidStateError(\"_playEffect\", t, n);\n        }, e._stopOneEffect = function (t, n) {\n          var r = e.audioMixing.sounds[t.soundId];\n          return e._isSoundExists(t) ? r.state === e.audioMixing.states.BUSY || r.state === e.audioMixing.states.PAUSED ? (e._stopAudioMixingBufferSource(t), r.stopAt = Date.now(), r.state = e.audioMixing.states.IDLE, e.audioMixing.buffer[r.options.filePath] && !r.options.cacheResource && (c.default.debug(\"Recycled buffer \".concat(r.options.filePath)), delete e.audioMixing.buffer[r.options.filePath]), void (n && n(null))) : void e._handleAudioMixingInvalidStateError(\"_stopOneEffect\", t, n) : n(\"SOUND_NOT_EXISTS\");\n        }, e._pauseOneEffect = function (t, n) {\n          var r = e.audioMixing.sounds[t.soundId];\n          if (r.state === e.audioMixing.states.BUSY) return e._stopAudioMixingBufferSource(t) ? (r.pauseAt = Date.now(), r.state = e.audioMixing.states.PAUSED, r.resumeAt ? r.pauseOffset = r.pauseAt - r.resumeAt + r.resumeOffset : r.pauseOffset = r.pauseAt - r.startAt + r.startOffset, n && n(null)) : void e._handleAudioMixingNoSourceError(\"_pauseOneEffect\", t, n);\n\n          e._handleAudioMixingInvalidStateError(\"_pauseOneEffect\", t, n);\n        }, e._resumeOneEffect = function (t, n) {\n          var r = e.audioMixing.sounds[t.soundId];\n\n          if (r.state === e.audioMixing.states.PAUSED) {\n            var i = {\n              soundId: t.soundId,\n              filePath: r.options.filePath,\n              cycle: r.options.cycle,\n              loop: r.options.loop,\n              playTime: r.pauseOffset,\n              replace: r.options.replace\n            },\n                o = e._startAudioMixingBufferSource(i);\n\n            if (!o) {\n              var a = \"CREATE_BUFFERSOURCE_FAILED\";\n              return n(a), void c.default.error(\"[\".concat(e.streamId, \"] \"), a);\n            }\n\n            r.source = o, r.resumeAt = Date.now(), r.resumeOffset = r.pauseOffset, r.state = e.audioMixing.states.BUSY, r.pauseAt = null, r.pauseOffset = null, n(null);\n          } else e._handleAudioMixingInvalidStateError(\"_resumeOneEffect\", t, n);\n        }, e._getOneEffectDuration = function (t) {\n          var n = e.audioMixing.sounds[t.soundId];\n          return n.options && n.options.filePath && e.audioMixing.buffer[n.options.filePath] ? 1e3 * e.audioMixing.buffer[n.options.filePath].duration : null;\n        }, e._getOneEffectCurrentPosition = function (t, n) {\n          var r = e.audioMixing.sounds[t.soundId];\n          return r.state === e.audioMixing.states.PAUSED ? r.pauseOffset % e._getOneEffectDuration(t) : r.state === e.audioMixing.states.BUSY ? r.resumeAt ? (Date.now() - r.resumeAt + r.resumeOffset) % e._getOneEffectDuration(t) : (Date.now() - r.startAt + r.startOffset) % e._getOneEffectDuration(t) : void (n && e._handleAudioMixingInvalidStateError(\"_getOneEffectCurrentPosition\", t));\n        }, e._setOneEffectPosition = function (t, n, r) {\n          var i = e.audioMixing.sounds[t.soundId];\n\n          if (i.state === e.audioMixing.states.BUSY) {\n            if (!e._stopAudioMixingBufferSource(t)) return void e._handleAudioMixingNoSourceError(\"_setOneEffectPosition\", t, r);\n\n            var o = {\n              soundId: t.soundId,\n              filePath: i.options.filePath,\n              loop: i.options.loop,\n              cycle: i.options.cycle,\n              playTime: n\n            },\n                a = e._startAudioMixingBufferSource(o);\n\n            if (!a) {\n              var s = \"CREATE_BUFFERSOURCE_FAILED\";\n              return r && r(s), void c.default.error(\"[\".concat(e.streamId, \"] \"), s);\n            }\n\n            i.source = a, i.startAt = Date.now(), i.startOffset = n, i.resumeAt = null, i.resumeOffset = null, i.pauseOffset = null, i.pauseAt = null;\n          } else {\n            if (i.state !== e.audioMixing.states.PAUSED) return void e._handleAudioMixingInvalidStateError(\"_setOneEffectPosition\", t, r);\n            i.pauseOffset = n;\n          }\n\n          r && r(null);\n        }, e.startAudioMixing = function (t, n) {\n          var r = f.report.reportApiInvoke(e.sid, {\n            callback: function callback(t) {\n              if (t) return n && n(t);\n              e.dispatchEvent({\n                type: \"audioMixingPlayed\"\n              }), n && n(null);\n            },\n            getStates: e._getOneEffectStates({\n              soundId: -1\n            }),\n            name: \"Stream.startAudioMixing\",\n            options: t\n          });\n          Object(S.checkValidObject)(t, \"options\");\n          var o = t.filePath,\n              a = t.cacheResource,\n              s = t.cycle,\n              c = t.loop,\n              d = t.playTime,\n              u = t.replace;\n          Object(S.checkValidString)(o, \"filePath\", 1, Object(l.getParameter)(\"FILEPATH_LENMAX\"), !1), Object(S.checkValidNumber)(d, \"playTime\", 0, 1e8), !Object(S.isEmpty)(s) && Object(S.checkValidNumber)(s, \"cycle\"), !Object(S.isEmpty)(c) && Object(S.checkValidBoolean)(c, \"loop\"), !Object(S.isEmpty)(u) && Object(S.checkValidBoolean)(u, \"replace\"), !Object(S.isEmpty)(a) && Object(S.checkValidBoolean)(a, \"cacheResource\");\n          var p = i()({\n            soundId: -1\n          }, t);\n\n          e._playOneEffect(p, r);\n        }, e.stopAudioMixing = function (t) {\n          var n = f.report.reportApiInvoke(e.sid, {\n            callback: t,\n            getStates: e._getOneEffectStates({\n              soundId: -1\n            }),\n            name: \"Stream.stopAudioMixing\"\n          });\n\n          e._stopOneEffect({\n            soundId: -1\n          }, n);\n        }, e.pauseAudioMixing = function (t) {\n          var n = f.report.reportApiInvoke(e.sid, {\n            callback: t,\n            getStates: e._getOneEffectStates({\n              soundId: -1\n            }),\n            name: \"Stream.pauseAudioMixing\"\n          });\n          return e._pauseOneEffect({\n            soundId: -1\n          }, n);\n        }, e.resumeAudioMixing = function (t) {\n          var n = f.report.reportApiInvoke(e.sid, {\n            callback: function callback(n, r) {\n              if (n) return t && t(n);\n              e.dispatchEvent({\n                type: \"audioMixingPlayed\"\n              }), t && t(null);\n            },\n            getStates: e._getOneEffectStates({\n              soundId: -1\n            }),\n            name: \"Stream.resumeAudioMixing\"\n          });\n\n          e._resumeOneEffect({\n            soundId: -1\n          }, n);\n        }, e.adjustAudioMixingVolume = function (t) {\n          var n = f.report.reportApiInvoke(e.sid, {\n            getStates: e._getOneEffectStates({\n              soundId: -1\n            }),\n            name: \"Stream.adjustAudioMixingVolume\",\n            options: arguments,\n            tag: \"tracer\"\n          });\n          Object(S.checkValidNumber)(t, \"volume\", 0, 100), e.audioMixing.sounds[-1].volume = t, e._flushAudioMixingMuteStatus(), n();\n        }, e.getAudioMixingDuration = function () {\n          var t = f.report.reportApiInvoke(e.sid, {\n            getStates: e._getOneEffectStates({\n              soundId: -1\n            }),\n            name: \"Stream.getAudioMixingDuration\"\n          }),\n              n = e._getOneEffectDuration({\n            soundId: -1\n          });\n\n          return t(null, n), n;\n        }, e.getAudioMixingCurrentPosition = function () {\n          var t = f.report.reportApiInvoke(e.sid, {\n            getStates: e._getOneEffectStates({\n              soundId: -1\n            }),\n            name: \"Stream.getAudioMixingCurrentPosition\"\n          }),\n              n = e._getOneEffectCurrentPosition({\n            soundId: -1\n          }, !0);\n\n          return t(null, n), n;\n        }, e.setAudioMixingPosition = function (t, n) {\n          var r = f.report.reportApiInvoke(e.sid, {\n            callback: n,\n            options: arguments,\n            tag: \"tracer\",\n            getStates: e._getOneEffectStates({\n              soundId: -1\n            }),\n            name: \"Stream.setAudioMixingPosition\"\n          });\n          Object(S.checkValidNumber)(t, \"position\", 0, 1e8), e._setOneEffectPosition({\n            soundId: -1\n          }, t, r);\n        }, e.playEffect = function (t, n) {\n          var r = f.report.reportApiInvoke(e.sid, {\n            callback: function callback(t) {\n              if (t) return n && n(t);\n              e.dispatchEvent({\n                type: \"effectPlayed\"\n              }), n && n(null);\n            },\n            name: \"Stream.playEffect\",\n            options: t\n          });\n          Object(S.checkValidObject)(t, \"options\");\n          var i = t.soundId,\n              o = t.filePath,\n              a = t.cycle;\n          Object(S.checkValidNumber)(i, \"soundId\", 1, 1e4), Object(S.checkValidString)(o, \"filePath\", 0, Object(l.getParameter)(\"FILEPATH_LENMAX\"), !1), !Object(S.isEmpty)(a) && Object(S.checkValidNumber)(a, \"cycle\"), e._playOneEffect(t, r);\n        }, e.stopEffect = function (t, n) {\n          var r = f.report.reportApiInvoke(e.sid, {\n            callback: n,\n            getStates: e._getOneEffectStates({\n              soundId: t\n            }),\n            name: \"Stream.stopEffect\"\n          });\n          Object(S.checkValidNumber)(t, \"soundId\", 1, 1e4), e._stopOneEffect({\n            soundId: t\n          }, r);\n        }, e.stopAllEffects = function (t) {\n          var n = f.report.reportApiInvoke(e.sid, {\n            callback: t,\n            name: \"Stream.stopAllEffect\"\n          }),\n              r = !1,\n              i = 0,\n              o = 0,\n              a = function a(e) {\n            r || (e ? (n(e), r = !0) : i += 1, i === o && (n(null), r = !0));\n          };\n\n          for (var s in e.audioMixing.sounds) {\n            var c = e.audioMixing.sounds[s];\n            -1 !== c.soundId && (c.state !== e.audioMixing.states.BUSY && c.state !== e.audioMixing.states.PAUSED || (o++, e._stopOneEffect({\n              soundId: s\n            }, a)));\n          }\n\n          o || n(null);\n        }, e.preloadEffect = function (t, n, r) {\n          var i = f.report.reportApiInvoke(e.sid, {\n            callback: r,\n            options: arguments,\n            tag: \"tracer\",\n            name: \"Stream.preloadEffect\"\n          });\n          Object(S.checkValidNumber)(t, \"soundId\", 1, 1e4), Object(S.checkValidString)(n, \"filePath\", 1, Object(l.getParameter)(\"FILEPATH_LENMAX\"), !1), e._initSoundIfNotExists(t, n), e.audioMixing.buffer[n] ? i(null) : e.loadAudioBuffer(n, n, i);\n        }, e.unloadEffect = function (t, n) {\n          var r = f.report.reportApiInvoke(e.sid, {\n            callback: n,\n            options: arguments,\n            tag: \"tracer\",\n            name: \"Stream.unloadEffect\"\n          });\n          Object(S.checkValidNumber)(t, \"soundId\", 1, 1e4);\n          var i = e.audioMixing.sounds[t];\n\n          if (!i) {\n            var o = \"SOUND_NOT_EXISTS\";\n            return c.default.error(o, t), void r(o);\n          }\n\n          var a = i.options ? i.options.filePath : i.filePath;\n          if (a) delete e.audioMixing.buffer[a], delete e.audioMixing.sounds[t], r(null);else {\n            var s = \"SOUND_BUFFER_NOT_FOUND\";\n            c.default.error(s, t), r(s);\n          }\n        }, e.pauseEffect = function (t, n) {\n          var r = f.report.reportApiInvoke(e.sid, {\n            callback: n,\n            options: arguments,\n            tag: \"tracer\",\n            name: \"Stream.pauseEffect\"\n          });\n          return e._pauseOneEffect({\n            soundId: t\n          }, r);\n        }, e.pauseAllEffects = function (t) {\n          var n = f.report.reportApiInvoke(e.sid, {\n            callback: t,\n            name: \"Stream.pauseAllEffects\"\n          }),\n              r = !1,\n              i = 0,\n              o = 0,\n              a = function a(e) {\n            r || (e ? (n(e), r = !0) : i += 1, i === o && (n(null), r = !0));\n          };\n\n          for (var s in e.audioMixing.sounds) {\n            \"-1\" !== s && e.audioMixing.sounds[s].state === e.audioMixing.states.BUSY && (o++, e._pauseOneEffect({\n              soundId: s\n            }, a));\n          }\n\n          o || n(null);\n        }, e.resumeEffect = function (t, n) {\n          Object(S.checkValidNumber)(t, \"soundId\", 1, 1e4);\n          var r = f.report.reportApiInvoke(e.sid, {\n            callback: n,\n            options: arguments,\n            tag: \"tracer\",\n            name: \"Stream.resumeEffect\"\n          });\n          return e._resumeOneEffect({\n            soundId: t\n          }, r);\n        }, e.resumeAllEffects = function (t) {\n          var n = f.report.reportApiInvoke(e.sid, {\n            callback: t,\n            name: \"Stream.resumeAllEffects\"\n          }),\n              r = !1,\n              i = 0,\n              o = 0,\n              a = function a(e) {\n            r || (e ? (n(e), r = !0) : i += 1, i === o && (n(null), r = !0));\n          };\n\n          for (var s in e.audioMixing.sounds) {\n            \"-1\" !== s && e.audioMixing.sounds[s].state === e.audioMixing.states.PAUSED && (o++, e._resumeOneEffect({\n              soundId: s\n            }, a));\n          }\n\n          o || n(null);\n        }, e.getEffectsVolume = function () {\n          var t = [];\n\n          for (var n in e.audioMixing.sounds) {\n            var r = e.audioMixing.sounds[n];\n            r && \"-1\" !== n && t.push({\n              soundId: parseInt(n),\n              volume: r.volume\n            });\n          }\n\n          return t;\n        }, e.setEffectsVolume = function (t, n) {\n          var r = f.report.reportApiInvoke(e.sid, {\n            name: \"Stream.setEffectsVolume\",\n            options: arguments,\n            tag: \"tracer\",\n            callback: n\n          });\n\n          for (var i in Object(S.checkValidNumber)(t, \"volume\", 0, 100), e.audioMixing.defaultVolume = t, e.audioMixing.sounds) {\n            var o = e.audioMixing.sounds[i];\n            \"-1\" !== i && (o.volume = t);\n          }\n\n          e._flushAudioMixingMuteStatus(), r(null);\n        }, e.setVolumeOfEffect = function (t, n, r) {\n          var i = f.report.reportApiInvoke(e.sid, {\n            name: \"Stream.setVolumeOfEffect\",\n            options: arguments,\n            tag: \"tracer\",\n            callback: r\n          });\n          Object(S.checkValidNumber)(t, \"soundId\", 0, 1e4), Object(S.checkValidNumber)(n, \"volume\", 0, 100), e._initSoundIfNotExists(t);\n          var o = e.audioMixing.sounds[t];\n          o.volume = n, e._flushAudioMixingMuteStatus(), i(null);\n        };\n      }(t), y.a.addVideoEffectCapability(t), function (e, t) {\n        e.videoConstraint = {}, t.cameraId && (e.videoConstraint.deviceId = {\n          exact: t.cameraId\n        }), t.facingMode && (e.videoConstraint.facingMode = t.facingMode), e.videoSize && (e.videoConstraint.width = e.videoSize[0], e.videoConstraint.height = e.videoSize[1]), Object(o.isLegacyChrome)() || (e.videoConstraint.frameRate = 30), e.audioConstraint = {}, t.microphoneId && (e.audioConstraint.deviceId = {\n          exact: t.microphoneId\n        }), Object(o.isLegacyChrome)() || e.audioProcessing && (void 0 !== e.audioProcessing.AGC && (Object(o.isFireFox)() ? e.audioConstraint.autoGainControl = e.audioProcessing.AGC : Object(o.isChrome)() && (e.audioConstraint.googAutoGainControl = e.audioProcessing.AGC, e.audioConstraint.googAutoGainControl2 = e.audioProcessing.AGC)), void 0 !== e.audioProcessing.AEC && (e.audioConstraint.echoCancellation = e.audioProcessing.AEC), void 0 !== e.audioProcessing.ANS && (Object(o.isFireFox)() ? e.audioConstraint.noiseSuppression = e.audioProcessing.ANS : Object(o.isChrome)() && (e.audioConstraint.googNoiseSuppression = e.audioProcessing.ANS))), e.screenConstraint = {}, t.sourceId && (e.screenConstraint.sourceId = t.sourceId), t.extensionId && Object(o.isChrome)() ? (e.screenConstraint.extensionId = t.extensionId, e.screenConstraint.mandatory = {\n          chromeMediaSource: \"desktop\",\n          maxWidth: e.screenAttributes.width,\n          maxHeight: e.screenAttributes.height,\n          maxFrameRate: e.screenAttributes.maxFr,\n          minFrameRate: e.screenAttributes.minFr\n        }) : (e.screenConstraint.mediaSource = \"screen\", e.screenConstraint.width = e.screenAttributes.width, e.screenConstraint.height = e.screenAttributes.height, e.screenConstraint.frameRate = {\n          ideal: e.screenAttributes.maxFr,\n          max: e.screenAttributes.maxFr\n        }), t.mediaSource && (e.screenConstraint.mediaSource = t.mediaSource), e.setVideoResolution = function (n) {\n          var r = f.report.reportApiInvoke(e.sid, {\n            name: \"Stream.setVideoResolution\",\n            options: arguments,\n            tag: \"tracer\"\n          });\n\n          if (!(n instanceof Array)) {\n            var o = I(n += \"\");\n            return o && o.video ? (e.videoConstraint = i()(e.videoConstraint, {\n              width: {\n                ideal: o.video.width\n              },\n              height: {\n                ideal: o.video.height\n              }\n            }), t.attributes.resolution = o.attributes.resolution, (a = e.stream && e.stream.getVideoTracks && e.stream.getVideoTracks()[0]) && a.applyConstraints ? (c.default.debug(\"setVideoResolution applyConstraints\", e.videoConstraint), a.applyConstraints(e.videoConstraint).then(r).catch(r)) : r(), !0) : (r(\"NO_PROFILE_\".concat(n)), !1);\n          }\n\n          var a,\n              s = n[0],\n              d = n[1];\n          e.videoConstraint = i()(e.videoConstraint, {\n            width: {\n              ideal: s\n            },\n            height: {\n              ideal: d\n            }\n          }), t.attributes.resolution = \"\".concat(s, \"x\").concat(d), (a = e.stream && e.stream.getVideoTracks && e.stream.getVideoTracks()[0]) && a.applyConstraints ? (c.default.debug(\"setVideoResolution applyConstraints\", e.videoConstraint), y.a.disableVideoEffect(e).then(function () {\n            return a.applyConstraints(e.videoConstraint).then(r).catch(r);\n          }).then(function () {\n            return y.a.restoreVideoEffect(e);\n          })) : r();\n        }, e.setVideoFrameRate = function (t) {\n          var n = f.report.reportApiInvoke(e.sid, {\n            name: \"Stream.setVideoFrameRate\",\n            options: arguments,\n            tag: \"tracer\"\n          });\n          if (Object(o.isFireFox)()) return n(\"FIREFOX_NOT_SUPPORTED\"), !1;\n\n          if (\"object\" === T()(t) && t instanceof Array && t.length > 1) {\n            e.videoConstraint = i()(e.videoConstraint, {\n              frameRate: t[0]\n            }), e.attributes.minFrameRate = t[0], e.attributes.maxFrameRate = t[1];\n            var r = e.stream && e.stream.getVideoTracks && e.stream.getVideoTracks()[0];\n            return r && r.applyConstraints ? (c.default.debug(\"setVideoFrameRate applyConstraints\", e.videoConstraint), r.applyConstraints(e.videoConstraint).then(n).catch(n)) : n(), !0;\n          }\n\n          return n(\"INVALID_PARAM_\".concat(JSON.stringify(t))), !1;\n        }, e.setVideoBitRate = function (n) {\n          var r = f.report.reportApiInvoke(e.sid, {\n            name: \"Stream.setVideoBitRate\",\n            options: arguments,\n            tag: \"tracer\"\n          });\n          return \"object\" === T()(n) && n instanceof Array && n.length > 1 ? (t.attributes.minVideoBW = n[0], t.attributes.maxVideoBW = n[1], e.connectionSpec && (e.connectionSpec.minVideoBW = n[0], e.connectionSpec.maxVideoBW = n[1]), e.pc && e.pc.renegotiate && e.pc.renegotiate(), r(), !0) : (r(\"INVALID_PARAM_\".concat(JSON.stringify(n))), !1);\n        }, e.setScreenBitRate = function (t) {\n          var n = f.report.reportApiInvoke(e.sid, {\n            name: \"Stream.setScreenBitRate\",\n            options: arguments,\n            tag: \"tracer\"\n          });\n          return \"object\" === T()(t) && t instanceof Array && t.length > 1 ? (e.screenAttributes.minVideoBW = t[0], e.screenAttributes.maxVideoBW = t[1], n(), !0) : (n(\"INVALID_PARAM_\".concat(JSON.stringify(t))), !1);\n        }, e.setScreenProfile = function (t) {\n          var n = f.report.reportApiInvoke(e.sid, {\n            name: \"Stream.setScreenProfile\",\n            options: arguments,\n            tag: \"tracer\"\n          });\n          Object(S.checkValidEnum)(t, \"profile\", [\"480p_1\", \"480p_2\", \"720p_1\", \"720p_2\", \"1080p_1\", \"1080p_2\"]);\n          var r = I(t);\n          return r && r.screen ? (e.screenConstraint.mandatory ? (e.screenConstraint.mandatory.maxWidth = r.screen.width, e.screenConstraint.mandatory.maxHeight = r.screen.height, r.screen.frameRate && r.screen.frameRate.min && r.screen.frameRate.max && (e.screenConstraint.mandatory.minFrameRate = r.screen.frameRate.min, e.screenConstraint.mandatory.maxFrameRate = r.screen.frameRate.max)) : e.screenConstraint = i()(e.screenConstraint, r.screen), e.screenAttributes.width = r.screen.width, e.screenAttributes.height = r.screen.height, e.screenAttributes.minFr = r.screen.frameRate.min, e.screenAttributes.maxFr = r.screen.frameRate.max, n(), !0) : (n(\"NO_SCREEN_PROFILE_\".concat(JSON.stringify(t))), !1);\n        }, e.setVideoProfileCustom = function (t) {\n          var n = f.report.reportApiInvoke(e.sid, {\n            name: \"Stream.setVideoProfileCustom\",\n            options: arguments,\n            tag: \"tracer\"\n          });\n          e.setVideoResolution(t[0]), e.setVideoFrameRate([t[1], t[1]]), e.setVideoBitRate([t[2], t[2]]), n();\n        }, e.setVideoProfileCustomPlus = function (n) {\n          var r = f.report.reportApiInvoke(e.sid, {\n            name: \"Stream.setVideoProfileCustom\",\n            options: arguments,\n            tag: \"tracer\"\n          });\n          e.setVideoResolution([n.width, n.height]), t.attributes.resolution = \"\".concat(n.width, \"x\").concat(n.height), e.setVideoFrameRate([n.framerate, n.framerate]), e.setVideoBitRate([n.bitrate, n.bitrate]), r();\n        }, e.setVideoProfile = function (n) {\n          var r = f.report.reportApiInvoke(e.sid, {\n            name: \"Stream.setVideoProfile\",\n            options: arguments,\n            tag: \"tracer\"\n          }),\n              a = I(n);\n\n          if (!a) {\n            var s = \"Invalid Profile \".concat(n);\n            throw new Error(s);\n          }\n\n          if (e.profile = n, a && a.video) {\n            e.profile = a.profileName, e.videoConstraint = i()(e.videoConstraint, a.video), e.connectionSpec && a.attributes.maxVideoBW && (e.connectionSpec.minVideoBW = a.attributes.minVideoBW, e.connectionSpec.maxVideoBW = a.attributes.maxVideoBW), Object(o.isEdge)() && (e.videoConstraint.frameRate.max = 60), Object(o.isFireFox)() && (e.videoConstraint.frameRate = 30), t.attributes = i()(t.attributes, a.attributes), e.pc && e.pc.renegotiate && e.pc.renegotiate();\n            var d = e.stream && e.stream.getVideoTracks && e.stream.getVideoTracks()[0];\n            return d && d.applyConstraints ? (c.default.debug(\"setVideoProfile applyConstraints\", e.videoConstraint), y.a.disableVideoEffect(e).then(function () {\n              return d.applyConstraints(e.videoConstraint);\n            }).then(function () {\n              return y.a.restoreVideoEffect(e);\n            }).then(function (t) {\n              return new Promise(function (n, i) {\n                r(t), setTimeout(function () {\n                  Object(h.vsResHack)(e.stream, function (t, r) {\n                    e.videoWidth = t, e.videoHeight = r, n();\n                  }, function (t) {\n                    c.default.warning(\"[\".concat(e.streamId, \"] vsResHack failed: \"), t), i();\n                  });\n                }, 2500);\n              });\n            }).catch(r)) : r(), !0;\n          }\n\n          return r(\"INVALID_VIDEO_PROFILE_\".concat(n)), !1;\n        }, e.setAudioProfile = function (t) {\n          var n = f.report.reportApiInvoke(e.sid, {\n            name: \"Stream.setAudioProfile\",\n            options: arguments,\n            tag: \"tracer\"\n          });\n          Object(S.checkValidEnum)(t, \"profile\", [\"speech_low_quality\", \"speech_standard\", \"music_standard\", \"standard_stereo\", \"high_quality\", \"high_quality_stereo\"]), e.audioProfile = t;\n          var r = A(t);\n          return e.highQuality = r.highQuality, e.stereo = r.stereo, e.speech = r.speech, e.lowQuality = r.lowQuality, e.stereo && Object(o.isChrome)() && (e.audioConstraint.googAutoGainControl = !1, e.audioConstraint.googAutoGainControl2 = !1, e.audioConstraint.echoCancellation = !1, e.audioConstraint.googNoiseSuppression = !1), n(), !0;\n        }, e.setVideoEncoderConfiguration = function (t) {\n          Object(S.checkValidObject)(t, \"config\");\n          var n = f.report.reportApiInvoke(e.sid, {\n            name: \"Stream.setVideoEncoderConfiguration\",\n            options: t,\n            tag: \"tracer\"\n          });\n          t.resolution && (Object(S.checkValidNumber)(t.resolution.width, \"config.resolution.width\"), Object(S.checkValidNumber)(t.resolution.height, \"config.resolution.height\"), e.setVideoResolution([t.resolution.width, t.resolution.height])), t.frameRate && (Object(S.checkValidNumber)(t.frameRate.min, \"config.frameRate.min\"), Object(S.checkValidNumber)(t.frameRate.max, \"config.frameRate.max\"), e.setVideoFrameRate([t.frameRate.min, t.frameRate.max])), t.bitrate && (Object(S.checkValidNumber)(t.bitrate.min, \"config.bitrate.min\", 1, 1e7), Object(S.checkValidNumber)(t.bitrate.max, \"config.bitrate.max\", 1, 1e7), e.setVideoBitRate([t.bitrate.min, t.bitrate.max])), n();\n        }, e.getSupportedProfile = function (t) {\n          var n = f.report.reportApiInvoke(e.sid, {\n            name: \"Stream.getSupportedProfile\",\n            options: arguments,\n            tag: \"tracer\",\n            callback: t\n          });\n\n          if (!e.local) {\n            var r = \"ONLY_LOCAL_STREAM_SUPPORTED\";\n            return c.default.error(r), n(r);\n          }\n\n          if (!e.stream) {\n            r = \"STREAM_NOT_INIT\";\n            return c.default.error(r), n(r);\n          }\n\n          if (!e.stream.getVideoTracks) {\n            r = \"TRACK_NOT_SUPPORT\";\n            return c.default.error(r), n(r);\n          }\n\n          var i = e.stream.getVideoTracks()[0];\n\n          if (!i) {\n            r = \"NO_VIDEO_TRACK_FOUND\";\n            return c.default.error(r), n(r);\n          }\n\n          if (!i.getCapabilities) {\n            r = \"GETCAPABILITY_NOT_SUPPORT\";\n            return c.default.error(r), n(r);\n          }\n\n          var o = i.getCapabilities(),\n              a = b(o);\n          return n(null, a);\n        };\n      }(t, e), t.getId = function () {\n        return t.streamId;\n      }, t.getUserId = function () {\n        return t.userId;\n      }, t.checkDualStreamEnabled = function () {\n        if (Object(l.getParameter)(\"DUALSTREAM_OPERATION_CHECK\") && t.isDualStream) {\n          return c.default.error(\"Operation not permitted: \".concat(\"DUAL_STREAM_ENABLED\")), \"DUAL_STREAM_ENABLED\";\n        }\n\n        return !1;\n      }, t.setUserId = function (e) {\n        var n = f.report.reportApiInvoke(t.sid, {\n          name: \"Stream.setUserId\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        t.userId && c.default.warning(\"[\".concat(t.streamId, \"] Stream.userId \").concat(t.userId, \" => \").concat(e)), t.userId = e, n();\n      }, t.getAttributes = function () {\n        return e.screen ? t.screenAttributes : e.attributes;\n      }, t.hasAudio = function () {\n        return !!t.audio;\n      }, t.hasVideo = function () {\n        return !!t.video;\n      }, t.hasScreen = function () {\n        return !!t.screen;\n      }, t.hasScreenAudio = function () {\n        return !!t.screenAudio;\n      }, t.isVideoOn = function () {\n        return (t.hasVideo() || t.hasScreen()) && !t.userMuteVideo;\n      }, t.isAudioOn = function () {\n        return t.hasAudio() && !t.userMuteAudio;\n      }, t.init = function (r, i) {\n        var o = f.report.reportApiInvoke(t.sid, {\n          callback: function callback(e, t) {\n            if (e) return i && i(e);\n            r && r(t);\n          },\n          name: \"Stream.init\",\n          options: arguments,\n          tag: \"tracer\"\n        }),\n            a = (new Date().getTime(), arguments[2]);\n        if (void 0 === a && (a = 2), !0 === t.initialized) return o({\n          type: \"warning\",\n          msg: \"STREAM_ALREADY_INITIALIZED\"\n        });\n        if (!0 !== t.local) return o({\n          type: \"warning\",\n          msg: \"STREAM_NOT_LOCAL\"\n        });\n        var s = Math.random().toString().slice(3);\n        t._streamInitID = s, t.videoSource ? t.videoName = \"videoSource\" : t.video && (t.videoName = E.a.searchDeviceNameById(e.cameraId) || \"default\"), t.audioSource ? t.audioName = \"audioSource\" : t.audio && (t.audioName = E.a.searchDeviceNameById(e.microphoneId) || \"default\"), t.screen && (t.screenName = e.extensionId || \"default\");\n\n        try {\n          if (e.audio || e.video || e.screen || e.screenAudio || e.videoSource || e.audioSource) {\n            c.default.debug(\"[\".concat(t.streamId, \"] Requested access to local media\"));\n            var d = {\n              streamId: t.streamId\n            };\n            e.videoSource ? d.videoSource = e.videoSource : e.screen ? d.screen = t.screenConstraint : e.video && (d.video = t.videoConstraint), e.audioSource ? d.audioSource = e.audioSource : e.screenAudio ? d.screenAudio = e.screenAudio : e.audio && (d.audio = t.audioConstraint), Object(m.b)(d, function (r) {\n              if (d.screenAudio && !r.getAudioTracks()[0] && c.default.warning(\"[\".concat(t.streamId, \"] Audio sharing is not selected\")), d.screen && c.default.debug(\"[\".concat(t.streamId, \"] User has granted access to screen sharing\")), (d.video || d.audio) && c.default.debug(\"[\".concat(t.streamId, \"] User has granted access to local media\")), null === t._streamInitID) {\n                r.getTracks().forEach(function (e) {\n                  e.stop();\n                });\n                var i = {\n                  type: \"error\",\n                  msg: \"STREAM_IS_CLOSED\",\n                  info: \"stream is closed and cannot be initialized\"\n                };\n                return c.default.error(t.streamId, i.info), void o(i);\n              }\n\n              if (t._streamInitID !== s) {\n                r.getTracks().forEach(function (e) {\n                  e.stop();\n                });\n                i = {\n                  type: \"error\",\n                  msg: \"ABORT_OTHER_INIT\",\n                  info: \"stream initialization is aborted because of another stream.init\"\n                };\n                return c.default.error(t.streamId, i.info), void o(i);\n              }\n\n              t.dispatchEvent({\n                type: \"accessAllowed\"\n              }), t.stream = r, t.initialized = !0, t.reloadDeviceName(), t.hasVideo() && Object(h.vsResHack)(r, function (e, n) {\n                t.videoWidth = e, t.videoHeight = n;\n              }, function (e) {\n                c.default.warning(\"[\".concat(t.streamId, \"] vsResHack failed: \"), e);\n              }), e.screen && t.stream && t.stream.getVideoTracks()[0] && (t.stream.getVideoTracks()[0].onended = function () {\n                t.dispatchEvent({\n                  type: \"stopScreenSharing\"\n                });\n              }), t.stream && t.stream.getTracks && t.stream.getTracks().forEach(function (r) {\n                r && !r.onended && (r.onended = n), \"video\" === r.kind && e.optimizationMode && (r.contentHint = e.optimizationMode, r.contentHint === e.optimizationMode && c.default.debug(\"[\".concat(t.streamId, \"] set content hint to\"), e.optimizationMode));\n              }), o();\n            }, function (e) {\n              var n = {\n                type: \"error\",\n                info: null\n              };\n\n              switch (e && (n.msg = e.name || e.code || e, e.message && (n.info = e.message), e.code && (n.info ? n.info += \". \" + e.code : n.info = \" \" + e.code), e.constraint && (n.info ? n.info += \". Constraint: \" + e.constraint : n.info = \"constraint: \" + e.constraint)), n.msg) {\n                case \"Starting video failed\":\n                case \"TrackStartError\":\n                  if (t.videoConstraint && (delete t.videoConstraint.width, delete t.videoConstraint.height), a > 0) return void setTimeout(function () {\n                    t.init(function (e) {\n                      return o(e);\n                    }, o, a - 1);\n                  }, 1);\n                  n.msg = \"MEDIA_OPTION_INVALID\";\n                  break;\n\n                case \"DevicesNotFoundError\":\n                  n.msg = \"DEVICES_NOT_FOUND\";\n                  break;\n\n                case \"NotSupportedError\":\n                  n.msg = \"NOT_SUPPORTED\";\n                  break;\n\n                case \"PermissionDeniedError\":\n                case \"InvalidStateError\":\n                  n.msg = \"PERMISSION_DENIED\", t.dispatchEvent({\n                    type: \"accessDenied\"\n                  });\n                  break;\n\n                case \"PERMISSION_DENIED\":\n                case \"NotAllowedError\":\n                  t.dispatchEvent({\n                    type: \"accessDenied\"\n                  });\n                  break;\n\n                case \"ConstraintNotSatisfiedError\":\n                  n.msg = \"CONSTRAINT_NOT_SATISFIED\";\n                  break;\n\n                default:\n                  n.msg || (n.msg = \"UNDEFINED\");\n              }\n\n              var r = \"Media access \".concat(n.msg).concat(n.info ? \": \" + n.info : \"\");\n              c.default.error(\"[\".concat(t.streamId, \"] \"), r), o(n);\n            });\n          } else o({\n            type: \"warning\",\n            msg: \"STREAM_HAS_NO_MEDIA_ATTRIBUTES\"\n          });\n        } catch (e) {\n          c.default.error(\"[\".concat(t.streamId, \"] Stream init: \"), e), o({\n            type: \"error\",\n            msg: e.message || e\n          });\n        }\n      }, t.reloadDeviceName = function () {\n        if (t.stream) {\n          if (t.stream.getVideoTracks) {\n            var e = t.stream.getVideoTracks()[0];\n            e && e.label && (t.videoName = e.label);\n          }\n\n          if (t.stream.getAudioTracks) {\n            var n = t.stream.getAudioTracks()[0];\n            n && n.label && (t.audioName = n.label);\n          }\n        }\n      }, t.close = function () {\n        var e = f.report.reportApiInvoke(null, {\n          name: \"Stream.close\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        if (c.default.debug(\"[\".concat(t.streamId, \"] Close stream with id\"), t.streamId), t._originStream) try {\n          t._originStream.getTracks().map(function (e) {\n            return e.stop();\n          });\n        } catch (e) {}\n\n        if (void 0 !== t.stream) {\n          var n = t.stream.getTracks();\n\n          for (var r in n) {\n            n.hasOwnProperty(r) && (n[r].stop(), n[r].onended = null);\n          }\n\n          !t.isLowStream && t.local ? y.a.disableVideoEffect(t).then(function () {\n            t.stream = void 0;\n          }) : (t.stream && t.stream.clean && t.stream.clean(), t.stream = void 0);\n        }\n\n        if (t._originStream) {\n          n = t._originStream.getTracks();\n\n          for (var r in n) {\n            n.hasOwnProperty(r) && (n[r].stop(), n[r].onended = null);\n          }\n\n          !t.isLowStream && t.local ? y.a.disableVideoEffect(t).then(function () {\n            t._originStream = void 0;\n          }) : (t._originStream && t._originStream.clean && t._originStream.clean(), t._originStream = void 0);\n        }\n\n        if (Object(o.isSafari)() && t.pc && t.pc.peerConnection && t.pc.peerConnection.removeTrack && t.pc.peerConnection.getSenders) {\n          var i = t.pc.peerConnection.getSenders();\n          i.forEach(function (e) {\n            e && (c.default.debug(\"[\".concat(t.streamId, \"] Remove Track\"), e), t.pc.peerConnection.removeTrack(e));\n          });\n        }\n\n        t.local && (t.initialized = !1), t._streamInitID = null, t._onAudioMute = void 0, t._onAudioUnmute = void 0, t._onVideoMute = void 0, t._onVideoUnmute = void 0, t.lowStream && t.lowStream.close(), t.player && t.player.video && t.player.video.srcObject && (t.player.video.srcObject = null), t.player && t.player.audio && t.player.audio.srcObject && (t.player.audio.srcObject = null), e();\n      }, t.enableAudio = function () {\n        var e,\n            n = f.report.reportApiInvoke(t.sid, {\n          name: \"Stream.enableAudio\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        return c.default.deprecate(\"[\".concat(t.streamId, \"] Stream.enableAudio is deprecated and will be removed in the future. Use Stream.unmuteAudio instead\")), t.userMuteAudio || c.default.warning(\"[\".concat(t.streamId, \"] User already enableAudio\")), t.userMuteAudio = !1, n(null, e = !t.peerMuteAudio && t._unmuteAudio()), e;\n      }, t.disableAudio = function () {\n        var e = f.report.reportApiInvoke(t.sid, {\n          name: \"Stream.disableAudio\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        c.default.deprecate(\"[\".concat(t.streamId, \"] Stream.disableAudio is deprecated and will be removed in the future. Use Stream.muteAudio instead\")), t.userMuteAudio && c.default.warning(\"[\".concat(t.streamId, \"] User already disableAudio\")), t.userMuteAudio = !0;\n\n        var n = t._muteAudio();\n\n        return e(null, n), n;\n      }, t.enableVideo = function () {\n        var e,\n            n = f.report.reportApiInvoke(t.sid, {\n          name: \"Stream.enableVideo\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        return c.default.deprecate(\"[\".concat(t.streamId, \"] Stream.enableVideo is deprecated and will be removed in the future. Use Stream.unmuteVideo instead\")), t.userMuteVideo || c.default.warning(\"[\".concat(t.streamId, \"] User already enableVideo\")), t.userMuteVideo = !1, t.lowStream && (t.lowStream.userMuteVideo = !1), n(null, e = !t.peerMuteVideo && t._unmuteVideo()), e;\n      }, t.disableVideo = function () {\n        var e = f.report.reportApiInvoke(t.sid, {\n          name: \"Stream.disableVideo\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        c.default.deprecate(\"[\".concat(t.streamId, \"] Stream.disableVideo is deprecated and will be removed in the future. Use Stream.muteVideo instead\")), t.userMuteVideo && c.default.warning(\"[\".concat(t.streamId, \"] User already disableVideo\")), t.userMuteVideo = !0, t.lowStream && (t.lowStream.userMuteVideo = !0);\n\n        var n = t._muteVideo();\n\n        return e(null, n), n;\n      }, t.unmuteAudio = function () {\n        var e,\n            n = f.report.reportApiInvoke(t.sid, {\n          name: \"Stream.unmuteAudio\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        return t.userMuteAudio || c.default.warning(\"[\".concat(t.streamId, \"] User already unmuteAudio\")), t.userMuteAudio = !1, n(null, e = !t.peerMuteAudio && t._unmuteAudio()), e;\n      }, t.muteAudio = function () {\n        var e = f.report.reportApiInvoke(t.sid, {\n          name: \"Stream.muteAudio\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        t.userMuteAudio && c.default.warning(\"[\".concat(t.streamId, \"] User already muteAudio\")), t.userMuteAudio = !0;\n\n        var n = t._muteAudio();\n\n        return e(null, n), n;\n      }, t.unmuteVideo = function () {\n        var e,\n            n = f.report.reportApiInvoke(t.sid, {\n          name: \"Stream.unmuteVideo\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        return t.userMuteVideo || c.default.warning(\"[\".concat(t.streamId, \"] User already unmuteVideo\")), t.userMuteVideo = !1, t.lowStream && (t.lowStream.userMuteVideo = !1), n(null, e = !t.peerMuteVideo && t._unmuteVideo()), e;\n      }, t.muteVideo = function () {\n        var e = f.report.reportApiInvoke(t.sid, {\n          name: \"Stream.muteVideo\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        t.userMuteVideo && c.default.warning(\"[\".concat(t.streamId, \"] User already muteVideo\")), t.userMuteVideo = !0, t.lowStream && (t.lowStream.userMuteVideo = !0);\n\n        var n = t._muteVideo();\n\n        return e(null, n), n;\n      }, t._unmuteAudio = function () {\n        return c.default.debug(\"[\".concat(t.streamId, \"] Unmuted audio stream with id \"), t.streamId), t._flushAudioMixingMuteStatus(!1), !(!t.hasAudio() || !t.initialized || void 0 === t.stream || !0 === t.stream.getAudioTracks()[0].enabled) && (t._onAudioUnmute && t._onAudioUnmute(), t.pc && (t.pc.isAudioMute = !1), t.stream.getAudioTracks()[0].enabled = !0, !0);\n      }, t._isAudioMuted = function () {\n        if (t.stream && t.hasAudio()) {\n          var e = t.stream.getAudioTracks();\n          return e.length > 0 && !e[0].enabled;\n        }\n\n        return !1;\n      }, t._isVideoMuted = function () {\n        if (t.stream && t.hasVideo()) {\n          var e = t.stream.getVideoTracks();\n          return e.length > 0 && !e[0].enabled;\n        }\n\n        return !1;\n      }, t._muteAudio = function () {\n        return c.default.debug(\"[\".concat(t.streamId, \"] Muted audio stream with id \"), t.streamId), t._flushAudioMixingMuteStatus(!0), !!(t.hasAudio() && t.initialized && void 0 !== t.stream && t.stream.getAudioTracks()[0].enabled) && (t._onAudioMute && t._onAudioMute(), t.pc && (t.pc.isAudioMute = !0), t.stream.getAudioTracks()[0].enabled = !1, t.sid && f.report.audioSendingStopped(t.sid, {\n          succ: !0,\n          reason: \"muteAudio\"\n        }), !0);\n      }, t._unmuteVideo = function () {\n        return c.default.debug(\"[\".concat(t.streamId, \"] Unmuted video stream with id\"), t.streamId), !(!t.initialized || void 0 === t.stream || !t.stream.getVideoTracks().length || !0 === t.stream.getVideoTracks()[0].enabled) && (t._onVideoUnmute && t._onVideoUnmute(), t.pc && (t.pc.isVideoMute = !1), t.stream.getVideoTracks()[0].enabled = !0, t.lowStream && t.lowStream._unmuteVideo(), !0);\n      }, t._muteVideo = function () {\n        return c.default.debug(\"[\".concat(t.streamId, \"] Muted video stream with id\"), t.streamId), !!(t.initialized && void 0 !== t.stream && t.stream.getVideoTracks().length && t.stream.getVideoTracks()[0].enabled) && (t._onVideoMute && t._onVideoMute(), t.pc && (t.pc.isVideoMute = !0), t.stream.getVideoTracks()[0].enabled = !1, t.lowStream && t.lowStream._muteVideo(), t.sid && f.report.videoSendingStopped(t.sid, {\n          succ: !0,\n          reason: \"muteVideo\"\n        }), !0);\n      }, t.addTrack = function (r) {\n        if (t.audio && \"audio\" === r.kind) c.default.warning(\"already added audio track\");else if (t.video && \"video\" === r.kind) c.default.warning(\"already added video track\");else {\n          var i = f.report.reportApiInvoke(t.sid, {\n            name: \"Stream.addTrack\",\n            options: arguments,\n            tag: \"tracer\"\n          });\n\n          if (t.pc && t.pc.addTrack(r, t.stream), \"audio\" == r.kind) {\n            t._cleanupAudioMixing();\n\n            var o = new MediaStream();\n            t.userMuteAudio && (r.enabled = !1), o.addTrack(r);\n            var a = t.stream.getVideoTracks()[0];\n            a && o.addTrack(a), t.audio = !0, e.audio = !0, t.stream = o, t.audioLevelHelper = null, t.player && t.player.video && (t.player.video.srcObject = t.stream);\n          } else t.userMuteVideo && (r.enabled = !1), t.stream.addTrack(r), t.video = !0, e.video = !0;\n\n          r.onended || (r.onended = n), i();\n        }\n      }, t.removeTrack = function (n) {\n        if (n) {\n          if (t.audio || \"audio\" !== n.kind) {\n            if (t.video || \"video\" !== n.kind) {\n              var r = f.report.reportApiInvoke(t.sid, {\n                name: \"Stream.removeTrack\",\n                options: arguments,\n                tag: \"tracer\"\n              });\n              t.pc && t.pc.removeTrack(n, t.stream), t.stream.removeTrack(n), t._cleanupAudioMixing(), \"audio\" === n.kind ? (t.audio = !1, e.audio = !1) : (t.video = !1, e.video = !1), t.audioLevelHelper = null, \"live\" == n.readyState && (n.stop(), c.default.debug(\"[\".concat(t.streamId, \"] Track \").concat(n.kind, \" Stopped\"))), r();\n            } else c.default.warning(\"already removed video track\");\n          } else c.default.warning(\"already removed audio track\");\n        } else c.default.warning(\"track doesn't exist.\");\n      }, t.setAudioOutput = function (e, n, r) {\n        var i = f.report.reportApiInvoke(t.sid, {\n          callback: function callback(e, t) {\n            if (e) return r && r(e);\n            n && n(t);\n          },\n          name: \"Stream.setAudioOutput\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        return Object(S.isValidString)(e, 1, 255) ? (t.audioOutput = e, t.player ? void t.player.setAudioOutput(e, function () {\n          return i();\n        }, i) : i()) : (c.default.error(\"[\".concat(t.streamId, \"] setAudioOutput Invalid Parameter\"), e), i(u.default.INVALID_PARAMETER));\n      }, t.play = function (e, n, r) {\n        \"function\" == typeof n && (r = n, n = null), c.default.debug(\"[\".concat(t.streamId, \"] play().\"), e, n);\n        var i = f.report.reportApiInvoke(t.sid, {\n          name: \"Stream.play\",\n          options: arguments,\n          tag: \"tracer\",\n          callback: r\n        });\n        if (Object(S.checkValidString)(e, \"elementID\"), Object(S.isEmpty)(n) || (Object(S.isEmpty)(n.fit) || Object(S.checkValidEnum)(n.fit, \"fit\", [\"cover\", \"contain\"]), Object(S.isEmpty)(n.muted) || Object(S.checkValidBoolean)(n.muted, \"muted\")), t.player) c.default.warning(\"[\".concat(t.streamId, \"] Stream.play(): Stream is already playing. Fallback to resume stream\")), t.resume().then(function () {\n          i(null);\n        }).catch(i);else {\n          t.elementID = e, t.playOptions = n, !t.local || t.video || t.screen ? (t.player = new g({\n            id: t.getId(),\n            stream: t,\n            elementID: e,\n            options: n\n          }), t.local && y.a.applyEffectInPlayer(t)) : t.hasAudio() && (t.player = new g({\n            id: t.getId(),\n            stream: t,\n            elementID: e,\n            options: n\n          }));\n\n          var o = {\n            video: null,\n            audio: null\n          },\n              a = function e(n) {\n            if (o[n.mediaType] = n, o.video && o.audio) if (t.removeEventListener(\"player-status-change\", e), o.video.isErrorState || o.audio.isErrorState) {\n              var r = o.video.isErrorState ? o.video : o.audio;\n              i({\n                isErrorState: !0,\n                status: r.status,\n                reason: r.reason,\n                video: o.video,\n                audio: o.audio\n              });\n            } else \"aborted\" === o.video.status && \"aborted\" === o.audio.status ? i({\n              status: \"aborted\",\n              reason: \"stop\",\n              video: o.video,\n              audio: o.audio\n            }) : i(null);\n          };\n\n          t.on(\"player-status-change\", a), t.audioOutput && t.player.setAudioOutput(t.audioOutput), void 0 !== t.audioLevel && t.player.setAudioVolume(t.audioLevel), t._flushAudioMixingMuteStatus(!1);\n        }\n      }, t.stop = function () {\n        var e = f.report.reportApiInvoke(t.sid, {\n          name: \"Stream.stop\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        c.default.debug(\"[\".concat(t.streamId, \"] Stop stream player with id \"), t.streamId), t.player ? (y.a.removeEffectFromLocalPlayer(t), t.player.destroy(), delete t.player) : c.default.error(\"[\".concat(t.streamId, \"] Stream.stop(): Stream is not playing\")), t._flushAudioMixingMuteStatus(!0), e();\n      }, t.isPlaying = function () {\n        return !!t.player;\n      }, t.isPaused = function () {\n        return !!t.player && (!!(t.player.video && t.player.video.paused && t.player.mediaElemExists(t.player.video)) || !!(t.player.audio && t.player.audio.paused && t.player.mediaElemExists(t.player.audio)));\n      }, t.resume = function () {\n        var e, n;\n        return t.player ? (t.player.video && t.player.video.play && (e = t.player.video.play()), e = e || Promise.resolve(), t.player.audio && t.player.audio.play && (n = t.player.audio.play()), n = n || Promise.resolve(), Promise.all([e, n])) : Promise.reject(\"NO_PLAYER_FOUND\");\n      }, t.getVideoTrack = function () {\n        var e = f.report.reportApiInvoke(t.sid, {\n          name: \"Stream.getVideoTrack\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n\n        if (t.stream && t.stream.getVideoTracks) {\n          var n = t.stream.getVideoTracks()[0];\n          if (n) return c.default.info(\"[\".concat(t.streamId, \"] getVideoTrack\"), n), e(), n;\n        }\n\n        c.default.info(\"[\".concat(t.streamId, \"] getVideoTrack None\")), e(null, \"getVideoTrack None\");\n      }, t.getAudioTrack = function () {\n        var e = f.report.reportApiInvoke(t.sid, {\n          name: \"Stream.getAudioTrack\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n\n        if (t.stream && t.stream.getAudioTracks) {\n          var n = t.stream.getAudioTracks()[0];\n          if (n) return c.default.info(\"[\".concat(t.streamId, \"] getAudioTracks\"), n), e(), n;\n        }\n\n        c.default.info(\"[\".concat(t.streamId, \"] getAudioTracks None\")), e(null, \"getAudioTracks None\");\n      }, t._hasVideoTracks = function () {\n        return !!(t.stream && t.stream.getVideoTracks && t.stream.getVideoTracks()[0]);\n      }, t._hasAudioTracks = function () {\n        return !!(t.stream && t.stream.getAudioTracks && t.stream.getAudioTracks()[0]);\n      }, t._replaceMediaStreamTrack = function (e, n, r) {\n        if (t.stream) {\n          if (\"video\" == e.kind) {\n            if (o = t.stream.getVideoTracks()[0]) return t.userMuteVideo && (e.enabled = !1), t.stream.removeTrack(o), t.stream.addTrack(e), c.default.debug(\"[\".concat(t.streamId, \"] _replaceMediaStreamTrack \").concat(e.kind, \" SUCCESS\")), \"live\" == o.readyState && (o.stop(), c.default.debug(\"[\".concat(t.streamId, \"] Track \").concat(o.kind, \" Stopped\"))), n && n();\n            var i = \"MEDIASTREAM_TRACK_NOT_FOUND\";\n            return c.default.error(\"[\".concat(t.streamId, \"] MEDIASTREAM_TRACK_NOT_FOUND \").concat(e.kind)), r(i);\n          }\n\n          if (\"audio\" == e.kind) {\n            var o;\n\n            if (o = t.stream.getAudioTracks()[0]) {\n              t.userMuteAudio && (e.enabled = !1);\n              var a = new MediaStream();\n              a.addTrack(e);\n              var s = t.stream && t.stream.getVideoTracks()[0];\n              return s && a.addTrack(s), t.stream = a, t.audioLevelHelper = null, t.player && t.player.video && (t.player.video.srcObject = t.stream), c.default.debug(\"[\".concat(t.streamId, \"] _replaceMediaStreamTrack SUCCESS\")), \"live\" == o.readyState && (o.stop(), c.default.debug(\"[\".concat(t.streamId, \"] Track \").concat(o.kind, \" Stopped\"))), n && n();\n            }\n\n            i = \"MEDIASTREAM_TRACK_NOT_FOUND\";\n            return c.default.error(\"[\".concat(t.streamId, \"] MEDIASTREAM_TRACK_NOT_FOUND \").concat(e.kind)), r(i);\n          }\n\n          i = \"INVALID_TRACK_TYPE\";\n          return c.default.error(\"[\".concat(t.streamId, \"] _replaceMediaStreamTrack \").concat(i, \" \").concat(e.kind)), r && r(i);\n        }\n\n        i = \"NO_STREAM_FOUND\";\n        return c.default.error(\"[\".concat(t.streamId, \"] _replaceMediaStreamTrack \").concat(i)), r && r(i);\n      }, t.replaceTrack = function (e, r, i) {\n        var o = f.report.reportApiInvoke(t.sid, {\n          callback: function callback(e, t) {\n            if (e) return i && i(e);\n            r && r(t);\n          },\n          name: \"Stream.replaceTrack\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        return e && e.kind ? (t._cleanupAudioMixing(), e.onended || (e.onended = n), t.pc && t.pc.hasSender && t.pc.hasSender(e.kind) ? void t.pc.replaceTrack(e, function () {\n          return c.default.debug(\"[\".concat(t.streamId, \"] PeerConnection.replaceTrack \").concat(e.kind, \" SUCCESS\")), t._replaceMediaStreamTrack(e, function (e) {\n            return o(null, e);\n          }, o);\n        }, function (n) {\n          return c.default.error(\"[\".concat(t.streamId, \"] PeerConnection.replaceTrack \").concat(e.kind, \" Failed \").concat(n)), o(n);\n        }) : t._replaceMediaStreamTrack(e, function (e) {\n          return o(null, e);\n        }, o)) : o(\"INVALID_TRACK\");\n      }, t.setAudioVolume = function (e) {\n        var n = f.report.reportApiInvoke(t.sid, {\n          name: \"Stream.setAudioVolume\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        Object(S.checkValidNumber)(e, \"level\", 0, 100), t.audioLevel = e, t.player && t.player.setAudioVolume(e), n();\n      }, t.getStats = function (e, n, r) {\n        var a = [];\n        a.push(t._getPCStats(r)), a.push(new Promise(function (e) {\n          var n = {};\n          t.pc && t.pc.isSubscriber ? null !== window.navigator.userAgent.match(\"Firefox\") && (Object(v.b)(n, \"videoReceiveResolutionHeight\", t.videoHeight), Object(v.b)(n, \"videoReceiveResolutionWidth\", t.videoWidth)) : t.pc && !t.pc.isSubscriber && ((Object(o.isSafari)() || Object(o.isFireFox)()) && (Object(v.b)(n, \"videoSendResolutionHeight\", t.videoHeight), Object(v.b)(n, \"videoSendResolutionWidth\", t.videoWidth)), (Object(o.isSafari)() || Object(o.isFireFox)()) && t.uplinkStats && Object(v.b)(n, \"videoSendPacketsLost\", t.uplinkStats.uplink_cumulative_lost)), e(n);\n        })), a.push(new Promise(function (e) {\n          var n = {};\n          return t.traffic_stats && t.pc && t.pc.isSubscriber ? (Object(v.b)(n, \"accessDelay\", t.traffic_stats.access_delay), Object(v.b)(n, \"endToEndDelay\", t.traffic_stats.e2e_delay), Object(v.b)(n, \"videoReceiveDelay\", t.traffic_stats.video_delay), Object(v.b)(n, \"audioReceiveDelay\", t.traffic_stats.audio_delay)) : t.traffic_stats && t.pc && !t.pc.isSubscriber && Object(v.b)(n, \"accessDelay\", t.traffic_stats.access_delay), e(n);\n        })), Promise.all(a).then(function (n) {\n          for (var r = {}, o = n.length - 1; o >= 0; o--) {\n            var a = n[o];\n            i()(r, a);\n          }\n\n          e && setTimeout(e.bind(t, r), 0);\n        }).catch(function (e) {\n          n && setTimeout(n.bind(t, e), 0);\n        });\n      }, t._getPCStats = function (e) {\n        return new Promise(function (n, r) {\n          if (!t.pc || \"established\" !== t.pc.state || !t.pc.getStats) {\n            return r(\"PEER_CONNECTION_NOT_ESTABLISHED\");\n          }\n\n          t.pc.getStats(function (e) {\n            if (!t.pc || \"established\" !== t.pc.state || !t.pc.getStats) {\n              return r(\"PEER_CONNECTION_STATE_CHANGE\");\n            }\n\n            var i = t.pc.isSubscriber ? Object(v.c)(e) : Object(v.a)(e);\n            return n(i);\n          }, e);\n        }).then(function (e) {\n          return t.pc.isSubscriber ? (Object(o.isFireFox)() || Object(o.isSafari)()) && (e.videoReceiveResolutionHeight && \"0\" !== e.videoReceiveResolutionHeight || e.videoReceiveResolutionWidth && \"0\" !== e.videoReceiveResolutionWidth || (Object(v.b)(e, \"videoReceiveResolutionHeight\", t.videoHeight), Object(v.b)(e, \"videoReceiveResolutionWidth\", t.videoWidth))) : ((Object(o.isSafari)() || Object(o.isFireFox)()) && (e.videoSendResolutionHeight && \"0\" !== e.videoSendResolutionHeight || e.videoSendResolutionWidth && \"0\" !== e.videoSendResolutionWidth || (Object(v.b)(e, \"videoSendResolutionHeight\", t.videoHeight), Object(v.b)(e, \"videoSendResolutionWidth\", t.videoWidth))), (Object(o.isSafari)() || Object(o.isFireFox)()) && t.uplinkStats && Object(v.b)(e, \"videoSendPacketsLost\", t.uplinkStats.uplink_cumulative_lost)), Promise.resolve(e);\n        });\n      }, t.getAudioLevel = function () {\n        if (t.audioLevelHelper) return t.audioLevelHelper.getAudioLevel();\n\n        if (t.stream) {\n          if (0 !== t.stream.getAudioTracks().length) return t.audioLevelHelper = new h.audioLevelHelper(t.stream), t.audioLevelHelper.getAudioLevel();\n          c.default.warning(\"[\".concat(t.streamId, \"] can't get audioLevel beacuse no audio trace in stream\"));\n        } else c.default.warning(\"[\".concat(t.streamId, \"] can't get audioLevel beacuse no stream exist\"));\n      }, t.setVideoProfile(\"480p_1\"), t._switchVideoDevice = function (e, n, r) {\n        if (e === t.cameraId) return n && n();\n        var o = {\n          video: i()({}, t.videoConstraint, {\n            deviceId: {\n              exact: e\n            }\n          }),\n          audio: !1\n        };\n        c.default.debug(\"[\".concat(t.streamId, \"] \").concat(o)), Object(m.b)(o, function (i) {\n          try {\n            var o = function o() {\n              t.isPlaying() && (t.stop(), t.elementID && t.play(t.elementID, t.playOptions)), t.cameraId = e, t.videoConstraint.deviceId = {\n                exact: e\n              }, t.userMuteVideo && (t.stream.getVideoTracks()[0].enabled = !1), y.a.restoreVideoEffect(t).then(function () {\n                n && n();\n              });\n            };\n\n            y.a.disableVideoEffect(t).then(function () {\n              var e = !1;\n              window.RTCRtpSender && \"function\" == typeof RTCRtpSender.prototype.replaceTrack && (e = !0), e ? t.replaceTrack(i.getVideoTracks()[0], o, r) : (t.removeTrack(t.stream.getVideoTracks()[0]), t.addTrack(i.getVideoTracks()[0]), o());\n            });\n          } catch (e) {\n            return r && r(e);\n          }\n        }, function (e) {\n          return r && r(e);\n        });\n      }, t._switchAudioDevice = function (e, n, r) {\n        if (e === t.microphoneId) return n && n();\n        var o = {\n          video: !1,\n          audio: i()({}, t.audioConstraint, {\n            deviceId: {\n              exact: e\n            }\n          })\n        };\n        c.default.debug(\"[\".concat(t.streamId, \"] \"), o);\n        var a = t.stream.getAudioTracks()[0];\n        a && a.stop(), Object(m.b)(o, function (i) {\n          var o = function o() {\n            t._cleanupAudioMixing(), t.userMuteAudio && (t.stream.getAudioTracks()[0].enabled = !1), t.isPlaying() && (t.stop(), t.elementID && t.play(t.elementID, t.playOptions)), t.microphoneId = e, t.audioConstraint.deviceId = {\n              exact: e\n            }, n && n();\n          };\n\n          try {\n            var a = !1;\n            window.RTCRtpSender && \"function\" == typeof RTCRtpSender.prototype.replaceTrack && (a = !0), a ? t.replaceTrack(i.getAudioTracks()[0], o, r) : (t.removeTrack(t.stream.getAudioTracks()[0]), t.addTrack(i.getAudioTracks()[0]), o());\n          } catch (e) {\n            return r && r(e);\n          }\n        }, function (e) {\n          return r && r(e);\n        });\n      }, t.switchDevice = function (e, n, r, i) {\n        var o = f.report.reportApiInvoke(t.sid, {\n          callback: function callback(e, t) {\n            if (e) return i && i(e);\n            r && r(t);\n          },\n          name: \"Stream.switchDevice\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        Object(S.checkValidString)(n, \"deviceId\");\n\n        var a = function a() {\n          return t.inSwitchDevice = !1, o();\n        },\n            s = function s(e) {\n          t.inSwitchDevice = !1, c.default.error(\"[\".concat(t.streamId, \"] \"), e), o(e);\n        };\n\n        if (t.inSwitchDevice) return o(\"Device switch is in process.\");\n        if (t.inSwitchDevice = !0, !t.local) return s(\"Only the local stream can switch the device.\");\n        if (t.screen && \"video\" === e) return s(\"The device cannot be switched during screen-sharing.\");\n        if (!t.video && \"video\" === e) return s(\"Video track not exist.\");\n        if (!t.audio && \"audio\" === e) return s(\"Audio track not exist.\");\n        if (t.videoSource || t.audioSource) return s(\"The device cannot be switched when using videoSource or audioSource.\");\n        var d = !1;\n\n        for (var u in t.audioMixing.sounds) {\n          var l = t.audioMixing.sounds[u];\n\n          if (l.state !== t.audioMixing.states.IDLE) {\n            d = !0;\n            break;\n          }\n        }\n\n        var p = t.audioMixing.audioContextInited;\n        if (p && d) return s(\"The device cannot be switched when using audio Mixing.\");\n        E.a.getDeviceById(n, function () {\n          if (\"video\" === e) t._switchVideoDevice(n, a, s);else {\n            if (\"audio\" !== e) return s(\"Invalid type.\");\n\n            t._switchAudioDevice(n, a, s);\n          }\n        }, function () {\n          return s(\"The device does not exist.\");\n        });\n      }, t;\n    },\n        C = function C(e) {\n      var t = f.report.reportApiInvoke(null, {\n        name: \"createStream\",\n        options: arguments,\n        tag: \"tracer\",\n        getStates: function getStates() {\n          return {\n            audioTrackEnable: e && e.audioSource ? e.audioSource.enabled : null,\n            videoTrackEnable: e && e.videoSource ? e.videoSource.enabled : null\n          };\n        }\n      });\n      Object(S.checkValidObject)(e, \"StreamSpec\");\n      var n = e.streamID,\n          r = e.audio,\n          i = e.video,\n          o = e.screen,\n          a = e.screenAudio,\n          s = (e.audioSource, e.videoSource, e.cameraId),\n          d = e.facingMode,\n          u = e.microphoneId,\n          l = e.mirror,\n          p = e.extensionId,\n          g = e.mediaSource,\n          m = e.audioProcessing,\n          v = e.optimizationMode;\n      if (!Object(S.isEmpty)(n) && !Object(h.is32Uint)(n) && !Object(S.isValidString)(n, 1, 255)) throw new Error(\"[String streamID] Length of the string: [1,255]. ASCII characters only. [Number streamID] The value range is Uint32\");\n\n      if (Object(S.checkValidBoolean)(r, \"audio\"), Object(S.checkValidBoolean)(i, \"video\"), Object(S.isEmpty)(o) || Object(S.checkValidBoolean)(o, \"screen\"), Object(S.isEmpty)(a) || Object(S.checkValidBoolean)(a, \"screenAudio\"), Object(S.isEmpty)(s) || Object(S.checkValidString)(s, \"cameraId\", 0, 255, !1), Object(S.isEmpty)(d) || Object(S.checkValidEnum)(d, \"facingMode\", [\"user\", \"environment\", \"left\", \"right\"]), Object(S.isEmpty)(u) || Object(S.checkValidString)(u, \"microphoneId\", 0, 255, !1), Object(S.isEmpty)(p) || Object(S.checkValidString)(p, \"extensionId\"), Object(S.isEmpty)(g) || Object(S.checkValidEnum)(g, \"mediaSource\", [\"screen\", \"application\", \"window\"]), Object(S.isEmpty)(l) || Object(S.checkValidBoolean)(l, \"mirror\"), !Object(S.isEmpty)(m)) {\n        var E = m.AGC,\n            _ = m.AEC,\n            y = m.ANS;\n        Object(S.isEmpty)(E) || Object(S.checkValidBoolean)(E, \"AGC\"), Object(S.isEmpty)(_) || Object(S.checkValidBoolean)(_, \"AEC\"), Object(S.isEmpty)(y) || Object(S.checkValidBoolean)(y, \"ANS\");\n      }\n\n      Object(S.isEmpty)(v) || Object(S.checkValidEnum)(v, \"optimizationMode\", [\"detail\", \"motion\"]), c.default.debug(\"Create stream\"), !0 === a && !0 === r && c.default.warning(\"Do not set both 'screenAudio' and 'audio' to true at the same time\"), e.screen && !v && (e.optimizationMode = \"detail\");\n      var R = O(e);\n      return t(), R;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.d(t, \"a\", function () {\n      return I;\n    }), n.d(t, \"b\", function () {\n      return b;\n    });\n    var r = n(4),\n        i = n(7),\n        o = n.n(i),\n        a = n(12),\n        s = n.n(a),\n        c = n(17),\n        d = n.n(c),\n        u = n(0),\n        l = n(15),\n        f = n(2);\n\n    function p(e) {\n      if (\"undefined\" == typeof Symbol || null == e[Symbol.iterator]) {\n        if (Array.isArray(e) || (e = function (e, t) {\n          if (!e) return;\n          if (\"string\" == typeof e) return g(e, t);\n          var n = Object.prototype.toString.call(e).slice(8, -1);\n          \"Object\" === n && e.constructor && (n = e.constructor.name);\n          if (\"Map\" === n || \"Set\" === n) return Array.from(n);\n          if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return g(e, t);\n        }(e))) {\n          var t = 0,\n              n = function n() {};\n\n          return {\n            s: n,\n            n: function n() {\n              return t >= e.length ? {\n                done: !0\n              } : {\n                done: !1,\n                value: e[t++]\n              };\n            },\n            e: function (_e3) {\n              function e(_x3) {\n                return _e3.apply(this, arguments);\n              }\n\n              e.toString = function () {\n                return _e3.toString();\n              };\n\n              return e;\n            }(function (e) {\n              throw e;\n            }),\n            f: n\n          };\n        }\n\n        throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n      }\n\n      var r,\n          i,\n          o = !0,\n          a = !1;\n      return {\n        s: function s() {\n          r = e[Symbol.iterator]();\n        },\n        n: function n() {\n          var e = r.next();\n          return o = e.done, e;\n        },\n        e: function (_e4) {\n          function e(_x4) {\n            return _e4.apply(this, arguments);\n          }\n\n          e.toString = function () {\n            return _e4.toString();\n          };\n\n          return e;\n        }(function (e) {\n          a = !0, i = e;\n        }),\n        f: function f() {\n          try {\n            o || null == r.return || r.return();\n          } finally {\n            if (a) throw i;\n          }\n        }\n      };\n    }\n\n    function g(e, t) {\n      (null == t || t > e.length) && (t = e.length);\n\n      for (var n = 0, r = new Array(t); n < t; n++) {\n        r[n] = e[n];\n      }\n\n      return r;\n    }\n\n    var m = function m(e) {\n      var t = {},\n          n = l.RTCPeerConnection;\n      t.uid = e.uid, t.isVideoMute = e.isVideoMute, t.isAudioMute = e.isAudioMute, t.isSubscriber = e.isSubscriber, t.clientId = e.clientId, t.filterStatsCache = [], t.originStatsCache = [], t.lastTimeGetStats = null, t.pc_config = {\n        iceServers: []\n      };\n      var i = {\n        id: \"outbound_audio_ssrc_send\",\n        type: \"ssrc\",\n        mediaType: \"\",\n        googCodecName: \"opus\",\n        aecDivergentFilterFraction: \"0\",\n        audioInputLevel: \"0\",\n        bytesSent: \"0\",\n        packetsSent: \"0\",\n        googEchoCancellationReturnLoss: \"0\",\n        googEchoCancellationReturnLossEnhancement: \"0\"\n      },\n          a = {\n        id: \"outbound_video_ssrc_send\",\n        type: \"ssrc\",\n        mediaType: \"\",\n        googCodecName: e.codec ? e.codec.toUpperCase() : \"\",\n        bytesSent: \"0\",\n        packetsLost: \"0\",\n        packetsSent: \"0\",\n        googAdaptationChanges: \"0\",\n        googAvgEncodeMs: \"0\",\n        googEncodeUsagePercent: \"0\",\n        googFirsReceived: \"0\",\n        googFrameHeightSent: \"0\",\n        googFrameHeightInput: \"0\",\n        googFrameRateInput: \"0\",\n        googFrameRateSent: \"0\",\n        googFrameWidthSent: \"0\",\n        googFrameWidthInput: \"0\",\n        googNacksReceived: \"0\",\n        googPlisReceived: \"0\",\n        googRtt: \"0\"\n      },\n          c = {\n        id: \"inbound_audio_ssrc_recv\",\n        type: \"ssrc\",\n        mediaType: \"\",\n        googCodecName: \"opus\",\n        audioOutputLevel: \"0\",\n        bytesReceived: \"0\",\n        packetsLost: \"0\",\n        packetsReceived: \"0\",\n        googAccelerateRate: \"0\",\n        googCurrentDelayMs: \"0\",\n        googDecodingCNG: \"0\",\n        googDecodingCTN: \"0\",\n        googDecodingCTSG: \"0\",\n        googDecodingNormal: \"0\",\n        googDecodingPLC: \"0\",\n        googDecodingPLCCNG: \"0\",\n        googExpandRate: \"0\",\n        googJitterBufferMs: \"0\",\n        googJitterReceived: \"0\",\n        googPreemptiveExpandRate: \"0\",\n        googPreferredJitterBufferMs: \"0\",\n        googSecondaryDecodedRate: \"0\",\n        googSpeechExpandRate: \"0\"\n      },\n          g = {\n        id: \"inbound_video_ssrc_recv\",\n        type: \"ssrc\",\n        mediaType: \"\",\n        googTargetDelayMs: \"0\",\n        packetsLost: \"0\",\n        googDecodeMs: \"0\",\n        googMaxDecodeMs: \"0\",\n        googRenderDelayMs: \"0\",\n        googFrameWidthReceived: \"0\",\n        googFrameHeightReceived: \"0\",\n        googFrameRateReceived: \"0\",\n        googFrameRateDecoded: \"0\",\n        googFrameRateOutput: \"0\",\n        googJitterBufferMs: \"0\",\n        googCurrentDelayMs: \"0\",\n        googMinPlayoutDelayMs: \"0\",\n        googNacksSent: \"0\",\n        googPlisSent: \"0\",\n        googFirsSent: \"0\",\n        bytesReceived: \"0\",\n        packetsReceived: \"0\",\n        googFramesReceived: \"0\",\n        googFramesDecoded: \"0\"\n      },\n          m = {\n        id: \"bweforvideo\",\n        type: \"VideoBwe\",\n        googAvailableSendBandwidth: \"0\",\n        googAvailableReceiveBandwidth: \"0\",\n        googActualEncBitrate: \"0\",\n        googRetransmitBitrate: \"0\",\n        googTargetEncBitrate: \"0\",\n        googBucketDelay: \"0\",\n        googTransmitBitrate: \"0\"\n      };\n      t.con = {\n        optional: [{\n          DtlsSrtpKeyAgreement: !0\n        }]\n      }, e.iceServers instanceof Array ? t.pc_config.iceServers = e.iceServers : (e.stunServerUrl && (e.stunServerUrl instanceof Array ? e.stunServerUrl.map(function (e) {\n        \"string\" == typeof e && \"\" !== e && t.pc_config.iceServers.push({\n          url: e\n        });\n      }) : \"string\" == typeof e.stunServerUrl && \"\" !== e.stunServerUrl && t.pc_config.iceServers.push({\n        url: e.stunServerUrl\n      })), e.turnServers && (e.turnServers instanceof Array ? e.turnServers.map(function (e) {\n        e.udpport && t.pc_config.iceServers.push({\n          username: e.username,\n          credential: e.credential,\n          credentialType: \"password\",\n          urls: (e.useTurns ? \"turns:\" : \"turn:\") + e.url + \":\" + e.udpport + \"?transport=udp\"\n        }), \"string\" == typeof e.tcpport && \"\" !== e.tcpport && t.pc_config.iceServers.push({\n          username: e.username,\n          credential: e.credential,\n          credentialType: \"password\",\n          urls: (e.useTurns ? \"turns:\" : \"turn:\") + e.url + \":\" + e.tcpport + \"?transport=tcp\"\n        }), !0 === e.forceturn && (t.pc_config.iceTransportPolicy = \"relay\");\n      }) : u.default.error(\"[\".concat(t.clientId, \"] turnServers is not a array\")))), void 0 === e.audio && (e.audio = !0), void 0 === e.video && (e.video = !0), t.mediaConstraints = r.isChromeKernel() && r.getChromeKernelVersion() < 103 ? {\n        mandatory: {\n          OfferToReceiveVideo: e.video,\n          OfferToReceiveAudio: e.audio\n        }\n      } : {\n        offerToReceiveVideo: e.video,\n        offerToReceiveAudio: e.audio\n      }, t.roapSessionId = 103;\n\n      try {\n        t.pc_config.sdpSemantics = Object(f.getParameter)(\"PLAN\"), t.peerConnection = new n(t.pc_config, t.con);\n      } catch (e) {\n        delete t.pc_config.sdpSemantics, t.peerConnection = new n(t.pc_config, t.con);\n        var h = t.peerConnection.getConfiguration();\n        h.sdpSemantics && Object(f.setParameter)(\"PLAN\", h.sdpSemantics);\n      }\n\n      t.iceCandidateTimer = setTimeout(function () {\n        t.iceCandidateTimer = null, u.default.debug(\"[\".concat(t.clientId, \"]Candidates collected: \").concat(t.iceCandidateCount)), t.moreIceComing && (t.moreIceComing = !1, t.markActionNeeded());\n      }, Object(f.getParameter)(\"CANDIDATE_TIMEOUT\")), t.peerConnection.onicecandidate = function (e) {\n        var n, r, i, o;\n        r = (n = t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\\ssrflx.+\\r\\n/), i = n.match(/a=candidate:.+typ\\shost.+\\r\\n/), o = n.match(/a=candidate:.+typ\\srelay.+\\r\\n/), null === r && null === i && null === o || void 0 !== t.ice || !t.iceCandidateTimer || (clearTimeout(t.iceCandidateTimer), t.iceCandidateTimer = null, t.ice = 0, t.moreIceComing = !1, t.markActionNeeded()), t.iceCandidateCount = t.iceCandidateCount + 1;\n      };\n\n      var v = function v(e) {\n        return e = e.replace(\"a=x-google-flag:conference\\r\\n\", \"\");\n      },\n          E = function E(n) {\n        var r, i;\n\n        if ((r = n.match(/m=video.*\\r\\n/)) && e.minVideoBW && e.maxVideoBW) {\n          i = r[0] + \"b=AS:\" + e.maxVideoBW + \"\\r\\n\";\n          var o = 0,\n              a = 0;\n          \"h264\" === e.codec ? (o = n.search(/a=rtpmap:(\\d+) H264\\/90000\\r\\n/), a = n.search(/H264\\/90000\\r\\n/)) : \"vp8\" === e.codec ? (o = n.search(/a=rtpmap:(\\d+) VP8\\/90000\\r\\n/), a = n.search(/VP8\\/90000\\r\\n/)) : \"vp9\" === e.codec && (o = n.search(/a=rtpmap:(\\d+) VP9\\/90000\\r\\n/), a = n.search(/VP9\\/90000\\r\\n/)), -1 !== o && -1 !== a && a - o > 10 && (i = i + \"a=fmtp:\" + n.slice(o + 9, a - 1) + \" x-google-min-bitrate=\" + e.minVideoBW + \"\\r\\n\"), n = (n = (n = n.replace(r[0], i)).replace(\"a=fmtp:102 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f\", \"a=fmtp:102 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f\")).replace(\"a=fmtp:125 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f\", \"a=fmtp:125 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f\"), u.default.debug(\"[\" + t.clientId + \"]Set Video Bitrate - min:\" + e.minVideoBW + \" max:\" + e.maxVideoBW);\n        }\n\n        return (r = n.match(/m=audio.*\\r\\n/)) && e.maxAudioBW && (i = r[0] + \"b=AS:\" + e.maxAudioBW + \"\\r\\n\", n = n.replace(r[0], i)), n;\n      };\n\n      t.processSignalingMessage = function (n) {\n        var r,\n            i = JSON.parse(n);\n        t.incomingMessage = i, \"new\" === t.state ? \"OFFER\" === i.messageType ? (r = {\n          sdp: i.sdp,\n          type: \"offer\"\n        }, t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch(function (e) {}), t.state = \"offer-received\", t.markActionNeeded()) : t.error(\"Illegal message for this state: \" + i.messageType + \" in state \" + t.state) : \"offer-sent\" === t.state ? \"ANSWER\" === i.messageType ? ((r = {\n          sdp: i.sdp,\n          type: \"answer\"\n        }).sdp = v(r.sdp), r.sdp = E(r.sdp), e.screen && \"detail\" === e.optimizationMode && (u.default.debug(\"[\".concat(t.client, \"] remove screen share abs ext\")), r.sdp = r.sdp.replace(/a=.*abs-send-time\\r\\n/g, \"\").replace(/a=.*goog-remb\\r\\n/g, \"\")), e.isSubscriber && (r.sdp = r.sdp.replace(\"minptime=10\", \"minptime=10;stereo=1; sprop-stereo=1\")), t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch(function (e) {}), t.state = \"established\") : \"pr-answer\" === i.messageType ? (r = {\n          sdp: i.sdp,\n          type: \"pr-answer\"\n        }, t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch(function (e) {})) : \"offer\" === i.messageType ? t.error(\"Not written yet\") : t.error(\"Illegal message for this state: \" + i.messageType + \" in state \" + t.state) : \"established\" === t.state && (\"OFFER\" === i.messageType ? (r = {\n          sdp: i.sdp,\n          type: \"offer\"\n        }, t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch(function (e) {}), t.state = \"offer-received\", t.markActionNeeded()) : \"ANSWER\" === i.messageType ? ((r = {\n          sdp: i.sdp,\n          type: \"answer\"\n        }).sdp = v(r.sdp), r.sdp = E(r.sdp), t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch(function (e) {})) : t.error(\"Illegal message for this state: \" + i.messageType + \" in state \" + t.state));\n      }, t.setRtpSenderParameters = function () {\n        var e = d()(s.a.mark(function e(n) {\n          var r, i, o;\n          return s.a.wrap(function (e) {\n            for (;;) {\n              switch (e.prev = e.next) {\n                case 0:\n                  if (r = t.peerConnection.getSenders(), i = r.find(function (e) {\n                    return \"video\" === e.track.kind;\n                  })) {\n                    e.next = 4;\n                    break;\n                  }\n\n                  return e.abrupt(\"return\");\n\n                case 4:\n                  return (o = i.getParameters()).degradationPreference = n, e.prev = 6, u.default.debug(\"[\".concat(t.clientId, \"] setParameters\"), o), e.next = 10, i.setParameters(o);\n\n                case 10:\n                  e.next = 15;\n                  break;\n\n                case 12:\n                  e.prev = 12, e.t0 = e.catch(6), u.default.debug(\"[\".concat(t.clientId, \"] setParameters failed, ignore\"));\n\n                case 15:\n                case \"end\":\n                  return e.stop();\n              }\n            }\n          }, e, null, [[6, 12]]);\n        }));\n        return function (t) {\n          return e.apply(this, arguments);\n        };\n      }();\n      var S = 0,\n          _ = 0;\n      return t.getVideoRelatedStats = function (e) {\n        t.getStats(function (n) {\n          n.forEach(function (n) {\n            if (t.isSubscriber) {\n              if (\"video\" === n.mediaType && n.id && ~n.id.indexOf(\"recv\")) {\n                if (r.isChromeKernel() && +r.getBrowserVersion() >= 76) {\n                  var i = +n.googFramesReceived - S,\n                      o = +n.googFramesDecoded - _;\n                  t._setStat(g, \"googFrameRateReceived\", i), t._setStat(g, \"googFrameRateDecoded\", o), t._setStat(g, \"googFrameRateOutput\", o), S = +n.googFramesReceived, _ = +n.googFramesDecoded;\n                }\n\n                e && e({\n                  mediaType: \"video\",\n                  peerId: t.uid,\n                  isVideoMute: t.isVideoMute,\n                  frameRateReceived: n.googFrameRateReceived,\n                  frameRateDecoded: n.googFrameRateDecoded,\n                  bytesReceived: n.bytesReceived,\n                  packetsReceived: n.packetsReceived,\n                  packetsLost: n.packetsLost\n                });\n              }\n            } else \"video\" === n.mediaType && n.id && ~n.id.indexOf(\"send\") && e && e({\n              mediaType: \"video\",\n              isVideoMute: t.isVideoMute,\n              frameRateInput: n.googFrameRateInput,\n              frameRateSent: n.googFrameRateSent,\n              googRtt: n.googRtt\n            });\n          });\n        });\n      }, t.getAudioRelatedStats = function (e) {\n        t.getStats(function (n) {\n          n.forEach(function (n) {\n            t.isSubscriber && \"audio\" === n.mediaType && n.id && ~n.id.indexOf(\"recv\") && e && e({\n              mediaType: \"audio\",\n              peerId: t.uid,\n              isAudioMute: t.isAudioMute,\n              frameDropped: parseInt(n.googDecodingPLC) + parseInt(n.googDecodingPLCCNG) + \"\",\n              frameReceived: n.googDecodingCTN,\n              googJitterReceived: n.googJitterReceived,\n              bytesReceived: n.bytesReceived,\n              packetsReceived: n.packetsReceived,\n              packetsLost: n.packetsLost\n            });\n          });\n        });\n      }, t.getStatsRate = function (e) {\n        t.getStats(function (t) {\n          e(t);\n        });\n      }, t.getStats = function (e, n) {\n        n = (n = n || 500) > 500 ? 500 : n, t.lastTimeGetStats && Date.now() - t.lastTimeGetStats < n ? e && e(t.filterStatsCache, t.originStatsCache) : (t.lastTimeGetStats = Date.now(), this._getStats(function (n, r) {\n          t.filterStatsCache = n, t.originStatsCache = r, e && e(n, r);\n        }));\n      }, t._setStat = function (e, t, n) {\n        e.hasOwnProperty(t) && (null != n && n !== 1 / 0 && n == n || (n = 0), e[t] = n + \"\");\n      }, t._processGetStatsAfterChrome76 = function (e) {\n        var n = this;\n        t.lastStats || (t.lastStats = new Map()), t.peerConnection.getStats().then(function (r) {\n          var s,\n              d = [],\n              u = [],\n              l = new Map(),\n              f = new Date(),\n              h = p(r.values());\n\n          try {\n            for (h.s(); !(s = h.n()).done;) {\n              var v = s.value;\n              \"codec\" != v.type ? \"candidate-pair\" != v.type ? (\"inbound-rtp\" === v.type && \"video\" === v.mediaType && l.set(\"inbound-video\", v), \"inbound-rtp\" === v.type && \"audio\" === v.mediaType && l.set(\"inbound-audio\", v), \"outbound-rtp\" === v.type && \"audio\" === v.mediaType && l.set(\"outbound-audio\", v), \"outbound-rtp\" === v.type && \"video\" === v.mediaType && l.set(\"outbound-video\", v), \"track\" === v.type && \"video\" === v.kind && v.remoteSource && l.set(\"remote-video-track\", v), \"track\" === v.type && \"audio\" === v.kind && v.remoteSource && l.set(\"remote-audio-track\", v), \"remote-inbound-rtp\" === v.type && \"video\" === v.mediaType && l.set(\"remote-inbound-video\", v), \"remote-inbound-rtp\" === v.type && \"audio\" === v.mediaType && l.set(\"remote-inbound-audio\", v), \"track\" !== v.type || \"video\" !== v.kind || v.remoteSource || l.set(\"local-video-track\", v), \"track\" !== v.type || \"audio\" !== v.kind || v.remoteSource || l.set(\"local-audio-track\", v), \"media-source\" === v.type && \"video\" === v.kind && l.set(\"media-source-video\", v), \"media-source\" === v.type && \"audio\" === v.kind && l.set(\"media-source-audio\", v)) : u.push(v) : d.push(v);\n            }\n          } catch (e) {\n            h.e(e);\n          } finally {\n            h.f();\n          }\n\n          l.set(\"codec\", d), l.set(\"candidatePairs\", u), l.set(\"timestamp\", +f);\n          var E = null,\n              S = null;\n          if (g.timestamp = f, c.timestamp = f, i.timestamp = f, i.timestamp = f, m.timestamp = f, n.isSubscriber) (E = l.get(\"inbound-video\")) && (t._setStat(g, \"id\", \"inbound_video_ssrc_recv\"), t._setStat(g, \"mediaType\", E.mediaType), t._setStat(g, \"packetsLost\", E.packetsLost), t._setStat(g, \"googDecodeMs\", null), t._setStat(g, \"googMaxDecodeMs\", null), t._setStat(g, \"googRenderDelayMs\", null), t._setStat(g, \"googMinPlayoutDelayMs\", null), t._setStat(g, \"googNacksSent\", E.nackCount), t._setStat(g, \"googPlisSent\", E.pliCount), t._setStat(g, \"googFirsSent\", E.firCount), t._setStat(g, \"bytesReceived\", E.bytesReceived), t._setStat(g, \"packetsReceived\", E.packetsReceived)), (E = l.get(\"inbound-audio\")) && (t._setStat(c, \"id\", \"inbound_audio_ssrc_recv\"), t._setStat(c, \"mediaType\", E.mediaType), t._setStat(c, \"bytesReceived\", E.bytesReceived), t._setStat(c, \"packetsLost\", E.packetsLost), t._setStat(c, \"packetsReceived\", E.packetsReceived), t._setStat(c, \"googAccelerateRate\", E.removedSamplesForAcceleration), t._setStat(c, \"googCurrentDelayMs\", E.jitterBufferDelay), t._setStat(c, \"googDecodingCNG\", null), t._setStat(c, \"googDecodingCTN\", null), t._setStat(c, \"googDecodingCTSG\", null), t._setStat(c, \"googDecodingNormal\", null), t._setStat(c, \"googDecodingPLC\", null), t._setStat(c, \"googDecodingPLCCNG\", null), t._setStat(c, \"googJitterReceived\", E.jitter), t._setStat(c, \"googPreferredJitterBufferMs\", null), t._setStat(c, \"googSecondaryDecodedRate\", null)), (E = l.get(\"remote-video-track\")) && (t._setStat(g, \"googTargetDelayMs\", E.jitterBufferDelay), t._setStat(g, \"googFrameWidthReceived\", E.frameWidth), t._setStat(g, \"googFrameHeightReceived\", E.frameHeight), t._setStat(g, \"googJitterBufferMs\", E.jitterBufferDelay / E.jitterBufferEmittedCount * 1e3), t._setStat(g, \"googCurrentDelayMs\", E.jitterBufferDelay), t._setStat(g, \"googFramesDecoded\", E.framesDecoded), t._setStat(g, \"googFramesReceived\", E.framesReceived)), (E = l.get(\"remote-audio-track\")) && (t._setStat(c, \"audioOutputLevel\", 32767 * E.audioLevel), t._setStat(c, \"googJitterBufferMs\", E.jitterBufferDelay / E.jitterBufferEmittedCount * 1e3), t._setStat(c, \"googExpandRate\", E.concealedSamples), t._setStat(c, \"googPreemptiveExpandRate\", E.insertedSamplesForDeceleration), t._setStat(c, \"googSpeechExpandRate\", E.silentConcealedSamples));else {\n            var _ = t.lastStats.get(\"timestamp\"),\n                y = t.lastStats.get(\"outbound-video\");\n\n            if ((E = l.get(\"outbound-audio\")) && (t._setStat(i, \"id\", \"outbound_audio_ssrc_send\"), t._setStat(i, \"mediaType\", E.mediaType), t._setStat(i, \"aecDivergentFilterFraction\", null), t._setStat(i, \"bytesSent\", E.bytesSent), t._setStat(i, \"packetsSent\", E.packetsSent), S = E.transportId), E = l.get(\"outbound-video\")) {\n              if (t._setStat(a, \"id\", \"outbound_video_ssrc_send\"), t._setStat(a, \"mediaType\", E.mediaType), t._setStat(a, \"bytesSent\", E.bytesSent), t._setStat(a, \"packetsSent\", E.packetsSent), t._setStat(a, \"googAdaptationChanges\", E.qualityLimitationDurations), t._setStat(a, \"googAvgEncodeMs\", null), t._setStat(a, \"googEncodeUsagePercent\", null), S = E.transportId, E.totalEncodedBytesTarget && y && y.totalEncodedBytesTarget) {\n                var R = (E.totalEncodedBytesTarget - y.totalEncodedBytesTarget) / (+new Date() - _);\n\n                t._setStat(m, \"googTargetEncBitrate\", Math.floor(8 * R * 1e3));\n              }\n\n              if (E.retransmittedBytesSent && y && y.retransmittedBytesSent) {\n                var T = (E.retransmittedBytesSent - y.retransmittedBytesSent) / (+new Date() - _);\n\n                t._setStat(m, \"googRetransmitBitrate\", Math.floor(8 * T * 1e3));\n              }\n\n              if (E.bytesSent && y && y.bytesSent) {\n                var I = (E.bytesSent - y.bytesSent) / (+new Date() - _);\n                t._setStat(m, \"googTransmitBitrate\", Math.floor(8 * I * 1e3)), t._setStat(m, \"googActualEncBitrate\", Math.floor(8 * I * 1e3));\n              }\n\n              if (E.totalPacketSendDelay && y && y.totalPacketSendDelay) {\n                var b = (E.totalPacketSendDelay - y.totalPacketSendDelay) / (+new Date() - _);\n\n                t._setStat(m, \"googBucketDelay\", Math.floor(1e3 * b));\n              }\n            }\n\n            if ((E = l.get(\"remote-inbound-video\")) && (t._setStat(a, \"packetsLost\", E.packetsLost), t._setStat(a, \"googRtt\", E.roundTripTime)), (E = l.get(\"local-video-track\")) && (t._setStat(a, \"googFrameHeightSent\", E.frameHeight), t._setStat(a, \"googFrameWidthSent\", E.frameWidth), void 0 !== E.framesPerSecond && t._setStat(a, \"googFrameRateSent\", E.framesPerSecond)), (E = l.get(\"local-audio-track\")) && (t._setStat(i, \"googEchoCancellationReturnLoss\", E.echoReturnLoss), t._setStat(i, \"googEchoCancellationReturnLossEnhancement\", E.echoReturnLossEnhancement)), (E = l.get(\"media-source-video\")) && (t._setStat(a, \"googFrameHeightInput\", E.height), t._setStat(a, \"googFrameWidthInput\", E.width), t._setStat(a, \"googFrameRateInput\", E.framesPerSecond)), (E = l.get(\"media-source-audio\")) && t._setStat(i, \"audioInputLevel\", 32767 * E.totalAudioEnergy), (E = l.get(\"inbound-video\")) && (t._setStat(a, \"googFirsReceived\", E.firCount), t._setStat(a, \"googNacksReceived\", E.nackCount), t._setStat(a, \"googPlisReceived\", E.pliCount)), S) l.get(\"candidatePairs\").map(function (e) {\n              S == e.transportId && t._setStat(m, \"googAvailableSendBandwidth\", e.availableOutgoingBitrate);\n            });else {\n              var A = l.get(\"candidatePairs\")[0];\n              A && t._setStat(m, \"googAvailableSendBandwidth\", A.availableOutgoingBitrate);\n            }\n          }\n          t.lastStats = l;\n          var O = [o()({}, a), o()({}, i), o()({}, g), o()({}, c), o()({}, m)];\n          O.push({\n            id: \"time\",\n            startTime: t.connectedTime,\n            timestamp: new Date()\n          }), e(O);\n        });\n      }, t._processGetStatsBeforeChrome76 = function (e) {\n        t.peerConnection.getStats(function (n) {\n          var r = [],\n              s = [],\n              d = null;\n          Object.keys(n).forEach(function (e) {\n            var t = n[e];\n            t && (s.push(t), d = t.timestamp, \"VideoBwe\" === t.type ? m = t : t.id.indexOf(\"_send\") > -1 && \"video\" === t.mediaType ? a = t : t.id.indexOf(\"_send\") > -1 && \"audio\" === t.mediaType ? i = t : t.id.indexOf(\"_recv\") > -1 && \"video\" === t.mediaType ? g = t : t.id.indexOf(\"_recv\") > -1 && \"audio\" === t.mediaType && (c = t));\n          }), (r = [o()({}, a), o()({}, i), o()({}, g), o()({}, c), o()({}, m)]).push({\n            id: \"time\",\n            startTime: t.connectedTime,\n            timestamp: d || new Date()\n          }), e(r, s);\n        });\n      }, t._getStats = function (e) {\n        Object(f.getParameter)(\"CHROME_NEW_STATS\") && r.isChromeKernel() && +r.getBrowserVersion() >= 76 ? t._processGetStatsAfterChrome76(e) : t._processGetStatsBeforeChrome76(e);\n      }, t.addTrack = function (e, n) {\n        if (\"unified-plan\" === Object(f.getParameter)(\"PLAN\")) {\n          var r = \"audio\" === e.kind ? t._audioSender : t._videoSender;\n\n          if (r) {\n            var i = t.peerConnection.getTransceivers().find(function (e) {\n              return e.sender === r;\n            });\n            r.replaceTrack(e).then(function () {\n              i.direction = \"sendrecv\", t.renegotiate();\n            });\n          } else r = t.peerConnection.addTrack(e, n), \"audio\" === e.kind ? t._audioSender = r : t._videoSender = r;\n        } else t.peerConnection.addTrack(e, n);\n      }, t.removeTrack = function (e, n) {\n        if (\"unified-plan\" === Object(f.getParameter)(\"PLAN\")) {\n          var r = t.peerConnection.getTransceivers().find(function (t) {\n            return t.sender.track === e;\n          });\n          r && (r.direction = \"inactive\", t.peerConnection.removeTrack(r.sender));\n        } else t.peerConnection.removeTrack(t.peerConnection.getSenders().find(function (t) {\n          return t.track == e;\n        }));\n      }, t.addStream = function (e) {\n        \"unified-plan\" === Object(f.getParameter)(\"PLAN\") ? e.getTracks().forEach(function (n) {\n          var r = t.peerConnection.addTrack(n, e);\n          \"audio\" === n.kind ? t._audioSender = r : t._videoSender = r;\n        }) : (t.peerConnection.addStream(e), t.markActionNeeded());\n      }, t.removeStream = function () {\n        t.markActionNeeded();\n      }, t.close = function () {\n        t.state = \"closed\", t.peerConnection.close();\n      }, t.markActionNeeded = function () {\n        t.actionNeeded = !0, t.doLater(function () {\n          t.onstablestate();\n        });\n      }, t.doLater = function (e) {\n        window.setTimeout(e, 1);\n      }, t.onstablestate = function () {\n        var n;\n\n        if (t.actionNeeded) {\n          if (\"new\" === t.state || \"established\" === t.state) t.peerConnection.createOffer(t.mediaConstraints).then(function (n) {\n            return n ? n.sdp !== t.prevOffer ? (e.isSubscriber && (n.sdp = n.sdp.replace(\"minptime=10\", \"minptime=10;stereo=1; sprop-stereo=1\")), t.peerConnection.setLocalDescription(n), t.state = \"preparing-offer\", void t.markActionNeeded()) : void u.default.debug(\"[\" + t.clientId + \"]Not sending a new offer\") : (u.default.debug(\"[\" + t.clientId + \"]sessionDescription is null\"), void t.onsignalingmessage(null));\n          }).catch(function (e) {\n            u.default.debug(\"[\" + t.clientId + \"]peer connection create offer failed \", e);\n          });else if (\"preparing-offer\" === t.state) {\n            if (t.moreIceComing) return;\n            t.prevOffer = t.peerConnection.localDescription.sdp, t.offerCandidates = t.prevOffer.match(/a=candidate.+\\r\\n/g) || [], t.offerCandidates.length || (e.isCloudProxy3 && e.onNoIceCandidate && e.onNoIceCandidate(), u.default.warning(\"[\".concat(t.clientId, \"]No Ice Candidate generated\")), Object(f.getParameter)(\"SHIM_CANDIDATE\") ? (u.default.debug(\"Shimming fake candidate\"), t.prevOffer += \"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\\r\\n\") : u.default.error(\"[\".concat(t.clientId, \"]None Ice Candidate not allowed\"))), t.prevOffer = t.prevOffer.replace(/a=candidate:.+typ\\shost.+\\r\\n/g, \"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\\r\\n\"), t.sendMessage(\"OFFER\", t.prevOffer), t.state = \"offer-sent\";\n          } else if (\"offer-received\" === t.state) t.peerConnection.createAnswer(function (e) {\n            if (t.peerConnection.setLocalDescription(e), t.state = \"offer-received-preparing-answer\", t.iceStarted) t.markActionNeeded();else {\n              var n = new Date();\n              u.default.debug(\"[\" + t.clientId + \"]\" + n.getTime() + \": Starting ICE in responder\"), t.iceStarted = !0;\n            }\n          }, function (e) {\n            u.default.debug(\"[\" + t.clientId + \"]peer connection create answer failed \", e);\n          }, t.mediaConstraints);else if (\"offer-received-preparing-answer\" === t.state) {\n            if (t.moreIceComing) return;\n            n = t.peerConnection.localDescription.sdp, t.sendMessage(\"ANSWER\", n), t.state = \"established\";\n          } else u.default.debug(\"[\".concat(t.clientId, \"] Dazed and confused in state \").concat(t.state, \", stopping here'\"));\n          t.actionNeeded = !1;\n        }\n      }, t.sendMessage = function (e, n) {\n        var r = {};\n        r.messageType = e, r.sdp = n, \"OFFER\" === e ? (r.offererSessionId = t.sessionId, r.answererSessionId = t.otherSessionId, r.seq = t.sequenceNumber += 1, r.tiebreaker = Math.floor(429496723 * Math.random() + 1)) : (r.offererSessionId = t.incomingMessage.offererSessionId, r.answererSessionId = t.sessionId, r.seq = t.incomingMessage.seq), t.onsignalingmessage(JSON.stringify(r));\n      }, t._getSender = function (e) {\n        if (t.peerConnection && t.peerConnection.getSenders) {\n          var n = t.peerConnection.getSenders().find(function (t) {\n            return t.track.kind == e;\n          });\n          if (n) return n;\n        }\n\n        return null;\n      }, t.hasSender = function (e) {\n        return !!t._getSender(e);\n      }, t.replaceTrack = function (e, n, r) {\n        var i = t._getSender(e.kind);\n\n        if (!i) {\n          return r(\"NO_SENDER_FOUND\");\n        }\n\n        try {\n          i.replaceTrack(e);\n        } catch (e) {\n          return r && r(e);\n        }\n\n        setTimeout(function () {\n          return n && n();\n        }, 50);\n      }, t.error = function (e) {\n        throw \"Error in RoapOnJsep: \" + e;\n      }, t.sessionId = t.roapSessionId += 1, t.sequenceNumber = 0, t.actionNeeded = !1, t.iceStarted = !1, t.moreIceComing = !0, t.iceCandidateCount = 0, t.onsignalingmessage = e.callback, t.peerConnection.ontrack = function (e) {\n        t.onaddstream && (t.onaddstream(e, \"ontrack\"), t.peerConnection.onaddstream = null);\n      }, t.peerConnection.onaddstream = function (e) {\n        t.onaddstream && (t.onaddstream(e, \"onaddstream\"), t.peerConnection.ontrack = null);\n      }, t.peerConnection.onremovestream = function (e) {\n        t.onremovestream && t.onremovestream(e);\n      }, t.peerConnection.oniceconnectionstatechange = function (e) {\n        u.default.debug(t.peerConnection.iceConnectionState), \"connected\" === e.currentTarget.iceConnectionState && (t.connectedTime = new Date()), t.oniceconnectionstatechange && t.oniceconnectionstatechange(e.currentTarget.iceConnectionState);\n      }, t.renegotiate = function () {\n        void 0 !== t.prevOffer && t.peerConnection.createOffer().then(function (e) {\n          return \"unified-plan\" !== Object(f.getParameter)(\"PLAN\") && (e.sdp = e.sdp.replace(/a=recvonly\\r\\n/g, \"a=inactive\\r\\n\")), e.sdp = v(e.sdp), e.sdp = E(e.sdp), t.peerConnection.setLocalDescription(e);\n        }).then(function () {\n          t.onnegotiationneeded && t.onnegotiationneeded(t.peerConnection.localDescription.sdp);\n        }).catch(function (e) {\n          u.default.error(\"createOffer error: \", e.message || e);\n        });\n      }, t.peerConnection.onnegotiationneeded = t.renegotiate, t.onaddstream = null, t.onremovestream = null, t.onnegotiationneeded = null, t.state = \"new\", t.markActionNeeded(), t;\n    },\n        h = function h(e) {\n      var t = {},\n          n = l.RTCPeerConnection;\n      t.uid = e.uid, t.isVideoMute = e.isVideoMute, t.isAudioMute = e.isAudioMute, t.isSubscriber = e.isSubscriber, t.clientId = e.clientId, t.filterStatsCache = [], t.originStatsCache = [], t.lastTimeGetStats = null, t.pc_config = {\n        iceServers: [],\n        bundlePolicy: \"max-bundle\"\n      }, t.con = {\n        optional: [{\n          DtlsSrtpKeyAgreement: !0\n        }]\n      }, e.iceServers instanceof Array ? t.pc_config.iceServers = e.iceServers : (e.stunServerUrl && (e.stunServerUrl instanceof Array ? e.stunServerUrl.map(function (e) {\n        \"string\" == typeof e && \"\" !== e && t.pc_config.iceServers.push({\n          url: e\n        });\n      }) : \"string\" == typeof e.stunServerUrl && \"\" !== e.stunServerUrl && t.pc_config.iceServers.push({\n        url: e.stunServerUrl\n      })), e.turnServers && (e.turnServers instanceof Array ? e.turnServers.map(function (e) {\n        e.udpport && t.pc_config.iceServers.push({\n          username: e.username,\n          credential: e.credential,\n          credentialType: \"password\",\n          urls: (e.useTurns ? \"turns:\" : \"turn:\") + e.url + \":\" + e.udpport + \"?transport=udp\"\n        }), \"string\" == typeof e.tcpport && \"\" !== e.tcpport && t.pc_config.iceServers.push({\n          username: e.username,\n          credential: e.credential,\n          credentialType: \"password\",\n          urls: (e.useTurns ? \"turns:\" : \"turn:\") + e.url + \":\" + e.tcpport + \"?transport=tcp\"\n        }), !0 === e.forceturn && (t.pc_config.iceTransportPolicy = \"relay\");\n      }) : u.default.error(\"[\".concat(t.clientId, \"] turnServers is not a array\")))), void 0 === e.audio && (e.audio = !0), void 0 === e.video && (e.video = !0), t.mediaConstraints = {\n        mandatory: {\n          OfferToReceiveVideo: e.video,\n          OfferToReceiveAudio: e.audio\n        }\n      }, t.roapSessionId = 103;\n\n      try {\n        t.pc_config.sdpSemantics = Object(f.getParameter)(\"PLAN\"), t.peerConnection = new n(t.pc_config, t.con);\n      } catch (e) {\n        delete t.pc_config.sdpSemantics, t.peerConnection = new n(t.pc_config, t.con);\n      }\n\n      t.iceCandidateTimer = setTimeout(function () {\n        t.iceCandidateTimer = null, t.moreIceComing && (t.moreIceComing = !1, t.markActionNeeded());\n      }, Object(f.getParameter)(\"CANDIDATE_TIMEOUT\")), t.peerConnection.onicecandidate = function (e) {\n        var n, r, i, o;\n        r = (n = t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\\ssrflx.+\\r\\n/), i = n.match(/a=candidate:.+typ\\shost.+\\r\\n/), o = n.match(/a=candidate:.+typ\\srelay.+\\r\\n/), 0 === t.iceCandidateCount && (t.timeout = setTimeout(function () {\n          t.moreIceComing && (t.moreIceComing = !1, t.markActionNeeded());\n        }, 1e3)), null === r && null === i && null === o || void 0 !== t.ice || !t.iceCandidateTimer || (clearTimeout(t.iceCandidateTimer), t.iceCandidateTimer = null, t.ice = 0, t.moreIceComing = !1, t.markActionNeeded()), t.iceCandidateCount = t.iceCandidateCount + 1;\n      };\n\n      var r = function r(t) {\n        return e.screen && (t = t.replace(\"a=x-google-flag:conference\\r\\n\", \"\")), t;\n      },\n          i = function i(n) {\n        var r, i;\n        return (r = n.match(/m=video.*\\r\\n/)) && e.minVideoBW && e.maxVideoBW && (i = r[0] + \"b=AS:\" + e.maxVideoBW + \"\\r\\n\", n = n.replace(r[0], i), u.default.debug(\"[\" + t.clientId + \"]Set Video Bitrate - min:\" + e.minVideoBW + \" max:\" + e.maxVideoBW)), (r = n.match(/m=audio.*\\r\\n/)) && e.maxAudioBW && (i = r[0] + \"b=AS:\" + e.maxAudioBW + \"\\r\\n\", n = n.replace(r[0], i)), n;\n      };\n\n      t.processSignalingMessage = function (n) {\n        var o,\n            a = JSON.parse(n);\n        t.incomingMessage = a, \"new\" === t.state ? \"OFFER\" === a.messageType ? (o = {\n          sdp: a.sdp,\n          type: \"offer\"\n        }, t.peerConnection.setRemoteDescription(new RTCSessionDescription(o)), t.state = \"offer-received\", t.markActionNeeded()) : t.error(\"Illegal message for this state: \" + a.messageType + \" in state \" + t.state) : \"offer-sent\" === t.state ? \"ANSWER\" === a.messageType ? ((o = {\n          sdp: a.sdp,\n          type: \"answer\"\n        }).sdp = r(o.sdp), o.sdp = i(o.sdp), o.sdp = o.sdp.replace(/a=x-google-flag:conference\\r\\n/g, \"\"), e.screen && \"detail\" === e.optimizationMode && (u.default.debug(\"[\".concat(t.client, \"] remove screen share abs ext\")), o.sdp = o.sdp.replace(/a=.*abs-send-time\\r\\n/g, \"\").replace(/a=.*goog-remb\\r\\n/g, \"\")), t.peerConnection.setRemoteDescription(new RTCSessionDescription(o)), t.state = \"established\") : \"pr-answer\" === a.messageType ? (o = {\n          sdp: a.sdp,\n          type: \"pr-answer\"\n        }, t.peerConnection.setRemoteDescription(new RTCSessionDescription(o))) : \"offer\" === a.messageType ? t.error(\"Not written yet\") : t.error(\"Illegal message for this state: \" + a.messageType + \" in state \" + t.state) : \"established\" === t.state && (\"OFFER\" === a.messageType ? (o = {\n          sdp: a.sdp,\n          type: \"offer\"\n        }, t.peerConnection.setRemoteDescription(new RTCSessionDescription(o)), t.state = \"offer-received\", t.markActionNeeded()) : \"ANSWER\" === a.messageType ? ((o = {\n          sdp: a.sdp,\n          type: \"answer\"\n        }).sdp = r(o.sdp), o.sdp = i(o.sdp), t.peerConnection.setRemoteDescription(new RTCSessionDescription(o))) : t.error(\"Illegal message for this state: \" + a.messageType + \" in state \" + t.state));\n      }, t.setRtpSenderParameters = function () {\n        var e = d()(s.a.mark(function e(n) {\n          return s.a.wrap(function (e) {\n            for (;;) {\n              switch (e.prev = e.next) {\n                case 0:\n                  t.degradation = n;\n\n                case 1:\n                case \"end\":\n                  return e.stop();\n              }\n            }\n          }, e);\n        }));\n        return function (t) {\n          return e.apply(this, arguments);\n        };\n      }(), t._setRtpSenderParameters = function () {\n        var e = d()(s.a.mark(function e(n) {\n          var r, i, o;\n          return s.a.wrap(function (e) {\n            for (;;) {\n              switch (e.prev = e.next) {\n                case 0:\n                  if (r = t.peerConnection.getSenders(), i = r.find(function (e) {\n                    return e && e.track && \"video\" === e.track.kind;\n                  })) {\n                    e.next = 4;\n                    break;\n                  }\n\n                  return e.abrupt(\"return\");\n\n                case 4:\n                  return (o = i.getParameters()).degradationPreference = n, e.prev = 6, u.default.debug(\"[\".concat(t.clientId, \"] setParameters\"), o), e.next = 10, i.setParameters(o);\n\n                case 10:\n                  e.next = 15;\n                  break;\n\n                case 12:\n                  e.prev = 12, e.t0 = e.catch(6), u.default.debug(\"[\".concat(t.clientId, \"] setParameters failed, ignore\"));\n\n                case 15:\n                case \"end\":\n                  return e.stop();\n              }\n            }\n          }, e, null, [[6, 12]]);\n        }));\n        return function (t) {\n          return e.apply(this, arguments);\n        };\n      }();\n      var o = {\n        id: \"\",\n        type: \"\",\n        mediaType: \"\",\n        googCodecName: \"opus\",\n        aecDivergentFilterFraction: \"0\",\n        audioInputLevel: \"0\",\n        bytesSent: \"0\",\n        packetsSent: \"0\",\n        googEchoCancellationReturnLoss: \"0\",\n        googEchoCancellationReturnLossEnhancement: \"0\"\n      },\n          a = {\n        id: \"\",\n        type: \"\",\n        mediaType: \"\",\n        googCodecName: e.codec ? e.codec.toUpperCase() : \"\",\n        bytesSent: \"0\",\n        packetsLost: \"0\",\n        packetsSent: \"0\",\n        googAdaptationChanges: \"0\",\n        googAvgEncodeMs: \"0\",\n        googEncodeUsagePercent: \"0\",\n        googFirsReceived: \"0\",\n        googFrameHeightSent: \"0\",\n        googFrameHeightInput: \"0\",\n        googFrameRateInput: \"0\",\n        googFrameRateSent: \"0\",\n        googFrameWidthSent: \"0\",\n        googFrameWidthInput: \"0\",\n        googNacksReceived: \"0\",\n        googPlisReceived: \"0\",\n        googRtt: \"0\",\n        googFramesEncoded: \"0\"\n      },\n          c = {\n        id: \"\",\n        type: \"\",\n        mediaType: \"\",\n        audioOutputLevel: \"0\",\n        bytesReceived: \"0\",\n        packetsLost: \"0\",\n        packetsReceived: \"0\",\n        googAccelerateRate: \"0\",\n        googCurrentDelayMs: \"0\",\n        googDecodingCNG: \"0\",\n        googDecodingCTN: \"0\",\n        googDecodingCTSG: \"0\",\n        googDecodingNormal: \"0\",\n        googDecodingPLC: \"0\",\n        googDecodingPLCCNG: \"0\",\n        googExpandRate: \"0\",\n        googJitterBufferMs: \"0\",\n        googJitterReceived: \"0\",\n        googPreemptiveExpandRate: \"0\",\n        googPreferredJitterBufferMs: \"0\",\n        googSecondaryDecodedRate: \"0\",\n        googSpeechExpandRate: \"0\"\n      },\n          p = {\n        id: \"\",\n        type: \"\",\n        mediaType: \"\",\n        googTargetDelayMs: \"0\",\n        packetsLost: \"0\",\n        googDecodeMs: \"0\",\n        googMaxDecodeMs: \"0\",\n        googRenderDelayMs: \"0\",\n        googFrameWidthReceived: \"0\",\n        googFrameHeightReceived: \"0\",\n        googFrameRateReceived: \"0\",\n        googFrameRateDecoded: \"0\",\n        googFrameRateOutput: \"0\",\n        googFramesDecoded: \"0\",\n        googFrameReceived: \"0\",\n        googJitterBufferMs: \"0\",\n        googCurrentDelayMs: \"0\",\n        googMinPlayoutDelayMs: \"0\",\n        googNacksSent: \"0\",\n        googPlisSent: \"0\",\n        googFirsSent: \"0\",\n        bytesReceived: \"0\",\n        packetsReceived: \"0\"\n      },\n          g = {\n        id: \"bweforvideo\",\n        type: \"VideoBwe\",\n        googAvailableSendBandwidth: \"0\",\n        googAvailableReceiveBandwidth: \"0\",\n        googActualEncBitrate: \"0\",\n        googRetransmitBitrate: \"0\",\n        googTargetEncBitrate: \"0\",\n        googBucketDelay: \"0\",\n        googTransmitBitrate: \"0\"\n      },\n          m = 0,\n          h = 0,\n          v = 0;\n      return t.isRemoteVideoStats = function (e) {\n        return !!(e.frameHeight && e.frameWidth && e.remoteSource);\n      }, t.getVideoRelatedStats = function (n) {\n        t.peerConnection.getStats().then(function (r) {\n          r.forEach(function (r) {\n            if (t.isSubscriber) {\n              var i = {\n                peerId: t.uid,\n                mediaType: \"video\",\n                isVideoMute: t.isVideoMute\n              };\n\n              if (\"track\" === r.type && (~r.id.indexOf(\"video\") || ~r.trackIdentifier.indexOf(\"v\") || t.isRemoteVideoStats(r))) {\n                if (!t.lastReport) return void (t.lastReport = r);\n                i.frameRateReceived = r.framesReceived - t.lastReport.framesReceived + \"\", i.frameRateDecoded = r.framesDecoded - t.lastReport.framesDecoded + \"\", t.lastReport = r;\n              }\n\n              \"inbound-rtp\" === r.type && ~r.id.indexOf(\"Video\") && (i.bytesReceived = r.bytesReceived + \"\", i.packetsReceived = r.packetsReceived + \"\", i.packetsLost = r.packetsLost + \"\"), n && n(i);\n            } else if (\"outbound-rtp\" === r.type && ~r.id.indexOf(\"Video\")) {\n              if (!t.lastReport) return void (t.lastReport = r);\n              n && n({\n                mediaType: \"video\",\n                isVideoMute: t.isVideoMute,\n                frameRateInput: e.maxFrameRate + \"\",\n                frameRateSent: r.framesEncoded - t.lastReport.framesEncoded + \"\"\n              }), t.lastReport = r;\n            }\n          });\n        });\n      }, t.getAudioRelatedStats = function (e) {\n        t.peerConnection.getStats().then(function (n) {\n          n.forEach(function (n) {\n            t.isSubscriber && \"inbound-rtp\" === n.type && ~n.id.indexOf(\"Audio\") && e && e({\n              peerId: t.uid,\n              mediaType: \"audio\",\n              isAudioMute: t.isAudioMute,\n              frameDropped: n.packetsLost + \"\",\n              frameReceived: n.packetsReceived + \"\",\n              googJitterReceived: n.jitter + \"\",\n              bytesReceived: n.bytesReceived + \"\",\n              packetsReceived: n.packetsReceived + \"\",\n              packetsLost: n.packetsLost + \"\"\n            });\n          });\n        });\n      }, t.getStatsRate = function (e) {\n        t.getStats(function (t) {\n          t.forEach(function (e) {\n            \"outbound-rtp\" === e.type && \"video\" === e.mediaType && e.googFramesEncoded && (e.googFrameRateSent = Math.ceil((e.googFramesEncoded - m) / 3).toString(), m = e.googFramesEncoded), \"inbound-rtp\" === e.type && -1 != e.id.indexOf(\"55543\") && (e.googFrameRateReceived && (e.googFrameRateReceived = Math.ceil((e.googFrameReceived - v) / 3).toString(), v = e.googFrameReceived), e.googFrameRateDecoded && (e.googFrameRateDecoded = Math.ceil((e.googFramesDecoded - h) / 3).toString(), h = e.googFramesDecoded));\n          }), e(t);\n        });\n      }, t.getStats = function (e, n) {\n        n = (n = n || 500) > 500 ? 500 : n, t.lastTimeGetStats && Date.now() - t.lastTimeGetStats < n ? e && e(t.filterStatsCache, t.originStatsCache) : this._getStats(function (n, r) {\n          t.filterStatsCache = n, t.originStatsCache = r, t.lastTimeGetStats = Date.now(), e && e(n, r);\n        });\n      }, t._getStats = function (n) {\n        var r = [];\n        t.peerConnection.getStats().then(function (i) {\n          i.forEach(function (t) {\n            var n;\n            (r.push(t), \"outbound-rtp\" === t.type && \"audio\" === t.mediaType && (o.id = t.id, o.type = t.type, o.mediaType = t.mediaType, o.bytesSent = t.bytesSent ? t.bytesSent + \"\" : \"0\", o.packetsSent = t.packetsSent ? t.packetsSent + \"\" : \"0\", e.agoraStream.local && (o.audioInputLevel = Math.round(32767 * e.agoraStream.getAudioLevel()).toString())), \"outbound-rtp\" === t.type && \"video\" === t.mediaType) && (a.id = t.id, a.type = t.type, a.mediaType = t.mediaType, a.bytesSent = t.bytesSent ? t.bytesSent + \"\" : \"0\", a.packetsSent = t.packetsSent ? t.packetsSent + \"\" : \"0\", a.googPlisReceived = t.pliCount ? t.pliCount + \"\" : \"0\", a.googNacksReceived = t.nackCount ? t.nackCount + \"\" : \"0\", a.googFirsReceived = t.firCount ? t.firCount + \"\" : \"0\", a.googFramesEncoded = t.framesEncoded ? t.framesEncoded + \"\" : \"0\", (n = i.get(t.trackId)) && (a.googFrameHeightSent = n.frameHeight && n.frameHeight.toString(), a.googFrameWidthSent = n.frameWidth && n.frameWidth.toString()));\n            \"inbound-rtp\" !== t.type || -1 == t.id.indexOf(\"44444\") && \"audio\" !== t.mediaType || (c.id = t.id, c.type = t.type, c.mediaType = \"audio\", c.packetsReceived = t.packetsReceived ? t.packetsReceived + \"\" : \"0\", c.bytesReceived = t.bytesReceived ? t.bytesReceived + \"\" : \"0\", c.packetsLost = t.packetsLost ? t.packetsLost + \"\" : \"0\", c.packetsReceived = t.packetsReceived ? t.packetsReceived + \"\" : \"0\", c.googJitterReceived = t.jitter ? t.jitter + \"\" : \"0\", (n = i.get(t.trackId)) && (c.audioOutputLevel = n.audioLevel && Math.round(32767 * n.audioLevel).toString()), e.agoraStream.local || c.audioOutputLevel || (c.audioOutputLevel = Math.round(32767 * e.agoraStream.getAudioLevel()).toString()));\n            \"inbound-rtp\" !== t.type || -1 == t.id.indexOf(\"55543\") && \"video\" !== t.mediaType || (p.id = t.id, p.type = t.type, p.mediaType = \"video\", p.packetsReceived = t.packetsReceived ? t.packetsReceived + \"\" : \"0\", p.bytesReceived = t.bytesReceived ? t.bytesReceived + \"\" : \"0\", p.packetsLost = t.packetsLost ? t.packetsLost + \"\" : \"0\", p.googJitterBufferMs = t.jitter ? t.jitter + \"\" : \"0\", p.googNacksSent = t.nackCount ? t.nackCount + \"\" : \"0\", p.googPlisSent = t.pliCount ? t.pliCount + \"\" : \"0\", p.googFirsSent = t.firCount ? t.firCount + \"\" : \"0\", (n = i.get(t.trackId)) && (p.googFrameHeightReceived = n.frameHeight && n.frameHeight.toString(), p.googFrameWidthReceived = n.frameWidth && n.frameWidth.toString(), p.googFrameReceived = n.framesReceived && n.framesReceived.toString(), p.googFramesDecoded = n.framesDecoded && n.framesDecoded.toString()));\n            \"candidate-pair\" === t.type && (0 == t.availableIncomingBitrate ? g.googAvailableSendBandwidth = t.availableOutgoingBitrate + \"\" : g.googAvailableReceiveBandwidth = t.availableIncomingBitrate + \"\");\n          });\n          var s = [g, o, a, c, p];\n          s.push({\n            id: \"time\",\n            startTime: t.connectedTime,\n            timestamp: new Date()\n          }), n(s, r);\n        }).catch(function (e) {\n          u.default.error(\"[\" + t.clientId + \"] \", e);\n        });\n      }, t.addTrack = function (e, n) {\n        t.peerConnection.addTrack(e, n);\n      }, t.removeTrack = function (e, n) {\n        var r = t.peerConnection.getSenders().find(function (t) {\n          return t.track == e;\n        });\n        r.replaceTrack(null), t.peerConnection.removeTrack(r);\n      }, t.addStream = function (e) {\n        window.navigator.userAgent.indexOf(\"Safari\") > -1 && -1 === navigator.userAgent.indexOf(\"Chrome\") ? e.getTracks().forEach(function (n) {\n          return t.peerConnection.addTrack(n, e);\n        }) : t.peerConnection.addStream(e), t.markActionNeeded();\n      }, t.removeStream = function () {\n        t.markActionNeeded();\n      }, t.close = function () {\n        t.state = \"closed\", t.peerConnection.close();\n      }, t.markActionNeeded = function () {\n        t.actionNeeded = !0, t.doLater(function () {\n          t.onstablestate();\n        });\n      }, t.doLater = function (e) {\n        window.setTimeout(e, 1);\n      }, t.onstablestate = function () {\n        var n;\n\n        if (t.actionNeeded) {\n          if (\"new\" === t.state || \"established\" === t.state) {\n            if (e.isSubscriber) t.peerConnection.addTransceiver(\"audio\", {\n              direction: \"recvonly\"\n            }), t.peerConnection.addTransceiver(\"video\", {\n              direction: \"recvonly\"\n            });\n            t.peerConnection.createOffer(t.mediaConstraints).then(function (n) {\n              if (n.sdp = i(n.sdp), e.isSubscriber || (n.sdp = n.sdp.replace(/a=.*video-orientation\\r\\n/g, \"\")), n.sdp !== t.prevOffer) return t.peerConnection.setLocalDescription(n), t.state = \"preparing-offer\", void t.markActionNeeded();\n              u.default.debug(\"[\" + t.clientId + \"]Not sending a new offer\");\n            }).catch(function (e) {\n              u.default.debug(\"[\" + t.clientId + \"]peer connection create offer failed \", e);\n            });\n          } else if (\"preparing-offer\" === t.state) {\n            if (t.moreIceComing) return;\n            t.prevOffer = t.peerConnection.localDescription.sdp, t.offerCandidates = t.prevOffer.match(/a=candidate.+\\r\\n/g) || [], t.offerCandidates.length || (u.default.warning(\"[\".concat(t.clientId, \"]No Ice Candidate generated\")), e.isCloudProxy3 && e.onNoIceCandidate && e.onNoIceCandidate(), Object(f.getParameter)(\"SHIM_CANDIDATE\") ? (u.default.debug(\"Shimming fake candidate\"), t.prevOffer += \"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\\r\\n\") : u.default.error(\"[\".concat(t.clientId, \"]None Ice Candidate not allowed\"))), t.prevOffer = t.prevOffer.replace(/a=candidate:.+typ\\shost.+\\r\\n/g, \"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\\r\\n\"), t.sendMessage(\"OFFER\", t.prevOffer), t.state = \"offer-sent\";\n          } else if (\"offer-received\" === t.state) t.peerConnection.createAnswer(function (e) {\n            if (t.peerConnection.setLocalDescription(e), t.state = \"offer-received-preparing-answer\", t.iceStarted) t.markActionNeeded();else {\n              var n = new Date();\n              u.default.debug(\"[\" + t.clientId + \"]\" + n.getTime() + \": Starting ICE in responder\"), t.iceStarted = !0;\n            }\n          }, function (e) {\n            u.default.debug(\"[\" + t.clientId + \"]peer connection create answer failed \", e);\n          }, t.mediaConstraints);else if (\"offer-received-preparing-answer\" === t.state) {\n            if (t.moreIceComing) return;\n            n = t.peerConnection.localDescription.sdp, t.sendMessage(\"ANSWER\", n), t.state = \"established\";\n          } else t.debug(\"Dazed and confused in state \" + t.state + \", stopping here\");\n\n          t.actionNeeded = !1;\n        }\n      }, t.sendMessage = function (e, n) {\n        var r = {};\n        r.messageType = e, r.sdp = n, \"OFFER\" === e ? (r.offererSessionId = t.sessionId, r.answererSessionId = t.otherSessionId, r.seq = t.sequenceNumber += 1, r.tiebreaker = Math.floor(429496723 * Math.random() + 1)) : (r.offererSessionId = t.incomingMessage.offererSessionId, r.answererSessionId = t.sessionId, r.seq = t.incomingMessage.seq), t.onsignalingmessage(JSON.stringify(r));\n      }, t._getSender = function (e) {\n        if (t.peerConnection && t.peerConnection.getSenders) {\n          var n = t.peerConnection.getSenders().find(function (t) {\n            return t.track.kind == e;\n          });\n          if (n) return n;\n        }\n\n        return null;\n      }, t.hasSender = function (e) {\n        return !!t._getSender(e);\n      }, t.replaceTrack = function (e, n, r) {\n        var i = t._getSender(e.kind);\n\n        if (!i) {\n          return r(\"NO_SENDER_FOUND\");\n        }\n\n        try {\n          i.replaceTrack(e);\n        } catch (e) {\n          return r && r(e);\n        }\n\n        setTimeout(function () {\n          return n && n();\n        }, 50);\n      }, t.error = function (e) {\n        throw \"Error in RoapOnJsep: \" + e;\n      }, t.sessionId = t.roapSessionId += 1, t.sequenceNumber = 0, t.actionNeeded = !1, t.iceStarted = !1, t.moreIceComing = !0, t.iceCandidateCount = 0, t.onsignalingmessage = e.callback, t.peerConnection.ontrack = function (e) {\n        t.onaddstream && t.onaddstream(e, \"ontrack\");\n      }, t.peerConnection.onremovestream = function (e) {\n        t.onremovestream && t.onremovestream(e);\n      }, t.peerConnection.oniceconnectionstatechange = function (e) {\n        \"connected\" === e.currentTarget.iceConnectionState && (t.connectedTime = new Date(), t._setRtpSenderParameters(t.degradation)), t.oniceconnectionstatechange && t.oniceconnectionstatechange(e.currentTarget.iceConnectionState);\n      }, t.renegotiate = function () {\n        t.isSubscriber || (u.default.debug(\"[\".concat(t.uid, \"]\"), \"renegotiating\"), void 0 !== t.prevOffer && t.peerConnection.createOffer().then(function (e) {\n          return e.sdp = e.sdp.replace(/a=recvonly\\r\\n/g, \"a=inactive\\r\\n\"), e.sdp = r(e.sdp), e.sdp = i(e.sdp), t.peerConnection.setLocalDescription(e);\n        }).then(function () {\n          t.onnegotiationneeded && t.onnegotiationneeded(t.peerConnection.localDescription.sdp);\n        }).catch(function (e) {\n          u.default.error(\"createOffer error: \", e);\n        }));\n      }, t.isSubscriber || (t.peerConnection.onnegotiationneeded = t.renegotiate), t.onaddstream = null, t.onremovestream = null, t.state = \"new\", t.markActionNeeded(), t;\n    };\n\n    function v(e) {\n      if (\"undefined\" == typeof Symbol || null == e[Symbol.iterator]) {\n        if (Array.isArray(e) || (e = function (e, t) {\n          if (!e) return;\n          if (\"string\" == typeof e) return E(e, t);\n          var n = Object.prototype.toString.call(e).slice(8, -1);\n          \"Object\" === n && e.constructor && (n = e.constructor.name);\n          if (\"Map\" === n || \"Set\" === n) return Array.from(n);\n          if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return E(e, t);\n        }(e))) {\n          var t = 0,\n              n = function n() {};\n\n          return {\n            s: n,\n            n: function n() {\n              return t >= e.length ? {\n                done: !0\n              } : {\n                done: !1,\n                value: e[t++]\n              };\n            },\n            e: function (_e5) {\n              function e(_x5) {\n                return _e5.apply(this, arguments);\n              }\n\n              e.toString = function () {\n                return _e5.toString();\n              };\n\n              return e;\n            }(function (e) {\n              throw e;\n            }),\n            f: n\n          };\n        }\n\n        throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n      }\n\n      var r,\n          i,\n          o = !0,\n          a = !1;\n      return {\n        s: function s() {\n          r = e[Symbol.iterator]();\n        },\n        n: function n() {\n          var e = r.next();\n          return o = e.done, e;\n        },\n        e: function (_e6) {\n          function e(_x6) {\n            return _e6.apply(this, arguments);\n          }\n\n          e.toString = function () {\n            return _e6.toString();\n          };\n\n          return e;\n        }(function (e) {\n          a = !0, i = e;\n        }),\n        f: function f() {\n          try {\n            o || null == r.return || r.return();\n          } finally {\n            if (a) throw i;\n          }\n        }\n      };\n    }\n\n    function E(e, t) {\n      (null == t || t > e.length) && (t = e.length);\n\n      for (var n = 0, r = new Array(t); n < t; n++) {\n        r[n] = e[n];\n      }\n\n      return r;\n    }\n\n    var S = function S(e) {\n      var t = {},\n          n = (mozRTCPeerConnection, mozRTCSessionDescription),\n          r = !1;\n      t.uid = e.uid, t.isVideoMute = e.isVideoMute, t.isAudioMute = e.isAudioMute, t.isSubscriber = e.isSubscriber, t.clientId = e.clientId, t.filterStatsCache = [], t.originStatsCache = [], t.lastTimeGetStats = null, t.pc_config = {\n        iceServers: []\n      }, e.iceServers instanceof Array ? e.iceServers.map(function (e) {\n        0 === e.url.indexOf(\"stun:\") && t.pc_config.iceServers.push({\n          url: e.url\n        });\n      }) : (e.stunServerUrl && (e.stunServerUrl instanceof Array ? e.stunServerUrl.map(function (e) {\n        \"string\" == typeof e && \"\" !== e && t.pc_config.iceServers.push({\n          url: e\n        });\n      }) : \"string\" == typeof e.stunServerUrl && \"\" !== e.stunServerUrl && t.pc_config.iceServers.push({\n        url: e.stunServerUrl\n      })), e.turnServers && (e.turnServers instanceof Array ? e.turnServers.map(function (e) {\n        e.udpport && t.pc_config.iceServers.push({\n          username: e.username,\n          credential: e.credential,\n          credentialType: \"password\",\n          urls: (e.useTurns ? \"turns:\" : \"turn:\") + e.url + \":\" + e.udpport + \"?transport=udp\"\n        }), \"string\" == typeof e.tcpport && \"\" !== e.tcpport && t.pc_config.iceServers.push({\n          username: e.username,\n          credential: e.credential,\n          credentialType: \"password\",\n          urls: (e.useTurns ? \"turns:\" : \"turn:\") + e.url + \":\" + e.tcpport + \"?transport=tcp\"\n        }), !0 === e.forceturn && (t.pc_config.iceTransportPolicy = \"relay\");\n      }) : u.default.error(\"[\".concat(t.clientId, \"] turnServers is not a array\")))), void 0 === e.audio && (e.audio = !0), void 0 === e.video && (e.video = !0), t.mediaConstraints = {\n        offerToReceiveAudio: e.audio,\n        offerToReceiveVideo: e.video,\n        mozDontOfferDataChannel: !0\n      }, t.roapSessionId = 103, t.peerConnection = new l.RTCPeerConnection(t.pc_config), t.iceCandidateTimer = setTimeout(function () {\n        t.iceCandidateTimer = null, u.default.debug(\"[\".concat(t.clientId, \"]Candidates collected: \").concat(t.iceCandidateCount)), t.moreIceComing && (t.moreIceComing = !1, t.markActionNeeded());\n      }, Object(f.getParameter)(\"CANDIDATE_TIMEOUT\")), t.peerConnection.onicecandidate = function (e) {\n        var n, r, i, o;\n        r = (n = t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\\ssrflx.+\\r\\n/), i = n.match(/a=candidate:.+typ\\shost.+\\r\\n/), o = n.match(/a=candidate:.+typ\\srelay.+\\r\\n/), null === r && null === i && null === o || void 0 !== t.ice || !t.iceCandidateTimer || (clearTimeout(t.iceCandidateTimer), t.iceCandidateTimer = null, t.ice = 0, t.moreIceComing = !1, t.markActionNeeded()), t.iceCandidateCount = t.iceCandidateCount + 1;\n      }, t.checkMLineReverseInSDP = function (e) {\n        return !(!~e.indexOf(\"m=audio\") || !~e.indexOf(\"m=video\")) && e.indexOf(\"m=audio\") > e.indexOf(\"m=video\");\n      }, t.reverseMLineInSDP = function (e) {\n        var t = e.split(\"m=audio\"),\n            n = t[1].split(\"m=video\"),\n            r = \"m=video\" + n[1],\n            i = \"m=audio\" + n[0];\n        return e = t[0] + r + i;\n      }, t.processSignalingMessage = function (r) {\n        var i,\n            o = JSON.parse(r);\n        t.incomingMessage = o, \"new\" === t.state ? \"OFFER\" === o.messageType ? (o.sdp = h(o.sdp), i = {\n          sdp: o.sdp,\n          type: \"offer\"\n        }, t.peerConnection.setRemoteDescription(new n(i), function () {\n          u.default.debug(\"[\" + t.clientId + \"]setRemoteDescription succeeded\");\n        }, function (e) {\n          u.default.info(\"[\" + t.clientId + \"]setRemoteDescription failed: \" + e.name);\n        }), t.state = \"offer-received\", t.markActionNeeded()) : t.error(\"Illegal message for this state: \" + o.messageType + \" in state \" + t.state) : \"offer-sent\" === t.state ? \"ANSWER\" === o.messageType ? (o.sdp = h(o.sdp), o.sdp = o.sdp.replace(/ generation 0/g, \"\"), o.sdp = o.sdp.replace(/ udp /g, \" UDP \"), -1 !== o.sdp.indexOf(\"a=group:BUNDLE\") ? (o.sdp = o.sdp.replace(/a=group:BUNDLE audio video/, \"a=group:BUNDLE sdparta_0 sdparta_1\"), o.sdp = o.sdp.replace(/a=mid:audio/, \"a=mid:sdparta_0\"), o.sdp = o.sdp.replace(/a=mid:video/, \"a=mid:sdparta_1\")) : (o.sdp = o.sdp.replace(/a=mid:audio/, \"a=mid:sdparta_0\"), o.sdp = o.sdp.replace(/a=mid:video/, \"a=mid:sdparta_0\")), i = {\n          sdp: o.sdp,\n          type: \"answer\"\n        }, e.screen && \"detail\" === e.optimizationMode && (u.default.debug(\"[\".concat(t.client, \"] remove screen share abs ext\")), o.sdp = E(i.sdp)), t.peerConnection.setRemoteDescription(new n(i), function () {\n          u.default.debug(\"[\" + t.clientId + \"]setRemoteDescription succeeded\");\n        }, function (e) {\n          u.default.info(\"[\" + t.clientId + \"]setRemoteDescription failed: \" + e);\n        }), t.state = \"established\") : \"pr-answer\" === o.messageType ? (i = {\n          sdp: o.sdp,\n          type: \"pr-answer\"\n        }, t.peerConnection.setRemoteDescription(new n(i), function () {\n          u.default.debug(\"[\" + t.clientId + \"]setRemoteDescription succeeded\");\n        }, function (e) {\n          u.default.info(\"[\" + t.clientId + \"]setRemoteDescription failed: \" + e.name);\n        })) : \"offer\" === o.messageType ? t.error(\"Not written yet\") : t.error(\"Illegal message for this state: \" + o.messageType + \" in state \" + t.state) : \"established\" === t.state && (\"OFFER\" === o.messageType ? (i = {\n          sdp: o.sdp,\n          type: \"offer\"\n        }, t.peerConnection.setRemoteDescription(new n(i), function () {\n          u.default.debug(\"[\" + t.clientId + \"]setRemoteDescription succeeded\");\n        }, function (e) {\n          u.default.info(\"[\" + t.clientId + \"]setRemoteDescription failed: \" + e.name);\n        }), t.state = \"offer-received\", t.markActionNeeded()) : t.error(\"Illegal message for this state: \" + o.messageType + \" in state \" + t.state));\n      }, t.setRtpSenderParameters = function () {\n        var e = d()(s.a.mark(function e(n) {\n          var r, i, o;\n          return s.a.wrap(function (e) {\n            for (;;) {\n              switch (e.prev = e.next) {\n                case 0:\n                  if (r = t.peerConnection.getSenders(), i = r.find(function (e) {\n                    return \"video\" === e.track.kind;\n                  })) {\n                    e.next = 4;\n                    break;\n                  }\n\n                  return e.abrupt(\"return\");\n\n                case 4:\n                  return (o = i.getParameters()).degradationPreference = n, e.prev = 6, u.default.debug(\"[\".concat(t.clientId, \"] setParameters\"), o), e.next = 10, i.setParameters(o);\n\n                case 10:\n                  e.next = 15;\n                  break;\n\n                case 12:\n                  e.prev = 12, e.t0 = e.catch(6), u.default.debug(\"[\".concat(t.clientId, \"] setParameters failed, ignore\"));\n\n                case 15:\n                case \"end\":\n                  return e.stop();\n              }\n            }\n          }, e, null, [[6, 12]]);\n        }));\n        return function (t) {\n          return e.apply(this, arguments);\n        };\n      }();\n      var i = {\n        id: \"\",\n        type: \"\",\n        mediaType: \"opus\",\n        googCodecName: \"opus\",\n        aecDivergentFilterFraction: \"0\",\n        audioInputLevel: \"0\",\n        bytesSent: \"0\",\n        packetsSent: \"0\",\n        googEchoCancellationReturnLoss: \"0\",\n        googEchoCancellationReturnLossEnhancement: \"0\"\n      },\n          o = {\n        id: \"\",\n        type: \"\",\n        mediaType: \"\",\n        googCodecName: e.codec ? e.codec.toUpperCase() : \"\",\n        bytesSent: \"0\",\n        packetsLost: \"0\",\n        packetsSent: \"0\",\n        googAdaptationChanges: \"0\",\n        googAvgEncodeMs: \"0\",\n        googEncodeUsagePercent: \"0\",\n        googFirsReceived: \"0\",\n        googFrameHeightSent: \"0\",\n        googFrameHeightInput: \"0\",\n        googFrameRateInput: \"0\",\n        googFrameRateSent: \"0\",\n        googFrameWidthSent: \"0\",\n        googFrameWidthInput: \"0\",\n        googNacksReceived: \"0\",\n        googPlisReceived: \"0\",\n        googRtt: \"0\"\n      },\n          a = {\n        id: \"\",\n        type: \"\",\n        mediaType: \"\",\n        audioOutputLevel: \"0\",\n        bytesReceived: \"0\",\n        packetsLost: \"0\",\n        packetsReceived: \"0\",\n        googAccelerateRate: \"0\",\n        googCurrentDelayMs: \"0\",\n        googDecodingCNG: \"0\",\n        googDecodingCTN: \"0\",\n        googDecodingCTSG: \"0\",\n        googDecodingNormal: \"0\",\n        googDecodingPLC: \"0\",\n        googDecodingPLCCNG: \"0\",\n        googExpandRate: \"0\",\n        googJitterBufferMs: \"0\",\n        googJitterReceived: \"0\",\n        googPreemptiveExpandRate: \"0\",\n        googPreferredJitterBufferMs: \"0\",\n        googSecondaryDecodedRate: \"0\",\n        googSpeechExpandRate: \"0\"\n      },\n          c = {\n        id: \"\",\n        type: \"\",\n        mediaType: \"\",\n        googTargetDelayMs: \"0\",\n        packetsLost: \"0\",\n        googDecodeMs: \"0\",\n        googMaxDecodeMs: \"0\",\n        googRenderDelayMs: \"0\",\n        googFrameWidthReceived: \"0\",\n        googFrameHeightReceived: \"0\",\n        googFrameRateReceived: \"0\",\n        googFrameRateDecoded: \"0\",\n        googFrameRateOutput: \"0\",\n        googJitterBufferMs: \"0\",\n        googCurrentDelayMs: \"0\",\n        googMinPlayoutDelayMs: \"0\",\n        googNacksSent: \"0\",\n        googPlisSent: \"0\",\n        googFirsSent: \"0\",\n        bytesReceived: \"0\",\n        packetsReceived: \"0\",\n        googFramesDecoded: \"0\"\n      },\n          p = 0,\n          g = 0,\n          m = 0;\n      t.getVideoRelatedStats = function (e) {\n        t.peerConnection.getStats().then(function (n) {\n          var r,\n              i = v(n.values());\n\n          try {\n            for (i.s(); !(r = i.n()).done;) {\n              var o = r.value;\n\n              if (t.isSubscriber) {\n                if ((\"inbound-rtp\" === o.type || \"inboundrtp\" === o.type) && \"video\" === o.mediaType) {\n                  if (!t.lastReport) return void (t.lastReport = o);\n                  e && e({\n                    browser: \"firefox\",\n                    mediaType: \"video\",\n                    peerId: t.uid,\n                    isVideoMute: t.isVideoMute,\n                    frameRateReceived: Math.round(o.framerateMean) + \"\",\n                    frameRateDecoded: o.framesDecoded - t.lastReport.framesDecoded + \"\",\n                    bytesReceived: o.bytesReceived + \"\",\n                    packetsReceived: o.packetsReceived + \"\",\n                    packetsLost: o.packetsLost + \"\"\n                  }), t.lastReport = o;\n                }\n              } else if ((\"outbound-rtp\" === o.type || \"outboundrtp\" === o.type) && \"video\" === o.mediaType) {\n                if (!t.lastReport) return void (t.lastReport = o);\n                e && e({\n                  mediaType: \"video\",\n                  isVideoMute: t.isVideoMute,\n                  frameRateInput: Math.round(o.framerateMean) + \"\",\n                  frameRateSent: o.framesEncoded - t.lastReport.framesEncoded + \"\"\n                }), t.lastReport = o;\n              }\n            }\n          } catch (e) {\n            i.e(e);\n          } finally {\n            i.f();\n          }\n        });\n      }, t.getAudioRelatedStats = function (e) {\n        t.peerConnection.getStats().then(function (n) {\n          var r,\n              i = v(n.values());\n\n          try {\n            for (i.s(); !(r = i.n()).done;) {\n              var o = r.value;\n              t.isSubscriber && (\"inbound-rtp\" !== o.type && \"inboundrtp\" !== o.type || \"audio\" !== o.mediaType || e && e({\n                browser: \"firefox\",\n                mediaType: \"audio\",\n                peerId: t.uid,\n                isAudioMute: t.isAudioMute,\n                frameDropped: o.packetsLost + \"\",\n                frameReceived: o.packetsReceived + \"\",\n                googJitterReceived: o.jitter + \"\",\n                bytesReceived: o.bytesReceived + \"\",\n                packetsReceived: o.packetsReceived + \"\",\n                packetsLost: o.packetsLost + \"\"\n              }));\n            }\n          } catch (e) {\n            i.e(e);\n          } finally {\n            i.f();\n          }\n        });\n      }, t.getStatsRate = function (e) {\n        t.getStats(function (t) {\n          t.forEach(function (e) {}), e(t);\n        });\n      }, t.getStats = function (e, n) {\n        n = (n = n || 500) > 500 ? 500 : n, t.lastTimeGetStats && Date.now() - t.lastTimeGetStats < n ? e && e(t.filterStatsCache, t.originStatsCache) : this._getStats(function (n, r) {\n          t.filterStatsCache = n, t.originStatsCache = r, t.lastTimeGetStats = Date.now(), e && e(n, r);\n        });\n      }, t._getStats = function (n) {\n        t.peerConnection.getStats().then(function (r) {\n          var s,\n              d = [],\n              u = v(r.values());\n\n          try {\n            for (u.s(); !(s = u.n()).done;) {\n              var l = s.value;\n              d.push(l), \"outbound-rtp\" !== l.type && \"outboundrtp\" !== l.type || \"video\" !== l.mediaType || -1 !== l.id.indexOf(\"rtcp\") || (o.id = l.id, o.type = l.type, o.mediaType = l.mediaType, o.bytesSent = l.bytesSent ? l.bytesSent + \"\" : \"0\", o.packetsSent = l.packetsSent ? l.packetsSent + \"\" : \"0\", o.googPlisReceived = l.pliCount ? l.pliCount + \"\" : \"0\", o.googNacksReceived = l.nackCount ? l.nackCount + \"\" : \"0\", o.googFirsReceived = l.firCount ? l.firCount + \"\" : \"0\", o.googFrameRateSent = l.framerateMean ? Math.round(l.framerateMean) + \"\" : \"0\"), \"outbound-rtp\" !== l.type && \"outboundrtp\" !== l.type || \"audio\" !== l.mediaType || -1 !== l.id.indexOf(\"rtcp\") || (i.id = l.id, i.type = l.type, i.mediaType = l.mediaType, i.bytesSent = l.bytesSent ? l.bytesSent + \"\" : \"0\", i.packetsSent = l.packetsSent ? l.packetsSent + \"\" : \"0\", e.agoraStream.local && (i.audioInputLevel = Math.round(32767 * e.agoraStream.getAudioLevel()).toString())), \"inbound-rtp\" !== l.type && \"inboundrtp\" !== l.type || \"audio\" !== l.mediaType || l.isRemote || -1 !== l.id.indexOf(\"rtcp\") || (a.id = l.id, a.type = l.type, a.mediaType = l.mediaType, a.bytesReceived = l.bytesReceived ? l.bytesReceived + \"\" : \"0\", a.packetsLost = l.packetsLost ? l.packetsLost + \"\" : \"0\", a.packetsReceived = l.packetsReceived ? l.packetsReceived + \"\" : \"0\", a.googJitterReceived = l.jitter ? l.jitter + \"\" : \"0\", e.agoraStream.local || (a.audioOutputLevel = Math.round(32767 * e.agoraStream.getAudioLevel()).toString())), \"inbound-rtp\" !== l.type && \"inboundrtp\" !== l.type || \"video\" !== l.mediaType || l.isRemote || -1 !== l.id.indexOf(\"rtcp\") || (c.id = l.id, c.type = l.type, c.mediaType = l.mediaType, c.bytesReceived = l.bytesReceived ? l.bytesReceived + \"\" : \"0\", c.googFrameRateReceived = l.framerateMean ? Math.round(l.framerateMean) + \"\" : \"0\", c.googFramesDecoded = l.framesDecoded ? l.framesDecoded + \"\" : \"0\", Date.now() - m >= 1e3 ? (c.googFrameRateDecoded = (l.framesDecoded - p) / ((Date.now() - m) / 1e3), c.googFrameRateDecoded = Math.round(Math.max(0, c.googFrameRateDecoded)), m = Date.now(), g = c.googFrameRateDecoded, p = l.framesDecoded, c.googFrameRateDecoded = c.googFrameRateDecoded.toString()) : c.googFrameRateDecoded = g.toString(), c.packetsLost = l.packetsLost ? l.packetsLost + \"\" : \"0\", c.packetsReceived = l.packetsReceived ? l.packetsReceived + \"\" : \"0\", c.googJitterBufferMs = l.jitter ? l.jitter + \"\" : \"0\", c.googNacksSent = l.nackCount ? l.nackCount + \"\" : \"0\", c.googPlisSent = l.pliCount ? l.pliCount + \"\" : \"0\", c.googFirsSent = l.firCount ? l.firCount + \"\" : \"0\"), -1 !== l.id.indexOf(\"outbound_rtcp_video\") && (o.packetsLost = l.packetsLost ? l.packetsLost + \"\" : \"0\");\n            }\n          } catch (e) {\n            u.e(e);\n          } finally {\n            u.f();\n          }\n\n          var f = [o, i, a, c];\n          f.push({\n            id: \"time\",\n            startTime: t.connectedTime,\n            timestamp: new Date()\n          }), n(f, d);\n        }, function (e) {\n          u.default.error(\"[\" + t.clientId + \"]\" + e);\n        });\n      }, t.addStream = function (e) {\n        r = !0, t.peerConnection.addStream(e), t.markActionNeeded();\n      }, t.removeStream = function () {\n        t.markActionNeeded();\n      }, t.close = function () {\n        t.state = \"closed\", t.peerConnection.close();\n      }, t.markActionNeeded = function () {\n        t.actionNeeded = !0, t.doLater(function () {\n          t.onstablestate();\n        });\n      }, t.doLater = function (e) {\n        window.setTimeout(e, 1);\n      }, t.onstablestate = function () {\n        if (t.actionNeeded) {\n          if (\"new\" === t.state || \"established\" === t.state) {\n            r && (t.mediaConstraints = void 0), t.peerConnection.createOffer(function (e) {\n              if (e.sdp = h(e.sdp), e.sdp = e.sdp.replace(/a=extmap:1 http:\\/\\/www.webrtc.org\\/experiments\\/rtp-hdrext\\/abs-send-time/, \"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\"), e.sdp !== t.prevOffer) return t.peerConnection.setLocalDescription(e), t.state = \"preparing-offer\", void t.markActionNeeded();\n              u.default.debug(\"[\" + t.clientId + \"]Not sending a new offer\");\n            }, function (e) {\n              u.default.debug(\"[\" + t.clientId + \"]Ups! create offer failed \", e);\n            }, t.mediaConstraints);\n          } else if (\"preparing-offer\" === t.state) {\n            if (t.moreIceComing) return;\n            t.prevOffer = t.peerConnection.localDescription.sdp, t.offerCandidates = t.prevOffer.match(/a=candidate.+\\r\\n/g) || [], t.offerCandidates.length || (e.isCloudProxy3 && e.onNoIceCandidate && e.onNoIceCandidate(), u.default.warning(\"[\".concat(t.clientId, \"]No Ice Candidate generated\")), Object(f.getParameter)(\"SHIM_CANDIDATE\") ? (u.default.debug(\"Shimming fake candidate\"), t.prevOffer += \"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\\r\\n\") : u.default.error(\"[\".concat(t.clientId, \"]None Ice Candidate not allowed\"))), t.prevOffer = t.prevOffer.replace(/a=candidate:.+typ\\shost.+\\r\\n/g, \"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\\r\\n\"), t.sendMessage(\"OFFER\", t.prevOffer), t.state = \"offer-sent\";\n          } else if (\"offer-received\" === t.state) t.peerConnection.createAnswer(function (e) {\n            if (t.peerConnection.setLocalDescription(e), t.state = \"offer-received-preparing-answer\", t.iceStarted) t.markActionNeeded();else {\n              var n = new Date();\n              u.default.debug(\"[\" + t.clientId + \"]\" + n.getTime() + \": Starting ICE in responder\"), t.iceStarted = !0;\n            }\n          }, function () {\n            u.default.debug(\"[\" + t.clientId + \"]Ups! Something went wrong\");\n          });else if (\"offer-received-preparing-answer\" === t.state) {\n            if (t.moreIceComing) return;\n            var n = t.peerConnection.localDescription.sdp;\n            t.sendMessage(\"ANSWER\", n), t.state = \"established\";\n          } else t.debug(\"Dazed and confused in state \" + t.state + \", stopping here\");\n\n          t.actionNeeded = !1;\n        }\n      }, t.sendMessage = function (e, n) {\n        var r = {};\n        r.messageType = e, r.sdp = n, \"OFFER\" === e ? (r.offererSessionId = t.sessionId, r.answererSessionId = t.otherSessionId, r.seq = t.sequenceNumber += 1, r.tiebreaker = Math.floor(429496723 * Math.random() + 1)) : (r.offererSessionId = t.incomingMessage.offererSessionId, r.answererSessionId = t.sessionId, r.seq = t.incomingMessage.seq), t.onsignalingmessage(JSON.stringify(r));\n      }, t._getSender = function (e) {\n        if (t.peerConnection && t.peerConnection.getSenders) {\n          var n = t.peerConnection.getSenders().find(function (t) {\n            return t.track.kind == e;\n          });\n          if (n) return n;\n        }\n\n        return null;\n      }, t.hasSender = function (e) {\n        return !!t._getSender(e);\n      }, t.replaceTrack = function (e, n, r) {\n        var i = t._getSender(e.kind);\n\n        if (!i) {\n          return r(\"NO_SENDER_FOUND\");\n        }\n\n        try {\n          i.replaceTrack(e);\n        } catch (e) {\n          return r && r(e);\n        }\n\n        setTimeout(function () {\n          return n && n();\n        }, 50);\n      }, t.error = function (e) {\n        throw \"Error in RoapOnJsep: \" + e;\n      }, t.sessionId = t.roapSessionId += 1, t.sequenceNumber = 0, t.actionNeeded = !1, t.iceStarted = !1, t.moreIceComing = !0, t.iceCandidateCount = 0, t.onsignalingmessage = e.callback, t.peerConnection.ontrack = function (e) {\n        t.onaddstream && t.onaddstream(e, \"ontrack\");\n      }, t.peerConnection.onremovestream = function (e) {\n        t.onremovestream && t.onremovestream(e);\n      }, t.peerConnection.oniceconnectionstatechange = function (e) {\n        \"connected\" === e.currentTarget.iceConnectionState && (t.connectedTime = new Date()), t.oniceconnectionstatechange && t.oniceconnectionstatechange(e.currentTarget.iceConnectionState);\n      };\n\n      var h = function h(t) {\n        var n;\n\n        if (e.video && e.maxVideoBW && (null == (n = t.match(/m=video.*\\r\\n/)) && (n = t.match(/m=video.*\\n/)), n && n.length > 0)) {\n          var r = n[0] + \"b=TIAS:\" + 1e3 * e.maxVideoBW + \"\\r\\n\";\n          t = t.replace(n[0], r);\n        }\n\n        if (e.audio && e.maxAudioBW && (null == (n = t.match(/m=audio.*\\r\\n/)) && (n = t.match(/m=audio.*\\n/)), n && n.length > 0)) {\n          r = n[0] + \"b=TIAS:\" + 1e3 * e.maxAudioBW + \"\\r\\n\";\n          t = t.replace(n[0], r);\n        }\n\n        return t;\n      },\n          E = function E(e) {\n        return (e = e.replace(/a=.*abs-send-time\\r\\n/g, \"\")).replace(/a=.*goog-remb\\r\\n/g, \"\");\n      };\n\n      return t.onaddstream = null, t.onremovestream = null, t.state = \"new\", t.markActionNeeded(), t;\n    },\n        _ = n(50),\n        y = n.n(_),\n        R = n(26),\n        T = (n(5), 103),\n        I = function I(e) {\n      var t = {};\n      if (t.clientId = e.clientId, e.session_id = T += 1, \"undefined\" == typeof window || !window.navigator) throw u.default.error(\"[\" + t.streamId + \"][\" + t.clientId + \"]Publish/subscribe video/audio streams not supported yet\"), new Error(\"NON_BROWSER_ENV_DETECTED\");\n      return null !== window.navigator.userAgent.match(\"Firefox\") ? (t.browser = \"mozilla\", t = S(e)) : \"iOS\" === r.getBrowserOS() || r.isSafari() ? (u.default.debug(\"[\" + t.streamId + \"][\" + t.clientId + \"]Safari\"), (t = h(e)).browser = \"safari\") : ~window.navigator.userAgent.indexOf(\"Edge\") ? t = new y.a(e) : (t = m(e)).browser = \"chrome-stable\", t;\n    },\n        b = function b(e, t, n) {\n      var i = {};\n      i.config = e, i.streamId = e.streamId, delete e.streamId, navigator.getMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n\n      var o = 0,\n          a = 1,\n          s = !1,\n          c = null,\n          d = function d(e) {\n        if (o++, c) {\n          if (c === e) u.default.debug(\"Using Video Source/ Audio Source\");else {\n            var n = c.getVideoTracks()[0],\n                r = c.getAudioTracks()[0],\n                i = e.getVideoTracks()[0],\n                d = e.getAudioTracks()[0];\n            i && (n && c.removeTrack(n), c.addTrack(i)), d && (r && c.removeTrack(r), c.addTrack(d));\n          }\n        } else c = e;\n        o !== a || s || (s = !0, setTimeout(function () {\n          t(c);\n        }, 0));\n      },\n          l = function l(e) {\n        u.default.error(\"Failed to GetUserMedia\", e.name, e.code, e.message, e), o++, s || (s = !0, setTimeout(function () {\n          n && n(e);\n        }, 0));\n      },\n          f = function f() {\n        var t = {\n          video: e.video,\n          audio: e.audio\n        };\n        if (u.default.debug(\"GetUserMedia\", JSON.stringify(t)), navigator.mediaDevices && navigator.mediaDevices.getUserMedia) navigator.mediaDevices.getUserMedia(t).then(d).catch(l);else if (\"undefined\" != typeof navigator && navigator.getMedia) navigator.getMedia(e, d, l);else {\n          var r = {\n            name: \"MEDIA_NOT_SUPPORT\",\n            message: \"Video/audio streams not supported yet\"\n          };\n          u.default.error(\"[\" + i.streamId + \"]\" + r.message), n && n(r);\n        }\n      };\n\n      if ((e.videoSource || e.audioSource) && (c = new MediaStream(), e.videoSource && c.addTrack(e.videoSource), e.audioSource && c.addTrack(e.audioSource)), e.video || e.audio || e.screen || e.screenAudio) {\n        if (!e.screen && e.screenAudio) return n && n({\n          code: \"Set screen to true before sharing the audio\"\n        });\n\n        if (e.screen) {\n          if (R.a.isElectron()) return e.screen.sourceId ? R.a.getScreenStream(e.screen.sourceId, e.screen, function (t, n) {\n            t ? l(t) : (e.audio && (a++, f()), d(n));\n          }) : R.a.shareScreen(e.screen, function (t, n) {\n            t ? l(t) : (e.audio && (a++, f()), d(n));\n          });\n\n          if (r.isFireFox()) {\n            u.default.debug(\"[\" + i.streamId + \"]Screen access requested\");\n            if (!~[\"screen\", \"window\", \"application\"].indexOf(e.screen.mediaSource)) return n && n({\n              code: \"Invalid mediaSource, mediaSource should be one of [screen, window, application]\"\n            });\n            navigator.getMedia({\n              video: e.screen\n            }, function (t) {\n              e.audio && (a++, f()), d(t);\n            }, l);\n          } else if (r.isChromeKernel() && e.screen.extensionId) {\n            if (window.navigator.appVersion.match(/Chrome\\/([\\w\\W]*?)\\./)[1] < 34) return void n({\n              code: \"This browser does not support screen sharing\"\n            });\n            u.default.debug(\"[\" + i.streamId + \"]Screen access on chrome stable, looking for extension\");\n\n            try {\n              chrome.runtime.sendMessage(e.screen.extensionId, {\n                getStream: !0\n              }, function (t) {\n                if (void 0 === t) {\n                  u.default.error(\"[\" + i.streamId + \"]No response from Chrome Plugin. Plugin not installed properly\");\n                  l({\n                    name: \"PluginNotInstalledProperly\",\n                    message: \"No response from Chrome Plugin. Plugin not installed properly.\"\n                  });\n                } else e.screen.mandatory.chromeMediaSourceId = t.streamId, navigator.getMedia({\n                  video: e.screen\n                }, function (t) {\n                  e.audio && (a++, f()), d(t);\n                }, l);\n              });\n            } catch (e) {\n              u.default.debug(\"[\" + i.streamId + \"]AgoraRTC screensharing plugin is not accessible\");\n              return void n({\n                code: \"no_plugin_present\"\n              });\n            }\n          } else {\n            if (window.navigator.mediaDevices.getDisplayMedia) {\n              var p = {};\n              return \"number\" == typeof e.screen.width && \"number\" == typeof e.screen.height ? p.video = {\n                width: {\n                  ideal: e.screen.width\n                },\n                height: {\n                  ideal: e.screen.height\n                }\n              } : p.video = {\n                width: e.screen.width,\n                height: e.screen.height\n              }, e.screen.frameRate && e.screen.frameRate.min ? p.video.frameRate = {\n                ideal: e.screen.frameRate.max,\n                max: e.screen.frameRate.max\n              } : p.video.frameRate = e.screen.frameRate, e.screenAudio && (p.audio = e.screenAudio), u.default.debug(\"use getDisplayMedia, constraints:\", p), window.navigator.mediaDevices.getDisplayMedia(p).then(function (t) {\n                !e.screenAudio && e.audio && (a++, f()), d(t);\n              }).catch(l);\n            }\n\n            u.default.error(\"[\" + i.streamId + \"]This browser does not support screenSharing\"), n({\n              code: \"This browser does not support screen sharing\"\n            });\n          }\n        } else f();\n      } else d(c);\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = this && this.__importDefault || function (e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    };\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n\n    var i = r(n(0)),\n        o = function () {\n      function e(e, t, n) {\n        void 0 === t && (t = \"\"), this.name = \"AgoraRTCException\", this.code = e, this.message = \"AgoraRTCError \" + this.code + \": \" + t, this.data = n;\n      }\n\n      return e.prototype.toString = function () {\n        return this.data ? this.message + \" data: \" + JSON.stringify(this.data) : this.message;\n      }, e.prototype.throw = function () {\n        throw i.default.error(this.toString()), this;\n      }, e;\n    }();\n\n    t.AgoraRTCError = o, function (e) {\n      e.UNEXPECTED_ERROR = \"UNEXPECTED_ERROR\", e.UNEXPECTED_RESPONSE = \"UNEXPECTED_RESPONSE\", e.TIMEOUT = \"TIMEOUT\", e.INVALID_PARAMS = \"INVALID_PARAMS\", e.NOT_SUPPORT = \"NOT_SUPPORT\", e.INVALID_OPERATION = \"INVALID_OPERATION\", e.OPERATION_ABORT = \"OPERATION_ABORT\", e.WEB_SECURITY_RESTRICT = \"WEB_SECURITY_RESTRICT\", e.NETWORK_ERROR = \"NETWORK_ERROR\", e.NETWORK_TIMEOUT = \"NETWORK_TIMEOUT\", e.NETWORK_RESPONSE_ERROR = \"NETWORK_RESPONSE_ERROR\", e.API_INVOKE_TIMEOUT = \"API_INVOKE_TIMEOUT\", e.ENUMERATE_DEVICES_FAILED = \"ENUMERATE_DEVICES_FAILED\", e.DEVICE_NOT_FOUND = \"DEVICE_NOT_FOUND\", e.ELECTRON_IS_NULL = \"ELECTRON_IS_NULL\", e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR = \"ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR\", e.STREAM_ALREADY_INITIALIZED = \"STREAM_ALREADY_INITIALIZED\", e.STREAM_IS_CLOSED = \"STREAM_IS_CLOSED\", e.ABORT_OTHER_INIT = \"ABORT_OTHER_INIT\", e.CHROME_PLUGIN_NO_RESPONSE = \"CHROME_PLUGIN_NO_RESPONSE\", e.CHROME_PLUGIN_NOT_INSTALL = \"CHROME_PLUGIN_NOT_INSTALL\", e.MEDIA_OPTION_INVALID = \"MEDIA_OPTION_INVALID\", e.PERMISSION_DENIED = \"PERMISSION_DENIED\", e.CONSTRAINT_NOT_SATISFIED = \"CONSTRAINT_NOT_SATISFIED\", e.CAN_NOT_AUTOPLAY = \"CAN_NOT_AUTOPLAY\", e.HIGH_STREAM_NO_VIDEO_TRACK = \"HIGH_STREAM_NO_VIDEO_TRACK\", e.SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM = \"SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM\", e.TRACK_IS_DISABLED = \"TRACK_IS_DISABLED\", e.SHARE_AUDIO_NOT_ALLOWED = \"SHARE_AUDIO_NOT_ALLOWED\", e.TOKEN_GENERATOR_FUNCTION_ERROR = \"TOKEN_GENERATOR_FUNCTION_ERROR\", e.INVALID_UINT_UID_FROM_STRING_UID = \"INVALID_UINT_UID_FROM_STRING_UID\", e.CAN_NOT_GET_PROXY_SERVER = \"CAN_NOT_GET_PROXY_SERVER\", e.CAN_NOT_GET_GATEWAY_SERVER = \"CAN_NOT_GET_GATEWAY_SERVER\", e.UID_CONFLICT = \"UID_CONFLICT\", e.INVALID_LOCAL_TRACK = \"INVALID_LOCAL_TRACK\", e.INVALID_TRACK = \"INVALID_TRACK\", e.SENDER_NOT_FOUND = \"SENDER_NOT_FOUND\", e.CREATE_OFFER_FAILED = \"CREATE_OFFER_FAILED\", e.SET_ANSWER_FAILED = \"SET_ANSWER_FAILED\", e.ICE_FAILED = \"ICE_FAILED\", e.PC_CLOSED = \"PC_CLOSED\", e.SENDER_REPLACE_FAILED = \"SENDER_REPLACE_FAILED\", e.GATEWAY_P2P_LOST = \"GATEWAY_P2P_LOST\", e.NO_ICE_CANDIDATE = \"NO_ICE_CANDIDATE\", e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS = \"CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS\", e.INVALID_REMOTE_USER = \"INVALID_REMOTE_USER\", e.REMOTE_USER_IS_NOT_PUBLISHED = \"REMOTE_USER_IS_NOT_PUBLISHED\", e.SUBSCRIPTION_IS_IN_PROGRESS = \"SUBSCRIPTION_IS_IN_PROGRESS\", e.CUSTOM_REPORT_SEND_FAILED = \"CUSTOM_REPORT_SEND_FAILED\", e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH = \"CUSTOM_REPORT_FREQUENCY_TOO_HIGH\", e.FETCH_AUDIO_FILE_FAILED = \"FETCH_AUDIO_FILE_FAILED\", e.READ_LOCAL_AUDIO_FILE_ERROR = \"READ_LOCAL_AUDIO_FILE_ERROR\", e.DECODE_AUDIO_FILE_FAILED = \"DECODE_AUDIO_FILE_FAILED\", e.EFFECT_ID_CONFLICTED = \"EFFECT_ID_CONFLICTED\", e.EFFECT_SOUND_ID_NOT_FOUND = \"EFFECT_SOUND_ID_NOT_FOUND\", e.WS_ABORT = \"WS_ABORT\", e.WS_DISCONNECT = \"WS_DISCONNECT\", e.WS_ERR = \"WS_ERR\", e.CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER = \"CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER\", e.LIVE_STREAMING_TASK_CONFLICT = \"LIVE_STREAMING_TASK_CONFLICT\", e.LIVE_STREAMING_INVALID_ARGUMENT = \"LIVE_STREAMING_INVALID_ARGUMENT\", e.LIVE_STREAMING_INTERNAL_SERVER_ERROR = \"LIVE_STREAMING_INTERNAL_SERVER_ERROR\", e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED = \"LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED\", e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT = \"LIVE_STREAMING_TRANSCODING_NOT_SUPPORT\", e.LIVE_STREAMING_CDN_ERROR = \"LIVE_STREAMING_CDN_ERROR\", e.LIVE_STREAMING_INVALID_RAW_STREAM = \"LIVE_STREAMING_INVALID_RAW_STREAM\", e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT = \"LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT\", e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE = \"LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE\", e.LIVE_STREAMING_WARN_FREQUENT_REQUEST = \"LIVE_STREAMING_WARN_FREQUENT_REQUEST\", e.WEBGL_INTERNAL_ERROR = \"WEBGL_INTERNAL_ERROR\", e.BEAUTY_PROCESSOR_INTERNAL_ERROR = \"BEAUTY_PROCESSOR_INTERNAL_ERROR\", e.CROSS_CHANNEL_WAIT_STATUS_ERROR = \"CROSS_CHANNEL_WAIT_STATUS_ERROR\", e.CROSS_CHANNEL_FAILED_JOIN_SRC = \"CROSS_CHANNEL_FAILED_JOIN_SEC\", e.CROSS_CHANNEL_FAILED_JOIN_DEST = \"CROSS_CHANNEL_FAILED_JOIN_DEST\", e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST = \"CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST\", e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE = \"CROSS_CHANNEL_SERVER_ERROR_RESPONSE\", e.METADATA_OUT_OF_RANGE = \"METADATA_OUT_OF_RANGE\";\n    }(t.AgoraRTCErrorCode || (t.AgoraRTCErrorCode = {}));\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.d(t, \"a\", function () {\n      return c;\n    });\n\n    var r = n(0),\n        i = window.AudioContext || window.webkitAudioContext,\n        o = n(2),\n        a = o.getParameter,\n        s = o.setParameter,\n        c = function c() {\n      return a(\"AUDIO_CONTEXT\") || s(\"AUDIO_CONTEXT\", function () {\n        if (i) {\n          var e = new i();\n          return window.ctx = e, new Promise(function (e) {\n            document.body ? e() : window.addEventListener(\"load\", e);\n          }).then(function () {\n            var t = function t() {\n              \"suspended\" == e.state ? (r.default.debug(\"AudioContext is suspended, auto resume\"), e.resume().then(function () {\n                r.default.debug(\"AudioContext resume success\"), document.body.removeEventListener(\"touchend\", t, !0), document.body.removeEventListener(\"mousedown\", t, !0);\n              })) : (r.default.debug(\"AudioContext is running\"), document.body.removeEventListener(\"touchend\", t, !0), document.body.removeEventListener(\"mousedown\", t, !0));\n            };\n\n            document.body.addEventListener(\"touchend\", t, !0), document.body.addEventListener(\"mousedown\", t, !0);\n          }), e;\n        }\n\n        throw new Error(\"AUDIO_CONTEXT_NOT_SUPPORTED\");\n      }()), a(\"AUDIO_CONTEXT\");\n    };\n\n    c();\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(1),\n        i = null;\n\n    var o = function o() {\n      try {\n        i = window.require(\"electron\");\n      } catch (e) {}\n\n      return i;\n    },\n        a = function a(e) {\n      var t = r.report.reportApiInvoke(null, {\n        callback: e,\n        name: \"getScreenSources\",\n        options: arguments,\n        tag: \"tracer\"\n      }),\n          n = o();\n      if (!n) return t && t(\"electron is null\");\n\n      try {\n        var i = n.desktopCapturer.getSources({\n          types: [\"window\", \"screen\"]\n        });\n      } catch (e) {\n        console.log(e);\n      }\n\n      if (i instanceof Promise) i.then(function (e) {\n        return t && t(null, e);\n      }).catch(function (e) {\n        return t && t(e);\n      });else i = n.desktopCapturer.getSources({\n        types: [\"window\", \"screen\"]\n      }, function (e, n) {\n        t && t(null, n);\n      });\n    },\n        s = function s(e, t, n) {\n      var r = t.width;\n      t = {\n        audio: !1,\n        video: {\n          mandatory: {\n            chromeMediaSource: \"desktop\",\n            chromeMediaSourceId: e,\n            maxHeight: t.height,\n            maxWidth: r,\n            maxFrameRate: t.frameRate && t.frameRate.max,\n            minFrameRate: t.frameRate && t.frameRate.min\n          }\n        }\n      };\n      navigator.webkitGetUserMedia(t, function (e) {\n        n && n(null, e);\n      }, function (e) {\n        n && n(e);\n      });\n    };\n\n    t.a = {\n      isElectron: function isElectron() {\n        return !!o();\n      },\n      getElectronInstance: o,\n      getScreenSources: a,\n      getScreenStream: s,\n      shareScreen: function shareScreen(e, t) {\n        a(function (n, r) {\n          if (n) return t && t(n);\n          !function (e, t) {\n            var n = document.createElement(\"div\");\n            n.innerText = \"share screen\", n.setAttribute(\"style\", \"text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;\");\n            var r = document.createElement(\"div\");\n            r.setAttribute(\"style\", \"width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;\");\n            var i = document.createElement(\"div\");\n            i.innerText = \"Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.\", i.setAttribute(\"style\", \"height: 12%;\");\n            var o = document.createElement(\"div\");\n            o.setAttribute(\"style\", \"width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;\");\n            var a = document.createElement(\"div\");\n            a.setAttribute(\"style\", \"text-align: right; padding: 16px 0;\");\n            var s = document.createElement(\"button\");\n            s.innerHTML = \"cancel\", s.setAttribute(\"style\", \"width: 85px;\"), s.onclick = function () {\n              document.body.removeChild(c), t && t(\"NotAllowedError\");\n            }, a.appendChild(s), r.appendChild(i), r.appendChild(o), r.appendChild(a);\n            var c = document.createElement(\"div\");\n            c.setAttribute(\"style\", \"position: absolute; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);\"), c.appendChild(n), c.appendChild(r), document.body.appendChild(c), e.map(function (e) {\n              if (e.id) {\n                var n = document.createElement(\"div\");\n                n.setAttribute(\"style\", \"width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;\");\n                var r = e.thumbnail;\n                r.getSize().width > 1920 && (r = r.resize({\n                  width: 1920\n                })), n.innerHTML = '<div style=\"height: 120px; display: table-cell; vertical-align: middle;\"><img style=\"width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);\" src=' + r.toDataURL() + ' /></div><span style=\"\\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">' + e.name.replace(/[\\u00A0-\\u9999<>\\&]/g, function (e) {\n                  return \"&#\" + e.charCodeAt(0) + \";\";\n                }) + \"</span>\", n.onclick = function () {\n                  document.body.removeChild(c), t && t(null, e.id);\n                }, o.appendChild(n);\n              }\n            });\n          }(r, function (n, r) {\n            if (n) return t && t(n);\n            s(r, e, t);\n          });\n        });\n      }\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n    var r = n(3);\n    !function (e) {\n      e.TRANSCODE = \"mix_streaming\", e.RAW = \"raw_streaming\", e.INJECT = \"inject_streaming\";\n    }(t.LiveStreamingServiceMode || (t.LiveStreamingServiceMode = {})), t.DEFAULT_LIVE_STREAMING_TRANSCODING_USER = {\n      alpha: 1,\n      height: 640,\n      width: 360,\n      x: 0,\n      y: 0,\n      zOrder: 0,\n      audioChannel: 0\n    }, t.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK = {\n      x: 0,\n      y: 0,\n      width: 160,\n      height: 160,\n      zOrder: 255,\n      alpha: 1\n    }, t.isLiveStreamingTranscodingConfig = function (e) {\n      return r.isEmpty(e.width) || r.checkValidNumber(e.width, \"config.width\", 0), r.isEmpty(e.height) || r.checkValidNumber(e.height, \"config.height\", 0), r.isEmpty(e.videoBitrate) || r.checkValidNumber(e.videoBitrate, \"config.videoBitrate\", 1, 1e6), r.isEmpty(e.videoFramerate) || r.checkValidNumber(e.videoFramerate, \"config.videoFramerate\"), r.isEmpty(e.lowLatency) || r.checkValidBoolean(e.lowLatency, \"config.lowLatency\"), r.isEmpty(e.audioSampleRate) || r.checkValidEnum(e.audioSampleRate, \"config.audioSampleRate\", [32e3, 44100, 48e3]), r.isEmpty(e.audioBitrate) || r.checkValidNumber(e.audioBitrate, \"config.audioBitrate\", 1, 128), r.isEmpty(e.audioChannels) || r.checkValidEnum(e.audioChannels, \"config.audioChannels\", [1, 2, 3, 4, 5]), r.isEmpty(e.videoGop) || r.checkValidNumber(e.videoGop, \"config.videoGop\"), r.isEmpty(e.videoCodecProfile) || r.checkValidEnum(e.videoCodecProfile, \"config.videoCodecProfile\", [66, 77, 100]), r.isEmpty(e.userCount) || r.checkValidNumber(e.userCount, \"config.userCount\", 0, 17), r.isEmpty(e.backgroundColor) || r.checkValidNumber(e.backgroundColor, \"config.backgroundColor\", 0, 16777215), e.transcodingUsers && !r.isEmpty(e.transcodingUsers) && (r.checkValidArray(e.transcodingUsers, \"config.transcodingUsers\"), e.transcodingUsers.forEach(function (e, t) {\n        r.checkValidUID(e.uid), r.isEmpty(e.x) || r.checkValidNumber(e.x, \"transcodingUser[\" + t + \"].x\", 0, 1e4), r.isEmpty(e.y) || r.checkValidNumber(e.y, \"transcodingUser[\" + t + \"].y\", 0, 1e4), r.isEmpty(e.width) || r.checkValidNumber(e.width, \"transcodingUser[\" + t + \"].width\", 0, 1e4), r.isEmpty(e.height) || r.checkValidNumber(e.height, \"transcodingUser[\" + t + \"].height\", 0, 1e4), r.isEmpty(e.zOrder) || r.checkValidNumber(e.zOrder - 1, \"transcodingUser[\" + t + \"].zOrder\", 0, 100), r.isEmpty(e.alpha) || r.checkValidFloatNumber(e.alpha, \"transcodingUser[\" + t + \"].alpha\", 0, 1);\n      })), e.images && !r.isEmpty(e.images) && (r.checkValidArray(e.images, \"config.images\"), e.images.forEach(function (e, t) {\n        r.checkValidString(e.url, \"images[\" + t + \"].url\", 1, 1e3, !1), r.isEmpty(e.x) || r.checkValidNumber(e.x, \"images[\" + t + \"].x\", 0, 1e4), r.isEmpty(e.y) || r.checkValidNumber(e.y, \"images[\" + t + \"].y\", 0, 1e4), r.isEmpty(e.width) || r.checkValidNumber(e.width, \"images[\" + t + \"].width\", 0, 1e4), r.isEmpty(e.height) || r.checkValidNumber(e.height, \"images[\" + t + \"].height\", 0, 1e4), r.isEmpty(e.zOrder) || r.checkValidNumber(e.zOrder, \"images[\" + t + \"].zOrder\", 0, 255), r.isEmpty(e.alpha) || r.checkValidFloatNumber(e.alpha, \"images[\" + t + \"].alpha\", 0, 1);\n      })), !0;\n    }, t.DEFAULT_TRANSCODING_CONFIG = {\n      audioBitrate: 48,\n      audioChannels: 1,\n      audioSampleRate: 48e3,\n      backgroundColor: 0,\n      height: 360,\n      lowLatency: !1,\n      videoBitrate: 400,\n      videoCodecProfile: 100,\n      videoCodecType: 1,\n      videoFramerate: 15,\n      videoGop: 30,\n      width: 640,\n      images: [],\n      userConfigs: [],\n      userConfigExtraInfo: \"\"\n    }, t.isInjectStreamConfig = function (e) {\n      return r.isEmpty(e.audioVolume) || r.checkValidNumber(e.audioVolume, \"config.audioVolume\", 0, 1e3), r.isEmpty(e.audioBitrate) || r.checkValidNumber(e.audioBitrate, \"config.audioBitrate\", 1, 1e4), r.isEmpty(e.audioChannels) || r.checkValidEnum(e.audioChannels, \"config.audioChannels\", [1, 2]), r.isEmpty(e.audioSampleRate) || r.checkValidEnum(e.audioSampleRate, \"config.audioSampleRate\", [32e3, 44100, 48e3]), r.isEmpty(e.width) || r.checkValidNumber(e.width, \"config.width\", 0, 1e4), r.isEmpty(e.height) || r.checkValidNumber(e.height, \"config.height\", 0, 1e4), r.isEmpty(e.videoBitrate) || r.checkValidNumber(e.videoBitrate, \"config.videoBitrate\", 1, 1e4), r.isEmpty(e.videoFramerate) || r.checkValidNumber(e.videoFramerate, \"config.videoFramerate\", 1, 1e4), r.isEmpty(e.videoGop) || r.checkValidNumber(e.videoGop, \"config.videoGop\", 1, 1e4), !0;\n    }, t.DEFAULT_INJECT_CONFIG = {\n      audioBitrate: 48,\n      audioChannels: 2,\n      audioVolume: 100,\n      audioSampleRate: 48e3,\n      height: 0,\n      width: 0,\n      videoBitrate: 400,\n      videoFramerate: 15,\n      videoGop: 30\n    }, function (e) {\n      e.WARNING = \"@live_uap-warning\", e.ERROR = \"@line_uap-error\", e.PUBLISH_STREAM_STATUS = \"@live_uap-publish-status\", e.INJECT_STREAM_STATUS = \"@live_uap-inject-status\", e.WORKER_STATUS = \"@live_uap-worker-status\", e.REQUEST_NEW_ADDRESS = \"@live_uap-request-address\";\n    }(t.LiveStreamingUapSignalEvents || (t.LiveStreamingUapSignalEvents = {})), function (e) {\n      e.REQUEST_WORKER_MANAGER_LIST = \"@live_req_worker_manager\";\n    }(t.LiveStreamingInternalEvents || (t.LiveStreamingInternalEvents = {})), function (e) {\n      e[e.LIVE_STREAM_RESPONSE_SUCCEED = 200] = \"LIVE_STREAM_RESPONSE_SUCCEED\", e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM = 454] = \"LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM\", e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR = 450] = \"LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR\", e[e.LIVE_STREAM_RESPONSE_BAD_STREAM = 451] = \"LIVE_STREAM_RESPONSE_BAD_STREAM\", e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR = 400] = \"LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR\", e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST = 404] = \"LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST\", e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED = 456] = \"LIVE_STREAM_RESPONSE_NOT_AUTHORIZED\", e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE = 457] = \"LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE\", e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN = 429] = \"LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN\", e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH = 452] = \"LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH\", e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED = 453] = \"LIVE_STREAM_RESPONSE_NOT_SUPPORTED\", e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM = 455] = \"LIVE_STREAM_RESPONSE_MAX_STREAM_NUM\", e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR = 500] = \"LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR\", e[e.LIVE_STREAM_RESPONSE_WORKER_LOST = 501] = \"LIVE_STREAM_RESPONSE_WORKER_LOST\", e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT = 502] = \"LIVE_STREAM_RESPONSE_RESOURCE_LIMIT\", e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT = 503] = \"LIVE_STREAM_RESPONSE_WORKER_QUIT\", e[e.ERROR_FAIL_SEND_MESSAGE = 504] = \"ERROR_FAIL_SEND_MESSAGE\", e[e.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE = 505] = \"LIVE_STREAM_RESPONSE_INGNORE_MESSAGE\", e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE = 30] = \"PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE\", e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT = 31] = \"PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT\", e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH = 32] = \"PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH\", e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN = 33] = \"PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN\";\n    }(t.LIVE_STREAM_ERROR_CODE || (t.LIVE_STREAM_ERROR_CODE = {})), function (e) {\n      e.CONNECTED = \"websocket:connected\", e.RECONNECTING = \"websocket:reconnecting\", e.WILL_RECONNECT = \"websocket:will_reconnect\", e.CLOSED = \"websocket:closed\", e.FAILED = \"websocket:failed\", e.ON_MESSAGE = \"websocket:on_message\", e.REQUEST_NEW_URLS = \"websocket:request_new_urls\";\n    }(t.WebSocketManagerEvents || (t.WebSocketManagerEvents = {}));\n  }, function (e, t, n) {\n    var r = n(57),\n        i = n(58);\n\n    e.exports = function (e, t, n) {\n      var o = t && n || 0;\n      \"string\" == typeof e && (t = \"binary\" === e ? new Array(16) : null, e = null);\n      var a = (e = e || {}).random || (e.rng || r)();\n      if (a[6] = 15 & a[6] | 64, a[8] = 63 & a[8] | 128, t) for (var s = 0; s < 16; ++s) {\n        t[o + s] = a[s];\n      }\n      return t || i(a);\n    };\n  }, function (e, t, n) {\n    var r;\n    e.exports = (r = n(73), function (e) {\n      var t = r,\n          n = t.lib,\n          i = n.WordArray,\n          o = n.Hasher,\n          a = t.algo,\n          s = [],\n          c = [];\n      !function () {\n        function t(t) {\n          for (var n = e.sqrt(t), r = 2; r <= n; r++) {\n            if (!(t % r)) return !1;\n          }\n\n          return !0;\n        }\n\n        function n(e) {\n          return 4294967296 * (e - (0 | e)) | 0;\n        }\n\n        for (var r = 2, i = 0; i < 64;) {\n          t(r) && (i < 8 && (s[i] = n(e.pow(r, .5))), c[i] = n(e.pow(r, 1 / 3)), i++), r++;\n        }\n      }();\n      var d = [],\n          u = a.SHA256 = o.extend({\n        _doReset: function _doReset() {\n          this._hash = new i.init(s.slice(0));\n        },\n        _doProcessBlock: function _doProcessBlock(e, t) {\n          for (var n = this._hash.words, r = n[0], i = n[1], o = n[2], a = n[3], s = n[4], u = n[5], l = n[6], f = n[7], p = 0; p < 64; p++) {\n            if (p < 16) d[p] = 0 | e[t + p];else {\n              var g = d[p - 15],\n                  m = (g << 25 | g >>> 7) ^ (g << 14 | g >>> 18) ^ g >>> 3,\n                  h = d[p - 2],\n                  v = (h << 15 | h >>> 17) ^ (h << 13 | h >>> 19) ^ h >>> 10;\n              d[p] = m + d[p - 7] + v + d[p - 16];\n            }\n\n            var E = r & i ^ r & o ^ i & o,\n                S = (r << 30 | r >>> 2) ^ (r << 19 | r >>> 13) ^ (r << 10 | r >>> 22),\n                _ = f + ((s << 26 | s >>> 6) ^ (s << 21 | s >>> 11) ^ (s << 7 | s >>> 25)) + (s & u ^ ~s & l) + c[p] + d[p];\n\n            f = l, l = u, u = s, s = a + _ | 0, a = o, o = i, i = r, r = _ + (S + E) | 0;\n          }\n\n          n[0] = n[0] + r | 0, n[1] = n[1] + i | 0, n[2] = n[2] + o | 0, n[3] = n[3] + a | 0, n[4] = n[4] + s | 0, n[5] = n[5] + u | 0, n[6] = n[6] + l | 0, n[7] = n[7] + f | 0;\n        },\n        _doFinalize: function _doFinalize() {\n          var t = this._data,\n              n = t.words,\n              r = 8 * this._nDataBytes,\n              i = 8 * t.sigBytes;\n          return n[i >>> 5] |= 128 << 24 - i % 32, n[14 + (i + 64 >>> 9 << 4)] = e.floor(r / 4294967296), n[15 + (i + 64 >>> 9 << 4)] = r, t.sigBytes = 4 * n.length, this._process(), this._hash;\n        },\n        clone: function clone() {\n          var e = o.clone.call(this);\n          return e._hash = this._hash.clone(), e;\n        }\n      });\n      t.SHA256 = o._createHelper(u), t.HmacSHA256 = o._createHmacHelper(u);\n    }(Math), r.SHA256);\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    }), t.randomString = function (e) {\n      void 0 === e && (e = 8);\n\n      for (var t = \"ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678\", n = t.length, r = \"\", i = 0; i < e; i++) {\n        r += t.charAt(Math.floor(Math.random() * n));\n      }\n\n      return r;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = this && this.__assign || function () {\n      return (r = Object.assign || function (e) {\n        for (var t, n = 1, r = arguments.length; n < r; n++) {\n          for (var i in t = arguments[n]) {\n            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);\n          }\n        }\n\n        return e;\n      }).apply(this, arguments);\n    },\n        i = this && this.__awaiter || function (e, t, n, r) {\n      return new (n || (n = Promise))(function (i, o) {\n        function a(e) {\n          try {\n            c(r.next(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function s(e) {\n          try {\n            c(r.throw(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function c(e) {\n          var t;\n          e.done ? i(e.value) : (t = e.value, t instanceof n ? t : new n(function (e) {\n            e(t);\n          })).then(a, s);\n        }\n\n        c((r = r.apply(e, t || [])).next());\n      });\n    },\n        o = this && this.__generator || function (e, t) {\n      var n,\n          r,\n          i,\n          o,\n          a = {\n        label: 0,\n        sent: function sent() {\n          if (1 & i[0]) throw i[1];\n          return i[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return o = {\n        next: s(0),\n        throw: s(1),\n        return: s(2)\n      }, \"function\" == typeof Symbol && (o[Symbol.iterator] = function () {\n        return this;\n      }), o;\n\n      function s(o) {\n        return function (s) {\n          return function (o) {\n            if (n) throw new TypeError(\"Generator is already executing.\");\n\n            for (; a;) {\n              try {\n                if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;\n\n                switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {\n                  case 0:\n                  case 1:\n                    i = o;\n                    break;\n\n                  case 4:\n                    return a.label++, {\n                      value: o[1],\n                      done: !1\n                    };\n\n                  case 5:\n                    a.label++, r = o[1], o = [0];\n                    continue;\n\n                  case 7:\n                    o = a.ops.pop(), a.trys.pop();\n                    continue;\n\n                  default:\n                    if (!(i = a.trys, (i = i.length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) {\n                      a = 0;\n                      continue;\n                    }\n\n                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {\n                      a.label = o[1];\n                      break;\n                    }\n\n                    if (6 === o[0] && a.label < i[1]) {\n                      a.label = i[1], i = o;\n                      break;\n                    }\n\n                    if (i && a.label < i[2]) {\n                      a.label = i[2], a.ops.push(o);\n                      break;\n                    }\n\n                    i[2] && a.ops.pop(), a.trys.pop();\n                    continue;\n                }\n\n                o = t.call(e, a);\n              } catch (e) {\n                o = [6, e], r = 0;\n              } finally {\n                n = i = 0;\n              }\n            }\n\n            if (5 & o[0]) throw o[1];\n            return {\n              value: o[0] ? o[1] : void 0,\n              done: !0\n            };\n          }([o, s]);\n        };\n      }\n    },\n        a = this && this.__importDefault || function (e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    };\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n    var s = n(2),\n        c = a(n(37)),\n        d = n(24),\n        u = a(n(0)),\n        l = n(1);\n\n    function f(e) {\n      return new Promise(function (t) {\n        window.setTimeout(t, e);\n      });\n    }\n\n    function p(e, t) {\n      return new Promise(function (n, r) {\n        t.timeout = t.timeout || s.getParameter(\"HTTP_CONNECT_TIMEOUT\"), t.responseType = t.responseType || \"json\", t.data && (t.data = JSON.stringify(t.data)), t.headers = t.headers || {}, t.headers[\"Content-Type\"] = \"application/json\", t.method = \"POST\", t.url = e, c.default.request(t).then(function (e) {\n          n(e.data);\n        }).catch(function (e) {\n          c.default.isCancel(e) ? r(new d.AgoraRTCError(d.AgoraRTCErrorCode.OPERATION_ABORT, \"cancel token canceled\")) : \"ECONNABORTED\" === e.code ? r(new d.AgoraRTCError(d.AgoraRTCErrorCode.NETWORK_TIMEOUT, e.message)) : e.response ? r(new d.AgoraRTCError(d.AgoraRTCErrorCode.NETWORK_RESPONSE_ERROR, e.response.status)) : r(new d.AgoraRTCError(d.AgoraRTCErrorCode.NETWORK_ERROR, e.message));\n        });\n      });\n    }\n\n    function g(e, n, r, a) {\n      var s = this,\n          c = Object.assign({}, t.DEFAULT_RETRY_CONFIG, a),\n          u = c.timeout,\n          l = function l() {\n        return i(s, void 0, void 0, function () {\n          return o(this, function (e) {\n            switch (e.label) {\n              case 0:\n                return [4, f(u)];\n\n              case 1:\n                return e.sent(), u *= c.timeoutFactor, u = Math.min(c.maxRetryTimeout, u), [2];\n            }\n          });\n        });\n      },\n          p = !1,\n          g = new Promise(function (t, a) {\n        return i(s, void 0, void 0, function () {\n          var i, s, u;\n          return o(this, function (o) {\n            switch (o.label) {\n              case 0:\n                n = n || function () {\n                  return !1;\n                }, r = r || function () {\n                  return !0;\n                }, i = 0, o.label = 1;\n\n              case 1:\n                if (!(i < c.maxRetryCount)) return [3, 12];\n                if (p) return [2, a(new d.AgoraRTCError(d.AgoraRTCErrorCode.OPERATION_ABORT))];\n                o.label = 2;\n\n              case 2:\n                return o.trys.push([2, 7,, 11]), [4, e()];\n\n              case 3:\n                return s = o.sent(), n(s, i) ? i + 1 === c.maxRetryCount ? [2, t(s)] : [4, l()] : [3, 5];\n\n              case 4:\n                return o.sent(), [3, 6];\n\n              case 5:\n                return [2, t(s)];\n\n              case 6:\n                return [3, 11];\n\n              case 7:\n                return u = o.sent(), r(u, i) ? i + 1 === c.maxRetryCount ? [2, a(u)] : [4, l()] : [3, 9];\n\n              case 8:\n                return o.sent(), [3, 10];\n\n              case 9:\n                return [2, a(u)];\n\n              case 10:\n                return [3, 11];\n\n              case 11:\n                return i += 1, [3, 1];\n\n              case 12:\n                return [2];\n            }\n          });\n        });\n      });\n\n      return g.cancel = function () {\n        return p = !0;\n      }, g;\n    }\n\n    function m(e, t) {\n      return {\n        addressList: e.servers.map(function (e, n) {\n          return \"wss://\" + e.address.replace(/\\./g, \"-\") + \".edge.agora.io:\" + e.wss + \"?serviceName=\" + encodeURIComponent(t);\n        }),\n        workerToken: e.workerToken,\n        vid: e.vid\n      };\n    }\n\n    t.wait = f, t.post = p, t.DEFAULT_RETRY_CONFIG = {\n      timeout: 500,\n      timeoutFactor: 1.5,\n      maxRetryCount: 1 / 0,\n      maxRetryTimeout: 1e4\n    }, t.getRetryWaitTime = function (e, t) {\n      var n = t.timeout * Math.pow(t.timeoutFactor, e);\n      return Math.min(t.maxRetryTimeout, n);\n    }, t.retryable = g, t.liveStreamingServerResponseToResult = m;\n    var h = 1;\n\n    function v(e, n, a, c, f) {\n      var v = this;\n      void 0 === f && (f = t.DEFAULT_RETRY_CONFIG), h += 1;\n      var E,\n          S,\n          _ = {\n        sid: a.sid,\n        command: \"convergeAllocateEdge\",\n        uid: \"666\",\n        appId: a.appId,\n        ts: Math.floor(Date.now() / 1e3),\n        seq: h,\n        requestId: h,\n        version: s.VERSION,\n        cname: a.cname\n      },\n          y = {\n        service_name: n,\n        json_body: JSON.stringify(_)\n      },\n          R = e[0];\n      return g(function () {\n        return i(v, void 0, void 0, function () {\n          var e, t, i, a, l;\n          return o(this, function (o) {\n            switch (o.label) {\n              case 0:\n                return E = Date.now(), [4, p(R, {\n                  data: y,\n                  cancelToken: c,\n                  headers: {\n                    \"X-Packet-Service-Type\": \"0\",\n                    \"X-Packet-URI\": \"61\"\n                  }\n                })];\n\n              case 1:\n                if (e = o.sent(), S = Date.now() - E, 0 !== e.code) throw i = new d.AgoraRTCError(d.AgoraRTCErrorCode.UNEXPECTED_RESPONSE, \"live streaming ap error, code\" + e.code, {\n                  retry: !0\n                }), u.default.error(i.toString()), i;\n                if (200 !== (t = JSON.parse(e.json_body)).code) throw i = new d.AgoraRTCError(d.AgoraRTCErrorCode.UNEXPECTED_RESPONSE, \"live streaming app center error, code: \" + t.code + \", reason: \" + t.reason), u.default.error(i.toString()), i;\n                if (!t.servers || 0 === t.servers.length) throw i = new d.AgoraRTCError(d.AgoraRTCErrorCode.UNEXPECTED_RESPONSE, \"live streaming app center empty server\"), u.default.error(i.toString()), i;\n                if (a = m(t, n), s.getParameter(\"LIVE_STREAMING_ADDRESS\")) try {\n                  l = JSON.parse(s.getParameter(\"LIVE_STREAMING_ADDRESS\")), a.addressList = l;\n                } catch (e) {\n                  a.addressList = [s.getParameter(\"LIVE_STREAMING_ADDRESS\")];\n                }\n                return [2, r(r({}, a), {\n                  responseTime: S\n                })];\n            }\n          });\n        });\n      }, function (t, r) {\n        return l.report.requestApWorkerEvent(a.sid, {\n          success: !0,\n          sc: 200,\n          serviceName: n,\n          responseDetail: JSON.stringify(t.addressList),\n          firstSuccess: 0 === r,\n          responseTime: S,\n          serverIp: e[r % e.length]\n        }), !1;\n      }, function (t, r) {\n        return l.report.requestApWorkerEvent(a.sid, {\n          success: !1,\n          sc: t.data && t.data.code || 200,\n          serviceName: n,\n          responseTime: S,\n          serverIp: e[r % e.length]\n        }), !!(t.code !== d.AgoraRTCErrorCode.OPERATION_ABORT && t.code !== d.AgoraRTCErrorCode.UNEXPECTED_RESPONSE || t.data && t.data.retry) && (R = e[(r + 1) % e.length], !0);\n      }, f);\n    }\n\n    t.requestLiveStreamingWorkerManager = v, t.getLiveStreamingWorkerMangerResult = function (e, t, n) {\n      return i(this, void 0, void 0, function () {\n        var r, i;\n        return o(this, function (o) {\n          switch (o.label) {\n            case 0:\n              r = s.getParameter(\"UAP_AP\").map(function (e) {\n                return t.proxyServer ? \"https://\" + t.proxyServer + \"/ap/?url=\" + e + \"/api/v1?action=uap\" : \"https://\" + e + \"/api/v1?action=uap\";\n              }), o.label = 1;\n\n            case 1:\n              return o.trys.push([1, 3,, 4]), [4, v(r, e, t, n)];\n\n            case 2:\n              return [2, o.sent()];\n\n            case 3:\n              throw i = o.sent(), l.report.requestApWorkerEvent(t.sid, {\n                success: !1,\n                sc: i.data && i.data.code || 200,\n                serviceName: e,\n                responseTime: i.data && i.data.responseTime\n              }), i;\n\n            case 4:\n              return [2];\n          }\n        });\n      });\n    };\n  }, function (e, t, n) {\n    var r = n(70),\n        i = n(71),\n        o = n(34),\n        a = n(72);\n\n    e.exports = function (e) {\n      return r(e) || i(e) || o(e) || a();\n    };\n  }, function (e, t) {\n    var n;\n\n    n = function () {\n      return this;\n    }();\n\n    try {\n      n = n || new Function(\"return this\")();\n    } catch (e) {\n      \"object\" == typeof window && (n = window);\n    }\n\n    e.exports = n;\n  }, function (e, t, n) {\n    var r = n(35);\n\n    e.exports = function (e, t) {\n      if (e) {\n        if (\"string\" == typeof e) return r(e, t);\n        var n = Object.prototype.toString.call(e).slice(8, -1);\n        return \"Object\" === n && e.constructor && (n = e.constructor.name), \"Map\" === n || \"Set\" === n ? Array.from(n) : \"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? r(e, t) : void 0;\n      }\n    };\n  }, function (e, t) {\n    e.exports = function (e, t) {\n      (null == t || t > e.length) && (t = e.length);\n\n      for (var n = 0, r = new Array(t); n < t; n++) {\n        r[n] = e[n];\n      }\n\n      return r;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = this && this.__spreadArrays || function () {\n      for (var e = 0, t = 0, n = arguments.length; t < n; t++) {\n        e += arguments[t].length;\n      }\n\n      var r = Array(e),\n          i = 0;\n\n      for (t = 0; t < n; t++) {\n        for (var o = arguments[t], a = 0, s = o.length; a < s; a++, i++) {\n          r[i] = o[a];\n        }\n      }\n\n      return r;\n    };\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n\n    var i = n(24),\n        o = function () {\n      function e() {\n        this._events = {}, this.addListener = this.on;\n      }\n\n      return e.prototype.getListeners = function (e) {\n        return this._events[e] ? this._events[e].map(function (e) {\n          return e.listener;\n        }) : [];\n      }, e.prototype.on = function (e, t) {\n        this._events[e] || (this._events[e] = []);\n        var n = this._events[e];\n        -1 === this._indexOfListener(n, t) && n.push({\n          listener: t,\n          once: !1\n        });\n      }, e.prototype.once = function (e, t) {\n        this._events[e] || (this._events[e] = []);\n        var n = this._events[e];\n        -1 === this._indexOfListener(n, t) && n.push({\n          listener: t,\n          once: !0\n        });\n      }, e.prototype.off = function (e, t) {\n        if (this._events[e]) {\n          var n = this._events[e],\n              r = this._indexOfListener(n, t);\n\n          -1 !== r && n.splice(r, 1), 0 === this._events[e].length && delete this._events[e];\n        }\n      }, e.prototype.removeAllListeners = function (e) {\n        e ? delete this._events[e] : this._events = {};\n      }, e.prototype.emit = function (e) {\n        for (var t = [], n = 1; n < arguments.length; n++) {\n          t[n - 1] = arguments[n];\n        }\n\n        this._events[e] || (this._events[e] = []);\n\n        for (var r = this._events[e].map(function (e) {\n          return e;\n        }), i = 0; i < r.length; i += 1) {\n          var o = r[i];\n          o.once && this.off(e, o.listener), o.listener.apply(this, t || []);\n        }\n      }, e.prototype._indexOfListener = function (e, t) {\n        for (var n = e.length; n--;) {\n          if (e[n].listener === t) return n;\n        }\n\n        return -1;\n      }, e;\n    }();\n\n    function a(e, t) {\n      for (var n = [], o = 2; o < arguments.length; o++) {\n        n[o - 2] = arguments[o];\n      }\n\n      var a = null,\n          s = null;\n      if (e.emit.apply(e, r([t], n, [function (e) {\n        a = e;\n      }, function (e) {\n        s = e;\n      }])), null !== s) throw s;\n      if (null === a) throw new i.AgoraRTCError(i.AgoraRTCErrorCode.UNEXPECTED_ERROR, \"handler is not sync\");\n      return a;\n    }\n\n    t.EventEmitter = o, t.emitAsPromise = function (e, t) {\n      for (var n = [], o = 2; o < arguments.length; o++) {\n        n[o - 2] = arguments[o];\n      }\n\n      return 0 === e.getListeners(t).length ? Promise.reject(new i.AgoraRTCError(i.AgoraRTCErrorCode.UNEXPECTED_ERROR, \"can not emit promise\")) : new Promise(function (i, o) {\n        e.emit.apply(e, r([t], n, [i, o]));\n      });\n    }, t.emitAsInvokerNoResponse = function (e, t) {\n      for (var n = [], i = 2; i < arguments.length; i++) {\n        n[i - 2] = arguments[i];\n      }\n\n      return 0 === e.getListeners(t).length ? null : a.apply(void 0, r([e, t], n));\n    }, t.emitAsInvoker = a;\n  }, function (e, t, n) {\n    e.exports = n(78);\n  }, function (e, t, n) {\n    \"use strict\";\n\n    e.exports = function (e, t) {\n      return function () {\n        for (var n = new Array(arguments.length), r = 0; r < n.length; r++) {\n          n[r] = arguments[r];\n        }\n\n        return e.apply(t, n);\n      };\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(18);\n\n    function i(e) {\n      return encodeURIComponent(e).replace(/%40/gi, \"@\").replace(/%3A/gi, \":\").replace(/%24/g, \"$\").replace(/%2C/gi, \",\").replace(/%20/g, \"+\").replace(/%5B/gi, \"[\").replace(/%5D/gi, \"]\");\n    }\n\n    e.exports = function (e, t, n) {\n      if (!t) return e;\n      var o;\n      if (n) o = n(t);else if (r.isURLSearchParams(t)) o = t.toString();else {\n        var a = [];\n        r.forEach(t, function (e, t) {\n          null != e && (r.isArray(e) ? t += \"[]\" : e = [e], r.forEach(e, function (e) {\n            r.isDate(e) ? e = e.toISOString() : r.isObject(e) && (e = JSON.stringify(e)), a.push(i(t) + \"=\" + i(e));\n          }));\n        }), o = a.join(\"&\");\n      }\n\n      if (o) {\n        var s = e.indexOf(\"#\");\n        -1 !== s && (e = e.slice(0, s)), e += (-1 === e.indexOf(\"?\") ? \"?\" : \"&\") + o;\n      }\n\n      return e;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    e.exports = function (e) {\n      return !(!e || !e.__CANCEL__);\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    (function (t) {\n      var r = n(18),\n          i = n(84),\n          o = {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      };\n\n      function a(e, t) {\n        !r.isUndefined(e) && r.isUndefined(e[\"Content-Type\"]) && (e[\"Content-Type\"] = t);\n      }\n\n      var s,\n          c = {\n        adapter: ((\"undefined\" != typeof XMLHttpRequest || void 0 !== t && \"[object process]\" === Object.prototype.toString.call(t)) && (s = n(42)), s),\n        transformRequest: [function (e, t) {\n          return i(t, \"Accept\"), i(t, \"Content-Type\"), r.isFormData(e) || r.isArrayBuffer(e) || r.isBuffer(e) || r.isStream(e) || r.isFile(e) || r.isBlob(e) ? e : r.isArrayBufferView(e) ? e.buffer : r.isURLSearchParams(e) ? (a(t, \"application/x-www-form-urlencoded;charset=utf-8\"), e.toString()) : r.isObject(e) ? (a(t, \"application/json;charset=utf-8\"), JSON.stringify(e)) : e;\n        }],\n        transformResponse: [function (e) {\n          if (\"string\" == typeof e) try {\n            e = JSON.parse(e);\n          } catch (e) {}\n          return e;\n        }],\n        timeout: 0,\n        xsrfCookieName: \"XSRF-TOKEN\",\n        xsrfHeaderName: \"X-XSRF-TOKEN\",\n        maxContentLength: -1,\n        validateStatus: function validateStatus(e) {\n          return e >= 200 && e < 300;\n        }\n      };\n      c.headers = {\n        common: {\n          Accept: \"application/json, text/plain, */*\"\n        }\n      }, r.forEach([\"delete\", \"get\", \"head\"], function (e) {\n        c.headers[e] = {};\n      }), r.forEach([\"post\", \"put\", \"patch\"], function (e) {\n        c.headers[e] = r.merge(o);\n      }), e.exports = c;\n    }).call(this, n(83));\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(18),\n        i = n(85),\n        o = n(39),\n        a = n(87),\n        s = n(90),\n        c = n(91),\n        d = n(43);\n\n    e.exports = function (e) {\n      return new Promise(function (t, u) {\n        var l = e.data,\n            f = e.headers;\n        r.isFormData(l) && delete f[\"Content-Type\"];\n        var p = new XMLHttpRequest();\n\n        if (e.auth) {\n          var g = e.auth.username || \"\",\n              m = e.auth.password || \"\";\n          f.Authorization = \"Basic \" + btoa(g + \":\" + m);\n        }\n\n        var h = a(e.baseURL, e.url);\n\n        if (p.open(e.method.toUpperCase(), o(h, e.params, e.paramsSerializer), !0), p.timeout = e.timeout, p.onreadystatechange = function () {\n          if (p && 4 === p.readyState && (0 !== p.status || p.responseURL && 0 === p.responseURL.indexOf(\"file:\"))) {\n            var n = \"getAllResponseHeaders\" in p ? s(p.getAllResponseHeaders()) : null,\n                r = {\n              data: e.responseType && \"text\" !== e.responseType ? p.response : p.responseText,\n              status: p.status,\n              statusText: p.statusText,\n              headers: n,\n              config: e,\n              request: p\n            };\n            i(t, u, r), p = null;\n          }\n        }, p.onabort = function () {\n          p && (u(d(\"Request aborted\", e, \"ECONNABORTED\", p)), p = null);\n        }, p.onerror = function () {\n          u(d(\"Network Error\", e, null, p)), p = null;\n        }, p.ontimeout = function () {\n          var t = \"timeout of \" + e.timeout + \"ms exceeded\";\n          e.timeoutErrorMessage && (t = e.timeoutErrorMessage), u(d(t, e, \"ECONNABORTED\", p)), p = null;\n        }, r.isStandardBrowserEnv()) {\n          var v = n(92),\n              E = (e.withCredentials || c(h)) && e.xsrfCookieName ? v.read(e.xsrfCookieName) : void 0;\n          E && (f[e.xsrfHeaderName] = E);\n        }\n\n        if (\"setRequestHeader\" in p && r.forEach(f, function (e, t) {\n          void 0 === l && \"content-type\" === t.toLowerCase() ? delete f[t] : p.setRequestHeader(t, e);\n        }), r.isUndefined(e.withCredentials) || (p.withCredentials = !!e.withCredentials), e.responseType) try {\n          p.responseType = e.responseType;\n        } catch (t) {\n          if (\"json\" !== e.responseType) throw t;\n        }\n        \"function\" == typeof e.onDownloadProgress && p.addEventListener(\"progress\", e.onDownloadProgress), \"function\" == typeof e.onUploadProgress && p.upload && p.upload.addEventListener(\"progress\", e.onUploadProgress), e.cancelToken && e.cancelToken.promise.then(function (e) {\n          p && (p.abort(), u(e), p = null);\n        }), void 0 === l && (l = null), p.send(l);\n      });\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(86);\n\n    e.exports = function (e, t, n, i, o) {\n      var a = new Error(e);\n      return r(a, t, n, i, o);\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(18);\n\n    e.exports = function (e, t) {\n      t = t || {};\n      var n = {},\n          i = [\"url\", \"method\", \"params\", \"data\"],\n          o = [\"headers\", \"auth\", \"proxy\"],\n          a = [\"baseURL\", \"url\", \"transformRequest\", \"transformResponse\", \"paramsSerializer\", \"timeout\", \"withCredentials\", \"adapter\", \"responseType\", \"xsrfCookieName\", \"xsrfHeaderName\", \"onUploadProgress\", \"onDownloadProgress\", \"maxContentLength\", \"validateStatus\", \"maxRedirects\", \"httpAgent\", \"httpsAgent\", \"cancelToken\", \"socketPath\"];\n      r.forEach(i, function (e) {\n        void 0 !== t[e] && (n[e] = t[e]);\n      }), r.forEach(o, function (i) {\n        r.isObject(t[i]) ? n[i] = r.deepMerge(e[i], t[i]) : void 0 !== t[i] ? n[i] = t[i] : r.isObject(e[i]) ? n[i] = r.deepMerge(e[i]) : void 0 !== e[i] && (n[i] = e[i]);\n      }), r.forEach(a, function (r) {\n        void 0 !== t[r] ? n[r] = t[r] : void 0 !== e[r] && (n[r] = e[r]);\n      });\n      var s = i.concat(o).concat(a),\n          c = Object.keys(t).filter(function (e) {\n        return -1 === s.indexOf(e);\n      });\n      return r.forEach(c, function (r) {\n        void 0 !== t[r] ? n[r] = t[r] : void 0 !== e[r] && (n[r] = e[r]);\n      }), n;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    function r(e) {\n      this.message = e;\n    }\n\n    r.prototype.toString = function () {\n      return \"Cancel\" + (this.message ? \": \" + this.message : \"\");\n    }, r.prototype.__CANCEL__ = !0, e.exports = r;\n  }, function (e, t) {\n    e.exports = function (e, t, n) {\n      return t in e ? Object.defineProperty(e, t, {\n        value: n,\n        enumerable: !0,\n        configurable: !0,\n        writable: !0\n      }) : e[t] = n, e;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = this && this.__awaiter || function (e, t, n, r) {\n      return new (n || (n = Promise))(function (i, o) {\n        function a(e) {\n          try {\n            c(r.next(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function s(e) {\n          try {\n            c(r.throw(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function c(e) {\n          var t;\n          e.done ? i(e.value) : (t = e.value, t instanceof n ? t : new n(function (e) {\n            e(t);\n          })).then(a, s);\n        }\n\n        c((r = r.apply(e, t || [])).next());\n      });\n    },\n        i = this && this.__generator || function (e, t) {\n      var n,\n          r,\n          i,\n          o,\n          a = {\n        label: 0,\n        sent: function sent() {\n          if (1 & i[0]) throw i[1];\n          return i[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return o = {\n        next: s(0),\n        throw: s(1),\n        return: s(2)\n      }, \"function\" == typeof Symbol && (o[Symbol.iterator] = function () {\n        return this;\n      }), o;\n\n      function s(o) {\n        return function (s) {\n          return function (o) {\n            if (n) throw new TypeError(\"Generator is already executing.\");\n\n            for (; a;) {\n              try {\n                if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;\n\n                switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {\n                  case 0:\n                  case 1:\n                    i = o;\n                    break;\n\n                  case 4:\n                    return a.label++, {\n                      value: o[1],\n                      done: !1\n                    };\n\n                  case 5:\n                    a.label++, r = o[1], o = [0];\n                    continue;\n\n                  case 7:\n                    o = a.ops.pop(), a.trys.pop();\n                    continue;\n\n                  default:\n                    if (!(i = a.trys, (i = i.length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) {\n                      a = 0;\n                      continue;\n                    }\n\n                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {\n                      a.label = o[1];\n                      break;\n                    }\n\n                    if (6 === o[0] && a.label < i[1]) {\n                      a.label = i[1], i = o;\n                      break;\n                    }\n\n                    if (i && a.label < i[2]) {\n                      a.label = i[2], a.ops.push(o);\n                      break;\n                    }\n\n                    i[2] && a.ops.pop(), a.trys.pop();\n                    continue;\n                }\n\n                o = t.call(e, a);\n              } catch (e) {\n                o = [6, e], r = 0;\n              } finally {\n                n = i = 0;\n              }\n            }\n\n            if (5 & o[0]) throw o[1];\n            return {\n              value: o[0] ? o[1] : void 0,\n              done: !0\n            };\n          }([o, s]);\n        };\n      }\n    },\n        o = this && this.__importDefault || function (e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    },\n        a = this && this.__importStar || function (e) {\n      if (e && e.__esModule) return e;\n      var t = {};\n      if (null != e) for (var n in e) {\n        Object.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n      }\n      return t.default = e, t;\n    };\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n\n    var s = o(n(59)),\n        c = a(n(62)),\n        d = a(n(63)),\n        u = o(n(0)),\n        l = n(2),\n        f = s.default.Root.fromJSON(d),\n        p = function () {\n      function e() {\n        this.requestArray = [], this.retryBackoffCount = 0, this.state = 0;\n      }\n\n      return e.prototype.setProxy = function (e) {\n        this.proxyServer = e;\n      }, e.prototype.sendReportList = function (e, t) {\n        var n = this,\n            r = this._dataConvert(\"ProtoRaws\", {\n          vid: t,\n          sendTs: Math.round(Date.now() / 1e3),\n          payloads: e.map(function (e) {\n            return {\n              id: c[e.type],\n              msg: n._dataConvert(e.type, e.data)\n            };\n          })\n        });\n\n        this.send(r);\n      }, e.prototype._dataConvert = function (e, t) {\n        var n;\n\n        try {\n          n = f.lookupType(\"protobuf.\" + e);\n        } catch (t) {\n          u.default.error(\"[send-proto] invalid proto name \" + e);\n        }\n\n        var r = n.create(t);\n        return n.encode(r).finish();\n      }, e.prototype.send = function (e) {\n        0 == this.state ? this._send(e) : this.requestArray.push(e);\n      }, e.prototype._send = function (e) {\n        return r(this, void 0, void 0, function () {\n          return i(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return t.trys.push([0, 2,, 4]), this.state = 1, [4, this.request(e)];\n\n              case 1:\n                return t.sent(), this.retryBackoffCount = 0, 0 !== this.requestArray.length ? this._send(this.requestArray.shift()) : this.state = 0, [3, 4];\n\n              case 2:\n                return t.sent(), [4, g(this.retryBackoffCount++ < 2 ? 200 : 1e4)];\n\n              case 3:\n                return t.sent(), this._send(e), [3, 4];\n\n              case 4:\n                return [2];\n            }\n          });\n        });\n      }, e.prototype.request = function (e) {\n        return r(this, void 0, void 0, function () {\n          var t, n;\n          return i(this, function (r) {\n            switch (r.label) {\n              case 0:\n                t = this._getAddress(), n = this._getBackupAddress(), r.label = 1;\n\n              case 1:\n                return r.trys.push([1, 3,, 5]), [4, this._request(t, e)];\n\n              case 2:\n                return r.sent(), [3, 5];\n\n              case 3:\n                return r.sent(), [4, this._request(n, e)];\n\n              case 4:\n                return r.sent(), [3, 5];\n\n              case 5:\n                return [2];\n            }\n          });\n        });\n      }, e.prototype._request = function (e, t) {\n        return this._post(e, t);\n      }, e.prototype._post = function (e, t) {\n        var n = this;\n        return new Promise(function (r, i) {\n          var o = new XMLHttpRequest();\n          o.timeout = l.getParameter(\"HTTP_CONNECT_TIMEOUT\"), o.open(\"POST\", e, !0), o.setRequestHeader(\"Content-type\", \"application/octet-stream\"), n.proxyServer || (o.setRequestHeader(\"Cache-Control\", \"no-cache, no-store\"), o.setRequestHeader(\"Pragma\", \"no-cache\"), o.setRequestHeader(\"Expires\", \"0\")), o.onload = function (e) {\n            r(o.responseText);\n          }, o.onerror = function (e) {\n            i(e);\n          }, o.ontimeout = function (e) {\n            i(e);\n          }, o.send(t);\n        });\n      }, e.prototype._getAddress = function () {\n        return this.proxyServer ? \"https://\" + this.proxyServer + \"/rs/?h=\" + l.getParameter(\"EVENT_REPORT_DOMAIN\") + \"&p=6443&d=events/proto-raws\" : \"https://\" + l.getParameter(\"EVENT_REPORT_DOMAIN\") + \":6443/events/proto-raws\";\n      }, e.prototype._getBackupAddress = function () {\n        return this.proxyServer ? \"https://\" + this.proxyServer + \"/rs/?h=\" + l.getParameter(\"EVENT_REPORT_BACKUP_DOMAIN\") + \"&p=6443&d=events/proto-raws\" : \"https://\" + l.getParameter(\"EVENT_REPORT_BACKUP_DOMAIN\") + \":6443/events/proto-raws\";\n      }, e;\n    }();\n\n    t.default = p;\n\n    var g = function g(e) {\n      return new Promise(function (t) {\n        window.setTimeout(t, e);\n      });\n    };\n  }, function (e, t) {\n    e.exports = function (e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    };\n  }, function (e, t) {\n    function n(e, t) {\n      for (var n = 0; n < t.length; n++) {\n        var r = t[n];\n        r.enumerable = r.enumerable || !1, r.configurable = !0, \"value\" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);\n      }\n    }\n\n    e.exports = function (e, t, r) {\n      return t && n(e.prototype, t), r && n(e, r), e;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = this && this.__awaiter || function (e, t, n, r) {\n      return new (n || (n = Promise))(function (i, o) {\n        function a(e) {\n          try {\n            c(r.next(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function s(e) {\n          try {\n            c(r.throw(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function c(e) {\n          var t;\n          e.done ? i(e.value) : (t = e.value, t instanceof n ? t : new n(function (e) {\n            e(t);\n          })).then(a, s);\n        }\n\n        c((r = r.apply(e, t || [])).next());\n      });\n    },\n        i = this && this.__generator || function (e, t) {\n      var n,\n          r,\n          i,\n          o,\n          a = {\n        label: 0,\n        sent: function sent() {\n          if (1 & i[0]) throw i[1];\n          return i[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return o = {\n        next: s(0),\n        throw: s(1),\n        return: s(2)\n      }, \"function\" == typeof Symbol && (o[Symbol.iterator] = function () {\n        return this;\n      }), o;\n\n      function s(o) {\n        return function (s) {\n          return function (o) {\n            if (n) throw new TypeError(\"Generator is already executing.\");\n\n            for (; a;) {\n              try {\n                if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;\n\n                switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {\n                  case 0:\n                  case 1:\n                    i = o;\n                    break;\n\n                  case 4:\n                    return a.label++, {\n                      value: o[1],\n                      done: !1\n                    };\n\n                  case 5:\n                    a.label++, r = o[1], o = [0];\n                    continue;\n\n                  case 7:\n                    o = a.ops.pop(), a.trys.pop();\n                    continue;\n\n                  default:\n                    if (!(i = a.trys, (i = i.length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) {\n                      a = 0;\n                      continue;\n                    }\n\n                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {\n                      a.label = o[1];\n                      break;\n                    }\n\n                    if (6 === o[0] && a.label < i[1]) {\n                      a.label = i[1], i = o;\n                      break;\n                    }\n\n                    if (i && a.label < i[2]) {\n                      a.label = i[2], a.ops.push(o);\n                      break;\n                    }\n\n                    i[2] && a.ops.pop(), a.trys.pop();\n                    continue;\n                }\n\n                o = t.call(e, a);\n              } catch (e) {\n                o = [6, e], r = 0;\n              } finally {\n                n = i = 0;\n              }\n            }\n\n            if (5 & o[0]) throw o[1];\n            return {\n              value: o[0] ? o[1] : void 0,\n              done: !0\n            };\n          }([o, s]);\n        };\n      }\n    },\n        o = this && this.__importDefault || function (e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    };\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n    var a,\n        s = o(n(0)),\n        c = n(15);\n    !function (e) {\n      e.NEW = \"new\", e.PREPARING_OFFER = \"preparing-offer\", e.OFFER_SENT = \"offer-sent\", e.ESTABLISHED = \"established\", e.CLOSED = \"closed\";\n    }(a || (a = {}));\n\n    var d = function () {\n      function e(e) {\n        this.candidate = null, this.state = a.NEW, this.config = e, this.isSubscriber = this.config.isSubscriber, this.peerConnection = this.initPeecConnection(e), this.peerConnection.onicecandidate = this._onicecandidate.bind(this), this.peerConnection.oniceconnectionstatechange = this._oniceconnectionstatechange.bind(this), this.peerConnection.onaddstream = this._onaddstream.bind(this), this.peerConnection.ontrack = this._ontrack.bind(this), this.processSignalingMessage = this.setAnswer.bind(this), this.peerConnection.createOffer({\n          offerToReceiveAudio: !0,\n          offerToReceiveVideo: !0\n        }).then(this.setLocalSDP.bind(this)), this.sendVideoStats = {\n          id: \"\",\n          type: \"\",\n          mediaType: \"\",\n          googCodecName: this.config.codec.toUpperCase(),\n          bytesSent: \"0\",\n          packetsLost: \"0\",\n          packetsSent: \"0\",\n          googAdaptationChanges: \"0\",\n          googAvgEncodeMs: \"0\",\n          googEncodeUsagePercent: \"0\",\n          googFirsReceived: \"0\",\n          googFrameHeightSent: \"0\",\n          googFrameHeightInput: \"0\",\n          googFrameRateInput: \"0\",\n          googFrameRateSent: \"0\",\n          googFrameWidthSent: \"0\",\n          googFrameWidthInput: \"0\",\n          googNacksReceived: \"0\",\n          googPlisReceived: \"0\",\n          googRtt: \"0\",\n          googFramesEncoded: \"0\"\n        }, this.sendAudioStats = {\n          id: \"\",\n          type: \"\",\n          mediaType: \"\",\n          googCodecName: \"opus\",\n          aecDivergentFilterFraction: \"0\",\n          audioInputLevel: \"0\",\n          bytesSent: \"0\",\n          packetsSent: \"0\",\n          googEchoCancellationReturnLoss: \"0\",\n          googEchoCancellationReturnLossEnhancement: \"0\"\n        }, this.receiveAudioStats = {\n          id: \"\",\n          type: \"\",\n          mediaType: \"\",\n          audioOutputLevel: \"0\",\n          bytesReceived: \"0\",\n          packetsLost: \"0\",\n          packetsReceived: \"0\",\n          googAccelerateRate: \"0\",\n          googCurrentDelayMs: \"0\",\n          googDecodingCNG: \"0\",\n          googDecodingCTN: \"0\",\n          googDecodingCTSG: \"0\",\n          googDecodingNormal: \"0\",\n          googDecodingPLC: \"0\",\n          googDecodingPLCCNG: \"0\",\n          googExpandRate: \"0\",\n          googJitterBufferMs: \"0\",\n          googJitterReceived: \"0\",\n          googPreemptiveExpandRate: \"0\",\n          googPreferredJitterBufferMs: \"0\",\n          googSecondaryDecodedRate: \"0\",\n          googSpeechExpandRate: \"0\"\n        }, this.receiveVideoStats = {\n          id: \"\",\n          type: \"\",\n          mediaType: \"\",\n          googTargetDelayMs: \"0\",\n          packetsLost: \"0\",\n          googDecodeMs: \"0\",\n          googMaxDecodeMs: \"0\",\n          googRenderDelayMs: \"0\",\n          googFrameWidthReceived: \"0\",\n          googFrameHeightReceived: \"0\",\n          googFrameRateReceived: \"0\",\n          googFrameRateDecoded: \"0\",\n          googFrameRateOutput: \"0\",\n          googFramesDecoded: \"0\",\n          googFrameReceived: \"0\",\n          googJitterBufferMs: \"0\",\n          googCurrentDelayMs: \"0\",\n          googMinPlayoutDelayMs: \"0\",\n          googNacksSent: \"0\",\n          googPlisSent: \"0\",\n          googFirsSent: \"0\",\n          bytesReceived: \"0\",\n          packetsReceived: \"0\"\n        };\n      }\n\n      return e.prototype.addStream = function (e) {\n        this.peerConnection.addStream(e);\n      }, e.prototype.setRtpSenderParameters = function (e) {\n        return r(this, void 0, void 0, function () {\n          return i(this, function (e) {\n            return [2];\n          });\n        });\n      }, e.prototype.setAnswer = function (e) {\n        var t = JSON.parse(e);\n        this.peerConnection.setRemoteDescription(new RTCSessionDescription({\n          sdp: t.sdp,\n          type: \"answer\"\n        })), this.onsignalingmessage && this.onsignalingmessage(\"\");\n      }, e.prototype.close = function () {\n        this.peerConnection.close();\n      }, e.prototype.getStats = function (e, t) {\n        if (void 0 === t && (t = 500), t = t > 500 ? 500 : t, Date.now() - this.lastTimeGetStats < t) {\n          var n = [];\n          this.config.isSubscriber ? (n.push(this.receiveVideoStats), n.push(this.receiveAudioStats)) : (n.push(this.sendAudioStats), n.push(this.sendVideoStats)), n.push({\n            id: \"time\",\n            startTime: this.connectedTime,\n            timestamp: Date.now()\n          }), e && e(n);\n        } else this._getStats(e);\n      }, e.prototype._getStats = function (e) {\n        var t = this,\n            n = [];\n        this.peerConnection.getStats(null).then(function (r) {\n          t.lastTimeGetStats = Date.now(), Object.keys(r).map(function (e) {\n            var n = r[e];\n            t.config.isSubscriber ? n.type && \"inboundrtp\" === n.type && n.mediaType && \"audio\" === n.mediaType ? (t.receiveAudioStats.id = n.id + \"recv\", t.receiveAudioStats.type = n.type + \"\", t.receiveAudioStats.mediaType = n.mediaType + \"\", t.receiveAudioStats.packetsReceived = n.packetsReceived + \"\", t.receiveAudioStats.bytesReceived = n.bytesReceived + \"\", t.receiveAudioStats.packetsLost = n.packetsLost + \"\", t.receiveAudioStats.googJitterReceived = n.jitter + \"\") : n.type && \"inboundrtp\" === n.type && n.mediaType && \"video\" === n.mediaType ? (t.receiveVideoStats.id = n.id + \"recv\", t.receiveVideoStats.type = n.type + \"\", t.receiveVideoStats.mediaType = n.mediaType + \"\", t.receiveVideoStats.packetsReceived = n.packetsReceived + \"\", t.receiveVideoStats.bytesReceived = n.bytesReceived + \"\", t.receiveVideoStats.packetsLost = n.packetsLost + \"\", t.receiveVideoStats.googJitterBufferMs = n.jitter + \"\", t.receiveVideoStats.googPlisSent = n.pliCount + \"\", t.receiveVideoStats.googFirsSent = n.firCount + \"\", t.receiveVideoStats.googNacksSent = n.nackCount + \"\") : n.remoteSource && n.type && \"track\" === n.type && n.trackIdentifier && -1 !== n.trackIdentifier.indexOf(\"v\") ? (t.receiveVideoStats.googFrameHeightReceived = n.frameHeight + \"\", t.receiveVideoStats.googFrameWidthReceived = n.frameWidth + \"\", t.receiveVideoStats.googFrameRateDecoded = n.framesPerSecond + \"\", t.receiveVideoStats.googFrameRateOutput = n.framesPerSecond + \"\", t.receiveVideoStats.googFrameRateReceived = n.framesPerSecond + \"\", t.receiveVideoStats.googFramesDecoded = n.framesDecoded + \"\", t.receiveVideoStats.googFrameReceived = n.framesReceived + \"\") : n.remoteSource && n.type && \"track\" === n.type && n.trackIdentifier && -1 !== n.trackIdentifier.indexOf(\"a\") && (t.receiveAudioStats.audioOutputLevel = n.audioLevel + \"\") : !n.isRemote && n.type && \"outboundrtp\" === n.type && n.mediaType && \"audio\" === n.mediaType ? (t.sendAudioStats.id = n.id + \"send\", t.sendAudioStats.type = n.type + \"\", t.sendAudioStats.mediaType = n.mediaType + \"\", t.sendAudioStats.packetsSent = n.packetsSent + \"\", t.sendAudioStats.bytesSent = n.bytesSent + \"\") : !n.isRemote && n.type && \"outboundrtp\" === n.type && n.mediaType && \"video\" === n.mediaType ? (t.sendVideoStats.id = n.id + \"send\", t.sendVideoStats.type = n.type + \"\", t.sendVideoStats.mediaType = n.mediaType + \"\", t.sendVideoStats.packetsSent = n.packetsSent + \"\", t.sendVideoStats.bytesSent = n.bytesSent + \"\", t.sendVideoStats.googRtt = n.roundTripTime + \"\", t.sendVideoStats.googPlisReceived = n.pliCount + \"\", t.sendVideoStats.googFirsReceived = n.firCount + \"\", t.sendVideoStats.googNacksReceived = n.nackCount + \"\") : !n.remoteSource && n.type && \"track\" === n.type && n.framesSent && 0 !== n.framesSent && (t.sendVideoStats.googFrameHeightSent = n.frameHeight + \"\", t.sendVideoStats.googFrameHeightInput = n.frameHeight + \"\", t.sendVideoStats.googFrameWidthSent = n.frameWidth + \"\", t.sendVideoStats.googFrameWidthInput = n.frameWidth + \"\", t.sendVideoStats.googFramesEncoded = n.framesSent + \"\", t.sendVideoStats.googFrameRateSent = n.framesPerSecond + \"\");\n          }), t.config.isSubscriber ? (n.push(t.receiveVideoStats), n.push(t.receiveAudioStats)) : (n.push(t.sendAudioStats), n.push(t.sendVideoStats)), n.push({\n            id: \"time\",\n            startTime: t.connectedTime,\n            timestamp: Date.now()\n          }), e && e(n);\n        });\n      }, e.prototype.getStatsRate = function (e) {\n        this.getStats(e);\n      }, e.prototype.initPeecConnection = function (e) {\n        var t = e.stunServerUrl,\n            n = e.turnServer,\n            r = e.iceServers;\n        return this.pcConfig = {\n          iceServers: []\n        }, r instanceof Array ? this.pcConfig.iceServers = e.iceServers : t && (t instanceof Array ? t.map(function (e) {\n          \"string\" == typeof e && \"\" !== e && this.pcConfig.iceServers.push({\n            urls: e\n          });\n        }) : \"string\" == typeof t && \"\" !== t && this.pcConfig.iceServers.push({\n          urls: t\n        })), n && (n instanceof Array ? n.map(function (e) {\n          \"string\" == typeof e.url && \"\" !== e.url && this.pcConfig.iceServers.push({\n            username: e.username,\n            credential: e.credential,\n            url: e.url\n          });\n        }) : \"auto\" !== n.mode && \"manual\" !== n.mode || (n.udpport && this.pcConfig.iceServers.push({\n          username: n.username,\n          credential: n.credential,\n          credentialType: \"password\",\n          urls: \"turn:\" + n.url + \":\" + n.udpport + \"?transport=udp\"\n        }), \"string\" == typeof n.tcpport && \"\" !== n.tcpport && this.pcConfig.iceServers.push({\n          username: n.username,\n          credential: n.credential,\n          credentialType: \"password\",\n          urls: \"turn:\" + n.url + \":\" + n.tcpport + \"?transport=tcp\"\n        }), !0 === n.forceturn && (this.pcConfig.iceTransportPolicy = \"relay\"))), new c.RTCPeerConnection(this.pcConfig);\n      }, e.prototype._ontrack = function (e) {\n        this.onaddstream && this.onaddstream(e, \"ontrack\");\n      }, e.prototype._onaddstream = function (e) {\n        this.onaddstream && this.onaddstream(e, \"onaddstream\");\n      }, e.prototype._oniceconnectionstatechange = function (e) {\n        \"connected\" === e.currentTarget.iceConnectionState && (this.state = a.ESTABLISHED, this.connectedTime = Date.now()), this.oniceconnectionstatechange && this.oniceconnectionstatechange(e.currentTarget.iceConnectionState);\n      }, e.prototype._onicecandidate = function (e) {\n        !this.candidate && e && (this.candidate = e.candidate, this.peerConnection.createOffer({\n          offerToReceiveAudio: !0,\n          offerToReceiveVideo: !0\n        }).then(this.editLocalSDP.bind(this)).then(this.setLocalSDP.bind(this)).then(this.sendOffer.bind(this)).catch());\n      }, e.prototype.setLocalSDP = function (e) {\n        return this.peerConnection.setLocalDescription(new RTCSessionDescription({\n          sdp: e.sdp,\n          type: \"offer\"\n        })), this.state = a.PREPARING_OFFER, e;\n      }, e.prototype.editLocalSDP = function (e) {\n        return e.sdp = this.setBandWidth(e.sdp), e.sdp = this.reviseOpus(e.sdp), e.sdp = this.addCandidate(e.sdp), e;\n      }, e.prototype.setSendRecv = function (e) {\n        return e = (e = (e = e.replace(/a=recvonly\\r\\n/g, \"a=sendrecv\\r\\n\")).replace(/a=sendonly\\r\\n/g, \"a=sendrecv\\r\\n\")).replace(/a=inactive\\r\\n/g, \"a=sendrecv\\r\\n\");\n      }, e.prototype.setBandWidth = function (e) {\n        var t,\n            n,\n            r = this.config,\n            i = r.codec,\n            o = r.minVideoBW,\n            a = r.maxVideoBW,\n            c = r.maxAudioBW,\n            d = r.clientId;\n\n        if ((t = e.match(/m=video.*\\r\\n/)) && o && a) {\n          n = t[0] + \"b=AS:\" + a + \"\\r\\n\";\n          var u = 0,\n              l = 0;\n          \"h264\" === i ? (u = e.search(/a=rtpmap:(\\d+) H264\\/90000\\r\\n/), l = e.search(/H264\\/90000\\r\\n/)) : \"vp8\" === i ? (u = e.search(/a=rtpmap:(\\d+) VP8\\/90000\\r\\n/), l = e.search(/VP8\\/90000\\r\\n/)) : \"vp9\" === i && (u = e.search(/a=rtpmap:(\\d+) VP9\\/90000\\r\\n/), l = e.search(/VP9\\/90000\\r\\n/)), -1 !== u && -1 !== l && l - u > 10 && (n = n + \"a=fmtp:\" + e.slice(u + 9, l - 1) + \" x-google-min-bitrate=\" + o + \"\\r\\n\"), e = e.replace(t[0], n), s.default.debug(\"[\" + d + \"]Set Video Bitrate - min:\" + o + \" max:\" + a);\n        }\n\n        return (t = e.match(/m=audio.*\\r\\n/)) && c && (n = t[0] + \"b=AS:\" + c + \"\\r\\n\", e = e.replace(t[0], n)), e;\n      }, e.prototype.reviseOpus = function (e) {\n        return e = (e = e.replace(/a=rtpmap:102 opus\\/48000\\/2/g, \"a=rtpmap:111 opus/48000/2\")).replace(/m=audio 9 UDP\\/TLS\\/RTP\\/SAVPF 102 0 8 97 13 118 101/g, \"m=audio 9 UDP/TLS/RTP/SAVPF 111 0 8 97 13 118 101\");\n      }, e.prototype.addCandidate = function (e) {\n        return e += \"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\\r\\n\";\n      }, e.prototype.sendOffer = function (e) {\n        this.config.callback(JSON.stringify({\n          sdp: e.sdp,\n          messageType: \"OFFER\",\n          tiebreaker: Math.floor(429496723 * Math.random() + 1)\n        })), this.state = a.OFFER_SENT;\n      }, e;\n    }();\n\n    t.default = d;\n  }, function (e, t, n) {\n    var r = n(65),\n        i = n(66),\n        o = n(34),\n        a = n(67);\n\n    e.exports = function (e, t) {\n      return r(e) || i(e, t) || o(e, t) || a();\n    };\n  }, function (e, t, n) {\n    var r, i, o;\n    i = this, o = function o() {\n      \"use strict\";\n\n      var e,\n          t = this;\n\n      function n(e) {\n        t.console && (t.console.error ? t.console.error(e) : t.console.log && t.console.log(e));\n      }\n\n      function r(e, t, r, i) {\n        var o = i || n,\n            a = e.createShader(r);\n        return e.shaderSource(a, t), e.compileShader(a), e.getShaderParameter(a, e.COMPILE_STATUS) ? a : (o(\"*** Error compiling shader '\" + a + \"':\" + e.getShaderInfoLog(a)), e.deleteShader(a), null);\n      }\n\n      function i(e, t, r, i, o) {\n        var a = o || n,\n            s = e.createProgram();\n        return t.forEach(function (t) {\n          e.attachShader(s, t);\n        }), r && r.forEach(function (t, n) {\n          e.bindAttribLocation(s, i ? i[n] : n, t);\n        }), e.linkProgram(s), e.getProgramParameter(s, e.LINK_STATUS) ? s : (a(\"Error in program linking:\" + e.getProgramInfoLog(s)), e.deleteProgram(s), null);\n      }\n\n      (e = e || t) === e.top && (console.log(\"%c%s\", \"color:blue;font-weight:bold;\", \"for more about webgl-utils.js see:\"), console.log(\"%c%s\", \"color:blue;font-weight:bold;\", \"http://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html\"));\n      var o,\n          a = [\"VERTEX_SHADER\", \"FRAGMENT_SHADER\"];\n      return !document.documentMode && !!window.StyleMedia && (HTMLCanvasElement.prototype.getContext = (o = HTMLCanvasElement.prototype.getContext, function () {\n        var e = arguments,\n            t = e[0];\n        return \"webgl\" === t && ((e = [].slice.call(arguments))[0] = \"experimental-webgl\"), o.apply(this, e);\n      })), {\n        createProgram: i,\n        createProgramFromSources: function createProgramFromSources(e, t, n, o, s) {\n          for (var c = [], d = 0; d < t.length; ++d) {\n            c.push(r(e, t[d], e[a[d]], s));\n          }\n\n          return i(e, c, n, o, s);\n        }\n      };\n    }, void 0 === (r = function () {\n      return o.call(i);\n    }.apply(t, [])) || (e.exports = r);\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = this && this.__awaiter || function (e, t, n, r) {\n      return new (n || (n = Promise))(function (i, o) {\n        function a(e) {\n          try {\n            c(r.next(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function s(e) {\n          try {\n            c(r.throw(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function c(e) {\n          var t;\n          e.done ? i(e.value) : (t = e.value, t instanceof n ? t : new n(function (e) {\n            e(t);\n          })).then(a, s);\n        }\n\n        c((r = r.apply(e, t || [])).next());\n      });\n    },\n        i = this && this.__generator || function (e, t) {\n      var n,\n          r,\n          i,\n          o,\n          a = {\n        label: 0,\n        sent: function sent() {\n          if (1 & i[0]) throw i[1];\n          return i[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return o = {\n        next: s(0),\n        throw: s(1),\n        return: s(2)\n      }, \"function\" == typeof Symbol && (o[Symbol.iterator] = function () {\n        return this;\n      }), o;\n\n      function s(o) {\n        return function (s) {\n          return function (o) {\n            if (n) throw new TypeError(\"Generator is already executing.\");\n\n            for (; a;) {\n              try {\n                if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;\n\n                switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {\n                  case 0:\n                  case 1:\n                    i = o;\n                    break;\n\n                  case 4:\n                    return a.label++, {\n                      value: o[1],\n                      done: !1\n                    };\n\n                  case 5:\n                    a.label++, r = o[1], o = [0];\n                    continue;\n\n                  case 7:\n                    o = a.ops.pop(), a.trys.pop();\n                    continue;\n\n                  default:\n                    if (!(i = a.trys, (i = i.length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) {\n                      a = 0;\n                      continue;\n                    }\n\n                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {\n                      a.label = o[1];\n                      break;\n                    }\n\n                    if (6 === o[0] && a.label < i[1]) {\n                      a.label = i[1], i = o;\n                      break;\n                    }\n\n                    if (i && a.label < i[2]) {\n                      a.label = i[2], a.ops.push(o);\n                      break;\n                    }\n\n                    i[2] && a.ops.pop(), a.trys.pop();\n                    continue;\n                }\n\n                o = t.call(e, a);\n              } catch (e) {\n                o = [6, e], r = 0;\n              } finally {\n                n = i = 0;\n              }\n            }\n\n            if (5 & o[0]) throw o[1];\n            return {\n              value: o[0] ? o[1] : void 0,\n              done: !0\n            };\n          }([o, s]);\n        };\n      }\n    },\n        o = this && this.__importDefault || function (e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    };\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n    var a = n(68),\n        s = n(4),\n        c = o(n(0));\n\n    t.getSupportedCodec = function (e) {\n      return r(void 0, void 0, void 0, function () {\n        var t, n, r, o, u;\n        return i(this, function (i) {\n          switch (i.label) {\n            case 0:\n              return t = {\n                video: [],\n                audio: []\n              }, \"undefined\" != typeof window ? [3, 1] : (\"NOT_BROWSER_ENV\", c.default.error(\"getSupportedCodec: NOT_BROWSER_ENV\"), [2, Promise.reject(\"NOT_BROWSER_ENV\")]);\n\n            case 1:\n              try {\n                n = a.createRTCPeerConnection({\n                  iceServers: []\n                });\n              } catch (e) {\n                return c.default.error(\"Failed to init RTCPeerConnection\", e), [2, Promise.reject(e)];\n              }\n\n              return n ? [3, 2] : (c.default.warning(\"getSupportedCodec: no RTCPeerConnection constructor is detected\"), [2, Promise.resolve(t)]);\n\n            case 2:\n              return e && e.stream ? [3, 7] : (r = {\n                mandatory: {\n                  OfferToReceiveAudio: !0,\n                  OfferToReceiveVideo: !0\n                }\n              }, o = void 0, (s.isSafari() || s.isFireFox() || s.isWeChatBrowser()) && n.addTransceiver ? (n.addTransceiver(\"audio\"), n.addTransceiver(\"video\"), [4, n.createOffer()]) : [3, 4]);\n\n            case 3:\n              return o = i.sent(), [3, 6];\n\n            case 4:\n              return [4, new Promise(function (e, t) {\n                var i = setTimeout(function () {\n                  t(\"CREATEOFFER_TIMEOUT\");\n                }, 3e3);\n                n.createOffer(function (t) {\n                  clearTimeout(i), e(t);\n                }, function (e) {\n                  clearTimeout(i), t(e);\n                }, r);\n              })];\n\n            case 5:\n              o = i.sent(), i.label = 6;\n\n            case 6:\n              return n.close(), u = o.sdp, [2, d(u)];\n\n            case 7:\n              return e.stream.getTracks && n.addTrack ? e.stream.getTracks().forEach(function (t) {\n                n.addTrack(t, e.stream);\n              }) : n.addStream(e.stream), o = void 0, s.isSafari() || s.isFireFox() ? [4, n.createOffer()] : [3, 9];\n\n            case 8:\n              return o = i.sent(), [3, 11];\n\n            case 9:\n              return [4, new Promise(function (e, t) {\n                n.createOffer(e, t);\n              })];\n\n            case 10:\n              o = i.sent(), i.label = 11;\n\n            case 11:\n              return n.close(), u = o.sdp, [2, d(u)];\n          }\n        });\n      });\n    };\n\n    var d = function d(e) {\n      var t = {\n        video: [],\n        audio: []\n      };\n      return e.match(/ VP8/i) && t.video.push(\"VP8\"), e.match(/ VP9/i) && t.video.push(\"VP9\"), e.match(/ H264/i) && t.video.push(\"H264\"), e.match(/ opus/i) && t.audio.push(\"OPUS\"), Promise.resolve(t);\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = this && this.__awaiter || function (e, t, n, r) {\n      return new (n || (n = Promise))(function (i, o) {\n        function a(e) {\n          try {\n            c(r.next(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function s(e) {\n          try {\n            c(r.throw(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function c(e) {\n          var t;\n          e.done ? i(e.value) : (t = e.value, t instanceof n ? t : new n(function (e) {\n            e(t);\n          })).then(a, s);\n        }\n\n        c((r = r.apply(e, t || [])).next());\n      });\n    },\n        i = this && this.__generator || function (e, t) {\n      var n,\n          r,\n          i,\n          o,\n          a = {\n        label: 0,\n        sent: function sent() {\n          if (1 & i[0]) throw i[1];\n          return i[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return o = {\n        next: s(0),\n        throw: s(1),\n        return: s(2)\n      }, \"function\" == typeof Symbol && (o[Symbol.iterator] = function () {\n        return this;\n      }), o;\n\n      function s(o) {\n        return function (s) {\n          return function (o) {\n            if (n) throw new TypeError(\"Generator is already executing.\");\n\n            for (; a;) {\n              try {\n                if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;\n\n                switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {\n                  case 0:\n                  case 1:\n                    i = o;\n                    break;\n\n                  case 4:\n                    return a.label++, {\n                      value: o[1],\n                      done: !1\n                    };\n\n                  case 5:\n                    a.label++, r = o[1], o = [0];\n                    continue;\n\n                  case 7:\n                    o = a.ops.pop(), a.trys.pop();\n                    continue;\n\n                  default:\n                    if (!(i = a.trys, (i = i.length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) {\n                      a = 0;\n                      continue;\n                    }\n\n                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {\n                      a.label = o[1];\n                      break;\n                    }\n\n                    if (6 === o[0] && a.label < i[1]) {\n                      a.label = i[1], i = o;\n                      break;\n                    }\n\n                    if (i && a.label < i[2]) {\n                      a.label = i[2], a.ops.push(o);\n                      break;\n                    }\n\n                    i[2] && a.ops.pop(), a.trys.pop();\n                    continue;\n                }\n\n                o = t.call(e, a);\n              } catch (e) {\n                o = [6, e], r = 0;\n              } finally {\n                n = i = 0;\n              }\n            }\n\n            if (5 & o[0]) throw o[1];\n            return {\n              value: o[0] ? o[1] : void 0,\n              done: !0\n            };\n          }([o, s]);\n        };\n      }\n    };\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n    var o = n(10);\n\n    function a(e) {\n      for (var t = \"\", n = 0; n < e.length; n += 1) {\n        t += String.fromCharCode(e[n]);\n      }\n\n      return window.btoa(t);\n    }\n\n    t.encryptRSA = function (e) {\n      return r(void 0, void 0, void 0, function () {\n        var t, n, r, s;\n        return i(this, function (i) {\n          switch (i.label) {\n            case 0:\n              return t = o.base64ToUint8Array(\"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\\nxQiYDz3vqa6bP29adwIDAQAB\"), [4, window.crypto.subtle.importKey(\"spki\", t, {\n                name: \"RSA-OAEP\",\n                hash: \"SHA-256\"\n              }, !0, [\"encrypt\"])];\n\n            case 1:\n              return n = i.sent(), c = e, r = new TextEncoder().encode(c), [4, window.crypto.subtle.encrypt({\n                name: \"RSA-OAEP\"\n              }, n, r)];\n\n            case 2:\n              return s = i.sent(), [2, a(new Uint8Array(s))];\n          }\n\n          var c;\n        });\n      });\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = this && this.__awaiter || function (e, t, n, r) {\n      return new (n || (n = Promise))(function (i, o) {\n        function a(e) {\n          try {\n            c(r.next(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function s(e) {\n          try {\n            c(r.throw(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function c(e) {\n          var t;\n          e.done ? i(e.value) : (t = e.value, t instanceof n ? t : new n(function (e) {\n            e(t);\n          })).then(a, s);\n        }\n\n        c((r = r.apply(e, t || [])).next());\n      });\n    },\n        i = this && this.__generator || function (e, t) {\n      var n,\n          r,\n          i,\n          o,\n          a = {\n        label: 0,\n        sent: function sent() {\n          if (1 & i[0]) throw i[1];\n          return i[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return o = {\n        next: s(0),\n        throw: s(1),\n        return: s(2)\n      }, \"function\" == typeof Symbol && (o[Symbol.iterator] = function () {\n        return this;\n      }), o;\n\n      function s(o) {\n        return function (s) {\n          return function (o) {\n            if (n) throw new TypeError(\"Generator is already executing.\");\n\n            for (; a;) {\n              try {\n                if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;\n\n                switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {\n                  case 0:\n                  case 1:\n                    i = o;\n                    break;\n\n                  case 4:\n                    return a.label++, {\n                      value: o[1],\n                      done: !1\n                    };\n\n                  case 5:\n                    a.label++, r = o[1], o = [0];\n                    continue;\n\n                  case 7:\n                    o = a.ops.pop(), a.trys.pop();\n                    continue;\n\n                  default:\n                    if (!(i = a.trys, (i = i.length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) {\n                      a = 0;\n                      continue;\n                    }\n\n                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {\n                      a.label = o[1];\n                      break;\n                    }\n\n                    if (6 === o[0] && a.label < i[1]) {\n                      a.label = i[1], i = o;\n                      break;\n                    }\n\n                    if (i && a.label < i[2]) {\n                      a.label = i[2], a.ops.push(o);\n                      break;\n                    }\n\n                    i[2] && a.ops.pop(), a.trys.pop();\n                    continue;\n                }\n\n                o = t.call(e, a);\n              } catch (e) {\n                o = [6, e], r = 0;\n              } finally {\n                n = i = 0;\n              }\n            }\n\n            if (5 & o[0]) throw o[1];\n            return {\n              value: o[0] ? o[1] : void 0,\n              done: !0\n            };\n          }([o, s]);\n        };\n      }\n    },\n        o = this && this.__importDefault || function (e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    };\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n    var a = o(n(0)),\n        s = n(75),\n        c = n(24),\n        d = n(1),\n        u = n(27);\n\n    t.addLiveStreamingCapability = function (e, t) {\n      var n = this,\n          o = function o(t) {\n        var n = t.type;\n        if (!e.joinInfo) return new c.AgoraRTCError(c.AgoraRTCErrorCode.INVALID_OPERATION, \"can not create live streaming client, please join channel first\").throw();\n\n        switch (n) {\n          case u.LiveStreamingServiceMode.INJECT:\n            return e._injectStreamingClient || (e._injectStreamingClient = new s.AgoraRTCLiveStreamingClient(e.joinInfo), e._injectStreamingClient.onInjectStatusChange = function (t, n, r) {\n              e.gatewayClient.dispatchEvent({\n                type: \"streamInjectedStatus\",\n                url: r,\n                status: t\n              });\n            }), e._injectStreamingClient;\n\n          case u.LiveStreamingServiceMode.RAW:\n            return e._liveRawStreamingClient || (e._liveRawStreamingClient = new s.AgoraRTCLiveStreamingClient(e.joinInfo), e._liveRawStreamingClient.setGatewayConnectionState(e.getConnectionState()), e.on(\"connection-state-change\", function (t) {\n              e._liveRawStreamingClient.setGatewayConnectionState(t.curState), \"CONNECTING\" === t.prevState && \"CONNECTED\" === t.curState && e._liveRawStreamingClient && e._liveRawStreamingClient.resetAllTask();\n            }), e._liveRawStreamingClient.onLiveStreamError = function (t, n) {\n              a.default.error(\"LIVE_STREAMING_ERROR\", n.toString()), e.gatewayClient.dispatchEvent({\n                type: \"liveStreamingFailed\",\n                url: t,\n                reason: n.code\n              });\n            }, e._liveRawStreamingClient.onLiveStreamWarning = function (t, n) {\n              a.default.warning(\"LIVE_STREAMING_WARNING\", n.toString()), e.gatewayClient.dispatchEvent({\n                type: \"liveStreamingWarning\",\n                url: t,\n                reason: n.code\n              });\n            }), e._liveRawStreamingClient;\n\n          case u.LiveStreamingServiceMode.TRANSCODE:\n            return e._liveTranscodeStreamingClient || (e._liveTranscodeStreamingClient = new s.AgoraRTCLiveStreamingClient(e.joinInfo), e._liveTranscodeStreamingClient.setGatewayConnectionState(e.getConnectionState()), e.on(\"connection-state-change\", function (t) {\n              e._liveTranscodeStreamingClient.setGatewayConnectionState(t.curState), \"CONNECTING\" === t.prevState && \"CONNECTED\" === t.curState && e._liveTranscodeStreamingClient && e._liveTranscodeStreamingClient.resetAllTask();\n            }), e._liveTranscodeStreamingClient.onLiveStreamError = function (t, n) {\n              a.default.error(\"LIVE_STREAMING_ERROR\", n.toString()), e.gatewayClient.dispatchEvent({\n                type: \"liveStreamingFailed\",\n                url: t,\n                reason: n.code\n              });\n            }, e._liveTranscodeStreamingClient.onLiveStreamWarning = function (t, n) {\n              a.default.warning(\"LIVE_STREAMING_WARNING\", n.toString()), e.gatewayClient.dispatchEvent({\n                type: \"liveStreamingWarning\",\n                url: t,\n                reason: n\n              });\n            }), e._liveTranscodeStreamingClient;\n        }\n      };\n\n      e.gatewayClient.addEventListener(\"join\", function (t) {\n        e._injectStreamingClient && e._injectStreamingClient.resetAllTask();\n      }), e.gatewayClient.addEventListener(\"stream-unpublished\", function (t) {\n        t.options && 0 === t.options.streamType && (e._liveRawStreamingClient && e._liveRawStreamingClient.resetAllTask(), e._liveTranscodeStreamingClient && e._liveTranscodeStreamingClient.resetAllTask());\n      }), e.gatewayClient.addEventListener(\"stream-published\", function (e) {}), e.startLiveStreaming = function (n, r) {\n        a.default.debug(\"startLiveStreaming\");\n        var i = d.report.reportApiInvoke(t.sessionId, {\n          name: \"Client.startLiveStreaming\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n\n        if (e.gatewayClient && \"audience\" === e.gatewayClient.role) {\n          var o = {\n            code: 403,\n            reason: \"AUDIENCE_STREAMING_FORBIDDEN\"\n          };\n          throw i(o), o;\n        }\n\n        var s = e._startLiveStreaming(n, r);\n\n        return s.then(function (e) {\n          i(null, e);\n        }).catch(function (t) {\n          a.default.error(\"LIVE_STREAMING_ERROR\", t.toString()), e.gatewayClient.dispatchEvent({\n            type: \"liveStreamingFailed\",\n            url: n,\n            reason: t.code\n          }), i(t);\n        }), s;\n      }, e._startLiveStreaming = function (s, d) {\n        return r(n, void 0, void 0, function () {\n          var n;\n          return i(this, function (r) {\n            switch (r.label) {\n              case 0:\n                return d || (\"vp8\" === t.codec && a.default.warning(\"VP8 is not supported by raw_streaming. Subscriber side will suffer\"), \"vp9\" === t.codec && a.default.warning(\"VP9 is not supported by raw_streaming. Subscriber side will suffer\"), \"rtc\" === t.mode && a.default.warning(\"RTC mode is not supported by raw_streaming. Subscriber side will suffer\")), (e._liveRawStreamingClient && e._liveRawStreamingClient.haveUrl(s) || e._liveTranscodeStreamingClient && e._liveTranscodeStreamingClient.haveUrl(s)) && new c.AgoraRTCError(c.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw(), n = d ? u.LiveStreamingServiceMode.TRANSCODE : u.LiveStreamingServiceMode.RAW, [4, o({\n                  type: n\n                }).startLiveStreamingTask(s, n)];\n\n              case 1:\n                return r.sent(), e.gatewayClient.dispatchEvent({\n                  type: \"liveStreamingStarted\",\n                  url: s\n                }), [2];\n            }\n          });\n        });\n      }, e.setLiveTranscoding = function (n) {\n        a.default.debug(\"setLiveTranscoding: \" + JSON.stringify(n));\n        var r = d.report.reportApiInvoke(t.sessionId, {\n          name: \"Client.setLiveTranscoding\",\n          options: arguments,\n          tag: \"tracer\"\n        }),\n            i = o({\n          type: u.LiveStreamingServiceMode.TRANSCODE\n        });\n        return i.setTranscodingConfig(n).then(function () {\n          e.gatewayClient.dispatchEvent({\n            type: \"liveTranscodingUpdated\"\n          }), r(null);\n        }).catch(function (t) {\n          a.default.error(\"SET_LIVE_TRANSCODING_ERROR\", t.toString()), e.gatewayClient.dispatchEvent({\n            type: \"liveStreamingFailed\",\n            reason: t.code\n          }), r(t);\n        });\n      }, e.stopLiveStreaming = function (n) {\n        var r = d.report.reportApiInvoke(t.sessionId, {\n          name: \"Client.stopLiveStreaming\",\n          options: arguments,\n          tag: \"tracer\"\n        }),\n            i = e._stopLiveStreaming(n);\n\n        return i.then(function (e) {\n          r(null, e);\n        }).catch(function (t) {\n          a.default.error(\"STOP_LIVE_STREAMING_ERROR\", t.toString()), e.gatewayClient.dispatchEvent({\n            type: \"liveStreamingFailed\",\n            url: n,\n            reason: t.code\n          }), r(t);\n        }), i;\n      }, e._stopLiveStreaming = function (t) {\n        return r(this, void 0, void 0, function () {\n          var n;\n          return i(this, function (r) {\n            switch (r.label) {\n              case 0:\n                return a.default.debug(\"stopLiveStreaming: \" + JSON.stringify(t)), n = [e._liveRawStreamingClient, e._liveTranscodeStreamingClient], [4, Promise.all(n.map(function (e) {\n                  return e && e.haveUrl(t) && e.stopLiveStreamingTask(t);\n                }))];\n\n              case 1:\n                return r.sent(), a.default.debug(\"stopLiveStreaming sucess: \" + JSON.stringify(t)), e.gatewayClient.dispatchEvent({\n                  type: \"liveStreamingStopped\",\n                  url: t\n                }), [2];\n            }\n          });\n        });\n      }, e.addInjectStreamUrl = function (n, r) {\n        var i = d.report.reportApiInvoke(t.sessionId, {\n          name: \"Client.addInjectStreamUrl\",\n          options: [n, r],\n          tag: \"tracer\"\n        });\n\n        if (\"audience\" === e.gatewayClient.role) {\n          var o = {\n            code: 403,\n            reason: \"AUDIENCE_INJECTING_FORBIDDEN\"\n          };\n          throw i(o), o;\n        }\n\n        var s = e._addInjectStreamUrl(n, r);\n\n        return s.then(function (e) {\n          i(null, e);\n        }).catch(function (e) {\n          a.default.error(\"ADD_INJECT_STREAM_ERROR\", e.toString()), i(e);\n        }), s;\n      }, e._addInjectStreamUrl = function (e, t) {\n        return r(n, void 0, void 0, function () {\n          var n;\n          return i(this, function (r) {\n            switch (r.label) {\n              case 0:\n                return (n = o({\n                  type: u.LiveStreamingServiceMode.INJECT\n                })).setInjectStreamConfig(t, 0), [4, n.startLiveStreamingTask(e, u.LiveStreamingServiceMode.INJECT)];\n\n              case 1:\n                return r.sent(), [2];\n            }\n          });\n        });\n      }, e.removeInjectStreamUrl = function (n) {\n        return r(this, void 0, void 0, function () {\n          var r, o;\n          return i(this, function (i) {\n            return r = d.report.reportApiInvoke(t.sessionId, {\n              name: \"Client.removeInjectStreamUrl\",\n              options: [n],\n              tag: \"tracer\"\n            }), (o = e._removeInjectStreamUrl(n)).then(function (e) {\n              r(null, e);\n            }).catch(function (e) {\n              a.default.error(\"REMOVE_INJECT_STREAM_ERROR\", e.toString()), r(e);\n            }), [2, o];\n          });\n        });\n      }, e._removeInjectStreamUrl = function (e) {\n        return r(n, void 0, void 0, function () {\n          return i(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, o({\n                  type: u.LiveStreamingServiceMode.INJECT\n                }).stopLiveStreamingTask(e)];\n\n              case 1:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, e._terminateLiveStreaming = function () {\n        return r(n, void 0, void 0, function () {\n          return i(this, function (t) {\n            return [e._injectStreamingClient, e._liveRawStreamingClient, e._liveTranscodeStreamingClient].forEach(function (e) {\n              e && e.terminate();\n            }), [2];\n          });\n        });\n      };\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = this && this.__importDefault || function (e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    };\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n    var i = r(n(5)),\n        o = r(n(0)),\n        a = n(10);\n\n    t.default = function (e, t) {\n      void 0 === t && (t = {\n        width: 160,\n        height: 120,\n        framerate: 15\n      });\n      var n = t.width,\n          r = t.height,\n          s = t.framerate,\n          c = e.stream;\n      if (!c) throw i.default.INVALID_LOCAL_STREAM;\n      if (!c.getVideoTracks()[0]) throw i.default.HIGH_STREAM_NOT_VIDEO_TRACE;\n      var d = c.getVideoTracks()[0];\n      o.default.debug(\"Start getLowStream\");\n      var u = document.createElement(\"video\"),\n          l = document.createElement(\"canvas\");\n      u.setAttribute(\"style\", \"display:none\"), u.setAttribute(\"muted\", \"\"), u.muted = !0, u.setAttribute(\"autoplay\", \"\"), u.autoplay = !0, u.setAttribute(\"playsinline\", \"\"), l.setAttribute(\"style\", \"display:none\"), l.setAttribute(\"width\", n.toString()), l.setAttribute(\"height\", r.toString());\n      var f = l.getContext(\"2d\");\n      if (!f) throw new Error(\"not get canvas context\");\n      u.srcObject = c, document.body.append(u), document.body.append(l), u.play(), o.default.debug(\"Start render lowStream\");\n      var p = a.audioTimerLoop(function () {\n        return function () {\n          if (u.paused && u.play(), u.videoHeight > 2 && u.videoWidth > 2) {\n            var t = u.videoWidth,\n                n = u.videoHeight / t,\n                r = l.width * n;\n            Math.abs(r - l.height) >= 2 && (o.default.debug(\"adjust low stream resolution\", l.width + \"x\" + l.height + \" -> \" + l.width + \"x\" + r), l.height = r);\n          }\n\n          f.drawImage(u, 0, 0, l.width, l.height);\n          var i = e.stream;\n\n          if (i) {\n            var a = i.getVideoTracks()[0];\n            d !== a && (o.default.debug(\"adjust low stream track\"), u.srcObject = i, d = a);\n          }\n        }();\n      }, s),\n          g = l.captureStream(s),\n          m = g.getVideoTracks()[0];\n      return m.requestFrame && m.requestFrame(), g.clean = function () {\n        o.default.debug(\"Start clean lowStream\"), p(), (u || u.parentNode || u.parentNode.removeChild) && u.parentNode.removeChild(u), (l || l.parentNode || l.parentNode.removeChild) && l.parentNode.removeChild(l), o.default.debug(\"Clean lowStream\");\n      }, g;\n    };\n  }, function (e, t) {\n    var n = \"undefined\" != typeof crypto && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || \"undefined\" != typeof msCrypto && \"function\" == typeof window.msCrypto.getRandomValues && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (n) {\n      var r = new Uint8Array(16);\n\n      e.exports = function () {\n        return n(r), r;\n      };\n    } else {\n      var i = new Array(16);\n\n      e.exports = function () {\n        for (var e, t = 0; t < 16; t++) {\n          0 == (3 & t) && (e = 4294967296 * Math.random()), i[t] = e >>> ((3 & t) << 3) & 255;\n        }\n\n        return i;\n      };\n    }\n  }, function (e, t) {\n    for (var n = [], r = 0; r < 256; ++r) {\n      n[r] = (r + 256).toString(16).substr(1);\n    }\n\n    e.exports = function (e, t) {\n      var r = t || 0,\n          i = n;\n      return [i[e[r++]], i[e[r++]], i[e[r++]], i[e[r++]], \"-\", i[e[r++]], i[e[r++]], \"-\", i[e[r++]], i[e[r++]], \"-\", i[e[r++]], i[e[r++]], \"-\", i[e[r++]], i[e[r++]], i[e[r++]], i[e[r++]], i[e[r++]], i[e[r++]]].join(\"\");\n    };\n  }, function (module, exports, __webpack_require__) {\n    (function (global, module) {\n      var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n      /*!\n       * protobuf.js v6.10.0 (c) 2016, daniel wirtz\n       * compiled wed, 15 jul 2020 23:34:13 utc\n       * licensed under the bsd-3-clause license\n       * see: https://github.com/dcodeio/protobuf.js for details\n       */\n\n\n      !function (undefined) {\n        \"use strict\";\n\n        !function (e, t, n) {\n          var r = function n(r) {\n            var i = t[r];\n            return i || e[r][0].call(i = t[r] = {\n              exports: {}\n            }, n, i, i.exports), i.exports;\n          }(n[0]);\n\n          r.util.global.protobuf = r, __WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(61)], (__WEBPACK_AMD_DEFINE_RESULT__ = function (e) {\n            return e && e.isLong && (r.util.Long = e, r.configure()), r;\n          }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) === undefined || (module.exports = __WEBPACK_AMD_DEFINE_RESULT__), module && module.exports && (module.exports = r);\n        }({\n          1: [function (e, t, n) {\n            t.exports = function (e, t) {\n              var n = new Array(arguments.length - 1),\n                  r = 0,\n                  i = 2,\n                  o = !0;\n\n              for (; i < arguments.length;) {\n                n[r++] = arguments[i++];\n              }\n\n              return new Promise(function (i, a) {\n                n[r] = function (e) {\n                  if (o) if (o = !1, e) a(e);else {\n                    for (var t = new Array(arguments.length - 1), n = 0; n < t.length;) {\n                      t[n++] = arguments[n];\n                    }\n\n                    i.apply(null, t);\n                  }\n                };\n\n                try {\n                  e.apply(t || null, n);\n                } catch (e) {\n                  o && (o = !1, a(e));\n                }\n              });\n            };\n          }, {}],\n          2: [function (e, t, n) {\n            var r = n;\n\n            r.length = function (e) {\n              var t = e.length;\n              if (!t) return 0;\n\n              for (var n = 0; --t % 4 > 1 && \"=\" === e.charAt(t);) {\n                ++n;\n              }\n\n              return Math.ceil(3 * e.length) / 4 - n;\n            };\n\n            for (var i = new Array(64), o = new Array(123), a = 0; a < 64;) {\n              o[i[a] = a < 26 ? a + 65 : a < 52 ? a + 71 : a < 62 ? a - 4 : a - 59 | 43] = a++;\n            }\n\n            r.encode = function (e, t, n) {\n              for (var r, o = null, a = [], s = 0, c = 0; t < n;) {\n                var d = e[t++];\n\n                switch (c) {\n                  case 0:\n                    a[s++] = i[d >> 2], r = (3 & d) << 4, c = 1;\n                    break;\n\n                  case 1:\n                    a[s++] = i[r | d >> 4], r = (15 & d) << 2, c = 2;\n                    break;\n\n                  case 2:\n                    a[s++] = i[r | d >> 6], a[s++] = i[63 & d], c = 0;\n                }\n\n                s > 8191 && ((o || (o = [])).push(String.fromCharCode.apply(String, a)), s = 0);\n              }\n\n              return c && (a[s++] = i[r], a[s++] = 61, 1 === c && (a[s++] = 61)), o ? (s && o.push(String.fromCharCode.apply(String, a.slice(0, s))), o.join(\"\")) : String.fromCharCode.apply(String, a.slice(0, s));\n            };\n\n            r.decode = function (e, t, n) {\n              for (var r, i = n, a = 0, s = 0; s < e.length;) {\n                var c = e.charCodeAt(s++);\n                if (61 === c && a > 1) break;\n                if ((c = o[c]) === undefined) throw Error(\"invalid encoding\");\n\n                switch (a) {\n                  case 0:\n                    r = c, a = 1;\n                    break;\n\n                  case 1:\n                    t[n++] = r << 2 | (48 & c) >> 4, r = c, a = 2;\n                    break;\n\n                  case 2:\n                    t[n++] = (15 & r) << 4 | (60 & c) >> 2, r = c, a = 3;\n                    break;\n\n                  case 3:\n                    t[n++] = (3 & r) << 6 | c, a = 0;\n                }\n              }\n\n              if (1 === a) throw Error(\"invalid encoding\");\n              return n - i;\n            }, r.test = function (e) {\n              return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e);\n            };\n          }, {}],\n          3: [function (e, t, n) {\n            function r(e, t) {\n              \"string\" == typeof e && (t = e, e = undefined);\n              var n = [];\n\n              function i(e) {\n                if (\"string\" != typeof e) {\n                  var t = o();\n\n                  if (r.verbose && console.log(\"codegen: \" + t), t = \"return \" + t, e) {\n                    for (var a = Object.keys(e), s = new Array(a.length + 1), c = new Array(a.length), d = 0; d < a.length;) {\n                      s[d] = a[d], c[d] = e[a[d++]];\n                    }\n\n                    return s[d] = t, Function.apply(null, s).apply(null, c);\n                  }\n\n                  return Function(t)();\n                }\n\n                for (var u = new Array(arguments.length - 1), l = 0; l < u.length;) {\n                  u[l] = arguments[++l];\n                }\n\n                if (l = 0, e = e.replace(/%([%dfijs])/g, function (e, t) {\n                  var n = u[l++];\n\n                  switch (t) {\n                    case \"d\":\n                    case \"f\":\n                      return String(Number(n));\n\n                    case \"i\":\n                      return String(Math.floor(n));\n\n                    case \"j\":\n                      return JSON.stringify(n);\n\n                    case \"s\":\n                      return String(n);\n                  }\n\n                  return \"%\";\n                }), l !== u.length) throw Error(\"parameter count mismatch\");\n                return n.push(e), i;\n              }\n\n              function o(r) {\n                return \"function \" + (r || t || \"\") + \"(\" + (e && e.join(\",\") || \"\") + \"){\\n  \" + n.join(\"\\n  \") + \"\\n}\";\n              }\n\n              return i.toString = o, i;\n            }\n\n            t.exports = r, r.verbose = !1;\n          }, {}],\n          4: [function (e, t, n) {\n            function r() {\n              this._listeners = {};\n            }\n\n            t.exports = r, r.prototype.on = function (e, t, n) {\n              return (this._listeners[e] || (this._listeners[e] = [])).push({\n                fn: t,\n                ctx: n || this\n              }), this;\n            }, r.prototype.off = function (e, t) {\n              if (e === undefined) this._listeners = {};else if (t === undefined) this._listeners[e] = [];else for (var n = this._listeners[e], r = 0; r < n.length;) {\n                n[r].fn === t ? n.splice(r, 1) : ++r;\n              }\n              return this;\n            }, r.prototype.emit = function (e) {\n              var t = this._listeners[e];\n\n              if (t) {\n                for (var n = [], r = 1; r < arguments.length;) {\n                  n.push(arguments[r++]);\n                }\n\n                for (r = 0; r < t.length;) {\n                  t[r].fn.apply(t[r++].ctx, n);\n                }\n              }\n\n              return this;\n            };\n          }, {}],\n          5: [function (e, t, n) {\n            t.exports = o;\n            var r = e(1),\n                i = e(7)(\"fs\");\n\n            function o(e, t, n) {\n              return \"function\" == typeof t ? (n = t, t = {}) : t || (t = {}), n ? !t.xhr && i && i.readFile ? i.readFile(e, function (r, i) {\n                return r && \"undefined\" != typeof XMLHttpRequest ? o.xhr(e, t, n) : r ? n(r) : n(null, t.binary ? i : i.toString(\"utf8\"));\n              }) : o.xhr(e, t, n) : r(o, this, e, t);\n            }\n\n            o.xhr = function (e, t, n) {\n              var r = new XMLHttpRequest();\n              r.onreadystatechange = function () {\n                if (4 !== r.readyState) return undefined;\n                if (0 !== r.status && 200 !== r.status) return n(Error(\"status \" + r.status));\n\n                if (t.binary) {\n                  var e = r.response;\n\n                  if (!e) {\n                    e = [];\n\n                    for (var i = 0; i < r.responseText.length; ++i) {\n                      e.push(255 & r.responseText.charCodeAt(i));\n                    }\n                  }\n\n                  return n(null, \"undefined\" != typeof Uint8Array ? new Uint8Array(e) : e);\n                }\n\n                return n(null, r.responseText);\n              }, t.binary && (\"overrideMimeType\" in r && r.overrideMimeType(\"text/plain; charset=x-user-defined\"), r.responseType = \"arraybuffer\"), r.open(\"GET\", e), r.send();\n            };\n          }, {\n            1: 1,\n            7: 7\n          }],\n          6: [function (e, t, n) {\n            function r(e) {\n              return \"undefined\" != typeof Float32Array ? function () {\n                var t = new Float32Array([-0]),\n                    n = new Uint8Array(t.buffer),\n                    r = 128 === n[3];\n\n                function i(e, r, i) {\n                  t[0] = e, r[i] = n[0], r[i + 1] = n[1], r[i + 2] = n[2], r[i + 3] = n[3];\n                }\n\n                function o(e, r, i) {\n                  t[0] = e, r[i] = n[3], r[i + 1] = n[2], r[i + 2] = n[1], r[i + 3] = n[0];\n                }\n\n                function a(e, r) {\n                  return n[0] = e[r], n[1] = e[r + 1], n[2] = e[r + 2], n[3] = e[r + 3], t[0];\n                }\n\n                function s(e, r) {\n                  return n[3] = e[r], n[2] = e[r + 1], n[1] = e[r + 2], n[0] = e[r + 3], t[0];\n                }\n\n                e.writeFloatLE = r ? i : o, e.writeFloatBE = r ? o : i, e.readFloatLE = r ? a : s, e.readFloatBE = r ? s : a;\n              }() : function () {\n                function t(e, t, n, r) {\n                  var i = t < 0 ? 1 : 0;\n                  if (i && (t = -t), 0 === t) e(1 / t > 0 ? 0 : 2147483648, n, r);else if (isNaN(t)) e(2143289344, n, r);else if (t > 34028234663852886e22) e((i << 31 | 2139095040) >>> 0, n, r);else if (t < 11754943508222875e-54) e((i << 31 | Math.round(t / 1401298464324817e-60)) >>> 0, n, r);else {\n                    var o = Math.floor(Math.log(t) / Math.LN2);\n                    e((i << 31 | o + 127 << 23 | 8388607 & Math.round(t * Math.pow(2, -o) * 8388608)) >>> 0, n, r);\n                  }\n                }\n\n                function n(e, t, n) {\n                  var r = e(t, n),\n                      i = 2 * (r >> 31) + 1,\n                      o = r >>> 23 & 255,\n                      a = 8388607 & r;\n                  return 255 === o ? a ? NaN : i * (1 / 0) : 0 === o ? 1401298464324817e-60 * i * a : i * Math.pow(2, o - 150) * (a + 8388608);\n                }\n\n                e.writeFloatLE = t.bind(null, i), e.writeFloatBE = t.bind(null, o), e.readFloatLE = n.bind(null, a), e.readFloatBE = n.bind(null, s);\n              }(), \"undefined\" != typeof Float64Array ? function () {\n                var t = new Float64Array([-0]),\n                    n = new Uint8Array(t.buffer),\n                    r = 128 === n[7];\n\n                function i(e, r, i) {\n                  t[0] = e, r[i] = n[0], r[i + 1] = n[1], r[i + 2] = n[2], r[i + 3] = n[3], r[i + 4] = n[4], r[i + 5] = n[5], r[i + 6] = n[6], r[i + 7] = n[7];\n                }\n\n                function o(e, r, i) {\n                  t[0] = e, r[i] = n[7], r[i + 1] = n[6], r[i + 2] = n[5], r[i + 3] = n[4], r[i + 4] = n[3], r[i + 5] = n[2], r[i + 6] = n[1], r[i + 7] = n[0];\n                }\n\n                function a(e, r) {\n                  return n[0] = e[r], n[1] = e[r + 1], n[2] = e[r + 2], n[3] = e[r + 3], n[4] = e[r + 4], n[5] = e[r + 5], n[6] = e[r + 6], n[7] = e[r + 7], t[0];\n                }\n\n                function s(e, r) {\n                  return n[7] = e[r], n[6] = e[r + 1], n[5] = e[r + 2], n[4] = e[r + 3], n[3] = e[r + 4], n[2] = e[r + 5], n[1] = e[r + 6], n[0] = e[r + 7], t[0];\n                }\n\n                e.writeDoubleLE = r ? i : o, e.writeDoubleBE = r ? o : i, e.readDoubleLE = r ? a : s, e.readDoubleBE = r ? s : a;\n              }() : function () {\n                function t(e, t, n, r, i, o) {\n                  var a = r < 0 ? 1 : 0;\n                  if (a && (r = -r), 0 === r) e(0, i, o + t), e(1 / r > 0 ? 0 : 2147483648, i, o + n);else if (isNaN(r)) e(0, i, o + t), e(2146959360, i, o + n);else if (r > 17976931348623157e292) e(0, i, o + t), e((a << 31 | 2146435072) >>> 0, i, o + n);else {\n                    var s;\n                    if (r < 22250738585072014e-324) e((s = r / 5e-324) >>> 0, i, o + t), e((a << 31 | s / 4294967296) >>> 0, i, o + n);else {\n                      var c = Math.floor(Math.log(r) / Math.LN2);\n                      1024 === c && (c = 1023), e(4503599627370496 * (s = r * Math.pow(2, -c)) >>> 0, i, o + t), e((a << 31 | c + 1023 << 20 | 1048576 * s & 1048575) >>> 0, i, o + n);\n                    }\n                  }\n                }\n\n                function n(e, t, n, r, i) {\n                  var o = e(r, i + t),\n                      a = e(r, i + n),\n                      s = 2 * (a >> 31) + 1,\n                      c = a >>> 20 & 2047,\n                      d = 4294967296 * (1048575 & a) + o;\n                  return 2047 === c ? d ? NaN : s * (1 / 0) : 0 === c ? 5e-324 * s * d : s * Math.pow(2, c - 1075) * (d + 4503599627370496);\n                }\n\n                e.writeDoubleLE = t.bind(null, i, 0, 4), e.writeDoubleBE = t.bind(null, o, 4, 0), e.readDoubleLE = n.bind(null, a, 0, 4), e.readDoubleBE = n.bind(null, s, 4, 0);\n              }(), e;\n            }\n\n            function i(e, t, n) {\n              t[n] = 255 & e, t[n + 1] = e >>> 8 & 255, t[n + 2] = e >>> 16 & 255, t[n + 3] = e >>> 24;\n            }\n\n            function o(e, t, n) {\n              t[n] = e >>> 24, t[n + 1] = e >>> 16 & 255, t[n + 2] = e >>> 8 & 255, t[n + 3] = 255 & e;\n            }\n\n            function a(e, t) {\n              return (e[t] | e[t + 1] << 8 | e[t + 2] << 16 | e[t + 3] << 24) >>> 0;\n            }\n\n            function s(e, t) {\n              return (e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3]) >>> 0;\n            }\n\n            t.exports = r(r);\n          }, {}],\n          7: [function (require, module, exports) {\n            function inquire(moduleName) {\n              try {\n                var mod = eval(\"quire\".replace(/^/, \"re\"))(moduleName);\n                if (mod && (mod.length || Object.keys(mod).length)) return mod;\n              } catch (e) {}\n\n              return null;\n            }\n\n            module.exports = inquire;\n          }, {}],\n          8: [function (e, t, n) {\n            var r = n,\n                i = r.isAbsolute = function (e) {\n              return /^(?:\\/|\\w+:)/.test(e);\n            },\n                o = r.normalize = function (e) {\n              var t = (e = e.replace(/\\\\/g, \"/\").replace(/\\/{2,}/g, \"/\")).split(\"/\"),\n                  n = i(e),\n                  r = \"\";\n              n && (r = t.shift() + \"/\");\n\n              for (var o = 0; o < t.length;) {\n                \"..\" === t[o] ? o > 0 && \"..\" !== t[o - 1] ? t.splice(--o, 2) : n ? t.splice(o, 1) : ++o : \".\" === t[o] ? t.splice(o, 1) : ++o;\n              }\n\n              return r + t.join(\"/\");\n            };\n\n            r.resolve = function (e, t, n) {\n              return n || (t = o(t)), i(t) ? t : (n || (e = o(e)), (e = e.replace(/(?:\\/|^)[^/]+$/, \"\")).length ? o(e + \"/\" + t) : t);\n            };\n          }, {}],\n          9: [function (e, t, n) {\n            t.exports = function (e, t, n) {\n              var r = n || 8192,\n                  i = r >>> 1,\n                  o = null,\n                  a = r;\n              return function (n) {\n                if (n < 1 || n > i) return e(n);\n                a + n > r && (o = e(r), a = 0);\n                var s = t.call(o, a, a += n);\n                return 7 & a && (a = 1 + (7 | a)), s;\n              };\n            };\n          }, {}],\n          10: [function (e, t, n) {\n            var r = n;\n            r.length = function (e) {\n              for (var t = 0, n = 0, r = 0; r < e.length; ++r) {\n                (n = e.charCodeAt(r)) < 128 ? t += 1 : n < 2048 ? t += 2 : 55296 == (64512 & n) && 56320 == (64512 & e.charCodeAt(r + 1)) ? (++r, t += 4) : t += 3;\n              }\n\n              return t;\n            }, r.read = function (e, t, n) {\n              if (n - t < 1) return \"\";\n\n              for (var r, i = null, o = [], a = 0; t < n;) {\n                (r = e[t++]) < 128 ? o[a++] = r : r > 191 && r < 224 ? o[a++] = (31 & r) << 6 | 63 & e[t++] : r > 239 && r < 365 ? (r = ((7 & r) << 18 | (63 & e[t++]) << 12 | (63 & e[t++]) << 6 | 63 & e[t++]) - 65536, o[a++] = 55296 + (r >> 10), o[a++] = 56320 + (1023 & r)) : o[a++] = (15 & r) << 12 | (63 & e[t++]) << 6 | 63 & e[t++], a > 8191 && ((i || (i = [])).push(String.fromCharCode.apply(String, o)), a = 0);\n              }\n\n              return i ? (a && i.push(String.fromCharCode.apply(String, o.slice(0, a))), i.join(\"\")) : String.fromCharCode.apply(String, o.slice(0, a));\n            }, r.write = function (e, t, n) {\n              for (var r, i, o = n, a = 0; a < e.length; ++a) {\n                (r = e.charCodeAt(a)) < 128 ? t[n++] = r : r < 2048 ? (t[n++] = r >> 6 | 192, t[n++] = 63 & r | 128) : 55296 == (64512 & r) && 56320 == (64512 & (i = e.charCodeAt(a + 1))) ? (r = 65536 + ((1023 & r) << 10) + (1023 & i), ++a, t[n++] = r >> 18 | 240, t[n++] = r >> 12 & 63 | 128, t[n++] = r >> 6 & 63 | 128, t[n++] = 63 & r | 128) : (t[n++] = r >> 12 | 224, t[n++] = r >> 6 & 63 | 128, t[n++] = 63 & r | 128);\n              }\n\n              return n - o;\n            };\n          }, {}],\n          11: [function (e, t, n) {\n            var r = n,\n                i = e(14),\n                o = e(33);\n\n            function a(e, t, n, r) {\n              if (t.resolvedType) {\n                if (t.resolvedType instanceof i) {\n                  e(\"switch(d%s){\", r);\n\n                  for (var o = t.resolvedType.values, a = Object.keys(o), s = 0; s < a.length; ++s) {\n                    t.repeated && o[a[s]] === t.typeDefault && e(\"default:\"), e(\"case%j:\", a[s])(\"case %i:\", o[a[s]])(\"m%s=%j\", r, o[a[s]])(\"break\");\n                  }\n\n                  e(\"}\");\n                } else e('if(typeof d%s!==\"object\")', r)(\"throw TypeError(%j)\", t.fullName + \": object expected\")(\"m%s=types[%i].fromObject(d%s)\", r, n, r);\n              } else {\n                var c = !1;\n\n                switch (t.type) {\n                  case \"double\":\n                  case \"float\":\n                    e(\"m%s=Number(d%s)\", r, r);\n                    break;\n\n                  case \"uint32\":\n                  case \"fixed32\":\n                    e(\"m%s=d%s>>>0\", r, r);\n                    break;\n\n                  case \"int32\":\n                  case \"sint32\":\n                  case \"sfixed32\":\n                    e(\"m%s=d%s|0\", r, r);\n                    break;\n\n                  case \"uint64\":\n                    c = !0;\n\n                  case \"int64\":\n                  case \"sint64\":\n                  case \"fixed64\":\n                  case \"sfixed64\":\n                    e(\"if(util.Long)\")(\"(m%s=util.Long.fromValue(d%s)).unsigned=%j\", r, r, c)('else if(typeof d%s===\"string\")', r)(\"m%s=parseInt(d%s,10)\", r, r)('else if(typeof d%s===\"number\")', r)(\"m%s=d%s\", r, r)('else if(typeof d%s===\"object\")', r)(\"m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)\", r, r, r, c ? \"true\" : \"\");\n                    break;\n\n                  case \"bytes\":\n                    e('if(typeof d%s===\"string\")', r)(\"util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)\", r, r, r)(\"else if(d%s.length)\", r)(\"m%s=d%s\", r, r);\n                    break;\n\n                  case \"string\":\n                    e(\"m%s=String(d%s)\", r, r);\n                    break;\n\n                  case \"bool\":\n                    e(\"m%s=Boolean(d%s)\", r, r);\n                }\n              }\n              return e;\n            }\n\n            function s(e, t, n, r) {\n              if (t.resolvedType) t.resolvedType instanceof i ? e(\"d%s=o.enums===String?types[%i].values[m%s]:m%s\", r, n, r, r) : e(\"d%s=types[%i].toObject(m%s,o)\", r, n, r);else {\n                var o = !1;\n\n                switch (t.type) {\n                  case \"double\":\n                  case \"float\":\n                    e(\"d%s=o.json&&!isFinite(m%s)?String(m%s):m%s\", r, r, r, r);\n                    break;\n\n                  case \"uint64\":\n                    o = !0;\n\n                  case \"int64\":\n                  case \"sint64\":\n                  case \"fixed64\":\n                  case \"sfixed64\":\n                    e('if(typeof m%s===\"number\")', r)(\"d%s=o.longs===String?String(m%s):m%s\", r, r, r)(\"else\")(\"d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s\", r, r, r, r, o ? \"true\" : \"\", r);\n                    break;\n\n                  case \"bytes\":\n                    e(\"d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s\", r, r, r, r, r);\n                    break;\n\n                  default:\n                    e(\"d%s=m%s\", r, r);\n                }\n              }\n              return e;\n            }\n\n            r.fromObject = function (e) {\n              var t = e.fieldsArray,\n                  n = o.codegen([\"d\"], e.name + \"$fromObject\")(\"if(d instanceof this.ctor)\")(\"return d\");\n              if (!t.length) return n(\"return new this.ctor\");\n              n(\"var m=new this.ctor\");\n\n              for (var r = 0; r < t.length; ++r) {\n                var s = t[r].resolve(),\n                    c = o.safeProp(s.name);\n                s.map ? (n(\"if(d%s){\", c)('if(typeof d%s!==\"object\")', c)(\"throw TypeError(%j)\", s.fullName + \": object expected\")(\"m%s={}\", c)(\"for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){\", c), a(n, s, r, c + \"[ks[i]]\")(\"}\")(\"}\")) : s.repeated ? (n(\"if(d%s){\", c)(\"if(!Array.isArray(d%s))\", c)(\"throw TypeError(%j)\", s.fullName + \": array expected\")(\"m%s=[]\", c)(\"for(var i=0;i<d%s.length;++i){\", c), a(n, s, r, c + \"[i]\")(\"}\")(\"}\")) : (s.resolvedType instanceof i || n(\"if(d%s!=null){\", c), a(n, s, r, c), s.resolvedType instanceof i || n(\"}\"));\n              }\n\n              return n(\"return m\");\n            }, r.toObject = function (e) {\n              var t = e.fieldsArray.slice().sort(o.compareFieldsById);\n              if (!t.length) return o.codegen()(\"return {}\");\n\n              for (var n = o.codegen([\"m\", \"o\"], e.name + \"$toObject\")(\"if(!o)\")(\"o={}\")(\"var d={}\"), r = [], a = [], c = [], d = 0; d < t.length; ++d) {\n                t[d].partOf || (t[d].resolve().repeated ? r : t[d].map ? a : c).push(t[d]);\n              }\n\n              if (r.length) {\n                for (n(\"if(o.arrays||o.defaults){\"), d = 0; d < r.length; ++d) {\n                  n(\"d%s=[]\", o.safeProp(r[d].name));\n                }\n\n                n(\"}\");\n              }\n\n              if (a.length) {\n                for (n(\"if(o.objects||o.defaults){\"), d = 0; d < a.length; ++d) {\n                  n(\"d%s={}\", o.safeProp(a[d].name));\n                }\n\n                n(\"}\");\n              }\n\n              if (c.length) {\n                for (n(\"if(o.defaults){\"), d = 0; d < c.length; ++d) {\n                  var u = c[d],\n                      l = o.safeProp(u.name);\n                  if (u.resolvedType instanceof i) n(\"d%s=o.enums===String?%j:%j\", l, u.resolvedType.valuesById[u.typeDefault], u.typeDefault);else if (u.long) n(\"if(util.Long){\")(\"var n=new util.Long(%i,%i,%j)\", u.typeDefault.low, u.typeDefault.high, u.typeDefault.unsigned)(\"d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n\", l)(\"}else\")(\"d%s=o.longs===String?%j:%i\", l, u.typeDefault.toString(), u.typeDefault.toNumber());else if (u.bytes) {\n                    var f = \"[\" + Array.prototype.slice.call(u.typeDefault).join(\",\") + \"]\";\n                    n(\"if(o.bytes===String)d%s=%j\", l, String.fromCharCode.apply(String, u.typeDefault))(\"else{\")(\"d%s=%s\", l, f)(\"if(o.bytes!==Array)d%s=util.newBuffer(d%s)\", l, l)(\"}\");\n                  } else n(\"d%s=%j\", l, u.typeDefault);\n                }\n\n                n(\"}\");\n              }\n\n              var p = !1;\n\n              for (d = 0; d < t.length; ++d) {\n                u = t[d];\n\n                var g = e._fieldsArray.indexOf(u);\n\n                l = o.safeProp(u.name);\n                u.map ? (p || (p = !0, n(\"var ks2\")), n(\"if(m%s&&(ks2=Object.keys(m%s)).length){\", l, l)(\"d%s={}\", l)(\"for(var j=0;j<ks2.length;++j){\"), s(n, u, g, l + \"[ks2[j]]\")(\"}\")) : u.repeated ? (n(\"if(m%s&&m%s.length){\", l, l)(\"d%s=[]\", l)(\"for(var j=0;j<m%s.length;++j){\", l), s(n, u, g, l + \"[j]\")(\"}\")) : (n(\"if(m%s!=null&&m.hasOwnProperty(%j)){\", l, u.name), s(n, u, g, l), u.partOf && n(\"if(o.oneofs)\")(\"d%s=%j\", o.safeProp(u.partOf.name), u.name)), n(\"}\");\n              }\n\n              return n(\"return d\");\n            };\n          }, {\n            14: 14,\n            33: 33\n          }],\n          12: [function (e, t, n) {\n            t.exports = function (e) {\n              var t = o.codegen([\"r\", \"l\"], e.name + \"$decode\")(\"if(!(r instanceof Reader))\")(\"r=Reader.create(r)\")(\"var c=l===undefined?r.len:r.pos+l,m=new this.ctor\" + (e.fieldsArray.filter(function (e) {\n                return e.map;\n              }).length ? \",k,value\" : \"\"))(\"while(r.pos<c){\")(\"var t=r.uint32()\");\n              e.group && t(\"if((t&7)===4)\")(\"break\");\n              t(\"switch(t>>>3){\");\n\n              for (var n = 0; n < e.fieldsArray.length; ++n) {\n                var s = e._fieldsArray[n].resolve(),\n                    c = s.resolvedType instanceof r ? \"int32\" : s.type,\n                    d = \"m\" + o.safeProp(s.name);\n\n                t(\"case %i:\", s.id), s.map ? (t(\"if(%s===util.emptyObject)\", d)(\"%s={}\", d)(\"var c2 = r.uint32()+r.pos\"), i.defaults[s.keyType] !== undefined ? t(\"k=%j\", i.defaults[s.keyType]) : t(\"k=null\"), i.defaults[c] !== undefined ? t(\"value=%j\", i.defaults[c]) : t(\"value=null\"), t(\"while(r.pos<c2){\")(\"var tag2=r.uint32()\")(\"switch(tag2>>>3){\")(\"case 1: k=r.%s(); break\", s.keyType)(\"case 2:\"), i.basic[c] === undefined ? t(\"value=types[%i].decode(r,r.uint32())\", n) : t(\"value=r.%s()\", c), t(\"break\")(\"default:\")(\"r.skipType(tag2&7)\")(\"break\")(\"}\")(\"}\"), i.long[s.keyType] !== undefined ? t('%s[typeof k===\"object\"?util.longToHash(k):k]=value', d) : t(\"%s[k]=value\", d)) : s.repeated ? (t(\"if(!(%s&&%s.length))\", d, d)(\"%s=[]\", d), i.packed[c] !== undefined && t(\"if((t&7)===2){\")(\"var c2=r.uint32()+r.pos\")(\"while(r.pos<c2)\")(\"%s.push(r.%s())\", d, c)(\"}else\"), i.basic[c] === undefined ? t(s.resolvedType.group ? \"%s.push(types[%i].decode(r))\" : \"%s.push(types[%i].decode(r,r.uint32()))\", d, n) : t(\"%s.push(r.%s())\", d, c)) : i.basic[c] === undefined ? t(s.resolvedType.group ? \"%s=types[%i].decode(r)\" : \"%s=types[%i].decode(r,r.uint32())\", d, n) : t(\"%s=r.%s()\", d, c), t(\"break\");\n              }\n\n              for (t(\"default:\")(\"r.skipType(t&7)\")(\"break\")(\"}\")(\"}\"), n = 0; n < e._fieldsArray.length; ++n) {\n                var u = e._fieldsArray[n];\n                u.required && t(\"if(!m.hasOwnProperty(%j))\", u.name)(\"throw util.ProtocolError(%j,{instance:m})\", a(u));\n              }\n\n              return t(\"return m\");\n            };\n\n            var r = e(14),\n                i = e(32),\n                o = e(33);\n\n            function a(e) {\n              return \"missing required '\" + e.name + \"'\";\n            }\n          }, {\n            14: 14,\n            32: 32,\n            33: 33\n          }],\n          13: [function (e, t, n) {\n            t.exports = function (e) {\n              for (var t, n = o.codegen([\"m\", \"w\"], e.name + \"$encode\")(\"if(!w)\")(\"w=Writer.create()\"), s = e.fieldsArray.slice().sort(o.compareFieldsById), c = 0; c < s.length; ++c) {\n                var d = s[c].resolve(),\n                    u = e._fieldsArray.indexOf(d),\n                    l = d.resolvedType instanceof r ? \"int32\" : d.type,\n                    f = i.basic[l];\n\n                t = \"m\" + o.safeProp(d.name), d.map ? (n(\"if(%s!=null&&Object.hasOwnProperty.call(m,%j)){\", t, d.name)(\"for(var ks=Object.keys(%s),i=0;i<ks.length;++i){\", t)(\"w.uint32(%i).fork().uint32(%i).%s(ks[i])\", (d.id << 3 | 2) >>> 0, 8 | i.mapKey[d.keyType], d.keyType), f === undefined ? n(\"types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()\", u, t) : n(\".uint32(%i).%s(%s[ks[i]]).ldelim()\", 16 | f, l, t), n(\"}\")(\"}\")) : d.repeated ? (n(\"if(%s!=null&&%s.length){\", t, t), d.packed && i.packed[l] !== undefined ? n(\"w.uint32(%i).fork()\", (d.id << 3 | 2) >>> 0)(\"for(var i=0;i<%s.length;++i)\", t)(\"w.%s(%s[i])\", l, t)(\"w.ldelim()\") : (n(\"for(var i=0;i<%s.length;++i)\", t), f === undefined ? a(n, d, u, t + \"[i]\") : n(\"w.uint32(%i).%s(%s[i])\", (d.id << 3 | f) >>> 0, l, t)), n(\"}\")) : (d.optional && n(\"if(%s!=null&&Object.hasOwnProperty.call(m,%j))\", t, d.name), f === undefined ? a(n, d, u, t) : n(\"w.uint32(%i).%s(%s)\", (d.id << 3 | f) >>> 0, l, t));\n              }\n\n              return n(\"return w\");\n            };\n\n            var r = e(14),\n                i = e(32),\n                o = e(33);\n\n            function a(e, t, n, r) {\n              return t.resolvedType.group ? e(\"types[%i].encode(%s,w.uint32(%i)).uint32(%i)\", n, r, (t.id << 3 | 3) >>> 0, (t.id << 3 | 4) >>> 0) : e(\"types[%i].encode(%s,w.uint32(%i).fork()).ldelim()\", n, r, (t.id << 3 | 2) >>> 0);\n            }\n          }, {\n            14: 14,\n            32: 32,\n            33: 33\n          }],\n          14: [function (e, t, n) {\n            t.exports = a;\n            var r = e(22);\n            ((a.prototype = Object.create(r.prototype)).constructor = a).className = \"Enum\";\n            var i = e(21),\n                o = e(33);\n\n            function a(e, t, n, i, o) {\n              if (r.call(this, e, n), t && \"object\" != typeof t) throw TypeError(\"values must be an object\");\n              if (this.valuesById = {}, this.values = Object.create(this.valuesById), this.comment = i, this.comments = o || {}, this.reserved = undefined, t) for (var a = Object.keys(t), s = 0; s < a.length; ++s) {\n                \"number\" == typeof t[a[s]] && (this.valuesById[this.values[a[s]] = t[a[s]]] = a[s]);\n              }\n            }\n\n            a.fromJSON = function (e, t) {\n              var n = new a(e, t.values, t.options, t.comment, t.comments);\n              return n.reserved = t.reserved, n;\n            }, a.prototype.toJSON = function (e) {\n              var t = !!e && Boolean(e.keepComments);\n              return o.toObject([\"options\", this.options, \"values\", this.values, \"reserved\", this.reserved && this.reserved.length ? this.reserved : undefined, \"comment\", t ? this.comment : undefined, \"comments\", t ? this.comments : undefined]);\n            }, a.prototype.add = function (e, t, n) {\n              if (!o.isString(e)) throw TypeError(\"name must be a string\");\n              if (!o.isInteger(t)) throw TypeError(\"id must be an integer\");\n              if (this.values[e] !== undefined) throw Error(\"duplicate name '\" + e + \"' in \" + this);\n              if (this.isReservedId(t)) throw Error(\"id \" + t + \" is reserved in \" + this);\n              if (this.isReservedName(e)) throw Error(\"name '\" + e + \"' is reserved in \" + this);\n\n              if (this.valuesById[t] !== undefined) {\n                if (!this.options || !this.options.allow_alias) throw Error(\"duplicate id \" + t + \" in \" + this);\n                this.values[e] = t;\n              } else this.valuesById[this.values[e] = t] = e;\n\n              return this.comments[e] = n || null, this;\n            }, a.prototype.remove = function (e) {\n              if (!o.isString(e)) throw TypeError(\"name must be a string\");\n              var t = this.values[e];\n              if (null == t) throw Error(\"name '\" + e + \"' does not exist in \" + this);\n              return delete this.valuesById[t], delete this.values[e], delete this.comments[e], this;\n            }, a.prototype.isReservedId = function (e) {\n              return i.isReservedId(this.reserved, e);\n            }, a.prototype.isReservedName = function (e) {\n              return i.isReservedName(this.reserved, e);\n            };\n          }, {\n            21: 21,\n            22: 22,\n            33: 33\n          }],\n          15: [function (e, t, n) {\n            t.exports = d;\n            var r = e(22);\n            ((d.prototype = Object.create(r.prototype)).constructor = d).className = \"Field\";\n            var i,\n                o = e(14),\n                a = e(32),\n                s = e(33),\n                c = /^required|optional|repeated$/;\n\n            function d(e, t, n, i, o, d, u) {\n              if (s.isObject(i) ? (u = o, d = i, i = o = undefined) : s.isObject(o) && (u = d, d = o, o = undefined), r.call(this, e, d), !s.isInteger(t) || t < 0) throw TypeError(\"id must be a non-negative integer\");\n              if (!s.isString(n)) throw TypeError(\"type must be a string\");\n              if (i !== undefined && !c.test(i = i.toString().toLowerCase())) throw TypeError(\"rule must be a string rule\");\n              if (o !== undefined && !s.isString(o)) throw TypeError(\"extend must be a string\");\n              this.rule = i && \"optional\" !== i ? i : undefined, this.type = n, this.id = t, this.extend = o || undefined, this.required = \"required\" === i, this.optional = !this.required, this.repeated = \"repeated\" === i, this.map = !1, this.message = null, this.partOf = null, this.typeDefault = null, this.defaultValue = null, this.long = !!s.Long && a.long[n] !== undefined, this.bytes = \"bytes\" === n, this.resolvedType = null, this.extensionField = null, this.declaringField = null, this._packed = null, this.comment = u;\n            }\n\n            d.fromJSON = function (e, t) {\n              return new d(e, t.id, t.type, t.rule, t.extend, t.options, t.comment);\n            }, Object.defineProperty(d.prototype, \"packed\", {\n              get: function get() {\n                return null === this._packed && (this._packed = !1 !== this.getOption(\"packed\")), this._packed;\n              }\n            }), d.prototype.setOption = function (e, t, n) {\n              return \"packed\" === e && (this._packed = null), r.prototype.setOption.call(this, e, t, n);\n            }, d.prototype.toJSON = function (e) {\n              var t = !!e && Boolean(e.keepComments);\n              return s.toObject([\"rule\", \"optional\" !== this.rule && this.rule || undefined, \"type\", this.type, \"id\", this.id, \"extend\", this.extend, \"options\", this.options, \"comment\", t ? this.comment : undefined]);\n            }, d.prototype.resolve = function () {\n              if (this.resolved) return this;\n              if ((this.typeDefault = a.defaults[this.type]) === undefined && (this.resolvedType = (this.declaringField ? this.declaringField.parent : this.parent).lookupTypeOrEnum(this.type), this.resolvedType instanceof i ? this.typeDefault = null : this.typeDefault = this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]), this.options && null != this.options.default && (this.typeDefault = this.options.default, this.resolvedType instanceof o && \"string\" == typeof this.typeDefault && (this.typeDefault = this.resolvedType.values[this.typeDefault])), this.options && (!0 !== this.options.packed && (this.options.packed === undefined || !this.resolvedType || this.resolvedType instanceof o) || delete this.options.packed, Object.keys(this.options).length || (this.options = undefined)), this.long) this.typeDefault = s.Long.fromNumber(this.typeDefault, \"u\" === this.type.charAt(0)), Object.freeze && Object.freeze(this.typeDefault);else if (this.bytes && \"string\" == typeof this.typeDefault) {\n                var e;\n                s.base64.test(this.typeDefault) ? s.base64.decode(this.typeDefault, e = s.newBuffer(s.base64.length(this.typeDefault)), 0) : s.utf8.write(this.typeDefault, e = s.newBuffer(s.utf8.length(this.typeDefault)), 0), this.typeDefault = e;\n              }\n              return this.map ? this.defaultValue = s.emptyObject : this.repeated ? this.defaultValue = s.emptyArray : this.defaultValue = this.typeDefault, this.parent instanceof i && (this.parent.ctor.prototype[this.name] = this.defaultValue), r.prototype.resolve.call(this);\n            }, d.d = function (e, t, n, r) {\n              return \"function\" == typeof t ? t = s.decorateType(t).name : t && \"object\" == typeof t && (t = s.decorateEnum(t).name), function (i, o) {\n                s.decorateType(i.constructor).add(new d(o, e, t, n, {\n                  default: r\n                }));\n              };\n            }, d._configure = function (e) {\n              i = e;\n            };\n          }, {\n            14: 14,\n            22: 22,\n            32: 32,\n            33: 33\n          }],\n          16: [function (e, t, n) {\n            var r = t.exports = e(17);\n            r.build = \"light\", r.load = function (e, t, n) {\n              return \"function\" == typeof t ? (n = t, t = new r.Root()) : t || (t = new r.Root()), t.load(e, n);\n            }, r.loadSync = function (e, t) {\n              return t || (t = new r.Root()), t.loadSync(e);\n            }, r.encoder = e(13), r.decoder = e(12), r.verifier = e(36), r.converter = e(11), r.ReflectionObject = e(22), r.Namespace = e(21), r.Root = e(26), r.Enum = e(14), r.Type = e(31), r.Field = e(15), r.OneOf = e(23), r.MapField = e(18), r.Service = e(30), r.Method = e(20), r.Message = e(19), r.wrappers = e(37), r.types = e(32), r.util = e(33), r.ReflectionObject._configure(r.Root), r.Namespace._configure(r.Type, r.Service, r.Enum), r.Root._configure(r.Type), r.Field._configure(r.Type);\n          }, {\n            11: 11,\n            12: 12,\n            13: 13,\n            14: 14,\n            15: 15,\n            17: 17,\n            18: 18,\n            19: 19,\n            20: 20,\n            21: 21,\n            22: 22,\n            23: 23,\n            26: 26,\n            30: 30,\n            31: 31,\n            32: 32,\n            33: 33,\n            36: 36,\n            37: 37\n          }],\n          17: [function (e, t, n) {\n            var r = n;\n\n            function i() {\n              r.util._configure(), r.Writer._configure(r.BufferWriter), r.Reader._configure(r.BufferReader);\n            }\n\n            r.build = \"minimal\", r.Writer = e(38), r.BufferWriter = e(39), r.Reader = e(24), r.BufferReader = e(25), r.util = e(35), r.rpc = e(28), r.roots = e(27), r.configure = i, i();\n          }, {\n            24: 24,\n            25: 25,\n            27: 27,\n            28: 28,\n            35: 35,\n            38: 38,\n            39: 39\n          }],\n          18: [function (e, t, n) {\n            t.exports = a;\n            var r = e(15);\n            ((a.prototype = Object.create(r.prototype)).constructor = a).className = \"MapField\";\n            var i = e(32),\n                o = e(33);\n\n            function a(e, t, n, i, a, s) {\n              if (r.call(this, e, t, i, undefined, undefined, a, s), !o.isString(n)) throw TypeError(\"keyType must be a string\");\n              this.keyType = n, this.resolvedKeyType = null, this.map = !0;\n            }\n\n            a.fromJSON = function (e, t) {\n              return new a(e, t.id, t.keyType, t.type, t.options, t.comment);\n            }, a.prototype.toJSON = function (e) {\n              var t = !!e && Boolean(e.keepComments);\n              return o.toObject([\"keyType\", this.keyType, \"type\", this.type, \"id\", this.id, \"extend\", this.extend, \"options\", this.options, \"comment\", t ? this.comment : undefined]);\n            }, a.prototype.resolve = function () {\n              if (this.resolved) return this;\n              if (i.mapKey[this.keyType] === undefined) throw Error(\"invalid key type: \" + this.keyType);\n              return r.prototype.resolve.call(this);\n            }, a.d = function (e, t, n) {\n              return \"function\" == typeof n ? n = o.decorateType(n).name : n && \"object\" == typeof n && (n = o.decorateEnum(n).name), function (r, i) {\n                o.decorateType(r.constructor).add(new a(i, e, t, n));\n              };\n            };\n          }, {\n            15: 15,\n            32: 32,\n            33: 33\n          }],\n          19: [function (e, t, n) {\n            t.exports = i;\n            var r = e(35);\n\n            function i(e) {\n              if (e) for (var t = Object.keys(e), n = 0; n < t.length; ++n) {\n                this[t[n]] = e[t[n]];\n              }\n            }\n\n            i.create = function (e) {\n              return this.$type.create(e);\n            }, i.encode = function (e, t) {\n              return this.$type.encode(e, t);\n            }, i.encodeDelimited = function (e, t) {\n              return this.$type.encodeDelimited(e, t);\n            }, i.decode = function (e) {\n              return this.$type.decode(e);\n            }, i.decodeDelimited = function (e) {\n              return this.$type.decodeDelimited(e);\n            }, i.verify = function (e) {\n              return this.$type.verify(e);\n            }, i.fromObject = function (e) {\n              return this.$type.fromObject(e);\n            }, i.toObject = function (e, t) {\n              return this.$type.toObject(e, t);\n            }, i.prototype.toJSON = function () {\n              return this.$type.toObject(this, r.toJSONOptions);\n            };\n          }, {\n            35: 35\n          }],\n          20: [function (e, t, n) {\n            t.exports = o;\n            var r = e(22);\n            ((o.prototype = Object.create(r.prototype)).constructor = o).className = \"Method\";\n            var i = e(33);\n\n            function o(e, t, n, o, a, s, c, d) {\n              if (i.isObject(a) ? (c = a, a = s = undefined) : i.isObject(s) && (c = s, s = undefined), t !== undefined && !i.isString(t)) throw TypeError(\"type must be a string\");\n              if (!i.isString(n)) throw TypeError(\"requestType must be a string\");\n              if (!i.isString(o)) throw TypeError(\"responseType must be a string\");\n              r.call(this, e, c), this.type = t || \"rpc\", this.requestType = n, this.requestStream = !!a || undefined, this.responseType = o, this.responseStream = !!s || undefined, this.resolvedRequestType = null, this.resolvedResponseType = null, this.comment = d;\n            }\n\n            o.fromJSON = function (e, t) {\n              return new o(e, t.type, t.requestType, t.responseType, t.requestStream, t.responseStream, t.options, t.comment);\n            }, o.prototype.toJSON = function (e) {\n              var t = !!e && Boolean(e.keepComments);\n              return i.toObject([\"type\", \"rpc\" !== this.type && this.type || undefined, \"requestType\", this.requestType, \"requestStream\", this.requestStream, \"responseType\", this.responseType, \"responseStream\", this.responseStream, \"options\", this.options, \"comment\", t ? this.comment : undefined]);\n            }, o.prototype.resolve = function () {\n              return this.resolved ? this : (this.resolvedRequestType = this.parent.lookupType(this.requestType), this.resolvedResponseType = this.parent.lookupType(this.responseType), r.prototype.resolve.call(this));\n            };\n          }, {\n            22: 22,\n            33: 33\n          }],\n          21: [function (e, t, n) {\n            t.exports = u;\n            var r = e(22);\n            ((u.prototype = Object.create(r.prototype)).constructor = u).className = \"Namespace\";\n            var i,\n                o,\n                a,\n                s = e(15),\n                c = e(33);\n\n            function d(e, t) {\n              if (!e || !e.length) return undefined;\n\n              for (var n = {}, r = 0; r < e.length; ++r) {\n                n[e[r].name] = e[r].toJSON(t);\n              }\n\n              return n;\n            }\n\n            function u(e, t) {\n              r.call(this, e, t), this.nested = undefined, this._nestedArray = null;\n            }\n\n            function l(e) {\n              return e._nestedArray = null, e;\n            }\n\n            u.fromJSON = function (e, t) {\n              return new u(e, t.options).addJSON(t.nested);\n            }, u.arrayToJSON = d, u.isReservedId = function (e, t) {\n              if (e) for (var n = 0; n < e.length; ++n) {\n                if (\"string\" != typeof e[n] && e[n][0] <= t && e[n][1] > t) return !0;\n              }\n              return !1;\n            }, u.isReservedName = function (e, t) {\n              if (e) for (var n = 0; n < e.length; ++n) {\n                if (e[n] === t) return !0;\n              }\n              return !1;\n            }, Object.defineProperty(u.prototype, \"nestedArray\", {\n              get: function get() {\n                return this._nestedArray || (this._nestedArray = c.toArray(this.nested));\n              }\n            }), u.prototype.toJSON = function (e) {\n              return c.toObject([\"options\", this.options, \"nested\", d(this.nestedArray, e)]);\n            }, u.prototype.addJSON = function (e) {\n              if (e) for (var t, n = Object.keys(e), r = 0; r < n.length; ++r) {\n                t = e[n[r]], this.add((t.fields !== undefined ? i.fromJSON : t.values !== undefined ? a.fromJSON : t.methods !== undefined ? o.fromJSON : t.id !== undefined ? s.fromJSON : u.fromJSON)(n[r], t));\n              }\n              return this;\n            }, u.prototype.get = function (e) {\n              return this.nested && this.nested[e] || null;\n            }, u.prototype.getEnum = function (e) {\n              if (this.nested && this.nested[e] instanceof a) return this.nested[e].values;\n              throw Error(\"no such enum: \" + e);\n            }, u.prototype.add = function (e) {\n              if (!(e instanceof s && e.extend !== undefined || e instanceof i || e instanceof a || e instanceof o || e instanceof u)) throw TypeError(\"object must be a valid nested object\");\n\n              if (this.nested) {\n                var t = this.get(e.name);\n\n                if (t) {\n                  if (!(t instanceof u && e instanceof u) || t instanceof i || t instanceof o) throw Error(\"duplicate name '\" + e.name + \"' in \" + this);\n\n                  for (var n = t.nestedArray, r = 0; r < n.length; ++r) {\n                    e.add(n[r]);\n                  }\n\n                  this.remove(t), this.nested || (this.nested = {}), e.setOptions(t.options, !0);\n                }\n              } else this.nested = {};\n\n              return this.nested[e.name] = e, e.onAdd(this), l(this);\n            }, u.prototype.remove = function (e) {\n              if (!(e instanceof r)) throw TypeError(\"object must be a ReflectionObject\");\n              if (e.parent !== this) throw Error(e + \" is not a member of \" + this);\n              return delete this.nested[e.name], Object.keys(this.nested).length || (this.nested = undefined), e.onRemove(this), l(this);\n            }, u.prototype.define = function (e, t) {\n              if (c.isString(e)) e = e.split(\".\");else if (!Array.isArray(e)) throw TypeError(\"illegal path\");\n              if (e && e.length && \"\" === e[0]) throw Error(\"path must be relative\");\n\n              for (var n = this; e.length > 0;) {\n                var r = e.shift();\n\n                if (n.nested && n.nested[r]) {\n                  if (!((n = n.nested[r]) instanceof u)) throw Error(\"path conflicts with non-namespace objects\");\n                } else n.add(n = new u(r));\n              }\n\n              return t && n.addJSON(t), n;\n            }, u.prototype.resolveAll = function () {\n              for (var e = this.nestedArray, t = 0; t < e.length;) {\n                e[t] instanceof u ? e[t++].resolveAll() : e[t++].resolve();\n              }\n\n              return this.resolve();\n            }, u.prototype.lookup = function (e, t, n) {\n              if (\"boolean\" == typeof t ? (n = t, t = undefined) : t && !Array.isArray(t) && (t = [t]), c.isString(e) && e.length) {\n                if (\".\" === e) return this.root;\n                e = e.split(\".\");\n              } else if (!e.length) return this;\n\n              if (\"\" === e[0]) return this.root.lookup(e.slice(1), t);\n              var r = this.get(e[0]);\n\n              if (r) {\n                if (1 === e.length) {\n                  if (!t || t.indexOf(r.constructor) > -1) return r;\n                } else if (r instanceof u && (r = r.lookup(e.slice(1), t, !0))) return r;\n              } else for (var i = 0; i < this.nestedArray.length; ++i) {\n                if (this._nestedArray[i] instanceof u && (r = this._nestedArray[i].lookup(e, t, !0))) return r;\n              }\n\n              return null === this.parent || n ? null : this.parent.lookup(e, t);\n            }, u.prototype.lookupType = function (e) {\n              var t = this.lookup(e, [i]);\n              if (!t) throw Error(\"no such type: \" + e);\n              return t;\n            }, u.prototype.lookupEnum = function (e) {\n              var t = this.lookup(e, [a]);\n              if (!t) throw Error(\"no such Enum '\" + e + \"' in \" + this);\n              return t;\n            }, u.prototype.lookupTypeOrEnum = function (e) {\n              var t = this.lookup(e, [i, a]);\n              if (!t) throw Error(\"no such Type or Enum '\" + e + \"' in \" + this);\n              return t;\n            }, u.prototype.lookupService = function (e) {\n              var t = this.lookup(e, [o]);\n              if (!t) throw Error(\"no such Service '\" + e + \"' in \" + this);\n              return t;\n            }, u._configure = function (e, t, n) {\n              i = e, o = t, a = n;\n            };\n          }, {\n            15: 15,\n            22: 22,\n            33: 33\n          }],\n          22: [function (e, t, n) {\n            t.exports = o, o.className = \"ReflectionObject\";\n            var r,\n                i = e(33);\n\n            function o(e, t) {\n              if (!i.isString(e)) throw TypeError(\"name must be a string\");\n              if (t && !i.isObject(t)) throw TypeError(\"options must be an object\");\n              this.options = t, this.parsedOptions = null, this.name = e, this.parent = null, this.resolved = !1, this.comment = null, this.filename = null;\n            }\n\n            Object.defineProperties(o.prototype, {\n              root: {\n                get: function get() {\n                  for (var e = this; null !== e.parent;) {\n                    e = e.parent;\n                  }\n\n                  return e;\n                }\n              },\n              fullName: {\n                get: function get() {\n                  for (var e = [this.name], t = this.parent; t;) {\n                    e.unshift(t.name), t = t.parent;\n                  }\n\n                  return e.join(\".\");\n                }\n              }\n            }), o.prototype.toJSON = function () {\n              throw Error();\n            }, o.prototype.onAdd = function (e) {\n              this.parent && this.parent !== e && this.parent.remove(this), this.parent = e, this.resolved = !1;\n              var t = e.root;\n              t instanceof r && t._handleAdd(this);\n            }, o.prototype.onRemove = function (e) {\n              var t = e.root;\n              t instanceof r && t._handleRemove(this), this.parent = null, this.resolved = !1;\n            }, o.prototype.resolve = function () {\n              return this.resolved || this.root instanceof r && (this.resolved = !0), this;\n            }, o.prototype.getOption = function (e) {\n              return this.options ? this.options[e] : undefined;\n            }, o.prototype.setOption = function (e, t, n) {\n              return n && this.options && this.options[e] !== undefined || ((this.options || (this.options = {}))[e] = t), this;\n            }, o.prototype.setParsedOption = function (e, t, n) {\n              this.parsedOptions || (this.parsedOptions = []);\n              var r = this.parsedOptions;\n\n              if (n) {\n                var o = r.find(function (t) {\n                  return Object.prototype.hasOwnProperty.call(t, e);\n                });\n\n                if (o) {\n                  var a = o[e];\n                  i.setProperty(a, n, t);\n                } else (o = {})[e] = i.setProperty({}, n, t), r.push(o);\n              } else {\n                var s = {};\n                s[e] = t, r.push(s);\n              }\n\n              return this;\n            }, o.prototype.setOptions = function (e, t) {\n              if (e) for (var n = Object.keys(e), r = 0; r < n.length; ++r) {\n                this.setOption(n[r], e[n[r]], t);\n              }\n              return this;\n            }, o.prototype.toString = function () {\n              var e = this.constructor.className,\n                  t = this.fullName;\n              return t.length ? e + \" \" + t : e;\n            }, o._configure = function (e) {\n              r = e;\n            };\n          }, {\n            33: 33\n          }],\n          23: [function (e, t, n) {\n            t.exports = a;\n            var r = e(22);\n            ((a.prototype = Object.create(r.prototype)).constructor = a).className = \"OneOf\";\n            var i = e(15),\n                o = e(33);\n\n            function a(e, t, n, i) {\n              if (Array.isArray(t) || (n = t, t = undefined), r.call(this, e, n), t !== undefined && !Array.isArray(t)) throw TypeError(\"fieldNames must be an Array\");\n              this.oneof = t || [], this.fieldsArray = [], this.comment = i;\n            }\n\n            function s(e) {\n              if (e.parent) for (var t = 0; t < e.fieldsArray.length; ++t) {\n                e.fieldsArray[t].parent || e.parent.add(e.fieldsArray[t]);\n              }\n            }\n\n            a.fromJSON = function (e, t) {\n              return new a(e, t.oneof, t.options, t.comment);\n            }, a.prototype.toJSON = function (e) {\n              var t = !!e && Boolean(e.keepComments);\n              return o.toObject([\"options\", this.options, \"oneof\", this.oneof, \"comment\", t ? this.comment : undefined]);\n            }, a.prototype.add = function (e) {\n              if (!(e instanceof i)) throw TypeError(\"field must be a Field\");\n              return e.parent && e.parent !== this.parent && e.parent.remove(e), this.oneof.push(e.name), this.fieldsArray.push(e), e.partOf = this, s(this), this;\n            }, a.prototype.remove = function (e) {\n              if (!(e instanceof i)) throw TypeError(\"field must be a Field\");\n              var t = this.fieldsArray.indexOf(e);\n              if (t < 0) throw Error(e + \" is not a member of \" + this);\n              return this.fieldsArray.splice(t, 1), (t = this.oneof.indexOf(e.name)) > -1 && this.oneof.splice(t, 1), e.partOf = null, this;\n            }, a.prototype.onAdd = function (e) {\n              r.prototype.onAdd.call(this, e);\n\n              for (var t = 0; t < this.oneof.length; ++t) {\n                var n = e.get(this.oneof[t]);\n                n && !n.partOf && (n.partOf = this, this.fieldsArray.push(n));\n              }\n\n              s(this);\n            }, a.prototype.onRemove = function (e) {\n              for (var t, n = 0; n < this.fieldsArray.length; ++n) {\n                (t = this.fieldsArray[n]).parent && t.parent.remove(t);\n              }\n\n              r.prototype.onRemove.call(this, e);\n            }, a.d = function () {\n              for (var e = new Array(arguments.length), t = 0; t < arguments.length;) {\n                e[t] = arguments[t++];\n              }\n\n              return function (t, n) {\n                o.decorateType(t.constructor).add(new a(n, e)), Object.defineProperty(t, n, {\n                  get: o.oneOfGetter(e),\n                  set: o.oneOfSetter(e)\n                });\n              };\n            };\n          }, {\n            15: 15,\n            22: 22,\n            33: 33\n          }],\n          24: [function (e, t, n) {\n            t.exports = c;\n            var r,\n                i = e(35),\n                o = i.LongBits,\n                a = i.utf8;\n\n            function s(e, t) {\n              return RangeError(\"index out of range: \" + e.pos + \" + \" + (t || 1) + \" > \" + e.len);\n            }\n\n            function c(e) {\n              this.buf = e, this.pos = 0, this.len = e.length;\n            }\n\n            var d,\n                u = \"undefined\" != typeof Uint8Array ? function (e) {\n              if (e instanceof Uint8Array || Array.isArray(e)) return new c(e);\n              throw Error(\"illegal buffer\");\n            } : function (e) {\n              if (Array.isArray(e)) return new c(e);\n              throw Error(\"illegal buffer\");\n            },\n                l = function l() {\n              return i.Buffer ? function (e) {\n                return (c.create = function (e) {\n                  return i.Buffer.isBuffer(e) ? new r(e) : u(e);\n                })(e);\n              } : u;\n            };\n\n            function f() {\n              var e = new o(0, 0),\n                  t = 0;\n\n              if (!(this.len - this.pos > 4)) {\n                for (; t < 3; ++t) {\n                  if (this.pos >= this.len) throw s(this);\n                  if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t) >>> 0, this.buf[this.pos++] < 128) return e;\n                }\n\n                return e.lo = (e.lo | (127 & this.buf[this.pos++]) << 7 * t) >>> 0, e;\n              }\n\n              for (; t < 4; ++t) {\n                if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t) >>> 0, this.buf[this.pos++] < 128) return e;\n              }\n\n              if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 28) >>> 0, e.hi = (e.hi | (127 & this.buf[this.pos]) >> 4) >>> 0, this.buf[this.pos++] < 128) return e;\n\n              if (t = 0, this.len - this.pos > 4) {\n                for (; t < 5; ++t) {\n                  if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t + 3) >>> 0, this.buf[this.pos++] < 128) return e;\n                }\n              } else for (; t < 5; ++t) {\n                if (this.pos >= this.len) throw s(this);\n                if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t + 3) >>> 0, this.buf[this.pos++] < 128) return e;\n              }\n\n              throw Error(\"invalid varint encoding\");\n            }\n\n            function p(e, t) {\n              return (e[t - 4] | e[t - 3] << 8 | e[t - 2] << 16 | e[t - 1] << 24) >>> 0;\n            }\n\n            function g() {\n              if (this.pos + 8 > this.len) throw s(this, 8);\n              return new o(p(this.buf, this.pos += 4), p(this.buf, this.pos += 4));\n            }\n\n            c.create = l(), c.prototype._slice = i.Array.prototype.subarray || i.Array.prototype.slice, c.prototype.uint32 = (d = 4294967295, function () {\n              if (d = (127 & this.buf[this.pos]) >>> 0, this.buf[this.pos++] < 128) return d;\n              if (d = (d | (127 & this.buf[this.pos]) << 7) >>> 0, this.buf[this.pos++] < 128) return d;\n              if (d = (d | (127 & this.buf[this.pos]) << 14) >>> 0, this.buf[this.pos++] < 128) return d;\n              if (d = (d | (127 & this.buf[this.pos]) << 21) >>> 0, this.buf[this.pos++] < 128) return d;\n              if (d = (d | (15 & this.buf[this.pos]) << 28) >>> 0, this.buf[this.pos++] < 128) return d;\n              if ((this.pos += 5) > this.len) throw this.pos = this.len, s(this, 10);\n              return d;\n            }), c.prototype.int32 = function () {\n              return 0 | this.uint32();\n            }, c.prototype.sint32 = function () {\n              var e = this.uint32();\n              return e >>> 1 ^ -(1 & e) | 0;\n            }, c.prototype.bool = function () {\n              return 0 !== this.uint32();\n            }, c.prototype.fixed32 = function () {\n              if (this.pos + 4 > this.len) throw s(this, 4);\n              return p(this.buf, this.pos += 4);\n            }, c.prototype.sfixed32 = function () {\n              if (this.pos + 4 > this.len) throw s(this, 4);\n              return 0 | p(this.buf, this.pos += 4);\n            }, c.prototype.float = function () {\n              if (this.pos + 4 > this.len) throw s(this, 4);\n              var e = i.float.readFloatLE(this.buf, this.pos);\n              return this.pos += 4, e;\n            }, c.prototype.double = function () {\n              if (this.pos + 8 > this.len) throw s(this, 4);\n              var e = i.float.readDoubleLE(this.buf, this.pos);\n              return this.pos += 8, e;\n            }, c.prototype.bytes = function () {\n              var e = this.uint32(),\n                  t = this.pos,\n                  n = this.pos + e;\n              if (n > this.len) throw s(this, e);\n              return this.pos += e, Array.isArray(this.buf) ? this.buf.slice(t, n) : t === n ? new this.buf.constructor(0) : this._slice.call(this.buf, t, n);\n            }, c.prototype.string = function () {\n              var e = this.bytes();\n              return a.read(e, 0, e.length);\n            }, c.prototype.skip = function (e) {\n              if (\"number\" == typeof e) {\n                if (this.pos + e > this.len) throw s(this, e);\n                this.pos += e;\n              } else do {\n                if (this.pos >= this.len) throw s(this);\n              } while (128 & this.buf[this.pos++]);\n\n              return this;\n            }, c.prototype.skipType = function (e) {\n              switch (e) {\n                case 0:\n                  this.skip();\n                  break;\n\n                case 1:\n                  this.skip(8);\n                  break;\n\n                case 2:\n                  this.skip(this.uint32());\n                  break;\n\n                case 3:\n                  for (; 4 != (e = 7 & this.uint32());) {\n                    this.skipType(e);\n                  }\n\n                  break;\n\n                case 5:\n                  this.skip(4);\n                  break;\n\n                default:\n                  throw Error(\"invalid wire type \" + e + \" at offset \" + this.pos);\n              }\n\n              return this;\n            }, c._configure = function (e) {\n              r = e, c.create = l(), r._configure();\n              var t = i.Long ? \"toLong\" : \"toNumber\";\n              i.merge(c.prototype, {\n                int64: function int64() {\n                  return f.call(this)[t](!1);\n                },\n                uint64: function uint64() {\n                  return f.call(this)[t](!0);\n                },\n                sint64: function sint64() {\n                  return f.call(this).zzDecode()[t](!1);\n                },\n                fixed64: function fixed64() {\n                  return g.call(this)[t](!0);\n                },\n                sfixed64: function sfixed64() {\n                  return g.call(this)[t](!1);\n                }\n              });\n            };\n          }, {\n            35: 35\n          }],\n          25: [function (e, t, n) {\n            t.exports = o;\n            var r = e(24);\n            (o.prototype = Object.create(r.prototype)).constructor = o;\n            var i = e(35);\n\n            function o(e) {\n              r.call(this, e);\n            }\n\n            o._configure = function () {\n              i.Buffer && (o.prototype._slice = i.Buffer.prototype.slice);\n            }, o.prototype.string = function () {\n              var e = this.uint32();\n              return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + e, this.len)) : this.buf.toString(\"utf-8\", this.pos, this.pos = Math.min(this.pos + e, this.len));\n            }, o._configure();\n          }, {\n            24: 24,\n            35: 35\n          }],\n          26: [function (e, t, n) {\n            t.exports = l;\n            var r = e(21);\n            ((l.prototype = Object.create(r.prototype)).constructor = l).className = \"Root\";\n            var i,\n                o,\n                a,\n                s = e(15),\n                c = e(14),\n                d = e(23),\n                u = e(33);\n\n            function l(e) {\n              r.call(this, \"\", e), this.deferred = [], this.files = [];\n            }\n\n            function f() {}\n\n            l.fromJSON = function (e, t) {\n              return t || (t = new l()), e.options && t.setOptions(e.options), t.addJSON(e.nested);\n            }, l.prototype.resolvePath = u.path.resolve, l.prototype.fetch = u.fetch, l.prototype.load = function e(t, n, r) {\n              \"function\" == typeof n && (r = n, n = undefined);\n              var i = this;\n              if (!r) return u.asPromise(e, i, t, n);\n              var s = r === f;\n\n              function c(e, t) {\n                if (r) {\n                  var n = r;\n                  if (r = null, s) throw e;\n                  n(e, t);\n                }\n              }\n\n              function d(e) {\n                var t = e.lastIndexOf(\"google/protobuf/\");\n\n                if (t > -1) {\n                  var n = e.substring(t);\n                  if (n in a) return n;\n                }\n\n                return null;\n              }\n\n              function l(e, t) {\n                try {\n                  if (u.isString(t) && \"{\" === t.charAt(0) && (t = JSON.parse(t)), u.isString(t)) {\n                    o.filename = e;\n                    var r,\n                        a = o(t, i, n),\n                        l = 0;\n                    if (a.imports) for (; l < a.imports.length; ++l) {\n                      (r = d(a.imports[l]) || i.resolvePath(e, a.imports[l])) && p(r);\n                    }\n                    if (a.weakImports) for (l = 0; l < a.weakImports.length; ++l) {\n                      (r = d(a.weakImports[l]) || i.resolvePath(e, a.weakImports[l])) && p(r, !0);\n                    }\n                  } else i.setOptions(t.options).addJSON(t.nested);\n                } catch (e) {\n                  c(e);\n                }\n\n                s || g || c(null, i);\n              }\n\n              function p(e, t) {\n                if (!(i.files.indexOf(e) > -1)) if (i.files.push(e), e in a) s ? l(e, a[e]) : (++g, setTimeout(function () {\n                  --g, l(e, a[e]);\n                }));else if (s) {\n                  var n;\n\n                  try {\n                    n = u.fs.readFileSync(e).toString(\"utf8\");\n                  } catch (e) {\n                    return void (t || c(e));\n                  }\n\n                  l(e, n);\n                } else ++g, i.fetch(e, function (n, o) {\n                  --g, r && (n ? t ? g || c(null, i) : c(n) : l(e, o));\n                });\n              }\n\n              var g = 0;\n              u.isString(t) && (t = [t]);\n\n              for (var m, h = 0; h < t.length; ++h) {\n                (m = i.resolvePath(\"\", t[h])) && p(m);\n              }\n\n              return s ? i : (g || c(null, i), undefined);\n            }, l.prototype.loadSync = function (e, t) {\n              if (!u.isNode) throw Error(\"not supported\");\n              return this.load(e, t, f);\n            }, l.prototype.resolveAll = function () {\n              if (this.deferred.length) throw Error(\"unresolvable extensions: \" + this.deferred.map(function (e) {\n                return \"'extend \" + e.extend + \"' in \" + e.parent.fullName;\n              }).join(\", \"));\n              return r.prototype.resolveAll.call(this);\n            };\n            var p = /^[A-Z]/;\n\n            function g(e, t) {\n              var n = t.parent.lookup(t.extend);\n\n              if (n) {\n                var r = new s(t.fullName, t.id, t.type, t.rule, undefined, t.options);\n                return r.declaringField = t, t.extensionField = r, n.add(r), !0;\n              }\n\n              return !1;\n            }\n\n            l.prototype._handleAdd = function (e) {\n              if (e instanceof s) e.extend === undefined || e.extensionField || g(0, e) || this.deferred.push(e);else if (e instanceof c) p.test(e.name) && (e.parent[e.name] = e.values);else if (!(e instanceof d)) {\n                if (e instanceof i) for (var t = 0; t < this.deferred.length;) {\n                  g(0, this.deferred[t]) ? this.deferred.splice(t, 1) : ++t;\n                }\n\n                for (var n = 0; n < e.nestedArray.length; ++n) {\n                  this._handleAdd(e._nestedArray[n]);\n                }\n\n                p.test(e.name) && (e.parent[e.name] = e);\n              }\n            }, l.prototype._handleRemove = function (e) {\n              if (e instanceof s) {\n                if (e.extend !== undefined) if (e.extensionField) e.extensionField.parent.remove(e.extensionField), e.extensionField = null;else {\n                  var t = this.deferred.indexOf(e);\n                  t > -1 && this.deferred.splice(t, 1);\n                }\n              } else if (e instanceof c) p.test(e.name) && delete e.parent[e.name];else if (e instanceof r) {\n                for (var n = 0; n < e.nestedArray.length; ++n) {\n                  this._handleRemove(e._nestedArray[n]);\n                }\n\n                p.test(e.name) && delete e.parent[e.name];\n              }\n            }, l._configure = function (e, t, n) {\n              i = e, o = t, a = n;\n            };\n          }, {\n            14: 14,\n            15: 15,\n            21: 21,\n            23: 23,\n            33: 33\n          }],\n          27: [function (e, t, n) {\n            t.exports = {};\n          }, {}],\n          28: [function (e, t, n) {\n            n.Service = e(29);\n          }, {\n            29: 29\n          }],\n          29: [function (e, t, n) {\n            t.exports = i;\n            var r = e(35);\n\n            function i(e, t, n) {\n              if (\"function\" != typeof e) throw TypeError(\"rpcImpl must be a function\");\n              r.EventEmitter.call(this), this.rpcImpl = e, this.requestDelimited = Boolean(t), this.responseDelimited = Boolean(n);\n            }\n\n            (i.prototype = Object.create(r.EventEmitter.prototype)).constructor = i, i.prototype.rpcCall = function e(t, n, i, o, a) {\n              if (!o) throw TypeError(\"request must be specified\");\n              var s = this;\n              if (!a) return r.asPromise(e, s, t, n, i, o);\n              if (!s.rpcImpl) return setTimeout(function () {\n                a(Error(\"already ended\"));\n              }, 0), undefined;\n\n              try {\n                return s.rpcImpl(t, n[s.requestDelimited ? \"encodeDelimited\" : \"encode\"](o).finish(), function (e, n) {\n                  if (e) return s.emit(\"error\", e, t), a(e);\n                  if (null === n) return s.end(!0), undefined;\n                  if (!(n instanceof i)) try {\n                    n = i[s.responseDelimited ? \"decodeDelimited\" : \"decode\"](n);\n                  } catch (e) {\n                    return s.emit(\"error\", e, t), a(e);\n                  }\n                  return s.emit(\"data\", n, t), a(null, n);\n                });\n              } catch (e) {\n                return s.emit(\"error\", e, t), setTimeout(function () {\n                  a(e);\n                }, 0), undefined;\n              }\n            }, i.prototype.end = function (e) {\n              return this.rpcImpl && (e || this.rpcImpl(null, null, null), this.rpcImpl = null, this.emit(\"end\").off()), this;\n            };\n          }, {\n            35: 35\n          }],\n          30: [function (e, t, n) {\n            t.exports = s;\n            var r = e(21);\n            ((s.prototype = Object.create(r.prototype)).constructor = s).className = \"Service\";\n            var i = e(20),\n                o = e(33),\n                a = e(28);\n\n            function s(e, t) {\n              r.call(this, e, t), this.methods = {}, this._methodsArray = null;\n            }\n\n            function c(e) {\n              return e._methodsArray = null, e;\n            }\n\n            s.fromJSON = function (e, t) {\n              var n = new s(e, t.options);\n              if (t.methods) for (var r = Object.keys(t.methods), o = 0; o < r.length; ++o) {\n                n.add(i.fromJSON(r[o], t.methods[r[o]]));\n              }\n              return t.nested && n.addJSON(t.nested), n.comment = t.comment, n;\n            }, s.prototype.toJSON = function (e) {\n              var t = r.prototype.toJSON.call(this, e),\n                  n = !!e && Boolean(e.keepComments);\n              return o.toObject([\"options\", t && t.options || undefined, \"methods\", r.arrayToJSON(this.methodsArray, e) || {}, \"nested\", t && t.nested || undefined, \"comment\", n ? this.comment : undefined]);\n            }, Object.defineProperty(s.prototype, \"methodsArray\", {\n              get: function get() {\n                return this._methodsArray || (this._methodsArray = o.toArray(this.methods));\n              }\n            }), s.prototype.get = function (e) {\n              return this.methods[e] || r.prototype.get.call(this, e);\n            }, s.prototype.resolveAll = function () {\n              for (var e = this.methodsArray, t = 0; t < e.length; ++t) {\n                e[t].resolve();\n              }\n\n              return r.prototype.resolve.call(this);\n            }, s.prototype.add = function (e) {\n              if (this.get(e.name)) throw Error(\"duplicate name '\" + e.name + \"' in \" + this);\n              return e instanceof i ? (this.methods[e.name] = e, e.parent = this, c(this)) : r.prototype.add.call(this, e);\n            }, s.prototype.remove = function (e) {\n              if (e instanceof i) {\n                if (this.methods[e.name] !== e) throw Error(e + \" is not a member of \" + this);\n                return delete this.methods[e.name], e.parent = null, c(this);\n              }\n\n              return r.prototype.remove.call(this, e);\n            }, s.prototype.create = function (e, t, n) {\n              for (var r, i = new a.Service(e, t, n), s = 0; s < this.methodsArray.length; ++s) {\n                var c = o.lcFirst((r = this._methodsArray[s]).resolve().name).replace(/[^$\\w_]/g, \"\");\n                i[c] = o.codegen([\"r\", \"c\"], o.isReserved(c) ? c + \"_\" : c)(\"return this.rpcCall(m,q,s,r,c)\")({\n                  m: r,\n                  q: r.resolvedRequestType.ctor,\n                  s: r.resolvedResponseType.ctor\n                });\n              }\n\n              return i;\n            };\n          }, {\n            20: 20,\n            21: 21,\n            28: 28,\n            33: 33\n          }],\n          31: [function (e, t, n) {\n            t.exports = E;\n            var r = e(21);\n            ((E.prototype = Object.create(r.prototype)).constructor = E).className = \"Type\";\n            var i = e(14),\n                o = e(23),\n                a = e(15),\n                s = e(18),\n                c = e(30),\n                d = e(19),\n                u = e(24),\n                l = e(38),\n                f = e(33),\n                p = e(13),\n                g = e(12),\n                m = e(36),\n                h = e(11),\n                v = e(37);\n\n            function E(e, t) {\n              r.call(this, e, t), this.fields = {}, this.oneofs = undefined, this.extensions = undefined, this.reserved = undefined, this.group = undefined, this._fieldsById = null, this._fieldsArray = null, this._oneofsArray = null, this._ctor = null;\n            }\n\n            function S(e) {\n              return e._fieldsById = e._fieldsArray = e._oneofsArray = null, delete e.encode, delete e.decode, delete e.verify, e;\n            }\n\n            Object.defineProperties(E.prototype, {\n              fieldsById: {\n                get: function get() {\n                  if (this._fieldsById) return this._fieldsById;\n                  this._fieldsById = {};\n\n                  for (var e = Object.keys(this.fields), t = 0; t < e.length; ++t) {\n                    var n = this.fields[e[t]],\n                        r = n.id;\n                    if (this._fieldsById[r]) throw Error(\"duplicate id \" + r + \" in \" + this);\n                    this._fieldsById[r] = n;\n                  }\n\n                  return this._fieldsById;\n                }\n              },\n              fieldsArray: {\n                get: function get() {\n                  return this._fieldsArray || (this._fieldsArray = f.toArray(this.fields));\n                }\n              },\n              oneofsArray: {\n                get: function get() {\n                  return this._oneofsArray || (this._oneofsArray = f.toArray(this.oneofs));\n                }\n              },\n              ctor: {\n                get: function get() {\n                  return this._ctor || (this.ctor = E.generateConstructor(this)());\n                },\n                set: function set(e) {\n                  var t = e.prototype;\n                  t instanceof d || ((e.prototype = new d()).constructor = e, f.merge(e.prototype, t)), e.$type = e.prototype.$type = this, f.merge(e, d, !0), this._ctor = e;\n\n                  for (var n = 0; n < this.fieldsArray.length; ++n) {\n                    this._fieldsArray[n].resolve();\n                  }\n\n                  var r = {};\n\n                  for (n = 0; n < this.oneofsArray.length; ++n) {\n                    r[this._oneofsArray[n].resolve().name] = {\n                      get: f.oneOfGetter(this._oneofsArray[n].oneof),\n                      set: f.oneOfSetter(this._oneofsArray[n].oneof)\n                    };\n                  }\n\n                  n && Object.defineProperties(e.prototype, r);\n                }\n              }\n            }), E.generateConstructor = function (e) {\n              for (var t, n = f.codegen([\"p\"], e.name), r = 0; r < e.fieldsArray.length; ++r) {\n                (t = e._fieldsArray[r]).map ? n(\"this%s={}\", f.safeProp(t.name)) : t.repeated && n(\"this%s=[]\", f.safeProp(t.name));\n              }\n\n              return n(\"if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)\")(\"this[ks[i]]=p[ks[i]]\");\n            }, E.fromJSON = function (e, t) {\n              var n = new E(e, t.options);\n              n.extensions = t.extensions, n.reserved = t.reserved;\n\n              for (var d = Object.keys(t.fields), u = 0; u < d.length; ++u) {\n                n.add((void 0 !== t.fields[d[u]].keyType ? s.fromJSON : a.fromJSON)(d[u], t.fields[d[u]]));\n              }\n\n              if (t.oneofs) for (d = Object.keys(t.oneofs), u = 0; u < d.length; ++u) {\n                n.add(o.fromJSON(d[u], t.oneofs[d[u]]));\n              }\n              if (t.nested) for (d = Object.keys(t.nested), u = 0; u < d.length; ++u) {\n                var l = t.nested[d[u]];\n                n.add((l.id !== undefined ? a.fromJSON : l.fields !== undefined ? E.fromJSON : l.values !== undefined ? i.fromJSON : l.methods !== undefined ? c.fromJSON : r.fromJSON)(d[u], l));\n              }\n              return t.extensions && t.extensions.length && (n.extensions = t.extensions), t.reserved && t.reserved.length && (n.reserved = t.reserved), t.group && (n.group = !0), t.comment && (n.comment = t.comment), n;\n            }, E.prototype.toJSON = function (e) {\n              var t = r.prototype.toJSON.call(this, e),\n                  n = !!e && Boolean(e.keepComments);\n              return f.toObject([\"options\", t && t.options || undefined, \"oneofs\", r.arrayToJSON(this.oneofsArray, e), \"fields\", r.arrayToJSON(this.fieldsArray.filter(function (e) {\n                return !e.declaringField;\n              }), e) || {}, \"extensions\", this.extensions && this.extensions.length ? this.extensions : undefined, \"reserved\", this.reserved && this.reserved.length ? this.reserved : undefined, \"group\", this.group || undefined, \"nested\", t && t.nested || undefined, \"comment\", n ? this.comment : undefined]);\n            }, E.prototype.resolveAll = function () {\n              for (var e = this.fieldsArray, t = 0; t < e.length;) {\n                e[t++].resolve();\n              }\n\n              var n = this.oneofsArray;\n\n              for (t = 0; t < n.length;) {\n                n[t++].resolve();\n              }\n\n              return r.prototype.resolveAll.call(this);\n            }, E.prototype.get = function (e) {\n              return this.fields[e] || this.oneofs && this.oneofs[e] || this.nested && this.nested[e] || null;\n            }, E.prototype.add = function (e) {\n              if (this.get(e.name)) throw Error(\"duplicate name '\" + e.name + \"' in \" + this);\n\n              if (e instanceof a && e.extend === undefined) {\n                if (this._fieldsById ? this._fieldsById[e.id] : this.fieldsById[e.id]) throw Error(\"duplicate id \" + e.id + \" in \" + this);\n                if (this.isReservedId(e.id)) throw Error(\"id \" + e.id + \" is reserved in \" + this);\n                if (this.isReservedName(e.name)) throw Error(\"name '\" + e.name + \"' is reserved in \" + this);\n                return e.parent && e.parent.remove(e), this.fields[e.name] = e, e.message = this, e.onAdd(this), S(this);\n              }\n\n              return e instanceof o ? (this.oneofs || (this.oneofs = {}), this.oneofs[e.name] = e, e.onAdd(this), S(this)) : r.prototype.add.call(this, e);\n            }, E.prototype.remove = function (e) {\n              if (e instanceof a && e.extend === undefined) {\n                if (!this.fields || this.fields[e.name] !== e) throw Error(e + \" is not a member of \" + this);\n                return delete this.fields[e.name], e.parent = null, e.onRemove(this), S(this);\n              }\n\n              if (e instanceof o) {\n                if (!this.oneofs || this.oneofs[e.name] !== e) throw Error(e + \" is not a member of \" + this);\n                return delete this.oneofs[e.name], e.parent = null, e.onRemove(this), S(this);\n              }\n\n              return r.prototype.remove.call(this, e);\n            }, E.prototype.isReservedId = function (e) {\n              return r.isReservedId(this.reserved, e);\n            }, E.prototype.isReservedName = function (e) {\n              return r.isReservedName(this.reserved, e);\n            }, E.prototype.create = function (e) {\n              return new this.ctor(e);\n            }, E.prototype.setup = function () {\n              for (var e = this.fullName, t = [], n = 0; n < this.fieldsArray.length; ++n) {\n                t.push(this._fieldsArray[n].resolve().resolvedType);\n              }\n\n              this.encode = p(this)({\n                Writer: l,\n                types: t,\n                util: f\n              }), this.decode = g(this)({\n                Reader: u,\n                types: t,\n                util: f\n              }), this.verify = m(this)({\n                types: t,\n                util: f\n              }), this.fromObject = h.fromObject(this)({\n                types: t,\n                util: f\n              }), this.toObject = h.toObject(this)({\n                types: t,\n                util: f\n              });\n              var r = v[e];\n\n              if (r) {\n                var i = Object.create(this);\n                i.fromObject = this.fromObject, this.fromObject = r.fromObject.bind(i), i.toObject = this.toObject, this.toObject = r.toObject.bind(i);\n              }\n\n              return this;\n            }, E.prototype.encode = function (e, t) {\n              return this.setup().encode(e, t);\n            }, E.prototype.encodeDelimited = function (e, t) {\n              return this.encode(e, t && t.len ? t.fork() : t).ldelim();\n            }, E.prototype.decode = function (e, t) {\n              return this.setup().decode(e, t);\n            }, E.prototype.decodeDelimited = function (e) {\n              return e instanceof u || (e = u.create(e)), this.decode(e, e.uint32());\n            }, E.prototype.verify = function (e) {\n              return this.setup().verify(e);\n            }, E.prototype.fromObject = function (e) {\n              return this.setup().fromObject(e);\n            }, E.prototype.toObject = function (e, t) {\n              return this.setup().toObject(e, t);\n            }, E.d = function (e) {\n              return function (t) {\n                f.decorateType(t, e);\n              };\n            };\n          }, {\n            11: 11,\n            12: 12,\n            13: 13,\n            14: 14,\n            15: 15,\n            18: 18,\n            19: 19,\n            21: 21,\n            23: 23,\n            24: 24,\n            30: 30,\n            33: 33,\n            36: 36,\n            37: 37,\n            38: 38\n          }],\n          32: [function (e, t, n) {\n            var r = n,\n                i = e(33),\n                o = [\"double\", \"float\", \"int32\", \"uint32\", \"sint32\", \"fixed32\", \"sfixed32\", \"int64\", \"uint64\", \"sint64\", \"fixed64\", \"sfixed64\", \"bool\", \"string\", \"bytes\"];\n\n            function a(e, t) {\n              var n = 0,\n                  r = {};\n\n              for (t |= 0; n < e.length;) {\n                r[o[n + t]] = e[n++];\n              }\n\n              return r;\n            }\n\n            r.basic = a([1, 5, 0, 0, 0, 5, 5, 0, 0, 0, 1, 1, 0, 2, 2]), r.defaults = a([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, !1, \"\", i.emptyArray, null]), r.long = a([0, 0, 0, 1, 1], 7), r.mapKey = a([0, 0, 0, 5, 5, 0, 0, 0, 1, 1, 0, 2], 2), r.packed = a([1, 5, 0, 0, 0, 5, 5, 0, 0, 0, 1, 1, 0]);\n          }, {\n            33: 33\n          }],\n          33: [function (e, t, n) {\n            var r,\n                i,\n                o = t.exports = e(35),\n                a = e(27);\n            o.codegen = e(3), o.fetch = e(5), o.path = e(8), o.fs = o.inquire(\"fs\"), o.toArray = function (e) {\n              if (e) {\n                for (var t = Object.keys(e), n = new Array(t.length), r = 0; r < t.length;) {\n                  n[r] = e[t[r++]];\n                }\n\n                return n;\n              }\n\n              return [];\n            }, o.toObject = function (e) {\n              for (var t = {}, n = 0; n < e.length;) {\n                var r = e[n++],\n                    i = e[n++];\n                i !== undefined && (t[r] = i);\n              }\n\n              return t;\n            };\n            var s = /\\\\/g,\n                c = /\"/g;\n            o.isReserved = function (e) {\n              return /^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e);\n            }, o.safeProp = function (e) {\n              return !/^[$\\w_]+$/.test(e) || o.isReserved(e) ? '[\"' + e.replace(s, \"\\\\\\\\\").replace(c, '\\\\\"') + '\"]' : \".\" + e;\n            }, o.ucFirst = function (e) {\n              return e.charAt(0).toUpperCase() + e.substring(1);\n            };\n            var d = /_([a-z])/g;\n            o.camelCase = function (e) {\n              return e.substring(0, 1) + e.substring(1).replace(d, function (e, t) {\n                return t.toUpperCase();\n              });\n            }, o.compareFieldsById = function (e, t) {\n              return e.id - t.id;\n            }, o.decorateType = function (t, n) {\n              if (t.$type) return n && t.$type.name !== n && (o.decorateRoot.remove(t.$type), t.$type.name = n, o.decorateRoot.add(t.$type)), t.$type;\n              r || (r = e(31));\n              var i = new r(n || t.name);\n              return o.decorateRoot.add(i), i.ctor = t, Object.defineProperty(t, \"$type\", {\n                value: i,\n                enumerable: !1\n              }), Object.defineProperty(t.prototype, \"$type\", {\n                value: i,\n                enumerable: !1\n              }), i;\n            };\n            var u = 0;\n            o.decorateEnum = function (t) {\n              if (t.$type) return t.$type;\n              i || (i = e(14));\n              var n = new i(\"Enum\" + u++, t);\n              return o.decorateRoot.add(n), Object.defineProperty(t, \"$type\", {\n                value: n,\n                enumerable: !1\n              }), n;\n            }, o.setProperty = function (e, t, n) {\n              if (\"object\" != typeof e) throw TypeError(\"dst must be an object\");\n              if (!t) throw TypeError(\"path must be specified\");\n              return function e(t, n, r) {\n                var i = n.shift();\n                if (n.length > 0) t[i] = e(t[i] || {}, n, r);else {\n                  var o = t[i];\n                  o && (r = [].concat(o).concat(r)), t[i] = r;\n                }\n                return t;\n              }(e, t = t.split(\".\"), n);\n            }, Object.defineProperty(o, \"decorateRoot\", {\n              get: function get() {\n                return a.decorated || (a.decorated = new (e(26))());\n              }\n            });\n          }, {\n            14: 14,\n            26: 26,\n            27: 27,\n            3: 3,\n            31: 31,\n            35: 35,\n            5: 5,\n            8: 8\n          }],\n          34: [function (e, t, n) {\n            t.exports = i;\n            var r = e(35);\n\n            function i(e, t) {\n              this.lo = e >>> 0, this.hi = t >>> 0;\n            }\n\n            var o = i.zero = new i(0, 0);\n            o.toNumber = function () {\n              return 0;\n            }, o.zzEncode = o.zzDecode = function () {\n              return this;\n            }, o.length = function () {\n              return 1;\n            };\n            var a = i.zeroHash = \"\\0\\0\\0\\0\\0\\0\\0\\0\";\n            i.fromNumber = function (e) {\n              if (0 === e) return o;\n              var t = e < 0;\n              t && (e = -e);\n              var n = e >>> 0,\n                  r = (e - n) / 4294967296 >>> 0;\n              return t && (r = ~r >>> 0, n = ~n >>> 0, ++n > 4294967295 && (n = 0, ++r > 4294967295 && (r = 0))), new i(n, r);\n            }, i.from = function (e) {\n              if (\"number\" == typeof e) return i.fromNumber(e);\n\n              if (r.isString(e)) {\n                if (!r.Long) return i.fromNumber(parseInt(e, 10));\n                e = r.Long.fromString(e);\n              }\n\n              return e.low || e.high ? new i(e.low >>> 0, e.high >>> 0) : o;\n            }, i.prototype.toNumber = function (e) {\n              if (!e && this.hi >>> 31) {\n                var t = 1 + ~this.lo >>> 0,\n                    n = ~this.hi >>> 0;\n                return t || (n = n + 1 >>> 0), -(t + 4294967296 * n);\n              }\n\n              return this.lo + 4294967296 * this.hi;\n            }, i.prototype.toLong = function (e) {\n              return r.Long ? new r.Long(0 | this.lo, 0 | this.hi, Boolean(e)) : {\n                low: 0 | this.lo,\n                high: 0 | this.hi,\n                unsigned: Boolean(e)\n              };\n            };\n            var s = String.prototype.charCodeAt;\n            i.fromHash = function (e) {\n              return e === a ? o : new i((s.call(e, 0) | s.call(e, 1) << 8 | s.call(e, 2) << 16 | s.call(e, 3) << 24) >>> 0, (s.call(e, 4) | s.call(e, 5) << 8 | s.call(e, 6) << 16 | s.call(e, 7) << 24) >>> 0);\n            }, i.prototype.toHash = function () {\n              return String.fromCharCode(255 & this.lo, this.lo >>> 8 & 255, this.lo >>> 16 & 255, this.lo >>> 24, 255 & this.hi, this.hi >>> 8 & 255, this.hi >>> 16 & 255, this.hi >>> 24);\n            }, i.prototype.zzEncode = function () {\n              var e = this.hi >> 31;\n              return this.hi = ((this.hi << 1 | this.lo >>> 31) ^ e) >>> 0, this.lo = (this.lo << 1 ^ e) >>> 0, this;\n            }, i.prototype.zzDecode = function () {\n              var e = -(1 & this.lo);\n              return this.lo = ((this.lo >>> 1 | this.hi << 31) ^ e) >>> 0, this.hi = (this.hi >>> 1 ^ e) >>> 0, this;\n            }, i.prototype.length = function () {\n              var e = this.lo,\n                  t = (this.lo >>> 28 | this.hi << 4) >>> 0,\n                  n = this.hi >>> 24;\n              return 0 === n ? 0 === t ? e < 16384 ? e < 128 ? 1 : 2 : e < 2097152 ? 3 : 4 : t < 16384 ? t < 128 ? 5 : 6 : t < 2097152 ? 7 : 8 : n < 128 ? 9 : 10;\n            };\n          }, {\n            35: 35\n          }],\n          35: [function (e, t, n) {\n            var r = n;\n\n            function i(e, t, n) {\n              for (var r = Object.keys(t), i = 0; i < r.length; ++i) {\n                e[r[i]] !== undefined && n || (e[r[i]] = t[r[i]]);\n              }\n\n              return e;\n            }\n\n            function o(e) {\n              function t(e, n) {\n                if (!(this instanceof t)) return new t(e, n);\n                Object.defineProperty(this, \"message\", {\n                  get: function get() {\n                    return e;\n                  }\n                }), Error.captureStackTrace ? Error.captureStackTrace(this, t) : Object.defineProperty(this, \"stack\", {\n                  value: new Error().stack || \"\"\n                }), n && i(this, n);\n              }\n\n              return (t.prototype = Object.create(Error.prototype)).constructor = t, Object.defineProperty(t.prototype, \"name\", {\n                get: function get() {\n                  return e;\n                }\n              }), t.prototype.toString = function () {\n                return this.name + \": \" + this.message;\n              }, t;\n            }\n\n            r.asPromise = e(1), r.base64 = e(2), r.EventEmitter = e(4), r.float = e(6), r.inquire = e(7), r.utf8 = e(10), r.pool = e(9), r.LongBits = e(34), r.isNode = Boolean(void 0 !== global && global && global.process && global.process.versions && global.process.versions.node), r.global = r.isNode && global || \"undefined\" != typeof window && window || \"undefined\" != typeof self && self || this, r.emptyArray = Object.freeze ? Object.freeze([]) : [], r.emptyObject = Object.freeze ? Object.freeze({}) : {}, r.isInteger = Number.isInteger || function (e) {\n              return \"number\" == typeof e && isFinite(e) && Math.floor(e) === e;\n            }, r.isString = function (e) {\n              return \"string\" == typeof e || e instanceof String;\n            }, r.isObject = function (e) {\n              return e && \"object\" == typeof e;\n            }, r.isset = r.isSet = function (e, t) {\n              var n = e[t];\n              return !(null == n || !e.hasOwnProperty(t)) && (\"object\" != typeof n || (Array.isArray(n) ? n.length : Object.keys(n).length) > 0);\n            }, r.Buffer = function () {\n              try {\n                var e = r.inquire(\"buffer\").Buffer;\n                return e.prototype.utf8Write ? e : null;\n              } catch (e) {\n                return null;\n              }\n            }(), r._Buffer_from = null, r._Buffer_allocUnsafe = null, r.newBuffer = function (e) {\n              return \"number\" == typeof e ? r.Buffer ? r._Buffer_allocUnsafe(e) : new r.Array(e) : r.Buffer ? r._Buffer_from(e) : \"undefined\" == typeof Uint8Array ? e : new Uint8Array(e);\n            }, r.Array = \"undefined\" != typeof Uint8Array ? Uint8Array : Array, r.Long = r.global.dcodeIO && r.global.dcodeIO.Long || r.global.Long || r.inquire(\"long\"), r.key2Re = /^true|false|0|1$/, r.key32Re = /^-?(?:0|[1-9][0-9]*)$/, r.key64Re = /^(?:[\\\\x00-\\\\xff]{8}|-?(?:0|[1-9][0-9]*))$/, r.longToHash = function (e) {\n              return e ? r.LongBits.from(e).toHash() : r.LongBits.zeroHash;\n            }, r.longFromHash = function (e, t) {\n              var n = r.LongBits.fromHash(e);\n              return r.Long ? r.Long.fromBits(n.lo, n.hi, t) : n.toNumber(Boolean(t));\n            }, r.merge = i, r.lcFirst = function (e) {\n              return e.charAt(0).toLowerCase() + e.substring(1);\n            }, r.newError = o, r.ProtocolError = o(\"ProtocolError\"), r.oneOfGetter = function (e) {\n              for (var t = {}, n = 0; n < e.length; ++n) {\n                t[e[n]] = 1;\n              }\n\n              return function () {\n                for (var e = Object.keys(this), n = e.length - 1; n > -1; --n) {\n                  if (1 === t[e[n]] && this[e[n]] !== undefined && null !== this[e[n]]) return e[n];\n                }\n              };\n            }, r.oneOfSetter = function (e) {\n              return function (t) {\n                for (var n = 0; n < e.length; ++n) {\n                  e[n] !== t && delete this[e[n]];\n                }\n              };\n            }, r.toJSONOptions = {\n              longs: String,\n              enums: String,\n              bytes: String,\n              json: !0\n            }, r._configure = function () {\n              var e = r.Buffer;\n              e ? (r._Buffer_from = e.from !== Uint8Array.from && e.from || function (t, n) {\n                return new e(t, n);\n              }, r._Buffer_allocUnsafe = e.allocUnsafe || function (t) {\n                return new e(t);\n              }) : r._Buffer_from = r._Buffer_allocUnsafe = null;\n            };\n          }, {\n            1: 1,\n            10: 10,\n            2: 2,\n            34: 34,\n            4: 4,\n            6: 6,\n            7: 7,\n            9: 9\n          }],\n          36: [function (e, t, n) {\n            t.exports = function (e) {\n              var t = i.codegen([\"m\"], e.name + \"$verify\")('if(typeof m!==\"object\"||m===null)')(\"return%j\", \"object expected\"),\n                  n = e.oneofsArray,\n                  r = {};\n              n.length && t(\"var p={}\");\n\n              for (var c = 0; c < e.fieldsArray.length; ++c) {\n                var d = e._fieldsArray[c].resolve(),\n                    u = \"m\" + i.safeProp(d.name);\n\n                if (d.optional && t(\"if(%s!=null&&m.hasOwnProperty(%j)){\", u, d.name), d.map) t(\"if(!util.isObject(%s))\", u)(\"return%j\", o(d, \"object\"))(\"var k=Object.keys(%s)\", u)(\"for(var i=0;i<k.length;++i){\"), s(t, d, \"k[i]\"), a(t, d, c, u + \"[k[i]]\")(\"}\");else if (d.repeated) t(\"if(!Array.isArray(%s))\", u)(\"return%j\", o(d, \"array\"))(\"for(var i=0;i<%s.length;++i){\", u), a(t, d, c, u + \"[i]\")(\"}\");else {\n                  if (d.partOf) {\n                    var l = i.safeProp(d.partOf.name);\n                    1 === r[d.partOf.name] && t(\"if(p%s===1)\", l)(\"return%j\", d.partOf.name + \": multiple values\"), r[d.partOf.name] = 1, t(\"p%s=1\", l);\n                  }\n\n                  a(t, d, c, u);\n                }\n                d.optional && t(\"}\");\n              }\n\n              return t(\"return null\");\n            };\n\n            var r = e(14),\n                i = e(33);\n\n            function o(e, t) {\n              return e.name + \": \" + t + (e.repeated && \"array\" !== t ? \"[]\" : e.map && \"object\" !== t ? \"{k:\" + e.keyType + \"}\" : \"\") + \" expected\";\n            }\n\n            function a(e, t, n, i) {\n              if (t.resolvedType) {\n                if (t.resolvedType instanceof r) {\n                  e(\"switch(%s){\", i)(\"default:\")(\"return%j\", o(t, \"enum value\"));\n\n                  for (var a = Object.keys(t.resolvedType.values), s = 0; s < a.length; ++s) {\n                    e(\"case %i:\", t.resolvedType.values[a[s]]);\n                  }\n\n                  e(\"break\")(\"}\");\n                } else e(\"{\")(\"var e=types[%i].verify(%s);\", n, i)(\"if(e)\")(\"return%j+e\", t.name + \".\")(\"}\");\n              } else switch (t.type) {\n                case \"int32\":\n                case \"uint32\":\n                case \"sint32\":\n                case \"fixed32\":\n                case \"sfixed32\":\n                  e(\"if(!util.isInteger(%s))\", i)(\"return%j\", o(t, \"integer\"));\n                  break;\n\n                case \"int64\":\n                case \"uint64\":\n                case \"sint64\":\n                case \"fixed64\":\n                case \"sfixed64\":\n                  e(\"if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))\", i, i, i, i)(\"return%j\", o(t, \"integer|Long\"));\n                  break;\n\n                case \"float\":\n                case \"double\":\n                  e('if(typeof %s!==\"number\")', i)(\"return%j\", o(t, \"number\"));\n                  break;\n\n                case \"bool\":\n                  e('if(typeof %s!==\"boolean\")', i)(\"return%j\", o(t, \"boolean\"));\n                  break;\n\n                case \"string\":\n                  e(\"if(!util.isString(%s))\", i)(\"return%j\", o(t, \"string\"));\n                  break;\n\n                case \"bytes\":\n                  e('if(!(%s&&typeof %s.length===\"number\"||util.isString(%s)))', i, i, i)(\"return%j\", o(t, \"buffer\"));\n              }\n              return e;\n            }\n\n            function s(e, t, n) {\n              switch (t.keyType) {\n                case \"int32\":\n                case \"uint32\":\n                case \"sint32\":\n                case \"fixed32\":\n                case \"sfixed32\":\n                  e(\"if(!util.key32Re.test(%s))\", n)(\"return%j\", o(t, \"integer key\"));\n                  break;\n\n                case \"int64\":\n                case \"uint64\":\n                case \"sint64\":\n                case \"fixed64\":\n                case \"sfixed64\":\n                  e(\"if(!util.key64Re.test(%s))\", n)(\"return%j\", o(t, \"integer|Long key\"));\n                  break;\n\n                case \"bool\":\n                  e(\"if(!util.key2Re.test(%s))\", n)(\"return%j\", o(t, \"boolean key\"));\n              }\n\n              return e;\n            }\n          }, {\n            14: 14,\n            33: 33\n          }],\n          37: [function (e, t, n) {\n            var r = n,\n                i = e(19);\n            r[\".google.protobuf.Any\"] = {\n              fromObject: function fromObject(e) {\n                if (e && e[\"@type\"]) {\n                  var t = e[\"@type\"].substring(e[\"@type\"].lastIndexOf(\"/\") + 1),\n                      n = this.lookup(t);\n\n                  if (n) {\n                    var r = \".\" === e[\"@type\"].charAt(0) ? e[\"@type\"].substr(1) : e[\"@type\"];\n                    return -1 === r.indexOf(\"/\") && (r = \"/\" + r), this.create({\n                      type_url: r,\n                      value: n.encode(n.fromObject(e)).finish()\n                    });\n                  }\n                }\n\n                return this.fromObject(e);\n              },\n              toObject: function toObject(e, t) {\n                var n = \"\",\n                    r = \"\";\n\n                if (t && t.json && e.type_url && e.value) {\n                  r = e.type_url.substring(e.type_url.lastIndexOf(\"/\") + 1), n = e.type_url.substring(0, e.type_url.lastIndexOf(\"/\") + 1);\n                  var o = this.lookup(r);\n                  o && (e = o.decode(e.value));\n                }\n\n                if (!(e instanceof this.ctor) && e instanceof i) {\n                  var a = e.$type.toObject(e, t);\n                  return \"\" === n && (n = \"type.googleapis.com/\"), r = n + (\".\" === e.$type.fullName[0] ? e.$type.fullName.substr(1) : e.$type.fullName), a[\"@type\"] = r, a;\n                }\n\n                return this.toObject(e, t);\n              }\n            };\n          }, {\n            19: 19\n          }],\n          38: [function (e, t, n) {\n            t.exports = l;\n            var r,\n                i = e(35),\n                o = i.LongBits,\n                a = i.base64,\n                s = i.utf8;\n\n            function c(e, t, n) {\n              this.fn = e, this.len = t, this.next = undefined, this.val = n;\n            }\n\n            function d() {}\n\n            function u(e) {\n              this.head = e.head, this.tail = e.tail, this.len = e.len, this.next = e.states;\n            }\n\n            function l() {\n              this.len = 0, this.head = new c(d, 0, 0), this.tail = this.head, this.states = null;\n            }\n\n            var f = function f() {\n              return i.Buffer ? function () {\n                return (l.create = function () {\n                  return new r();\n                })();\n              } : function () {\n                return new l();\n              };\n            };\n\n            function p(e, t, n) {\n              t[n] = 255 & e;\n            }\n\n            function g(e, t) {\n              this.len = e, this.next = undefined, this.val = t;\n            }\n\n            function m(e, t, n) {\n              for (; e.hi;) {\n                t[n++] = 127 & e.lo | 128, e.lo = (e.lo >>> 7 | e.hi << 25) >>> 0, e.hi >>>= 7;\n              }\n\n              for (; e.lo > 127;) {\n                t[n++] = 127 & e.lo | 128, e.lo = e.lo >>> 7;\n              }\n\n              t[n++] = e.lo;\n            }\n\n            function h(e, t, n) {\n              t[n] = 255 & e, t[n + 1] = e >>> 8 & 255, t[n + 2] = e >>> 16 & 255, t[n + 3] = e >>> 24;\n            }\n\n            l.create = f(), l.alloc = function (e) {\n              return new i.Array(e);\n            }, i.Array !== Array && (l.alloc = i.pool(l.alloc, i.Array.prototype.subarray)), l.prototype._push = function (e, t, n) {\n              return this.tail = this.tail.next = new c(e, t, n), this.len += t, this;\n            }, g.prototype = Object.create(c.prototype), g.prototype.fn = function (e, t, n) {\n              for (; e > 127;) {\n                t[n++] = 127 & e | 128, e >>>= 7;\n              }\n\n              t[n] = e;\n            }, l.prototype.uint32 = function (e) {\n              return this.len += (this.tail = this.tail.next = new g((e >>>= 0) < 128 ? 1 : e < 16384 ? 2 : e < 2097152 ? 3 : e < 268435456 ? 4 : 5, e)).len, this;\n            }, l.prototype.int32 = function (e) {\n              return e < 0 ? this._push(m, 10, o.fromNumber(e)) : this.uint32(e);\n            }, l.prototype.sint32 = function (e) {\n              return this.uint32((e << 1 ^ e >> 31) >>> 0);\n            }, l.prototype.uint64 = function (e) {\n              var t = o.from(e);\n              return this._push(m, t.length(), t);\n            }, l.prototype.int64 = l.prototype.uint64, l.prototype.sint64 = function (e) {\n              var t = o.from(e).zzEncode();\n              return this._push(m, t.length(), t);\n            }, l.prototype.bool = function (e) {\n              return this._push(p, 1, e ? 1 : 0);\n            }, l.prototype.fixed32 = function (e) {\n              return this._push(h, 4, e >>> 0);\n            }, l.prototype.sfixed32 = l.prototype.fixed32, l.prototype.fixed64 = function (e) {\n              var t = o.from(e);\n              return this._push(h, 4, t.lo)._push(h, 4, t.hi);\n            }, l.prototype.sfixed64 = l.prototype.fixed64, l.prototype.float = function (e) {\n              return this._push(i.float.writeFloatLE, 4, e);\n            }, l.prototype.double = function (e) {\n              return this._push(i.float.writeDoubleLE, 8, e);\n            };\n            var v = i.Array.prototype.set ? function (e, t, n) {\n              t.set(e, n);\n            } : function (e, t, n) {\n              for (var r = 0; r < e.length; ++r) {\n                t[n + r] = e[r];\n              }\n            };\n            l.prototype.bytes = function (e) {\n              var t = e.length >>> 0;\n              if (!t) return this._push(p, 1, 0);\n\n              if (i.isString(e)) {\n                var n = l.alloc(t = a.length(e));\n                a.decode(e, n, 0), e = n;\n              }\n\n              return this.uint32(t)._push(v, t, e);\n            }, l.prototype.string = function (e) {\n              var t = s.length(e);\n              return t ? this.uint32(t)._push(s.write, t, e) : this._push(p, 1, 0);\n            }, l.prototype.fork = function () {\n              return this.states = new u(this), this.head = this.tail = new c(d, 0, 0), this.len = 0, this;\n            }, l.prototype.reset = function () {\n              return this.states ? (this.head = this.states.head, this.tail = this.states.tail, this.len = this.states.len, this.states = this.states.next) : (this.head = this.tail = new c(d, 0, 0), this.len = 0), this;\n            }, l.prototype.ldelim = function () {\n              var e = this.head,\n                  t = this.tail,\n                  n = this.len;\n              return this.reset().uint32(n), n && (this.tail.next = e.next, this.tail = t, this.len += n), this;\n            }, l.prototype.finish = function () {\n              for (var e = this.head.next, t = this.constructor.alloc(this.len), n = 0; e;) {\n                e.fn(e.val, t, n), n += e.len, e = e.next;\n              }\n\n              return t;\n            }, l._configure = function (e) {\n              r = e, l.create = f(), r._configure();\n            };\n          }, {\n            35: 35\n          }],\n          39: [function (e, t, n) {\n            t.exports = o;\n            var r = e(38);\n            (o.prototype = Object.create(r.prototype)).constructor = o;\n            var i = e(35);\n\n            function o() {\n              r.call(this);\n            }\n\n            function a(e, t, n) {\n              e.length < 40 ? i.utf8.write(e, t, n) : t.utf8Write ? t.utf8Write(e, n) : t.write(e, n);\n            }\n\n            o._configure = function () {\n              o.alloc = i._Buffer_allocUnsafe, o.writeBytesBuffer = i.Buffer && i.Buffer.prototype instanceof Uint8Array && \"set\" === i.Buffer.prototype.set.name ? function (e, t, n) {\n                t.set(e, n);\n              } : function (e, t, n) {\n                if (e.copy) e.copy(t, n, 0, e.length);else for (var r = 0; r < e.length;) {\n                  t[n++] = e[r++];\n                }\n              };\n            }, o.prototype.bytes = function (e) {\n              i.isString(e) && (e = i._Buffer_from(e, \"base64\"));\n              var t = e.length >>> 0;\n              return this.uint32(t), t && this._push(o.writeBytesBuffer, t, e), this;\n            }, o.prototype.string = function (e) {\n              var t = i.Buffer.byteLength(e);\n              return this.uint32(t), t && this._push(a, t, e), this;\n            }, o._configure();\n          }, {\n            35: 35,\n            38: 38\n          }]\n        }, {}, [16]);\n      }();\n    }).call(this, __webpack_require__(33), __webpack_require__(60)(module));\n  }, function (e, t) {\n    e.exports = function (e) {\n      return e.webpackPolyfill || (e.deprecate = function () {}, e.paths = [], e.children || (e.children = []), Object.defineProperty(e, \"loaded\", {\n        enumerable: !0,\n        get: function get() {\n          return e.l;\n        }\n      }), Object.defineProperty(e, \"id\", {\n        enumerable: !0,\n        get: function get() {\n          return e.i;\n        }\n      }), e.webpackPolyfill = 1), e;\n    };\n  }, function (e, t) {\n    e.exports = r;\n    var n = null;\n\n    try {\n      n = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])), {}).exports;\n    } catch (e) {}\n\n    function r(e, t, n) {\n      this.low = 0 | e, this.high = 0 | t, this.unsigned = !!n;\n    }\n\n    function i(e) {\n      return !0 === (e && e.__isLong__);\n    }\n\n    r.prototype.__isLong__, Object.defineProperty(r.prototype, \"__isLong__\", {\n      value: !0\n    }), r.isLong = i;\n    var o = {},\n        a = {};\n\n    function s(e, t) {\n      var n, r, i;\n      return t ? (i = 0 <= (e >>>= 0) && e < 256) && (r = a[e]) ? r : (n = d(e, (0 | e) < 0 ? -1 : 0, !0), i && (a[e] = n), n) : (i = -128 <= (e |= 0) && e < 128) && (r = o[e]) ? r : (n = d(e, e < 0 ? -1 : 0, !1), i && (o[e] = n), n);\n    }\n\n    function c(e, t) {\n      if (isNaN(e)) return t ? E : v;\n\n      if (t) {\n        if (e < 0) return E;\n        if (e >= g) return T;\n      } else {\n        if (e <= -m) return I;\n        if (e + 1 >= m) return R;\n      }\n\n      return e < 0 ? c(-e, t).neg() : d(e % p | 0, e / p | 0, t);\n    }\n\n    function d(e, t, n) {\n      return new r(e, t, n);\n    }\n\n    r.fromInt = s, r.fromNumber = c, r.fromBits = d;\n    var u = Math.pow;\n\n    function l(e, t, n) {\n      if (0 === e.length) throw Error(\"empty string\");\n      if (\"NaN\" === e || \"Infinity\" === e || \"+Infinity\" === e || \"-Infinity\" === e) return v;\n      if (\"number\" == typeof t ? (n = t, t = !1) : t = !!t, (n = n || 10) < 2 || 36 < n) throw RangeError(\"radix\");\n      var r;\n      if ((r = e.indexOf(\"-\")) > 0) throw Error(\"interior hyphen\");\n      if (0 === r) return l(e.substring(1), t, n).neg();\n\n      for (var i = c(u(n, 8)), o = v, a = 0; a < e.length; a += 8) {\n        var s = Math.min(8, e.length - a),\n            d = parseInt(e.substring(a, a + s), n);\n\n        if (s < 8) {\n          var f = c(u(n, s));\n          o = o.mul(f).add(c(d));\n        } else o = (o = o.mul(i)).add(c(d));\n      }\n\n      return o.unsigned = t, o;\n    }\n\n    function f(e, t) {\n      return \"number\" == typeof e ? c(e, t) : \"string\" == typeof e ? l(e, t) : d(e.low, e.high, \"boolean\" == typeof t ? t : e.unsigned);\n    }\n\n    r.fromString = l, r.fromValue = f;\n    var p = 4294967296,\n        g = p * p,\n        m = g / 2,\n        h = s(1 << 24),\n        v = s(0);\n    r.ZERO = v;\n    var E = s(0, !0);\n    r.UZERO = E;\n    var S = s(1);\n    r.ONE = S;\n\n    var _ = s(1, !0);\n\n    r.UONE = _;\n    var y = s(-1);\n    r.NEG_ONE = y;\n    var R = d(-1, 2147483647, !1);\n    r.MAX_VALUE = R;\n    var T = d(-1, -1, !0);\n    r.MAX_UNSIGNED_VALUE = T;\n    var I = d(0, -2147483648, !1);\n    r.MIN_VALUE = I;\n    var b = r.prototype;\n    b.toInt = function () {\n      return this.unsigned ? this.low >>> 0 : this.low;\n    }, b.toNumber = function () {\n      return this.unsigned ? (this.high >>> 0) * p + (this.low >>> 0) : this.high * p + (this.low >>> 0);\n    }, b.toString = function (e) {\n      if ((e = e || 10) < 2 || 36 < e) throw RangeError(\"radix\");\n      if (this.isZero()) return \"0\";\n\n      if (this.isNegative()) {\n        if (this.eq(I)) {\n          var t = c(e),\n              n = this.div(t),\n              r = n.mul(t).sub(this);\n          return n.toString(e) + r.toInt().toString(e);\n        }\n\n        return \"-\" + this.neg().toString(e);\n      }\n\n      for (var i = c(u(e, 6), this.unsigned), o = this, a = \"\";;) {\n        var s = o.div(i),\n            d = (o.sub(s.mul(i)).toInt() >>> 0).toString(e);\n        if ((o = s).isZero()) return d + a;\n\n        for (; d.length < 6;) {\n          d = \"0\" + d;\n        }\n\n        a = \"\" + d + a;\n      }\n    }, b.getHighBits = function () {\n      return this.high;\n    }, b.getHighBitsUnsigned = function () {\n      return this.high >>> 0;\n    }, b.getLowBits = function () {\n      return this.low;\n    }, b.getLowBitsUnsigned = function () {\n      return this.low >>> 0;\n    }, b.getNumBitsAbs = function () {\n      if (this.isNegative()) return this.eq(I) ? 64 : this.neg().getNumBitsAbs();\n\n      for (var e = 0 != this.high ? this.high : this.low, t = 31; t > 0 && 0 == (e & 1 << t); t--) {\n        ;\n      }\n\n      return 0 != this.high ? t + 33 : t + 1;\n    }, b.isZero = function () {\n      return 0 === this.high && 0 === this.low;\n    }, b.eqz = b.isZero, b.isNegative = function () {\n      return !this.unsigned && this.high < 0;\n    }, b.isPositive = function () {\n      return this.unsigned || this.high >= 0;\n    }, b.isOdd = function () {\n      return 1 == (1 & this.low);\n    }, b.isEven = function () {\n      return 0 == (1 & this.low);\n    }, b.equals = function (e) {\n      return i(e) || (e = f(e)), (this.unsigned === e.unsigned || this.high >>> 31 != 1 || e.high >>> 31 != 1) && this.high === e.high && this.low === e.low;\n    }, b.eq = b.equals, b.notEquals = function (e) {\n      return !this.eq(e);\n    }, b.neq = b.notEquals, b.ne = b.notEquals, b.lessThan = function (e) {\n      return this.comp(e) < 0;\n    }, b.lt = b.lessThan, b.lessThanOrEqual = function (e) {\n      return this.comp(e) <= 0;\n    }, b.lte = b.lessThanOrEqual, b.le = b.lessThanOrEqual, b.greaterThan = function (e) {\n      return this.comp(e) > 0;\n    }, b.gt = b.greaterThan, b.greaterThanOrEqual = function (e) {\n      return this.comp(e) >= 0;\n    }, b.gte = b.greaterThanOrEqual, b.ge = b.greaterThanOrEqual, b.compare = function (e) {\n      if (i(e) || (e = f(e)), this.eq(e)) return 0;\n      var t = this.isNegative(),\n          n = e.isNegative();\n      return t && !n ? -1 : !t && n ? 1 : this.unsigned ? e.high >>> 0 > this.high >>> 0 || e.high === this.high && e.low >>> 0 > this.low >>> 0 ? -1 : 1 : this.sub(e).isNegative() ? -1 : 1;\n    }, b.comp = b.compare, b.negate = function () {\n      return !this.unsigned && this.eq(I) ? I : this.not().add(S);\n    }, b.neg = b.negate, b.add = function (e) {\n      i(e) || (e = f(e));\n      var t = this.high >>> 16,\n          n = 65535 & this.high,\n          r = this.low >>> 16,\n          o = 65535 & this.low,\n          a = e.high >>> 16,\n          s = 65535 & e.high,\n          c = e.low >>> 16,\n          u = 0,\n          l = 0,\n          p = 0,\n          g = 0;\n      return p += (g += o + (65535 & e.low)) >>> 16, l += (p += r + c) >>> 16, u += (l += n + s) >>> 16, u += t + a, d((p &= 65535) << 16 | (g &= 65535), (u &= 65535) << 16 | (l &= 65535), this.unsigned);\n    }, b.subtract = function (e) {\n      return i(e) || (e = f(e)), this.add(e.neg());\n    }, b.sub = b.subtract, b.multiply = function (e) {\n      if (this.isZero()) return v;\n      if (i(e) || (e = f(e)), n) return d(n.mul(this.low, this.high, e.low, e.high), n.get_high(), this.unsigned);\n      if (e.isZero()) return v;\n      if (this.eq(I)) return e.isOdd() ? I : v;\n      if (e.eq(I)) return this.isOdd() ? I : v;\n      if (this.isNegative()) return e.isNegative() ? this.neg().mul(e.neg()) : this.neg().mul(e).neg();\n      if (e.isNegative()) return this.mul(e.neg()).neg();\n      if (this.lt(h) && e.lt(h)) return c(this.toNumber() * e.toNumber(), this.unsigned);\n      var t = this.high >>> 16,\n          r = 65535 & this.high,\n          o = this.low >>> 16,\n          a = 65535 & this.low,\n          s = e.high >>> 16,\n          u = 65535 & e.high,\n          l = e.low >>> 16,\n          p = 65535 & e.low,\n          g = 0,\n          m = 0,\n          E = 0,\n          S = 0;\n      return E += (S += a * p) >>> 16, m += (E += o * p) >>> 16, E &= 65535, m += (E += a * l) >>> 16, g += (m += r * p) >>> 16, m &= 65535, g += (m += o * l) >>> 16, m &= 65535, g += (m += a * u) >>> 16, g += t * p + r * l + o * u + a * s, d((E &= 65535) << 16 | (S &= 65535), (g &= 65535) << 16 | (m &= 65535), this.unsigned);\n    }, b.mul = b.multiply, b.divide = function (e) {\n      if (i(e) || (e = f(e)), e.isZero()) throw Error(\"division by zero\");\n      var t, r, o;\n      if (n) return this.unsigned || -2147483648 !== this.high || -1 !== e.low || -1 !== e.high ? d((this.unsigned ? n.div_u : n.div_s)(this.low, this.high, e.low, e.high), n.get_high(), this.unsigned) : this;\n      if (this.isZero()) return this.unsigned ? E : v;\n\n      if (this.unsigned) {\n        if (e.unsigned || (e = e.toUnsigned()), e.gt(this)) return E;\n        if (e.gt(this.shru(1))) return _;\n        o = E;\n      } else {\n        if (this.eq(I)) return e.eq(S) || e.eq(y) ? I : e.eq(I) ? S : (t = this.shr(1).div(e).shl(1)).eq(v) ? e.isNegative() ? S : y : (r = this.sub(e.mul(t)), o = t.add(r.div(e)));\n        if (e.eq(I)) return this.unsigned ? E : v;\n        if (this.isNegative()) return e.isNegative() ? this.neg().div(e.neg()) : this.neg().div(e).neg();\n        if (e.isNegative()) return this.div(e.neg()).neg();\n        o = v;\n      }\n\n      for (r = this; r.gte(e);) {\n        t = Math.max(1, Math.floor(r.toNumber() / e.toNumber()));\n\n        for (var a = Math.ceil(Math.log(t) / Math.LN2), s = a <= 48 ? 1 : u(2, a - 48), l = c(t), p = l.mul(e); p.isNegative() || p.gt(r);) {\n          p = (l = c(t -= s, this.unsigned)).mul(e);\n        }\n\n        l.isZero() && (l = S), o = o.add(l), r = r.sub(p);\n      }\n\n      return o;\n    }, b.div = b.divide, b.modulo = function (e) {\n      return i(e) || (e = f(e)), n ? d((this.unsigned ? n.rem_u : n.rem_s)(this.low, this.high, e.low, e.high), n.get_high(), this.unsigned) : this.sub(this.div(e).mul(e));\n    }, b.mod = b.modulo, b.rem = b.modulo, b.not = function () {\n      return d(~this.low, ~this.high, this.unsigned);\n    }, b.and = function (e) {\n      return i(e) || (e = f(e)), d(this.low & e.low, this.high & e.high, this.unsigned);\n    }, b.or = function (e) {\n      return i(e) || (e = f(e)), d(this.low | e.low, this.high | e.high, this.unsigned);\n    }, b.xor = function (e) {\n      return i(e) || (e = f(e)), d(this.low ^ e.low, this.high ^ e.high, this.unsigned);\n    }, b.shiftLeft = function (e) {\n      return i(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? d(this.low << e, this.high << e | this.low >>> 32 - e, this.unsigned) : d(0, this.low << e - 32, this.unsigned);\n    }, b.shl = b.shiftLeft, b.shiftRight = function (e) {\n      return i(e) && (e = e.toInt()), 0 == (e &= 63) ? this : e < 32 ? d(this.low >>> e | this.high << 32 - e, this.high >> e, this.unsigned) : d(this.high >> e - 32, this.high >= 0 ? 0 : -1, this.unsigned);\n    }, b.shr = b.shiftRight, b.shiftRightUnsigned = function (e) {\n      if (i(e) && (e = e.toInt()), 0 === (e &= 63)) return this;\n      var t = this.high;\n      return e < 32 ? d(this.low >>> e | t << 32 - e, t >>> e, this.unsigned) : d(32 === e ? t : t >>> e - 32, 0, this.unsigned);\n    }, b.shru = b.shiftRightUnsigned, b.shr_u = b.shiftRightUnsigned, b.toSigned = function () {\n      return this.unsigned ? d(this.low, this.high, !1) : this;\n    }, b.toUnsigned = function () {\n      return this.unsigned ? this : d(this.low, this.high, !0);\n    }, b.toBytes = function (e) {\n      return e ? this.toBytesLE() : this.toBytesBE();\n    }, b.toBytesLE = function () {\n      var e = this.high,\n          t = this.low;\n      return [255 & t, t >>> 8 & 255, t >>> 16 & 255, t >>> 24, 255 & e, e >>> 8 & 255, e >>> 16 & 255, e >>> 24];\n    }, b.toBytesBE = function () {\n      var e = this.high,\n          t = this.low;\n      return [e >>> 24, e >>> 16 & 255, e >>> 8 & 255, 255 & e, t >>> 24, t >>> 16 & 255, t >>> 8 & 255, 255 & t];\n    }, r.fromBytes = function (e, t, n) {\n      return n ? r.fromBytesLE(e, t) : r.fromBytesBE(e, t);\n    }, r.fromBytesLE = function (e, t) {\n      return new r(e[0] | e[1] << 8 | e[2] << 16 | e[3] << 24, e[4] | e[5] << 8 | e[6] << 16 | e[7] << 24, t);\n    }, r.fromBytesBE = function (e, t) {\n      return new r(e[4] << 24 | e[5] << 16 | e[6] << 8 | e[7], e[0] << 24 | e[1] << 16 | e[2] << 8 | e[3], t);\n    };\n  }, function (e) {\n    e.exports = JSON.parse('{\"PeerPublishStatus\":408,\"JoinChannelTimeout\":407,\"OnUpdateStream\":356,\"OnRemoveStream\":355,\"OnAddVideoStream\":353,\"OnAddAudioStream\":352,\"FirstAudioDecode\":351,\"FirstVideoDecode\":350,\"FirstAudioReceived\":349,\"FirstVideoReceived\":348,\"ReqUserAccount\":196,\"ApiInvoke\":41,\"RequestProxyWorkerManager\":36,\"RequestProxyAppCenter\":35,\"VideoSendingStopped\":34,\"AudioSendingStopped\":33,\"StreamSwitch\":32,\"FirstFrame\":31,\"Publish\":30,\"Subscribe\":29,\"JoinGateway\":28,\"JoinChooseServer\":27,\"Session\":26,\"APWorkerEvent\":160,\"WorkerEvent\":156,\"JoinWebProxyAP\":700,\"WebSocketQuit\":671}');\n  }, function (e) {\n    e.exports = JSON.parse('{\"nested\":{\"protobuf\":{\"nested\":{\"Session\":{\"fields\":{\"sid\":{\"type\":\"string\",\"id\":1},\"cname\":{\"type\":\"string\",\"id\":2},\"cid\":{\"type\":\"int64\",\"id\":3},\"lts\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"success\":{\"type\":\"bool\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"peer\":{\"type\":\"int64\",\"id\":9},\"eventType\":{\"type\":\"string\",\"id\":10},\"version\":{\"type\":\"string\",\"id\":11},\"browser\":{\"type\":\"string\",\"id\":12},\"appid\":{\"type\":\"string\",\"id\":13},\"mode\":{\"type\":\"string\",\"id\":14},\"extend\":{\"type\":\"string\",\"id\":15},\"process\":{\"type\":\"string\",\"id\":16},\"build\":{\"type\":\"string\",\"id\":17},\"ipv6\":{\"type\":\"string\",\"id\":18},\"sourceHost\":{\"type\":\"string\",\"id\":19},\"sourcePath\":{\"type\":\"string\",\"id\":20},\"collectorHost\":{\"type\":\"string\",\"id\":21},\"collectorName\":{\"type\":\"string\",\"id\":22}}},\"JoinChooseServer\":{\"fields\":{\"sid\":{\"type\":\"string\",\"id\":1},\"cname\":{\"type\":\"string\",\"id\":2},\"cid\":{\"type\":\"int64\",\"id\":3},\"lts\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"success\":{\"type\":\"bool\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"peer\":{\"type\":\"int64\",\"id\":9},\"eventType\":{\"type\":\"string\",\"id\":10},\"chooseServerAddr\":{\"type\":\"string\",\"id\":11},\"chooseServerAddrList\":{\"type\":\"string\",\"id\":12},\"errorCode\":{\"type\":\"string\",\"id\":13},\"eventElapse\":{\"type\":\"int64\",\"id\":14},\"chooseServerIp\":{\"type\":\"string\",\"id\":15}}},\"JoinGateway\":{\"fields\":{\"sid\":{\"type\":\"string\",\"id\":1},\"cname\":{\"type\":\"string\",\"id\":2},\"cid\":{\"type\":\"int64\",\"id\":3},\"lts\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"success\":{\"type\":\"bool\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"peer\":{\"type\":\"int64\",\"id\":9},\"eventType\":{\"type\":\"string\",\"id\":10},\"gatewayAddr\":{\"type\":\"string\",\"id\":11},\"errorCode\":{\"type\":\"string\",\"id\":12},\"eventElapse\":{\"type\":\"int64\",\"id\":13},\"firstSuccess\":{\"type\":\"bool\",\"id\":14}}},\"Subscribe\":{\"fields\":{\"sid\":{\"type\":\"string\",\"id\":1},\"cname\":{\"type\":\"string\",\"id\":2},\"cid\":{\"type\":\"int64\",\"id\":3},\"lts\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"success\":{\"type\":\"bool\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"peer\":{\"type\":\"int64\",\"id\":9},\"eventType\":{\"type\":\"string\",\"id\":10},\"localSdp\":{\"type\":\"string\",\"id\":11},\"remoteSdp\":{\"type\":\"string\",\"id\":12},\"extend\":{\"type\":\"string\",\"id\":13},\"errorCode\":{\"type\":\"string\",\"id\":14},\"eventElapse\":{\"type\":\"int64\",\"id\":15},\"video\":{\"type\":\"bool\",\"id\":16},\"audio\":{\"type\":\"bool\",\"id\":17},\"subscribeRequestid\":{\"type\":\"int32\",\"id\":18},\"p2pid\":{\"type\":\"int32\",\"id\":19}}},\"Publish\":{\"fields\":{\"sid\":{\"type\":\"string\",\"id\":1},\"cname\":{\"type\":\"string\",\"id\":2},\"cid\":{\"type\":\"int64\",\"id\":3},\"lts\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"success\":{\"type\":\"bool\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"peer\":{\"type\":\"int64\",\"id\":9},\"eventType\":{\"type\":\"string\",\"id\":10},\"localSdp\":{\"type\":\"string\",\"id\":11},\"remoteSdp\":{\"type\":\"string\",\"id\":12},\"extend\":{\"type\":\"string\",\"id\":13},\"errorCode\":{\"type\":\"string\",\"id\":14},\"eventElapse\":{\"type\":\"int64\",\"id\":15},\"videoName\":{\"type\":\"string\",\"id\":16},\"audioName\":{\"type\":\"string\",\"id\":17},\"screenName\":{\"type\":\"string\",\"id\":18},\"video\":{\"type\":\"bool\",\"id\":19},\"audio\":{\"type\":\"bool\",\"id\":20},\"publishRequestid\":{\"type\":\"int32\",\"id\":21},\"p2pid\":{\"type\":\"int32\",\"id\":22},\"screenshare\":{\"type\":\"bool\",\"id\":23}}},\"FirstFrame\":{\"fields\":{\"sid\":{\"type\":\"string\",\"id\":1},\"cname\":{\"type\":\"string\",\"id\":2},\"cid\":{\"type\":\"int64\",\"id\":3},\"lts\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"success\":{\"type\":\"bool\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"peer\":{\"type\":\"int64\",\"id\":9},\"eventType\":{\"type\":\"string\",\"id\":10},\"extend\":{\"type\":\"string\",\"id\":11},\"errorCode\":{\"type\":\"string\",\"id\":12},\"width\":{\"type\":\"int64\",\"id\":13},\"height\":{\"type\":\"int64\",\"id\":14}}},\"StreamSwitch\":{\"fields\":{\"sid\":{\"type\":\"string\",\"id\":1},\"cname\":{\"type\":\"string\",\"id\":2},\"cid\":{\"type\":\"int64\",\"id\":3},\"lts\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"success\":{\"type\":\"bool\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"peer\":{\"type\":\"int64\",\"id\":9},\"eventType\":{\"type\":\"string\",\"id\":10},\"isDual\":{\"type\":\"bool\",\"id\":11}}},\"AudioSendingStopped\":{\"fields\":{\"sid\":{\"type\":\"string\",\"id\":1},\"cname\":{\"type\":\"string\",\"id\":2},\"cid\":{\"type\":\"int64\",\"id\":3},\"lts\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"success\":{\"type\":\"bool\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"peer\":{\"type\":\"int64\",\"id\":9},\"reason\":{\"type\":\"string\",\"id\":10},\"eventType\":{\"type\":\"string\",\"id\":11}}},\"VideoSendingStopped\":{\"fields\":{\"sid\":{\"type\":\"string\",\"id\":1},\"cname\":{\"type\":\"string\",\"id\":2},\"cid\":{\"type\":\"int64\",\"id\":3},\"lts\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"success\":{\"type\":\"bool\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"peer\":{\"type\":\"int64\",\"id\":9},\"reason\":{\"type\":\"string\",\"id\":10},\"eventType\":{\"type\":\"string\",\"id\":11}}},\"RequestProxyAppCenter\":{\"fields\":{\"sid\":{\"type\":\"string\",\"id\":1},\"cname\":{\"type\":\"string\",\"id\":2},\"cid\":{\"type\":\"int64\",\"id\":3},\"lts\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"success\":{\"type\":\"bool\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"peer\":{\"type\":\"int64\",\"id\":9},\"eventType\":{\"type\":\"string\",\"id\":10},\"APAddr\":{\"type\":\"string\",\"id\":11},\"workerManagerList\":{\"type\":\"string\",\"id\":12},\"errorCode\":{\"type\":\"string\",\"id\":13},\"eventElapse\":{\"type\":\"int64\",\"id\":14},\"extend\":{\"type\":\"string\",\"id\":15},\"response\":{\"type\":\"string\",\"id\":16}}},\"RequestProxyWorkerManager\":{\"fields\":{\"sid\":{\"type\":\"string\",\"id\":1},\"cname\":{\"type\":\"string\",\"id\":2},\"cid\":{\"type\":\"int64\",\"id\":3},\"lts\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"success\":{\"type\":\"bool\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"peer\":{\"type\":\"int64\",\"id\":9},\"eventType\":{\"type\":\"string\",\"id\":10},\"workerManagerAddr\":{\"type\":\"string\",\"id\":11},\"errorCode\":{\"type\":\"string\",\"id\":12},\"eventElapse\":{\"type\":\"int64\",\"id\":13},\"extend\":{\"type\":\"string\",\"id\":14},\"response\":{\"type\":\"string\",\"id\":15}}},\"ApiInvoke\":{\"fields\":{\"sid\":{\"type\":\"string\",\"id\":1},\"cname\":{\"type\":\"string\",\"id\":2},\"cid\":{\"type\":\"int64\",\"id\":3},\"lts\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"success\":{\"type\":\"bool\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"apiName\":{\"type\":\"string\",\"id\":9},\"errorCode\":{\"type\":\"string\",\"id\":10},\"options\":{\"type\":\"string\",\"id\":11},\"execElapse\":{\"type\":\"int64\",\"id\":12},\"execStates\":{\"type\":\"string\",\"id\":13},\"execResult\":{\"type\":\"string\",\"id\":14},\"invokeId\":{\"type\":\"int64\",\"id\":15}}},\"ReqUserAccount\":{\"fields\":{\"sid\":{\"type\":\"string\",\"id\":1},\"cname\":{\"type\":\"string\",\"id\":2},\"cid\":{\"type\":\"int64\",\"id\":3},\"lts\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"success\":{\"type\":\"bool\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"eventType\":{\"type\":\"string\",\"id\":9},\"serverAddress\":{\"type\":\"string\",\"id\":10},\"stringUid\":{\"type\":\"string\",\"id\":11},\"errorCode\":{\"type\":\"string\",\"id\":12},\"extend\":{\"type\":\"string\",\"id\":13}}},\"FirstVideoReceived\":{\"fields\":{\"lts\":{\"type\":\"int64\",\"id\":1},\"peer\":{\"type\":\"int64\",\"id\":2},\"elapse\":{\"type\":\"int64\",\"id\":3},\"sid\":{\"type\":\"string\",\"id\":4},\"cname\":{\"type\":\"string\",\"id\":5},\"cid\":{\"type\":\"int64\",\"id\":6},\"uid\":{\"type\":\"int64\",\"id\":8},\"subscribeRequestid\":{\"type\":\"int32\",\"id\":9},\"p2pid\":{\"type\":\"int32\",\"id\":10},\"subscribeElapse\":{\"type\":\"int64\",\"id\":11}}},\"FirstAudioReceived\":{\"fields\":{\"lts\":{\"type\":\"int64\",\"id\":1},\"sid\":{\"type\":\"string\",\"id\":2},\"cname\":{\"type\":\"string\",\"id\":3},\"cid\":{\"type\":\"int64\",\"id\":4},\"uid\":{\"type\":\"int64\",\"id\":6},\"peer\":{\"type\":\"int64\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"subscribeRequestid\":{\"type\":\"int32\",\"id\":9},\"p2pid\":{\"type\":\"int32\",\"id\":10},\"subscribeElapse\":{\"type\":\"int64\",\"id\":11}}},\"FirstVideoDecode\":{\"fields\":{\"lts\":{\"type\":\"int64\",\"id\":1},\"sid\":{\"type\":\"string\",\"id\":2},\"cname\":{\"type\":\"string\",\"id\":3},\"cid\":{\"type\":\"int64\",\"id\":4},\"uid\":{\"type\":\"int64\",\"id\":6},\"peer\":{\"type\":\"int64\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"videowidth\":{\"type\":\"int32\",\"id\":9},\"videoheight\":{\"type\":\"int32\",\"id\":10},\"subscribeRequestid\":{\"type\":\"int32\",\"id\":11},\"p2pid\":{\"type\":\"int32\",\"id\":12},\"subscribeElapse\":{\"type\":\"int64\",\"id\":13}}},\"FirstAudioDecode\":{\"fields\":{\"lts\":{\"type\":\"int64\",\"id\":1},\"sid\":{\"type\":\"string\",\"id\":2},\"cname\":{\"type\":\"string\",\"id\":3},\"cid\":{\"type\":\"int64\",\"id\":4},\"uid\":{\"type\":\"int64\",\"id\":6},\"peer\":{\"type\":\"int64\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"subscribeRequestid\":{\"type\":\"int32\",\"id\":9},\"p2pid\":{\"type\":\"int32\",\"id\":10},\"subscribeElapse\":{\"type\":\"int64\",\"id\":11}}},\"OnAddAudioStream\":{\"fields\":{\"lts\":{\"type\":\"int64\",\"id\":1},\"sid\":{\"type\":\"string\",\"id\":2},\"cname\":{\"type\":\"string\",\"id\":3},\"cid\":{\"type\":\"int64\",\"id\":4},\"uid\":{\"type\":\"int64\",\"id\":6},\"peer\":{\"type\":\"int64\",\"id\":7}}},\"OnAddVideoStream\":{\"fields\":{\"lts\":{\"type\":\"int64\",\"id\":1},\"sid\":{\"type\":\"string\",\"id\":2},\"cname\":{\"type\":\"string\",\"id\":3},\"cid\":{\"type\":\"int64\",\"id\":4},\"uid\":{\"type\":\"int64\",\"id\":6},\"peer\":{\"type\":\"int64\",\"id\":7}}},\"OnRemoveStream\":{\"fields\":{\"lts\":{\"type\":\"int64\",\"id\":1},\"sid\":{\"type\":\"string\",\"id\":2},\"cname\":{\"type\":\"string\",\"id\":3},\"cid\":{\"type\":\"int64\",\"id\":4},\"uid\":{\"type\":\"int64\",\"id\":6},\"peer\":{\"type\":\"int64\",\"id\":7}}},\"OnUpdateStream\":{\"fields\":{\"lts\":{\"type\":\"int64\",\"id\":1},\"sid\":{\"type\":\"string\",\"id\":2},\"cname\":{\"type\":\"string\",\"id\":3},\"cid\":{\"type\":\"int64\",\"id\":4},\"uid\":{\"type\":\"int64\",\"id\":6},\"peer\":{\"type\":\"int64\",\"id\":7},\"audio\":{\"type\":\"bool\",\"id\":8},\"video\":{\"type\":\"bool\",\"id\":9}}},\"JoinChannelTimeout\":{\"fields\":{\"lts\":{\"type\":\"int64\",\"id\":1},\"sid\":{\"type\":\"string\",\"id\":2},\"cname\":{\"type\":\"string\",\"id\":3},\"cid\":{\"type\":\"int64\",\"id\":4},\"uid\":{\"type\":\"int64\",\"id\":5},\"elapse\":{\"type\":\"int64\",\"id\":6},\"timeout\":{\"type\":\"int32\",\"id\":7}}},\"PeerPublishStatus\":{\"fields\":{\"lts\":{\"type\":\"int64\",\"id\":1},\"sid\":{\"type\":\"string\",\"id\":2},\"cname\":{\"type\":\"string\",\"id\":3},\"cid\":{\"type\":\"int64\",\"id\":4},\"uid\":{\"type\":\"int64\",\"id\":5},\"peer\":{\"type\":\"int64\",\"id\":6},\"elapse\":{\"type\":\"int64\",\"id\":7},\"peerPublishDuration\":{\"type\":\"int64\",\"id\":8},\"joinChannelSuccessElapse\":{\"type\":\"int64\",\"id\":9},\"subscribeElapse\":{\"type\":\"int64\",\"id\":10},\"audiotag\":{\"type\":\"int32\",\"id\":11},\"videotag\":{\"type\":\"int32\",\"id\":12},\"screensharetag\":{\"type\":\"int32\",\"id\":13},\"firsttimetag\":{\"type\":\"int32\",\"id\":14}}},\"WebSocketQuit\":{\"fields\":{\"lts\":{\"type\":\"int64\",\"id\":1},\"sid\":{\"type\":\"string\",\"id\":2},\"cname\":{\"type\":\"string\",\"id\":3},\"cid\":{\"type\":\"int64\",\"id\":4},\"uid\":{\"type\":\"int64\",\"id\":5},\"elapse\":{\"type\":\"int64\",\"id\":6},\"succ\":{\"type\":\"int32\",\"id\":7},\"errorCode\":{\"type\":\"string\",\"id\":8},\"ip\":{\"type\":\"string\",\"id\":9}}},\"Message\":{\"fields\":{\"id\":{\"type\":\"int64\",\"id\":1},\"msg\":{\"type\":\"bytes\",\"id\":2}}},\"ProtoRaws\":{\"fields\":{\"sendTs\":{\"type\":\"int64\",\"id\":1},\"payloads\":{\"rule\":\"repeated\",\"type\":\"Message\",\"id\":2},\"vid\":{\"type\":\"int32\",\"id\":3}}},\"APWorkerEvent\":{\"fields\":{\"sid\":{\"type\":\"string\",\"id\":1},\"cname\":{\"type\":\"string\",\"id\":2},\"cid\":{\"type\":\"int64\",\"id\":3},\"lts\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"success\":{\"type\":\"bool\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"peer\":{\"type\":\"int64\",\"id\":9},\"ec\":{\"type\":\"int32\",\"id\":10},\"sc\":{\"type\":\"int32\",\"id\":11},\"serverIp\":{\"type\":\"string\",\"id\":12},\"firstSuccess\":{\"type\":\"bool\",\"id\":13},\"responseTime\":{\"type\":\"int32\",\"id\":14},\"serviceName\":{\"type\":\"string\",\"id\":15},\"responseDetail\":{\"type\":\"string\",\"id\":16}}},\"WorkerEvent\":{\"fields\":{\"sid\":{\"type\":\"string\",\"id\":1},\"cname\":{\"type\":\"string\",\"id\":2},\"cid\":{\"type\":\"int64\",\"id\":3},\"lts\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"success\":{\"type\":\"bool\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"peer\":{\"type\":\"int64\",\"id\":9},\"command\":{\"type\":\"string\",\"id\":10},\"actionType\":{\"type\":\"string\",\"id\":11},\"url\":{\"type\":\"string\",\"id\":12},\"payload\":{\"type\":\"string\",\"id\":13},\"serverCode\":{\"type\":\"int32\",\"id\":14},\"code\":{\"type\":\"int32\",\"id\":15},\"traceId\":{\"type\":\"string\",\"id\":16},\"workerType\":{\"type\":\"int32\",\"id\":17},\"responseTime\":{\"type\":\"int32\",\"id\":18},\"requestId\":{\"type\":\"int64\",\"id\":19},\"packIndex\":{\"type\":\"int32\",\"id\":20},\"requestByUser\":{\"type\":\"bool\",\"id\":21},\"tid\":{\"type\":\"string\",\"id\":22}}},\"JoinWebProxyAP\":{\"fields\":{\"lts\":{\"type\":\"int64\",\"id\":1},\"sid\":{\"type\":\"string\",\"id\":2},\"cname\":{\"type\":\"string\",\"id\":3},\"cid\":{\"type\":\"int64\",\"id\":4},\"ip\":{\"type\":\"string\",\"id\":5},\"uid\":{\"type\":\"int64\",\"id\":6},\"sucess\":{\"type\":\"int32\",\"id\":7},\"elapse\":{\"type\":\"int64\",\"id\":8},\"eventType\":{\"type\":\"string\",\"id\":9},\"apServerAddr\":{\"type\":\"string\",\"id\":10},\"turnServerAddrList\":{\"type\":\"string\",\"id\":11},\"errorCode\":{\"type\":\"string\",\"id\":12}}}}}}}');\n  }, function (e, t, n) {\n    var r = function (e) {\n      \"use strict\";\n\n      var t = Object.prototype,\n          n = t.hasOwnProperty,\n          r = \"function\" == typeof Symbol ? Symbol : {},\n          i = r.iterator || \"@@iterator\",\n          o = r.asyncIterator || \"@@asyncIterator\",\n          a = r.toStringTag || \"@@toStringTag\";\n\n      function s(e, t, n, r) {\n        var i = t && t.prototype instanceof u ? t : u,\n            o = Object.create(i.prototype),\n            a = new R(r || []);\n        return o._invoke = function (e, t, n) {\n          var r = \"suspendedStart\";\n          return function (i, o) {\n            if (\"executing\" === r) throw new Error(\"Generator is already running\");\n\n            if (\"completed\" === r) {\n              if (\"throw\" === i) throw o;\n              return I();\n            }\n\n            for (n.method = i, n.arg = o;;) {\n              var a = n.delegate;\n\n              if (a) {\n                var s = S(a, n);\n\n                if (s) {\n                  if (s === d) continue;\n                  return s;\n                }\n              }\n\n              if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n                if (\"suspendedStart\" === r) throw r = \"completed\", n.arg;\n                n.dispatchException(n.arg);\n              } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n              r = \"executing\";\n              var u = c(e, t, n);\n\n              if (\"normal\" === u.type) {\n                if (r = n.done ? \"completed\" : \"suspendedYield\", u.arg === d) continue;\n                return {\n                  value: u.arg,\n                  done: n.done\n                };\n              }\n\n              \"throw\" === u.type && (r = \"completed\", n.method = \"throw\", n.arg = u.arg);\n            }\n          };\n        }(e, n, a), o;\n      }\n\n      function c(e, t, n) {\n        try {\n          return {\n            type: \"normal\",\n            arg: e.call(t, n)\n          };\n        } catch (e) {\n          return {\n            type: \"throw\",\n            arg: e\n          };\n        }\n      }\n\n      e.wrap = s;\n      var d = {};\n\n      function u() {}\n\n      function l() {}\n\n      function f() {}\n\n      var p = {};\n\n      p[i] = function () {\n        return this;\n      };\n\n      var g = Object.getPrototypeOf,\n          m = g && g(g(T([])));\n      m && m !== t && n.call(m, i) && (p = m);\n      var h = f.prototype = u.prototype = Object.create(p);\n\n      function v(e) {\n        [\"next\", \"throw\", \"return\"].forEach(function (t) {\n          e[t] = function (e) {\n            return this._invoke(t, e);\n          };\n        });\n      }\n\n      function E(e, t) {\n        var r;\n\n        this._invoke = function (i, o) {\n          function a() {\n            return new t(function (r, a) {\n              !function r(i, o, a, s) {\n                var d = c(e[i], e, o);\n\n                if (\"throw\" !== d.type) {\n                  var u = d.arg,\n                      l = u.value;\n                  return l && \"object\" == typeof l && n.call(l, \"__await\") ? t.resolve(l.__await).then(function (e) {\n                    r(\"next\", e, a, s);\n                  }, function (e) {\n                    r(\"throw\", e, a, s);\n                  }) : t.resolve(l).then(function (e) {\n                    u.value = e, a(u);\n                  }, function (e) {\n                    return r(\"throw\", e, a, s);\n                  });\n                }\n\n                s(d.arg);\n              }(i, o, r, a);\n            });\n          }\n\n          return r = r ? r.then(a, a) : a();\n        };\n      }\n\n      function S(e, t) {\n        var n = e.iterator[t.method];\n\n        if (void 0 === n) {\n          if (t.delegate = null, \"throw\" === t.method) {\n            if (e.iterator.return && (t.method = \"return\", t.arg = void 0, S(e, t), \"throw\" === t.method)) return d;\n            t.method = \"throw\", t.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n          }\n\n          return d;\n        }\n\n        var r = c(n, e.iterator, t.arg);\n        if (\"throw\" === r.type) return t.method = \"throw\", t.arg = r.arg, t.delegate = null, d;\n        var i = r.arg;\n        return i ? i.done ? (t[e.resultName] = i.value, t.next = e.nextLoc, \"return\" !== t.method && (t.method = \"next\", t.arg = void 0), t.delegate = null, d) : i : (t.method = \"throw\", t.arg = new TypeError(\"iterator result is not an object\"), t.delegate = null, d);\n      }\n\n      function _(e) {\n        var t = {\n          tryLoc: e[0]\n        };\n        1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t);\n      }\n\n      function y(e) {\n        var t = e.completion || {};\n        t.type = \"normal\", delete t.arg, e.completion = t;\n      }\n\n      function R(e) {\n        this.tryEntries = [{\n          tryLoc: \"root\"\n        }], e.forEach(_, this), this.reset(!0);\n      }\n\n      function T(e) {\n        if (e) {\n          var t = e[i];\n          if (t) return t.call(e);\n          if (\"function\" == typeof e.next) return e;\n\n          if (!isNaN(e.length)) {\n            var r = -1,\n                o = function t() {\n              for (; ++r < e.length;) {\n                if (n.call(e, r)) return t.value = e[r], t.done = !1, t;\n              }\n\n              return t.value = void 0, t.done = !0, t;\n            };\n\n            return o.next = o;\n          }\n        }\n\n        return {\n          next: I\n        };\n      }\n\n      function I() {\n        return {\n          value: void 0,\n          done: !0\n        };\n      }\n\n      return l.prototype = h.constructor = f, f.constructor = l, f[a] = l.displayName = \"GeneratorFunction\", e.isGeneratorFunction = function (e) {\n        var t = \"function\" == typeof e && e.constructor;\n        return !!t && (t === l || \"GeneratorFunction\" === (t.displayName || t.name));\n      }, e.mark = function (e) {\n        return Object.setPrototypeOf ? Object.setPrototypeOf(e, f) : (e.__proto__ = f, a in e || (e[a] = \"GeneratorFunction\")), e.prototype = Object.create(h), e;\n      }, e.awrap = function (e) {\n        return {\n          __await: e\n        };\n      }, v(E.prototype), E.prototype[o] = function () {\n        return this;\n      }, e.AsyncIterator = E, e.async = function (t, n, r, i, o) {\n        void 0 === o && (o = Promise);\n        var a = new E(s(t, n, r, i), o);\n        return e.isGeneratorFunction(n) ? a : a.next().then(function (e) {\n          return e.done ? e.value : a.next();\n        });\n      }, v(h), h[a] = \"Generator\", h[i] = function () {\n        return this;\n      }, h.toString = function () {\n        return \"[object Generator]\";\n      }, e.keys = function (e) {\n        var t = [];\n\n        for (var n in e) {\n          t.push(n);\n        }\n\n        return t.reverse(), function n() {\n          for (; t.length;) {\n            var r = t.pop();\n            if (r in e) return n.value = r, n.done = !1, n;\n          }\n\n          return n.done = !0, n;\n        };\n      }, e.values = T, R.prototype = {\n        constructor: R,\n        reset: function reset(e) {\n          if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = void 0, this.tryEntries.forEach(y), !e) for (var t in this) {\n            \"t\" === t.charAt(0) && n.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0);\n          }\n        },\n        stop: function stop() {\n          this.done = !0;\n          var e = this.tryEntries[0].completion;\n          if (\"throw\" === e.type) throw e.arg;\n          return this.rval;\n        },\n        dispatchException: function dispatchException(e) {\n          if (this.done) throw e;\n          var t = this;\n\n          function r(n, r) {\n            return a.type = \"throw\", a.arg = e, t.next = n, r && (t.method = \"next\", t.arg = void 0), !!r;\n          }\n\n          for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n            var o = this.tryEntries[i],\n                a = o.completion;\n            if (\"root\" === o.tryLoc) return r(\"end\");\n\n            if (o.tryLoc <= this.prev) {\n              var s = n.call(o, \"catchLoc\"),\n                  c = n.call(o, \"finallyLoc\");\n\n              if (s && c) {\n                if (this.prev < o.catchLoc) return r(o.catchLoc, !0);\n                if (this.prev < o.finallyLoc) return r(o.finallyLoc);\n              } else if (s) {\n                if (this.prev < o.catchLoc) return r(o.catchLoc, !0);\n              } else {\n                if (!c) throw new Error(\"try statement without catch or finally\");\n                if (this.prev < o.finallyLoc) return r(o.finallyLoc);\n              }\n            }\n          }\n        },\n        abrupt: function abrupt(e, t) {\n          for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n            var i = this.tryEntries[r];\n\n            if (i.tryLoc <= this.prev && n.call(i, \"finallyLoc\") && this.prev < i.finallyLoc) {\n              var o = i;\n              break;\n            }\n          }\n\n          o && (\"break\" === e || \"continue\" === e) && o.tryLoc <= t && t <= o.finallyLoc && (o = null);\n          var a = o ? o.completion : {};\n          return a.type = e, a.arg = t, o ? (this.method = \"next\", this.next = o.finallyLoc, d) : this.complete(a);\n        },\n        complete: function complete(e, t) {\n          if (\"throw\" === e.type) throw e.arg;\n          return \"break\" === e.type || \"continue\" === e.type ? this.next = e.arg : \"return\" === e.type ? (this.rval = this.arg = e.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === e.type && t && (this.next = t), d;\n        },\n        finish: function finish(e) {\n          for (var t = this.tryEntries.length - 1; t >= 0; --t) {\n            var n = this.tryEntries[t];\n            if (n.finallyLoc === e) return this.complete(n.completion, n.afterLoc), y(n), d;\n          }\n        },\n        catch: function _catch(e) {\n          for (var t = this.tryEntries.length - 1; t >= 0; --t) {\n            var n = this.tryEntries[t];\n\n            if (n.tryLoc === e) {\n              var r = n.completion;\n\n              if (\"throw\" === r.type) {\n                var i = r.arg;\n                y(n);\n              }\n\n              return i;\n            }\n          }\n\n          throw new Error(\"illegal catch attempt\");\n        },\n        delegateYield: function delegateYield(e, t, n) {\n          return this.delegate = {\n            iterator: T(e),\n            resultName: t,\n            nextLoc: n\n          }, \"next\" === this.method && (this.arg = void 0), d;\n        }\n      }, e;\n    }(e.exports);\n\n    try {\n      regeneratorRuntime = r;\n    } catch (e) {\n      Function(\"r\", \"regeneratorRuntime = r\")(r);\n    }\n  }, function (e, t) {\n    e.exports = function (e) {\n      if (Array.isArray(e)) return e;\n    };\n  }, function (e, t) {\n    e.exports = function (e, t) {\n      if (\"undefined\" != typeof Symbol && Symbol.iterator in Object(e)) {\n        var n = [],\n            r = !0,\n            i = !1,\n            o = void 0;\n\n        try {\n          for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value), !t || n.length !== t); r = !0) {\n            ;\n          }\n        } catch (e) {\n          i = !0, o = e;\n        } finally {\n          try {\n            r || null == s.return || s.return();\n          } finally {\n            if (i) throw o;\n          }\n        }\n\n        return n;\n      }\n    };\n  }, function (e, t) {\n    e.exports = function () {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n    var r = \"object\" == typeof window && window.RTCPeerConnection,\n        i = \"object\" == typeof window && window.webkitRTCPeerConnection,\n        o = \"object\" == typeof window && window.mozRTCPeerConnection;\n\n    t.createRTCPeerConnection = function (e) {\n      var t = r || i || o;\n      return t ? new t(e) : null;\n    };\n  }, function (e, t, n) {\n    var r;\n    /*!\n     * EventEmitter v5.2.9 - git.io/ee\n     * Unlicense - http://unlicense.org/\n     * Oliver Caldwell - https://oli.me.uk/\n     * @preserve\n     */\n\n    !function (t) {\n      \"use strict\";\n\n      function i() {}\n\n      var o = i.prototype,\n          a = t.EventEmitter;\n\n      function s(e, t) {\n        for (var n = e.length; n--;) {\n          if (e[n].listener === t) return n;\n        }\n\n        return -1;\n      }\n\n      function c(e) {\n        return function () {\n          return this[e].apply(this, arguments);\n        };\n      }\n\n      o.getListeners = function (e) {\n        var t,\n            n,\n            r = this._getEvents();\n\n        if (e instanceof RegExp) for (n in t = {}, r) {\n          r.hasOwnProperty(n) && e.test(n) && (t[n] = r[n]);\n        } else t = r[e] || (r[e] = []);\n        return t;\n      }, o.flattenListeners = function (e) {\n        var t,\n            n = [];\n\n        for (t = 0; t < e.length; t += 1) {\n          n.push(e[t].listener);\n        }\n\n        return n;\n      }, o.getListenersAsObject = function (e) {\n        var t,\n            n = this.getListeners(e);\n        return n instanceof Array && ((t = {})[e] = n), t || n;\n      }, o.addListener = function (e, t) {\n        if (!function e(t) {\n          return \"function\" == typeof t || t instanceof RegExp || !(!t || \"object\" != typeof t) && e(t.listener);\n        }(t)) throw new TypeError(\"listener must be a function\");\n        var n,\n            r = this.getListenersAsObject(e),\n            i = \"object\" == typeof t;\n\n        for (n in r) {\n          r.hasOwnProperty(n) && -1 === s(r[n], t) && r[n].push(i ? t : {\n            listener: t,\n            once: !1\n          });\n        }\n\n        return this;\n      }, o.on = c(\"addListener\"), o.addOnceListener = function (e, t) {\n        return this.addListener(e, {\n          listener: t,\n          once: !0\n        });\n      }, o.once = c(\"addOnceListener\"), o.defineEvent = function (e) {\n        return this.getListeners(e), this;\n      }, o.defineEvents = function (e) {\n        for (var t = 0; t < e.length; t += 1) {\n          this.defineEvent(e[t]);\n        }\n\n        return this;\n      }, o.removeListener = function (e, t) {\n        var n,\n            r,\n            i = this.getListenersAsObject(e);\n\n        for (r in i) {\n          i.hasOwnProperty(r) && -1 !== (n = s(i[r], t)) && i[r].splice(n, 1);\n        }\n\n        return this;\n      }, o.off = c(\"removeListener\"), o.addListeners = function (e, t) {\n        return this.manipulateListeners(!1, e, t);\n      }, o.removeListeners = function (e, t) {\n        return this.manipulateListeners(!0, e, t);\n      }, o.manipulateListeners = function (e, t, n) {\n        var r,\n            i,\n            o = e ? this.removeListener : this.addListener,\n            a = e ? this.removeListeners : this.addListeners;\n        if (\"object\" != typeof t || t instanceof RegExp) for (r = n.length; r--;) {\n          o.call(this, t, n[r]);\n        } else for (r in t) {\n          t.hasOwnProperty(r) && (i = t[r]) && (\"function\" == typeof i ? o.call(this, r, i) : a.call(this, r, i));\n        }\n        return this;\n      }, o.removeEvent = function (e) {\n        var t,\n            n = typeof e,\n            r = this._getEvents();\n\n        if (\"string\" === n) delete r[e];else if (e instanceof RegExp) for (t in r) {\n          r.hasOwnProperty(t) && e.test(t) && delete r[t];\n        } else delete this._events;\n        return this;\n      }, o.removeAllListeners = c(\"removeEvent\"), o.emitEvent = function (e, t) {\n        var n,\n            r,\n            i,\n            o,\n            a = this.getListenersAsObject(e);\n\n        for (o in a) {\n          if (a.hasOwnProperty(o)) for (n = a[o].slice(0), i = 0; i < n.length; i++) {\n            !0 === (r = n[i]).once && this.removeListener(e, r.listener), r.listener.apply(this, t || []) === this._getOnceReturnValue() && this.removeListener(e, r.listener);\n          }\n        }\n\n        return this;\n      }, o.trigger = c(\"emitEvent\"), o.emit = function (e) {\n        var t = Array.prototype.slice.call(arguments, 1);\n        return this.emitEvent(e, t);\n      }, o.setOnceReturnValue = function (e) {\n        return this._onceReturnValue = e, this;\n      }, o._getOnceReturnValue = function () {\n        return !this.hasOwnProperty(\"_onceReturnValue\") || this._onceReturnValue;\n      }, o._getEvents = function () {\n        return this._events || (this._events = {});\n      }, i.noConflict = function () {\n        return t.EventEmitter = a, i;\n      }, void 0 === (r = function () {\n        return i;\n      }.call(t, n, t, e)) || (e.exports = r);\n    }(\"undefined\" != typeof window ? window : this || {});\n  }, function (e, t, n) {\n    var r = n(35);\n\n    e.exports = function (e) {\n      if (Array.isArray(e)) return r(e);\n    };\n  }, function (e, t) {\n    e.exports = function (e) {\n      if (\"undefined\" != typeof Symbol && Symbol.iterator in Object(e)) return Array.from(e);\n    };\n  }, function (e, t) {\n    e.exports = function () {\n      throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    };\n  }, function (e, t, n) {\n    (function (t) {\n      var r;\n      e.exports = (r = r || function (e, r) {\n        var i;\n        if (\"undefined\" != typeof window && window.crypto && (i = window.crypto), \"undefined\" != typeof self && self.crypto && (i = self.crypto), \"undefined\" != typeof globalThis && globalThis.crypto && (i = globalThis.crypto), !i && \"undefined\" != typeof window && window.msCrypto && (i = window.msCrypto), !i && void 0 !== t && t.crypto && (i = t.crypto), !i) try {\n          i = n(74);\n        } catch (e) {}\n\n        var o = function o() {\n          if (i) {\n            if (\"function\" == typeof i.getRandomValues) try {\n              return i.getRandomValues(new Uint32Array(1))[0];\n            } catch (e) {}\n            if (\"function\" == typeof i.randomBytes) try {\n              return i.randomBytes(4).readInt32LE();\n            } catch (e) {}\n          }\n\n          throw new Error(\"Native crypto module could not be used to get secure random number.\");\n        },\n            a = Object.create || function () {\n          function e() {}\n\n          return function (t) {\n            var n;\n            return e.prototype = t, n = new e(), e.prototype = null, n;\n          };\n        }(),\n            s = {},\n            c = s.lib = {},\n            d = c.Base = {\n          extend: function extend(e) {\n            var t = a(this);\n            return e && t.mixIn(e), t.hasOwnProperty(\"init\") && this.init !== t.init || (t.init = function () {\n              t.$super.init.apply(this, arguments);\n            }), t.init.prototype = t, t.$super = this, t;\n          },\n          create: function create() {\n            var e = this.extend();\n            return e.init.apply(e, arguments), e;\n          },\n          init: function init() {},\n          mixIn: function mixIn(e) {\n            for (var t in e) {\n              e.hasOwnProperty(t) && (this[t] = e[t]);\n            }\n\n            e.hasOwnProperty(\"toString\") && (this.toString = e.toString);\n          },\n          clone: function clone() {\n            return this.init.prototype.extend(this);\n          }\n        },\n            u = c.WordArray = d.extend({\n          init: function init(e, t) {\n            e = this.words = e || [], this.sigBytes = null != t ? t : 4 * e.length;\n          },\n          toString: function toString(e) {\n            return (e || f).stringify(this);\n          },\n          concat: function concat(e) {\n            var t = this.words,\n                n = e.words,\n                r = this.sigBytes,\n                i = e.sigBytes;\n            if (this.clamp(), r % 4) for (var o = 0; o < i; o++) {\n              var a = n[o >>> 2] >>> 24 - o % 4 * 8 & 255;\n              t[r + o >>> 2] |= a << 24 - (r + o) % 4 * 8;\n            } else for (var s = 0; s < i; s += 4) {\n              t[r + s >>> 2] = n[s >>> 2];\n            }\n            return this.sigBytes += i, this;\n          },\n          clamp: function clamp() {\n            var t = this.words,\n                n = this.sigBytes;\n            t[n >>> 2] &= 4294967295 << 32 - n % 4 * 8, t.length = e.ceil(n / 4);\n          },\n          clone: function clone() {\n            var e = d.clone.call(this);\n            return e.words = this.words.slice(0), e;\n          },\n          random: function random(e) {\n            for (var t = [], n = 0; n < e; n += 4) {\n              t.push(o());\n            }\n\n            return new u.init(t, e);\n          }\n        }),\n            l = s.enc = {},\n            f = l.Hex = {\n          stringify: function stringify(e) {\n            for (var t = e.words, n = e.sigBytes, r = [], i = 0; i < n; i++) {\n              var o = t[i >>> 2] >>> 24 - i % 4 * 8 & 255;\n              r.push((o >>> 4).toString(16)), r.push((15 & o).toString(16));\n            }\n\n            return r.join(\"\");\n          },\n          parse: function parse(e) {\n            for (var t = e.length, n = [], r = 0; r < t; r += 2) {\n              n[r >>> 3] |= parseInt(e.substr(r, 2), 16) << 24 - r % 8 * 4;\n            }\n\n            return new u.init(n, t / 2);\n          }\n        },\n            p = l.Latin1 = {\n          stringify: function stringify(e) {\n            for (var t = e.words, n = e.sigBytes, r = [], i = 0; i < n; i++) {\n              var o = t[i >>> 2] >>> 24 - i % 4 * 8 & 255;\n              r.push(String.fromCharCode(o));\n            }\n\n            return r.join(\"\");\n          },\n          parse: function parse(e) {\n            for (var t = e.length, n = [], r = 0; r < t; r++) {\n              n[r >>> 2] |= (255 & e.charCodeAt(r)) << 24 - r % 4 * 8;\n            }\n\n            return new u.init(n, t);\n          }\n        },\n            g = l.Utf8 = {\n          stringify: function stringify(e) {\n            try {\n              return decodeURIComponent(escape(p.stringify(e)));\n            } catch (e) {\n              throw new Error(\"Malformed UTF-8 data\");\n            }\n          },\n          parse: function parse(e) {\n            return p.parse(unescape(encodeURIComponent(e)));\n          }\n        },\n            m = c.BufferedBlockAlgorithm = d.extend({\n          reset: function reset() {\n            this._data = new u.init(), this._nDataBytes = 0;\n          },\n          _append: function _append(e) {\n            \"string\" == typeof e && (e = g.parse(e)), this._data.concat(e), this._nDataBytes += e.sigBytes;\n          },\n          _process: function _process(t) {\n            var n,\n                r = this._data,\n                i = r.words,\n                o = r.sigBytes,\n                a = this.blockSize,\n                s = o / (4 * a),\n                c = (s = t ? e.ceil(s) : e.max((0 | s) - this._minBufferSize, 0)) * a,\n                d = e.min(4 * c, o);\n\n            if (c) {\n              for (var l = 0; l < c; l += a) {\n                this._doProcessBlock(i, l);\n              }\n\n              n = i.splice(0, c), r.sigBytes -= d;\n            }\n\n            return new u.init(n, d);\n          },\n          clone: function clone() {\n            var e = d.clone.call(this);\n            return e._data = this._data.clone(), e;\n          },\n          _minBufferSize: 0\n        }),\n            h = (c.Hasher = m.extend({\n          cfg: d.extend(),\n          init: function init(e) {\n            this.cfg = this.cfg.extend(e), this.reset();\n          },\n          reset: function reset() {\n            m.reset.call(this), this._doReset();\n          },\n          update: function update(e) {\n            return this._append(e), this._process(), this;\n          },\n          finalize: function finalize(e) {\n            return e && this._append(e), this._doFinalize();\n          },\n          blockSize: 16,\n          _createHelper: function _createHelper(e) {\n            return function (t, n) {\n              return new e.init(n).finalize(t);\n            };\n          },\n          _createHmacHelper: function _createHmacHelper(e) {\n            return function (t, n) {\n              return new h.HMAC.init(e, n).finalize(t);\n            };\n          }\n        }), s.algo = {});\n\n        return s;\n      }(Math), r);\n    }).call(this, n(33));\n  }, function (e, t) {}, function (e, t, n) {\n    \"use strict\";\n\n    var r = this && this.__assign || function () {\n      return (r = Object.assign || function (e) {\n        for (var t, n = 1, r = arguments.length; n < r; n++) {\n          for (var i in t = arguments[n]) {\n            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);\n          }\n        }\n\n        return e;\n      }).apply(this, arguments);\n    },\n        i = this && this.__awaiter || function (e, t, n, r) {\n      return new (n || (n = Promise))(function (i, o) {\n        function a(e) {\n          try {\n            c(r.next(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function s(e) {\n          try {\n            c(r.throw(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function c(e) {\n          var t;\n          e.done ? i(e.value) : (t = e.value, t instanceof n ? t : new n(function (e) {\n            e(t);\n          })).then(a, s);\n        }\n\n        c((r = r.apply(e, t || [])).next());\n      });\n    },\n        o = this && this.__generator || function (e, t) {\n      var n,\n          r,\n          i,\n          o,\n          a = {\n        label: 0,\n        sent: function sent() {\n          if (1 & i[0]) throw i[1];\n          return i[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return o = {\n        next: s(0),\n        throw: s(1),\n        return: s(2)\n      }, \"function\" == typeof Symbol && (o[Symbol.iterator] = function () {\n        return this;\n      }), o;\n\n      function s(o) {\n        return function (s) {\n          return function (o) {\n            if (n) throw new TypeError(\"Generator is already executing.\");\n\n            for (; a;) {\n              try {\n                if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;\n\n                switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {\n                  case 0:\n                  case 1:\n                    i = o;\n                    break;\n\n                  case 4:\n                    return a.label++, {\n                      value: o[1],\n                      done: !1\n                    };\n\n                  case 5:\n                    a.label++, r = o[1], o = [0];\n                    continue;\n\n                  case 7:\n                    o = a.ops.pop(), a.trys.pop();\n                    continue;\n\n                  default:\n                    if (!(i = a.trys, (i = i.length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) {\n                      a = 0;\n                      continue;\n                    }\n\n                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {\n                      a.label = o[1];\n                      break;\n                    }\n\n                    if (6 === o[0] && a.label < i[1]) {\n                      a.label = i[1], i = o;\n                      break;\n                    }\n\n                    if (i && a.label < i[2]) {\n                      a.label = i[2], a.ops.push(o);\n                      break;\n                    }\n\n                    i[2] && a.ops.pop(), a.trys.pop();\n                    continue;\n                }\n\n                o = t.call(e, a);\n              } catch (e) {\n                o = [6, e], r = 0;\n              } finally {\n                n = i = 0;\n              }\n            }\n\n            if (5 & o[0]) throw o[1];\n            return {\n              value: o[0] ? o[1] : void 0,\n              done: !0\n            };\n          }([o, s]);\n        };\n      }\n    },\n        a = this && this.__importDefault || function (e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    };\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n\n    var s = n(76),\n        c = n(27),\n        d = n(95),\n        u = n(20),\n        l = n(24),\n        f = n(31),\n        p = a(n(0)),\n        g = a(n(37)),\n        m = function () {\n      function e(e) {\n        this.retryTimeout = 1e4, this.streamingTasks = new Map(), this.isStartingStreamingTask = !1, this.taskMutex = new d.PromiseMutex(\"LS\"), this.cancelToken = g.default.CancelToken.source(), this.injectConfig = r({}, c.DEFAULT_INJECT_CONFIG), this.injectLoopTimes = 0, this.lastTaskId = 1, this.statusError = new Map(), this.spec = e;\n      }\n\n      return Object.defineProperty(e.prototype, \"isNeedReset\", {\n        get: function get() {\n          for (var e = this, t = 0, n = Array.from(this.streamingTasks.values()); t < n.length; t++) {\n            var r = n[t];\n            if (r.mode === c.LiveStreamingServiceMode.INJECT) return !0;\n            if (r.mode === c.LiveStreamingServiceMode.TRANSCODE) if ((this.transcodingConfig && (this.transcodingConfig.userConfigs || this.transcodingConfig.transcodingUsers) || []).find(function (t) {\n              return t.uid === e.spec.uid;\n            })) return !0;\n          }\n\n          return !1;\n        },\n        enumerable: !0,\n        configurable: !0\n      }), e.prototype.setTranscodingConfig = function (e) {\n        return i(this, void 0, void 0, function () {\n          var t,\n              n,\n              i,\n              a,\n              s,\n              d = this;\n          return o(this, function (o) {\n            switch (o.label) {\n              case 0:\n                (t = r(r({}, c.DEFAULT_TRANSCODING_CONFIG), e)).transcodingUsers || (t.transcodingUsers = t.userConfigs), 66 !== t.videoCodecProfile && 77 !== t.videoCodecProfile && 100 !== t.videoCodecProfile && (p.default.debug(\"[\" + this.spec.clientId + \"] set transcoding config, fix video codec profile: \" + t.videoCodecProfile + \" -> 100\"), t.videoCodecProfile = 100), t.transcodingUsers && (t.transcodingUsers = t.transcodingUsers.map(function (e) {\n                  return r(r(r({}, c.DEFAULT_LIVE_STREAMING_TRANSCODING_USER), e), {\n                    zOrder: e.zOrder ? e.zOrder + 1 : 1\n                  });\n                })), t.images && (t.images = t.images.map(function (e) {\n                  return r(r({}, c.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK), e);\n                }));\n\n                try {\n                  c.isLiveStreamingTranscodingConfig(t);\n                } catch (e) {\n                  throw e;\n                }\n\n                return t.transcodingUsers && (t.userConfigs = t.transcodingUsers.map(function (e) {\n                  return r({}, e);\n                }), t.userCount = t.transcodingUsers.length, delete t.transcodingUsers), n = (t.userConfigs || []).map(function (e) {\n                  return \"number\" == typeof e.uid ? Promise.resolve(e.uid) : u.getUserAccount(d.spec, null, e.uid);\n                }), [4, this.taskMutex.lock()];\n\n              case 1:\n                return i = o.sent(), [4, Promise.all(n)];\n\n              case 2:\n                if (o.sent().forEach(function (e, n) {\n                  t.userConfigs && t.userConfigs[n] && (t.userConfigs[n].uid = e && e.uid || e);\n                }), this.transcodingConfig = t, !this.connection) return i(), [2];\n                o.label = 3;\n\n              case 3:\n                return o.trys.push([3, 5,, 6]), [4, this.connection.request(\"request\", {\n                  clientRequest: {\n                    command: \"UpdateTranscoding\",\n                    transcodingConfig: this.transcodingConfig\n                  }\n                }, !1, {\n                  command: \"UpdateTranscoding\",\n                  workerType: 1,\n                  requestByUser: !0,\n                  tid: Array.from(this.streamingTasks.values()).map(function (e) {\n                    return e.taskId;\n                  }).join(\"#\")\n                })];\n\n              case 4:\n                return a = o.sent(), i(), p.default.debug(\"[\" + this.spec.clientId + \"] update live transcoding config success, code: \" + a.code + \", config:\", JSON.stringify(this.transcodingConfig)), [3, 6];\n\n              case 5:\n                if (s = o.sent(), i(), !s.data || !s.data.retry) throw s;\n                return s.data.changeAddress && this.connection.tryNextAddress(), this.streamingTasks.forEach(function (e) {\n                  p.default.warning(\"[\" + d.spec.clientId + \"] live streaming receive error\", s.toString(), \"try to republish\", e.url), d.startLiveStreamingTask(e.url, e.mode, s).then(function () {\n                    p.default.debug(\"[\" + d.spec.clientId + \"] live streaming republish \" + e.url + \" success\");\n                  }).catch(function (t) {\n                    p.default.error(\"[\" + d.spec.clientId + \"] live streaming republish failed\", e.url, t.toString()), d.onLiveStreamError && d.onLiveStreamError(e.url, t);\n                  });\n                }), [3, 6];\n\n              case 6:\n                return [2];\n            }\n          });\n        });\n      }, e.prototype.setInjectStreamConfig = function (e, t) {\n        this.injectConfig = Object.assign({}, this.injectConfig, e), this.injectLoopTimes = t;\n      }, e.prototype.startLiveStreamingTask = function (e, t, n) {\n        return i(this, void 0, void 0, function () {\n          var i,\n              a,\n              s,\n              d,\n              u,\n              g,\n              m,\n              h,\n              v = this;\n          return o(this, function (o) {\n            switch (o.label) {\n              case 0:\n                return Array.from(this.streamingTasks.values()).find(function (e) {\n                  return e.mode === c.LiveStreamingServiceMode.INJECT;\n                }) && t === c.LiveStreamingServiceMode.INJECT ? [2, new l.AgoraRTCError(l.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT, \"inject stream over limit\").throw()] : (i = {\n                  command: \"PublishStream\",\n                  ts: Date.now(),\n                  url: e,\n                  uid: this.spec.uid.toString(),\n                  autoDestroyTime: 30\n                }, p.default.debug(\"[\" + this.spec.clientId + \"] start live streaming \" + e + \", mode: \" + t), [4, this.taskMutex.lock()]);\n\n              case 1:\n                if (a = o.sent(), !this.transcodingConfig && t === c.LiveStreamingServiceMode.TRANSCODE) throw a(), new l.AgoraRTCError(l.AgoraRTCErrorCode.INVALID_OPERATION, \"[LiveStreaming] no transcoding config found, can not start transcoding streaming task\");\n                if (!this.connection && n) return a(), [2];\n                if (this.streamingTasks.get(e) && !n) return a(), [2, new l.AgoraRTCError(l.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw()];\n                if (!this.transcodingConfig && t === c.LiveStreamingServiceMode.TRANSCODE) throw a(), new l.AgoraRTCError(l.AgoraRTCErrorCode.INVALID_OPERATION, \"[LiveStreaming] no transcoding config found, can not start transcoding streaming task\");\n                o.label = 2;\n\n              case 2:\n                return o.trys.push([2, 5,, 6]), this.connection ? [3, 4] : (s = this, [4, this.connect(t)]);\n\n              case 3:\n                s.connection = o.sent(), o.label = 4;\n\n              case 4:\n                return [3, 6];\n\n              case 5:\n                throw d = o.sent(), a(), d;\n\n              case 6:\n                switch (t) {\n                  case c.LiveStreamingServiceMode.TRANSCODE:\n                    i.transcodingConfig = r({}, this.transcodingConfig);\n                    break;\n\n                  case c.LiveStreamingServiceMode.RAW:\n                    break;\n\n                  case c.LiveStreamingServiceMode.INJECT:\n                    i = {\n                      cname: this.spec.cname,\n                      command: \"InjectStream\",\n                      sid: this.spec.sid,\n                      transcodingConfig: this.injectConfig,\n                      ts: Date.now(),\n                      url: e,\n                      loopTimes: this.injectLoopTimes\n                    };\n                }\n\n                this.uapResponse && this.uapResponse.vid && (i.vid = this.uapResponse.vid), this.isStartingStreamingTask = !0, u = this.lastTaskId++, o.label = 7;\n\n              case 7:\n                return o.trys.push([7, 9,, 14]), g = new Promise(function (t, r) {\n                  f.wait(v.retryTimeout).then(function () {\n                    if (n) return r(n);\n                    var t = v.statusError.get(e);\n                    return t ? (v.statusError.delete(e), r(t)) : void 0;\n                  });\n                }), [4, Promise.race([this.connection.request(\"request\", {\n                  clientRequest: i\n                }, !0, {\n                  url: e,\n                  command: \"PublishStream\",\n                  workerType: t === c.LiveStreamingServiceMode.TRANSCODE ? 1 : 2,\n                  requestByUser: !n,\n                  tid: u.toString()\n                }), g])];\n\n              case 8:\n                return m = o.sent(), this.isStartingStreamingTask = !1, p.default.debug(\"[\" + this.spec.clientId + \"] live streaming started, code: \" + m.code), this.streamingTasks.set(e, {\n                  clientRequest: i,\n                  mode: t,\n                  url: e,\n                  taskId: u\n                }), a(), [3, 14];\n\n              case 9:\n                if (h = o.sent(), a(), this.isStartingStreamingTask = !1, !h.data || !h.data.retry || n) throw h;\n                return h.data.changeAddress ? [3, 11] : [4, this.startLiveStreamingTask(e, t, h)];\n\n              case 10:\n                return [2, o.sent()];\n\n              case 11:\n                return this.connection.tryNextAddress(), [4, this.startLiveStreamingTask(e, t, h)];\n\n              case 12:\n                return [2, o.sent()];\n\n              case 13:\n                return [3, 14];\n\n              case 14:\n                return [2];\n            }\n          });\n        });\n      }, e.prototype.stopLiveStreamingTask = function (e) {\n        var t = this;\n        return new Promise(function (n, r) {\n          var i = t.streamingTasks.get(e);\n          if (!i || !t.connection) return new l.AgoraRTCError(l.AgoraRTCErrorCode.UNEXPECTED_ERROR, \"can not find streaming task to stop\").throw();\n          var o = i.mode;\n          i.abortTask = function () {\n            p.default.debug(\"[\" + t.spec.clientId + \"] stop live streaming success(worker exception)\"), t.streamingTasks.delete(e), n();\n          }, p.default.debug(\"stop live streaming task request: \" + JSON.stringify(e)), t.connection.request(\"request\", {\n            clientRequest: {\n              command: o === c.LiveStreamingServiceMode.INJECT ? \"UninjectStream\" : \"UnpublishStream\",\n              url: i.url\n            }\n          }, !1, {\n            url: e,\n            command: \"UnPublishStream\",\n            workerType: o === c.LiveStreamingServiceMode.TRANSCODE ? 1 : 2,\n            requestByUser: !0,\n            tid: (t.lastTaskId++).toString()\n          }).then(function (r) {\n            p.default.debug(\"[\" + t.spec.clientId + \"] stop live streaming success, code: \" + r.code), t.streamingTasks.delete(e), 0 === t.streamingTasks.size && o !== c.LiveStreamingServiceMode.INJECT && (t.connection.close(), t.connection = void 0), n();\n          }).catch(r);\n        });\n      }, e.prototype.controlInjectStream = function (e, t, n, r) {\n        return i(this, void 0, void 0, function () {\n          var i;\n          return o(this, function (o) {\n            switch (o.label) {\n              case 0:\n                if (!(i = this.streamingTasks.get(e)) || !this.connection || i.mode !== c.LiveStreamingServiceMode.INJECT) throw new l.AgoraRTCError(l.AgoraRTCErrorCode.INVALID_OPERATION, \"can not find inject stream task to control\");\n                return [4, this.connection.request(\"request\", {\n                  clientRequest: {\n                    command: \"ControlStream\",\n                    url: e,\n                    control: t,\n                    audioVolume: n,\n                    position: r\n                  }\n                })];\n\n              case 1:\n                return [2, o.sent().serverResponse];\n            }\n          });\n        });\n      }, e.prototype.resetAllTask = function () {\n        var e = this,\n            t = Array.from(this.streamingTasks.values());\n        this.terminate();\n\n        for (var n = function n(t) {\n          r.startLiveStreamingTask(t.url, t.mode).catch(function (n) {\n            e.onLiveStreamError && e.onLiveStreamError(t.url, n);\n          });\n        }, r = this, i = 0, o = t; i < o.length; i++) {\n          n(o[i]);\n        }\n      }, e.prototype.setGatewayConnectionState = function (e) {\n        this.connection && (this.connection.gatewayConnectionState = e);\n      }, e.prototype.terminate = function () {\n        this.cancelToken && this.cancelToken.cancel(), this.streamingTasks = new Map(), this.isStartingStreamingTask = !1, this.statusError = new Map(), this.cancelToken = g.default.CancelToken.source(), this.uapResponse = void 0, this.connection && this.connection.close(), this.connection = void 0;\n      }, e.prototype.connect = function (e) {\n        return i(this, void 0, void 0, function () {\n          var t,\n              n = this;\n          return o(this, function (r) {\n            switch (r.label) {\n              case 0:\n                if (this.connection) throw new l.AgoraRTCError(l.AgoraRTCErrorCode.UNEXPECTED_ERROR, \"live streaming connection has already connected\");\n                return [4, f.getLiveStreamingWorkerMangerResult(e, this.spec, this.cancelToken.token)];\n\n              case 1:\n                return t = r.sent(), this.uapResponse = t, this.connection = new s.AgoraLiveStreamingUapSignal(t.workerToken, this.spec, e), this.connection.on(c.LiveStreamingUapSignalEvents.WARNING, function (e, t) {\n                  return n.onLiveStreamWarning && n.onLiveStreamWarning(t, e);\n                }), this.connection.on(c.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS, function (e) {\n                  return n.handlePublishStreamServer(e);\n                }), this.connection.on(c.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS, function (e) {\n                  return n.handleInjectStreamServerStatus(e);\n                }), this.connection.on(c.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS, function (t, r) {\n                  if (!n.connection) return r(new l.AgoraRTCError(l.AgoraRTCErrorCode.UNEXPECTED_ERROR, \"can not get new live streaming address list\"));\n                  f.getLiveStreamingWorkerMangerResult(e, n.spec, n.cancelToken.token).then(function (e) {\n                    n.uapResponse = e, t(e.addressList);\n                  }).catch(r);\n                }), [4, this.connection.init(t.addressList)];\n\n              case 2:\n                return r.sent(), [2, this.connection];\n            }\n          });\n        });\n      }, e.prototype.handlePublishStreamServer = function (e) {\n        var t = this,\n            n = e.serverStatus && e.serverStatus.url;\n        if (!n) throw new l.AgoraRTCError(l.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"empty url\", {\n          code: e.code\n        });\n        var r = this.streamingTasks.get(n);\n\n        switch (e.code) {\n          case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:\n          case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:\n          case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:\n          case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:\n            var i = new l.AgoraRTCError(l.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR, \"\", {\n              code: e.code\n            });\n            if (r) return p.default.error(i.toString()), this.onLiveStreamError && this.onLiveStreamError(n, i);\n            if (!this.isStartingStreamingTask) return;\n            this.statusError.set(n, i);\n\n          case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:\n          case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:\n            if (!this.connection || 0 === this.streamingTasks.size) return;\n            this.connection.tryNextAddress();\n\n            for (var o = Array.from(this.streamingTasks.values()), a = function a(n) {\n              if (n.abortTask) return n.abortTask(), \"continue\";\n              p.default.warning(\"[\" + s.spec.clientId + \"] publish stream status code\", e.code, \"try to republish\", n.url), s.startLiveStreamingTask(n.url, n.mode, new l.AgoraRTCError(l.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"\", {\n                code: e.code\n              })).then(function () {\n                p.default.debug(\"[\" + t.spec.clientId + \"] republish live stream success\", n.url);\n              }).catch(function (e) {\n                p.default.error(e.toString()), t.onLiveStreamError && t.onLiveStreamError(n.url, e);\n              });\n            }, s = this, d = 0, u = o; d < u.length; d++) {\n              a(u[d]);\n            }\n\n            return;\n        }\n      }, e.prototype.handleInjectStreamServerStatus = function (e) {\n        var t = Number(e.uid),\n            n = e.serverStatus && e.serverStatus.url;\n\n        switch (e.code) {\n          case 200:\n            return void (this.onInjectStatusChange && this.onInjectStatusChange(0, t, n));\n\n          case 451:\n            return this.onInjectStatusChange && this.onInjectStatusChange(1, t, n), void this.streamingTasks.delete(n);\n\n          case 453:\n            return this.onInjectStatusChange && this.onInjectStatusChange(2, t, n), void this.streamingTasks.delete(n);\n\n          case 470:\n            return this.onInjectStatusChange && this.onInjectStatusChange(10, t, n), void this.streamingTasks.delete(n);\n\n          case 499:\n            return this.onInjectStatusChange && this.onInjectStatusChange(3, t, n), void this.streamingTasks.delete(n);\n\n          default:\n            return void p.default.debug(\"inject stream server status\", e);\n        }\n      }, e.prototype.haveUrl = function (e) {\n        return this.streamingTasks.has(e) || void 0;\n      }, e;\n    }();\n\n    t.AgoraRTCLiveStreamingClient = m;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var _r2,\n        i = this && this.__extends || (_r2 = function r(e, t) {\n      return (_r2 = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (e, t) {\n        e.__proto__ = t;\n      } || function (e, t) {\n        for (var n in t) {\n          t.hasOwnProperty(n) && (e[n] = t[n]);\n        }\n      })(e, t);\n    }, function (e, t) {\n      function n() {\n        this.constructor = e;\n      }\n\n      _r2(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n());\n    }),\n        o = this && this.__assign || function () {\n      return (o = Object.assign || function (e) {\n        for (var t, n = 1, r = arguments.length; n < r; n++) {\n          for (var i in t = arguments[n]) {\n            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);\n          }\n        }\n\n        return e;\n      }).apply(this, arguments);\n    },\n        a = this && this.__awaiter || function (e, t, n, r) {\n      return new (n || (n = Promise))(function (i, o) {\n        function a(e) {\n          try {\n            c(r.next(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function s(e) {\n          try {\n            c(r.throw(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function c(e) {\n          var t;\n          e.done ? i(e.value) : (t = e.value, t instanceof n ? t : new n(function (e) {\n            e(t);\n          })).then(a, s);\n        }\n\n        c((r = r.apply(e, t || [])).next());\n      });\n    },\n        s = this && this.__generator || function (e, t) {\n      var n,\n          r,\n          i,\n          o,\n          a = {\n        label: 0,\n        sent: function sent() {\n          if (1 & i[0]) throw i[1];\n          return i[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return o = {\n        next: s(0),\n        throw: s(1),\n        return: s(2)\n      }, \"function\" == typeof Symbol && (o[Symbol.iterator] = function () {\n        return this;\n      }), o;\n\n      function s(o) {\n        return function (s) {\n          return function (o) {\n            if (n) throw new TypeError(\"Generator is already executing.\");\n\n            for (; a;) {\n              try {\n                if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;\n\n                switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {\n                  case 0:\n                  case 1:\n                    i = o;\n                    break;\n\n                  case 4:\n                    return a.label++, {\n                      value: o[1],\n                      done: !1\n                    };\n\n                  case 5:\n                    a.label++, r = o[1], o = [0];\n                    continue;\n\n                  case 7:\n                    o = a.ops.pop(), a.trys.pop();\n                    continue;\n\n                  default:\n                    if (!(i = a.trys, (i = i.length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) {\n                      a = 0;\n                      continue;\n                    }\n\n                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {\n                      a.label = o[1];\n                      break;\n                    }\n\n                    if (6 === o[0] && a.label < i[1]) {\n                      a.label = i[1], i = o;\n                      break;\n                    }\n\n                    if (i && a.label < i[2]) {\n                      a.label = i[2], a.ops.push(o);\n                      break;\n                    }\n\n                    i[2] && a.ops.pop(), a.trys.pop();\n                    continue;\n                }\n\n                o = t.call(e, a);\n              } catch (e) {\n                o = [6, e], r = 0;\n              } finally {\n                n = i = 0;\n              }\n            }\n\n            if (5 & o[0]) throw o[1];\n            return {\n              value: o[0] ? o[1] : void 0,\n              done: !0\n            };\n          }([o, s]);\n        };\n      }\n    },\n        c = this && this.__importDefault || function (e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    };\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n\n    var d = n(27),\n        u = n(77),\n        l = n(36),\n        f = n(24),\n        p = n(2),\n        g = c(n(0)),\n        m = n(1),\n        h = n(31),\n        v = function (e) {\n      function t(t, n, r) {\n        var i = e.call(this) || this;\n        return i._gatewayConnectionState = \"CONNECTED\", i.reconnectMode = \"retry\", i.reqId = 0, i.commandReqId = 0, i.waitingResponseList = [], i.handleWebSocketOpen = function () {\n          i.reconnectMode = \"retry\", i.startPingPong();\n        }, i.handleWebSocketMessage = function (e) {\n          if (e.data) {\n            var t = JSON.parse(e.data);\n            if (t.requestId) i.emit(\"@\" + t.requestId, t);else if (i.serviceMode === d.LiveStreamingServiceMode.INJECT) i.emit(d.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS, t);else {\n              m.report.requestWorkerEvent(i.spec.sid, {\n                actionType: \"status\",\n                serverCode: t.code,\n                workerType: i.serviceMode === d.LiveStreamingServiceMode.TRANSCODE ? 1 : 2\n              });\n              var n = t.serverStatus && t.serverStatus.url;\n              n && i.waitingResponseList.includes(n) && 200 === t.code && i.emit(n), i.emit(d.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS, t);\n            }\n          }\n        }, i.spec = n, i.token = t, i.serviceMode = r, i.websocket = new u.AgoraWebSocketManager(\"live-streaming\"), i.websocket.on(d.WebSocketManagerEvents.CONNECTED, i.handleWebSocketOpen), i.websocket.on(d.WebSocketManagerEvents.ON_MESSAGE, i.handleWebSocketMessage), i.websocket.on(d.WebSocketManagerEvents.REQUEST_NEW_URLS, function (e, t) {\n          l.emitAsPromise(i, d.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS).then(e).catch(t);\n        }), i.websocket.on(d.WebSocketManagerEvents.RECONNECTING, function () {\n          i.websocket.reconnectMode = i.reconnectMode;\n        }), i;\n      }\n\n      return i(t, e), Object.defineProperty(t.prototype, \"gatewayConnectionState\", {\n        get: function get() {\n          return this._gatewayConnectionState;\n        },\n        set: function set(e) {\n          this._gatewayConnectionState = e, \"CONNECTED\" === e && this.emit(\"gateway-connected\", e);\n        },\n        enumerable: !0,\n        configurable: !0\n      }), t.prototype.init = function (e) {\n        return this.websocket.init(e);\n      }, t.prototype.request = function (e, t, n, r) {\n        return a(this, void 0, void 0, function () {\n          var i,\n              a,\n              c,\n              u,\n              l,\n              g,\n              v,\n              E,\n              S,\n              _,\n              y = this;\n\n          return s(this, function (s) {\n            switch (s.label) {\n              case 0:\n                if (this.reqId += 1, i = this.reqId, \"request\" === e && (this.commandReqId += 1), a = this.commandReqId, !i || !this.websocket) throw new f.AgoraRTCError(f.AgoraRTCErrorCode.UNEXPECTED_ERROR);\n                if (c = p.VERSION, \"closed\" === this.websocket.state) throw new f.AgoraRTCError(f.AgoraRTCErrorCode.WS_DISCONNECT);\n                return u = function u() {\n                  return new Promise(function (e, t) {\n                    var n = function n() {\n                      \"CONNECTED\" === y.gatewayConnectionState && \"connected\" === y.websocket.state && (y.off(\"gateway-connected\", n), y.websocket.off(d.WebSocketManagerEvents.CONNECTED, n), e(void 0));\n                    };\n\n                    y.on(\"gateway-connected\", n), y.websocket.once(d.WebSocketManagerEvents.CLOSED, function () {\n                      return t(new f.AgoraRTCError(f.AgoraRTCErrorCode.WS_ABORT));\n                    }), y.websocket.on(d.WebSocketManagerEvents.CONNECTED, n);\n                  });\n                }, \"connected\" === this.websocket.state && \"CONNECTED\" === this.gatewayConnectionState ? [3, 2] : [4, u()];\n\n              case 1:\n                s.sent(), s.label = 2;\n\n              case 2:\n                l = Promise.race([new Promise(function (e, t) {\n                  var n = function n() {\n                    t(new f.AgoraRTCError(f.AgoraRTCErrorCode.WS_ABORT));\n                  };\n\n                  y.websocket.once(d.WebSocketManagerEvents.RECONNECTING, n), y.websocket.once(d.WebSocketManagerEvents.CLOSED, n), y.once(\"@\" + i, function (t) {\n                    e(t);\n                  });\n                }), h.wait(p.getParameter(\"LIVE_STREAMING_TIMEOUT\")).then(function () {\n                  return !1;\n                })]), (g = o({\n                  command: e,\n                  sdkVersion: c,\n                  seq: i,\n                  requestId: i,\n                  allocate: n,\n                  cname: this.spec.cname,\n                  appId: this.spec.appId,\n                  sid: this.spec.sid,\n                  uid: this.spec.uid.toString(),\n                  ts: Math.floor(Date.now() / 1e3)\n                }, t)).clientRequest && (g.clientRequest.workerToken = this.token), r && m.report.requestWorkerEvent(this.spec.sid, o(o({}, r), {\n                  requestId: a,\n                  actionType: \"request\",\n                  payload: JSON.stringify(t.clientRequest),\n                  serverCode: 0,\n                  code: 0\n                })), v = Date.now(), this.websocket.sendMessage(g), E = null, s.label = 3;\n\n              case 3:\n                return s.trys.push([3, 5,, 8]), [4, l];\n\n              case 4:\n                return E = s.sent(), [3, 8];\n\n              case 5:\n                if (S = s.sent(), \"closed\" === this.websocket.state) throw S;\n                return [4, u()];\n\n              case 6:\n                return s.sent(), [4, this.request(e, t, n, r)];\n\n              case 7:\n                return [2, s.sent()];\n\n              case 8:\n                if (!1 === E) throw _ = new f.AgoraRTCError(f.AgoraRTCErrorCode.NETWORK_TIMEOUT, (t && t.clientRequest && t.clientRequest.command) + \" timeout\", {\n                  changeAddress: !0,\n                  retry: !0\n                }), this.emit(d.LiveStreamingUapSignalEvents.WARNING, _, r && r.url || \"unknown url\"), r && m.report.requestWorkerEvent(this.spec.sid, o(o({}, r), {\n                  requestId: a,\n                  actionType: \"response\",\n                  payload: \"TIMEOUT\",\n                  serverCode: 0,\n                  success: 0,\n                  responseTime: Date.now() - v\n                })), _;\n                return r && m.report.requestWorkerEvent(this.spec.sid, o(o({}, r), {\n                  requestId: a,\n                  actionType: \"response\",\n                  payload: JSON.stringify(E.serverResponse),\n                  serverCode: E.code,\n                  success: 200 === E.code,\n                  responseTime: Date.now() - v\n                })), 200 === E.code ? [3, 10] : [4, this.handleResponseError(E)];\n\n              case 9:\n                s.sent(), s.label = 10;\n\n              case 10:\n                return [2, E];\n            }\n          });\n        });\n      }, t.prototype.tryNextAddress = function () {\n        this.reconnectMode = \"tryNext\", this.websocket.reconnect(\"tryNext\");\n      }, t.prototype.close = function () {\n        var e = \"__VERSION__\" === p.VERSION ? \"0.0.1\" : p.VERSION;\n        this.reqId += 1, \"connected\" === this.websocket.state ? (this.websocket.sendMessage({\n          command: \"request\",\n          appId: this.spec.appId,\n          cname: this.spec.cname,\n          uid: this.spec.uid.toString(),\n          sdkVersion: e,\n          sid: this.spec.sid,\n          seq: this.reqId,\n          ts: Math.floor(Date.now() / 1e3),\n          requestId: this.reqId,\n          clientRequest: {\n            command: \"DestroyWorker\"\n          }\n        }), this.websocket.close(!1, !0)) : this.websocket.close(!1), this.pingpongTimer && (window.clearInterval(this.pingpongTimer), this.pingpongTimer = void 0);\n      }, t.prototype.handleResponseError = function (e) {\n        return a(this, void 0, void 0, function () {\n          var t,\n              n,\n              r,\n              i,\n              o = this;\n          return s(this, function (a) {\n            switch (g.default.debug(\"[live-streaming] receive response error \" + e.code), e.code) {\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:\n                return g.default.warning(\"live stream response already exists stream\"), t = e.serverResponse.url, this.emit(d.LiveStreamingUapSignalEvents.WARNING, \"live stream response already exists stream, code 454\", t), this.waitingResponseList.includes(t) || this.waitingResponseList.push(t), [2, new Promise(function (n, r) {\n                  o.once(t, function () {\n                    o.waitingResponseList.splice(o.waitingResponseList.indexOf(t), 1), n();\n                  }), setTimeout(function () {\n                    o.waitingResponseList.splice(o.waitingResponseList.indexOf(t), 1), r(new f.AgoraRTCError(f.AgoraRTCErrorCode.TIMEOUT, \"live stream timeout waiting 454\", {\n                      code: e.code\n                    }));\n                  }, 1e4);\n                })];\n\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_BAD_STREAM:\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:\n                return [2, new f.AgoraRTCError(f.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT, \"\", {\n                  code: e.code\n                }).throw()];\n\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE:\n                throw new f.AgoraRTCError(f.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT, \"\", {\n                  retry: !0,\n                  changeAddress: !0\n                });\n\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:\n                if (\"UnpublishStream\" === e.serverResponse.command || \"UninjectStream\" === e.serverResponse.command) return [2];\n                throw new f.AgoraRTCError(f.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"live stream response wm worker not exist\", {\n                  retry: !0\n                });\n\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:\n                return [2, new f.AgoraRTCError(f.AgoraRTCErrorCode.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED, \"\", {\n                  code: e.code\n                }).throw()];\n\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:\n                return n = new f.AgoraRTCError(f.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE), [2, this.emit(d.LiveStreamingUapSignalEvents.WARNING, n, e.serverResponse.url)];\n\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:\n                return n = new f.AgoraRTCError(f.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FREQUENT_REQUEST), [2, this.emit(d.LiveStreamingUapSignalEvents.WARNING, n, e.serverResponse.url)];\n\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:\n                throw new f.AgoraRTCError(f.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"live stream response wm worker not exist\", {\n                  retry: !0\n                });\n\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:\n                return [2, new f.AgoraRTCError(f.AgoraRTCErrorCode.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT, \"\", {\n                  code: e.code\n                }).throw()];\n\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:\n                return n = new f.AgoraRTCError(f.AgoraRTCErrorCode.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT), [2, this.emit(d.LiveStreamingUapSignalEvents.WARNING, n, e.serverResponse.url)];\n\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:\n                return [2, new f.AgoraRTCError(f.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"\", {\n                  code: e.code\n                }).throw()];\n\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:\n                throw new f.AgoraRTCError(f.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"live stream resource limit\", {\n                  retry: !0,\n                  changeAddress: !0\n                });\n\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:\n              case d.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:\n                if (\"UnpublishStream\" === e.serverResponse.command || \"UninjectStream\" === e.serverResponse.command) return [2];\n                throw new f.AgoraRTCError(f.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"error fail send message\", {\n                  retry: !0,\n                  changeAddress: !0\n                });\n\n              case d.LIVE_STREAM_ERROR_CODE.ERROR_FAIL_SEND_MESSAGE:\n                if (\"UnpublishStream\" === e.serverResponse.command || \"UninjectStream\" === e.serverResponse.command) return [2];\n                if (\"UpdateTranscoding\" === e.serverResponse.command || \"ControlStream\" === e.serverResponse.command) return [2, new f.AgoraRTCError(f.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"error fail send message\", {\n                  code: e.code\n                }).throw()];\n                throw new f.AgoraRTCError(f.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR, \"error fail send message\", {\n                  retry: !0,\n                  changeAddress: !0\n                });\n\n              case d.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:\n              case d.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:\n              case d.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:\n              case d.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:\n                return r = e.serverResponse.url, this.waitingResponseList.includes(r) || this.waitingResponseList.push(r), i = new f.AgoraRTCError(f.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR, \"\", {\n                  code: e.code\n                }), this.emit(d.LiveStreamingUapSignalEvents.WARNING, i, r), [2, new Promise(function (e, t) {\n                  o.once(r, function () {\n                    o.waitingResponseList.splice(o.waitingResponseList.indexOf(r), 1), e();\n                  }), setTimeout(function () {\n                    o.waitingResponseList.splice(o.waitingResponseList.indexOf(r), 1), t(i);\n                  }, 1e4);\n                })];\n            }\n\n            return [2];\n          });\n        });\n      }, t.prototype.startPingPong = function () {\n        var e = this;\n        this.pingpongTimer && window.clearInterval(this.pingpongTimer), this.pingpongTimer = window.setInterval(function () {\n          \"connected\" === e.websocket.state && e.request(\"ping\", {}).catch(function () {});\n        }, 6e3);\n      }, t;\n    }(l.EventEmitter);\n\n    t.AgoraLiveStreamingUapSignal = v;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var _r3,\n        i = this && this.__extends || (_r3 = function r(e, t) {\n      return (_r3 = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (e, t) {\n        e.__proto__ = t;\n      } || function (e, t) {\n        for (var n in t) {\n          t.hasOwnProperty(n) && (e[n] = t[n]);\n        }\n      })(e, t);\n    }, function (e, t) {\n      function n() {\n        this.constructor = e;\n      }\n\n      _r3(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n());\n    }),\n        o = this && this.__awaiter || function (e, t, n, r) {\n      return new (n || (n = Promise))(function (i, o) {\n        function a(e) {\n          try {\n            c(r.next(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function s(e) {\n          try {\n            c(r.throw(e));\n          } catch (e) {\n            o(e);\n          }\n        }\n\n        function c(e) {\n          var t;\n          e.done ? i(e.value) : (t = e.value, t instanceof n ? t : new n(function (e) {\n            e(t);\n          })).then(a, s);\n        }\n\n        c((r = r.apply(e, t || [])).next());\n      });\n    },\n        a = this && this.__generator || function (e, t) {\n      var n,\n          r,\n          i,\n          o,\n          a = {\n        label: 0,\n        sent: function sent() {\n          if (1 & i[0]) throw i[1];\n          return i[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return o = {\n        next: s(0),\n        throw: s(1),\n        return: s(2)\n      }, \"function\" == typeof Symbol && (o[Symbol.iterator] = function () {\n        return this;\n      }), o;\n\n      function s(o) {\n        return function (s) {\n          return function (o) {\n            if (n) throw new TypeError(\"Generator is already executing.\");\n\n            for (; a;) {\n              try {\n                if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;\n\n                switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {\n                  case 0:\n                  case 1:\n                    i = o;\n                    break;\n\n                  case 4:\n                    return a.label++, {\n                      value: o[1],\n                      done: !1\n                    };\n\n                  case 5:\n                    a.label++, r = o[1], o = [0];\n                    continue;\n\n                  case 7:\n                    o = a.ops.pop(), a.trys.pop();\n                    continue;\n\n                  default:\n                    if (!(i = a.trys, (i = i.length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) {\n                      a = 0;\n                      continue;\n                    }\n\n                    if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {\n                      a.label = o[1];\n                      break;\n                    }\n\n                    if (6 === o[0] && a.label < i[1]) {\n                      a.label = i[1], i = o;\n                      break;\n                    }\n\n                    if (i && a.label < i[2]) {\n                      a.label = i[2], a.ops.push(o);\n                      break;\n                    }\n\n                    i[2] && a.ops.pop(), a.trys.pop();\n                    continue;\n                }\n\n                o = t.call(e, a);\n              } catch (e) {\n                o = [6, e], r = 0;\n              } finally {\n                n = i = 0;\n              }\n            }\n\n            if (5 & o[0]) throw o[1];\n            return {\n              value: o[0] ? o[1] : void 0,\n              done: !0\n            };\n          }([o, s]);\n        };\n      }\n    },\n        s = this && this.__importDefault || function (e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    };\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n\n    var c = n(24),\n        d = n(36),\n        u = n(31),\n        l = n(27),\n        f = s(n(0)),\n        p = function (e) {\n      function t(t) {\n        var n = e.call(this) || this;\n        return n.connectionID = 0, n.currentURLIndex = 0, n.reconnectMode = \"tryNext\", n._state = \"closed\", n.retryConfig = u.DEFAULT_RETRY_CONFIG, n.reconnectCount = 0, n.name = t, n;\n      }\n\n      return i(t, e), Object.defineProperty(t.prototype, \"url\", {\n        get: function get() {\n          return this.websocket ? this.websocket.url : null;\n        },\n        enumerable: !0,\n        configurable: !0\n      }), Object.defineProperty(t.prototype, \"state\", {\n        get: function get() {\n          return this._state;\n        },\n        set: function set(e) {\n          e !== this._state && (this._state = e, \"reconnecting\" === this._state ? this.emit(l.WebSocketManagerEvents.RECONNECTING, this.reconnectMode) : \"connected\" === this._state ? this.emit(l.WebSocketManagerEvents.CONNECTED) : \"closed\" === this._state ? this.emit(l.WebSocketManagerEvents.CLOSED) : \"failed\" === this._state && this.emit(l.WebSocketManagerEvents.FAILED));\n        },\n        enumerable: !0,\n        configurable: !0\n      }), t.prototype.init = function (e) {\n        var t = this;\n        return new Promise(function (n, r) {\n          t.urls = e;\n          var i = t.urls[t.currentURLIndex];\n          t.state = \"connecting\", t.createWebSocketConnection(i).then(n).catch(r), t.once(l.WebSocketManagerEvents.CLOSED, function () {\n            return r(new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_DISCONNECT));\n          }), t.once(l.WebSocketManagerEvents.CONNECTED, function () {\n            return n();\n          });\n        });\n      }, t.prototype.close = function (e, t) {\n        if (this.currentURLIndex = 0, this.reconnectCount = 0, this.websocket) {\n          this.websocket.onclose = null, this.websocket.onopen = null, this.websocket.onmessage = null;\n          var n = this.websocket;\n          t ? setTimeout(function () {\n            return n.close();\n          }, 500) : n.close(), this.websocket = void 0;\n        }\n\n        this.state = e ? \"failed\" : \"closed\";\n      }, t.prototype.reconnect = function (e) {\n        if (this.websocket) {\n          void 0 !== e && (this.reconnectMode = e);\n          var t = this.websocket.onclose;\n          this.websocket.onclose = null, this.websocket.close(), t && t.bind(this.websocket)({\n            code: 9999\n          });\n        } else f.default.warning(\"[\" + this.name + \"] can not reconnect, no websocket\");\n      }, t.prototype.sendMessage = function (e) {\n        if (!this.websocket || this.websocket.readyState !== WebSocket.OPEN) throw new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_ABORT, \"websocket is not ready\");\n        var t = JSON.stringify(e);\n\n        try {\n          this.websocket.send(t);\n        } catch (e) {\n          throw new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_ERR, \"send websocket message error\" + e.toString());\n        }\n      }, t.prototype.createWebSocketConnection = function (e) {\n        return o(this, void 0, void 0, function () {\n          var t,\n              n = this;\n          return a(this, function (r) {\n            return this.connectionID += 1, t = this.connectionID, [2, new Promise(function (r, i) {\n              n.websocket && (n.websocket.onclose = null, n.websocket.close()), f.default.debug(\"[\" + n.name + \"] start connect, url: \" + e);\n\n              try {\n                n.websocket = new WebSocket(e), n.websocket.binaryType = \"arraybuffer\";\n              } catch (e) {\n                var s = new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_ERR, \"init websocket failed! Error: \" + e.toString());\n                return f.default.error(\"[\" + n.name + \"]\" + s), void i(s);\n              }\n\n              u.wait(5e3).then(function () {\n                t === n.connectionID && n.websocket && n.websocket.readyState !== WebSocket.OPEN && n.websocket && n.websocket.close();\n              }), n.websocket.onopen = function () {\n                f.default.debug(\"[\" + n.name + \"] websockect opened:\", e), n.reconnectMode = \"retry\", n.state = \"connected\", n.reconnectCount = 0, r();\n              }, n.websocket.onclose = function (e) {\n                return o(n, void 0, void 0, function () {\n                  var t, n;\n                  return a(this, function (o) {\n                    switch (o.label) {\n                      case 0:\n                        return f.default.debug(\"[\" + this.name + \"] websocket close \" + (this.websocket && this.websocket.url) + \", code: \" + e.code + \", reason: \" + e.reason + \", current mode: \" + this.reconnectMode), this.reconnectCount < this.retryConfig.maxRetryCount ? (\"connected\" === this.state && (this.state = \"reconnecting\"), t = d.emitAsInvokerNoResponse(this, l.WebSocketManagerEvents.WILL_RECONNECT, this.reconnectMode) || this.reconnectMode, [4, this.reconnectWithAction(t)]) : [3, 2];\n\n                      case 1:\n                        return n = o.sent(), \"closed\" === this.state ? (f.default.debug(\"[\" + this.connectionID + \"] ws is closed, no need to reconnect\"), [2]) : n ? (r(), [3, 3]) : (i(new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_DISCONNECT, \"websocket reconnect failed: \" + e.code)), this.close(!0), [2]);\n\n                      case 2:\n                        i(new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_DISCONNECT, \"websocket close: \" + e.code)), this.close(), o.label = 3;\n\n                      case 3:\n                        return [2];\n                    }\n                  });\n                });\n              }, n.websocket.onmessage = function (e) {\n                n.emit(l.WebSocketManagerEvents.ON_MESSAGE, e);\n              };\n            })];\n          });\n        });\n      }, t.prototype.reconnectWithAction = function (e, t) {\n        return o(this, void 0, void 0, function () {\n          var n, r, i, o;\n          return a(this, function (a) {\n            switch (a.label) {\n              case 0:\n                return !t && this.reconnectCount >= this.retryConfig.maxRetryCount ? [2, !1] : this.urls ? \"closed\" === this.state ? [2, !1] : (n = u.getRetryWaitTime(this.reconnectCount, this.retryConfig), f.default.debug(\"[\" + this.name + \"] wait \" + n + \"ms to reconnect websocket, mode: \" + e), [4, u.wait(n)]) : [2, !1];\n\n              case 1:\n                if (a.sent(), \"closed\" === this.state) return [2, !1];\n                this.reconnectCount += 1, a.label = 2;\n\n              case 2:\n                return a.trys.push([2, 12,, 14]), \"retry\" !== e ? [3, 4] : (i = this.urls[this.currentURLIndex], [4, this.createWebSocketConnection(i)]);\n\n              case 3:\n                return a.sent(), [3, 11];\n\n              case 4:\n                return \"tryNext\" !== e ? [3, 8] : (this.currentURLIndex += 1, this.currentURLIndex >= this.urls.length ? [4, this.reconnectWithAction(\"recover\")] : [3, 6]);\n\n              case 5:\n                return [2, a.sent()];\n\n              case 6:\n                return f.default.debug(\"[\" + this.name + \"] websocket url length: \" + this.urls.length + \" current index: \" + this.currentURLIndex), i = this.urls[this.currentURLIndex], [4, this.createWebSocketConnection(i)];\n\n              case 7:\n                return a.sent(), [3, 11];\n\n              case 8:\n                return \"recover\" !== e ? [3, 11] : (f.default.debug(\"[\" + this.name + \"] request new urls\"), r = this, [4, d.emitAsPromise(this, l.WebSocketManagerEvents.REQUEST_NEW_URLS)]);\n\n              case 9:\n                return r.urls = a.sent(), this.currentURLIndex = 0, i = this.urls[this.currentURLIndex], [4, this.createWebSocketConnection(i)];\n\n              case 10:\n                a.sent(), a.label = 11;\n\n              case 11:\n                return [2, !0];\n\n              case 12:\n                return o = a.sent(), f.default.error(\"[\" + this.name + \"] reconnect failed\", o.toString()), [4, this.reconnectWithAction(e)];\n\n              case 13:\n                return [2, a.sent()];\n\n              case 14:\n                return [2];\n            }\n          });\n        });\n      }, t;\n    }(d.EventEmitter);\n\n    t.AgoraWebSocketManager = p;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(18),\n        i = n(38),\n        o = n(79),\n        a = n(44);\n\n    function s(e) {\n      var t = new o(e),\n          n = i(o.prototype.request, t);\n      return r.extend(n, o.prototype, t), r.extend(n, t), n;\n    }\n\n    var c = s(n(41));\n    c.Axios = o, c.create = function (e) {\n      return s(a(c.defaults, e));\n    }, c.Cancel = n(45), c.CancelToken = n(93), c.isCancel = n(40), c.all = function (e) {\n      return Promise.all(e);\n    }, c.spread = n(94), e.exports = c, e.exports.default = c;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(18),\n        i = n(39),\n        o = n(80),\n        a = n(81),\n        s = n(44);\n\n    function c(e) {\n      this.defaults = e, this.interceptors = {\n        request: new o(),\n        response: new o()\n      };\n    }\n\n    c.prototype.request = function (e) {\n      \"string\" == typeof e ? (e = arguments[1] || {}).url = arguments[0] : e = e || {}, (e = s(this.defaults, e)).method ? e.method = e.method.toLowerCase() : this.defaults.method ? e.method = this.defaults.method.toLowerCase() : e.method = \"get\";\n      var t = [a, void 0],\n          n = Promise.resolve(e);\n\n      for (this.interceptors.request.forEach(function (e) {\n        t.unshift(e.fulfilled, e.rejected);\n      }), this.interceptors.response.forEach(function (e) {\n        t.push(e.fulfilled, e.rejected);\n      }); t.length;) {\n        n = n.then(t.shift(), t.shift());\n      }\n\n      return n;\n    }, c.prototype.getUri = function (e) {\n      return e = s(this.defaults, e), i(e.url, e.params, e.paramsSerializer).replace(/^\\?/, \"\");\n    }, r.forEach([\"delete\", \"get\", \"head\", \"options\"], function (e) {\n      c.prototype[e] = function (t, n) {\n        return this.request(r.merge(n || {}, {\n          method: e,\n          url: t\n        }));\n      };\n    }), r.forEach([\"post\", \"put\", \"patch\"], function (e) {\n      c.prototype[e] = function (t, n, i) {\n        return this.request(r.merge(i || {}, {\n          method: e,\n          url: t,\n          data: n\n        }));\n      };\n    }), e.exports = c;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(18);\n\n    function i() {\n      this.handlers = [];\n    }\n\n    i.prototype.use = function (e, t) {\n      return this.handlers.push({\n        fulfilled: e,\n        rejected: t\n      }), this.handlers.length - 1;\n    }, i.prototype.eject = function (e) {\n      this.handlers[e] && (this.handlers[e] = null);\n    }, i.prototype.forEach = function (e) {\n      r.forEach(this.handlers, function (t) {\n        null !== t && e(t);\n      });\n    }, e.exports = i;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(18),\n        i = n(82),\n        o = n(40),\n        a = n(41);\n\n    function s(e) {\n      e.cancelToken && e.cancelToken.throwIfRequested();\n    }\n\n    e.exports = function (e) {\n      return s(e), e.headers = e.headers || {}, e.data = i(e.data, e.headers, e.transformRequest), e.headers = r.merge(e.headers.common || {}, e.headers[e.method] || {}, e.headers), r.forEach([\"delete\", \"get\", \"head\", \"post\", \"put\", \"patch\", \"common\"], function (t) {\n        delete e.headers[t];\n      }), (e.adapter || a.adapter)(e).then(function (t) {\n        return s(e), t.data = i(t.data, t.headers, e.transformResponse), t;\n      }, function (t) {\n        return o(t) || (s(e), t && t.response && (t.response.data = i(t.response.data, t.response.headers, e.transformResponse))), Promise.reject(t);\n      });\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(18);\n\n    e.exports = function (e, t, n) {\n      return r.forEach(n, function (n) {\n        e = n(e, t);\n      }), e;\n    };\n  }, function (e, t) {\n    var n,\n        r,\n        i = e.exports = {};\n\n    function o() {\n      throw new Error(\"setTimeout has not been defined\");\n    }\n\n    function a() {\n      throw new Error(\"clearTimeout has not been defined\");\n    }\n\n    function s(e) {\n      if (n === setTimeout) return setTimeout(e, 0);\n      if ((n === o || !n) && setTimeout) return n = setTimeout, setTimeout(e, 0);\n\n      try {\n        return n(e, 0);\n      } catch (t) {\n        try {\n          return n.call(null, e, 0);\n        } catch (t) {\n          return n.call(this, e, 0);\n        }\n      }\n    }\n\n    !function () {\n      try {\n        n = \"function\" == typeof setTimeout ? setTimeout : o;\n      } catch (e) {\n        n = o;\n      }\n\n      try {\n        r = \"function\" == typeof clearTimeout ? clearTimeout : a;\n      } catch (e) {\n        r = a;\n      }\n    }();\n    var c,\n        d = [],\n        u = !1,\n        l = -1;\n\n    function f() {\n      u && c && (u = !1, c.length ? d = c.concat(d) : l = -1, d.length && p());\n    }\n\n    function p() {\n      if (!u) {\n        var e = s(f);\n        u = !0;\n\n        for (var t = d.length; t;) {\n          for (c = d, d = []; ++l < t;) {\n            c && c[l].run();\n          }\n\n          l = -1, t = d.length;\n        }\n\n        c = null, u = !1, function (e) {\n          if (r === clearTimeout) return clearTimeout(e);\n          if ((r === a || !r) && clearTimeout) return r = clearTimeout, clearTimeout(e);\n\n          try {\n            r(e);\n          } catch (t) {\n            try {\n              return r.call(null, e);\n            } catch (t) {\n              return r.call(this, e);\n            }\n          }\n        }(e);\n      }\n    }\n\n    function g(e, t) {\n      this.fun = e, this.array = t;\n    }\n\n    function m() {}\n\n    i.nextTick = function (e) {\n      var t = new Array(arguments.length - 1);\n      if (arguments.length > 1) for (var n = 1; n < arguments.length; n++) {\n        t[n - 1] = arguments[n];\n      }\n      d.push(new g(e, t)), 1 !== d.length || u || s(p);\n    }, g.prototype.run = function () {\n      this.fun.apply(null, this.array);\n    }, i.title = \"browser\", i.browser = !0, i.env = {}, i.argv = [], i.version = \"\", i.versions = {}, i.on = m, i.addListener = m, i.once = m, i.off = m, i.removeListener = m, i.removeAllListeners = m, i.emit = m, i.prependListener = m, i.prependOnceListener = m, i.listeners = function (e) {\n      return [];\n    }, i.binding = function (e) {\n      throw new Error(\"process.binding is not supported\");\n    }, i.cwd = function () {\n      return \"/\";\n    }, i.chdir = function (e) {\n      throw new Error(\"process.chdir is not supported\");\n    }, i.umask = function () {\n      return 0;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(18);\n\n    e.exports = function (e, t) {\n      r.forEach(e, function (n, r) {\n        r !== t && r.toUpperCase() === t.toUpperCase() && (e[t] = n, delete e[r]);\n      });\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(43);\n\n    e.exports = function (e, t, n) {\n      var i = n.config.validateStatus;\n      !i || i(n.status) ? e(n) : t(r(\"Request failed with status code \" + n.status, n.config, null, n.request, n));\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    e.exports = function (e, t, n, r, i) {\n      return e.config = t, n && (e.code = n), e.request = r, e.response = i, e.isAxiosError = !0, e.toJSON = function () {\n        return {\n          message: this.message,\n          name: this.name,\n          description: this.description,\n          number: this.number,\n          fileName: this.fileName,\n          lineNumber: this.lineNumber,\n          columnNumber: this.columnNumber,\n          stack: this.stack,\n          config: this.config,\n          code: this.code\n        };\n      }, e;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(88),\n        i = n(89);\n\n    e.exports = function (e, t) {\n      return e && !r(t) ? i(e, t) : t;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    e.exports = function (e) {\n      return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(e);\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    e.exports = function (e, t) {\n      return t ? e.replace(/\\/+$/, \"\") + \"/\" + t.replace(/^\\/+/, \"\") : e;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(18),\n        i = [\"age\", \"authorization\", \"content-length\", \"content-type\", \"etag\", \"expires\", \"from\", \"host\", \"if-modified-since\", \"if-unmodified-since\", \"last-modified\", \"location\", \"max-forwards\", \"proxy-authorization\", \"referer\", \"retry-after\", \"user-agent\"];\n\n    e.exports = function (e) {\n      var t,\n          n,\n          o,\n          a = {};\n      return e ? (r.forEach(e.split(\"\\n\"), function (e) {\n        if (o = e.indexOf(\":\"), t = r.trim(e.substr(0, o)).toLowerCase(), n = r.trim(e.substr(o + 1)), t) {\n          if (a[t] && i.indexOf(t) >= 0) return;\n          a[t] = \"set-cookie\" === t ? (a[t] ? a[t] : []).concat([n]) : a[t] ? a[t] + \", \" + n : n;\n        }\n      }), a) : a;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(18);\n    e.exports = r.isStandardBrowserEnv() ? function () {\n      var e,\n          t = /(msie|trident)/i.test(navigator.userAgent),\n          n = document.createElement(\"a\");\n\n      function i(e) {\n        var r = e;\n        return t && (n.setAttribute(\"href\", r), r = n.href), n.setAttribute(\"href\", r), {\n          href: n.href,\n          protocol: n.protocol ? n.protocol.replace(/:$/, \"\") : \"\",\n          host: n.host,\n          search: n.search ? n.search.replace(/^\\?/, \"\") : \"\",\n          hash: n.hash ? n.hash.replace(/^#/, \"\") : \"\",\n          hostname: n.hostname,\n          port: n.port,\n          pathname: \"/\" === n.pathname.charAt(0) ? n.pathname : \"/\" + n.pathname\n        };\n      }\n\n      return e = i(window.location.href), function (t) {\n        var n = r.isString(t) ? i(t) : t;\n        return n.protocol === e.protocol && n.host === e.host;\n      };\n    }() : function () {\n      return !0;\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(18);\n    e.exports = r.isStandardBrowserEnv() ? {\n      write: function write(e, t, n, i, o, a) {\n        var s = [];\n        s.push(e + \"=\" + encodeURIComponent(t)), r.isNumber(n) && s.push(\"expires=\" + new Date(n).toGMTString()), r.isString(i) && s.push(\"path=\" + i), r.isString(o) && s.push(\"domain=\" + o), !0 === a && s.push(\"secure\"), document.cookie = s.join(\"; \");\n      },\n      read: function read(e) {\n        var t = document.cookie.match(new RegExp(\"(^|;\\\\s*)(\" + e + \")=([^;]*)\"));\n        return t ? decodeURIComponent(t[3]) : null;\n      },\n      remove: function remove(e) {\n        this.write(e, \"\", Date.now() - 864e5);\n      }\n    } : {\n      write: function write() {},\n      read: function read() {\n        return null;\n      },\n      remove: function remove() {}\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = n(45);\n\n    function i(e) {\n      if (\"function\" != typeof e) throw new TypeError(\"executor must be a function.\");\n      var t;\n      this.promise = new Promise(function (e) {\n        t = e;\n      });\n      var n = this;\n      e(function (e) {\n        n.reason || (n.reason = new r(e), t(n.reason));\n      });\n    }\n\n    i.prototype.throwIfRequested = function () {\n      if (this.reason) throw this.reason;\n    }, i.source = function () {\n      var e;\n      return {\n        token: new i(function (t) {\n          e = t;\n        }),\n        cancel: e\n      };\n    }, e.exports = i;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    e.exports = function (e) {\n      return function (t) {\n        return e.apply(null, t);\n      };\n    };\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var r = this && this.__importDefault || function (e) {\n      return e && e.__esModule ? e : {\n        default: e\n      };\n    };\n\n    Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n\n    var i = r(n(0)),\n        o = 1,\n        a = function () {\n      function e(e) {\n        this.lockingPromise = Promise.resolve(), this.locks = 0, this.name = \"\", this.lockId = o++, e && (this.name = e), i.default.debug(\"[lock-\" + this.name + \"-\" + this.lockId + \"] is created.\");\n      }\n\n      return Object.defineProperty(e.prototype, \"isLocked\", {\n        get: function get() {\n          return this.locks > 0;\n        },\n        enumerable: !0,\n        configurable: !0\n      }), e.prototype.lock = function () {\n        var e,\n            t = this;\n        this.locks += 1, i.default.debug(\"[lock-\" + this.name + \"-\" + this.lockId + \"] is locked, current queue \" + this.locks + \".\");\n        var n = new Promise(function (n) {\n          e = function e() {\n            t.locks -= 1, i.default.debug(\"[lock-\" + t.name + \"-\" + t.lockId + \"] is not locked, current queue \" + t.locks + \".\"), n();\n          };\n        }),\n            r = this.lockingPromise.then(function () {\n          return e;\n        });\n        return this.lockingPromise = this.lockingPromise.then(function () {\n          return n;\n        }), r;\n      }, e;\n    }();\n\n    t.PromiseMutex = a;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.r(t);\n\n    var r = n(2),\n        i = n(0),\n        o = n(1),\n        a = n(8),\n        s = n(4),\n        c = function c() {};\n\n    c.prototype.set = function (e, t) {\n      [\"BatteryLevel\"].indexOf(e) > -1 && (this[e] = t);\n    };\n\n    var d = function d() {\n      var e = o.report.reportApiInvoke(null, {\n        name: \"checkSystemRequirements\",\n        options: arguments,\n        tag: \"tracer\"\n      }),\n          t = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection,\n          n = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia || navigator.mediaDevices && navigator.mediaDevices.getUserMedia,\n          r = window.WebSocket,\n          i = !!t && !!n && !!r,\n          a = !1;\n      s.isChrome() && s.getBrowserVersion() >= 58 && \"iOS\" !== s.getBrowserOS() && (a = !0), s.isFireFox() && s.getBrowserVersion() >= 56 && (a = !0), s.isOpera() && s.getBrowserVersion() >= 45 && (a = !0), s.isSafari() && s.getBrowserVersion() >= 11 && (a = !0), s.isEdge() && (a = !0), (s.isWeChatBrowser() || s.isQQBrowser()) && \"iOS\" !== s.getBrowserOS() && (a = !0), s.isSupportedPC() || s.isSupportedMobile() || (a = !1);\n      var c = i && a;\n      return e(null, c), c;\n    },\n        u = new function () {\n      var e = Object(a.b)();\n      return e.states = {\n        UNINIT: \"UNINIT\",\n        INITING: \"INITING\",\n        INITED: \"INITED\"\n      }, e.state = e.states.UNINIT, e.batteryManager = null, e._init = function (t, n) {\n        e.state = e.states.INITING, navigator.getBattery ? navigator.getBattery().then(function (n) {\n          e.batteryManager = n, t && setTimeout(function () {\n            t();\n          }, 0);\n        }).catch(function (e) {\n          i.default.debug(\"navigator.getBattery is disabled\", e), t && t();\n        }) : (e.state = e.states.INITED, t && t());\n      }, e._getBatteryStats = function () {\n        var t = {};\n        return e.batteryManager && e.batteryManager.level ? t.BatteryLevel = Math.floor(100 * e.batteryManager.level) : t.BatteryLevel = \"UNSUPPORTED\", t;\n      }, e.getStats = function (t, n) {\n        var r = new c(),\n            i = e._getBatteryStats();\n\n        i && i.BatteryLevel && r.set(\"BatteryLevel\", i.BatteryLevel), t && t(r);\n      }, e._init(), e;\n    }(),\n        l = n(22),\n        f = n(19),\n        p = n(26),\n        g = n(53),\n        m = n(9),\n        h = [\"live\", \"rtc\", \"web\", \"interop\", \"h264_interop\", \"web-only\"],\n        v = [\"vp8\", \"vp9\", \"h264\"],\n        E = [\"aes-128-gcm\", \"aes-256-gcm\", \"aes-128-xts\", \"aes-256-xts\", \"aes-128-ecb\", \"sm4-128-ecb\", \"aes-256-gcm2\", \"aes-128-gcm2\"],\n        S = n(11),\n        _ = n.n(S),\n        y = n(7),\n        R = n.n(y),\n        T = n(13),\n        I = n(5),\n        b = n(10),\n        A = n(20),\n        O = n(6),\n        C = n(14),\n        N = {\n      1001: \"FRAMERATE_INPUT_TOO_LOW\",\n      1002: \"FRAMERATE_SENT_TOO_LOW\",\n      1003: \"SEND_VIDEO_BITRATE_TOO_LOW\",\n      1005: \"RECV_VIDEO_DECODE_FAILED\",\n      2001: \"AUDIO_INPUT_LEVEL_TOO_LOW\",\n      2002: \"AUDIO_OUTPUT_LEVEL_TOO_LOW\",\n      2003: \"SEND_AUDIO_BITRATE_TOO_LOW\",\n      2005: \"RECV_AUDIO_DECODE_FAILED\",\n      3001: \"FRAMERATE_INPUT_TOO_LOW_RECOVER\",\n      3002: \"FRAMERATE_SENT_TOO_LOW_RECOVER\",\n      3003: \"SEND_VIDEO_BITRATE_TOO_LOW_RECOVER\",\n      3005: \"RECV_VIDEO_DECODE_FAILED_RECOVER\",\n      4001: \"AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER\",\n      4002: \"AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER\",\n      4003: \"SEND_AUDIO_BITRATE_TOO_LOW_RECOVER\",\n      4005: \"RECV_AUDIO_DECODE_FAILED_RECOVER\"\n    },\n        w = {\n      FramerateInput: 1001,\n      FramerateSent: 1002,\n      SendVideoBitrate: 1003,\n      VideoDecode: 1005,\n      AudioIntputLevel: 2001,\n      AudioOutputLevel: 2002,\n      SendAudioBitrate: 2003,\n      AudioDecode: 2005\n    },\n        L = function L(e) {\n      var t = {\n        remoteStreamStorage: {},\n        localStreamStorage: {}\n      };\n      return t.gatewayClient = e, t.checkAudioOutputLevel = function (e) {\n        return !(e && parseInt(e.audioRecvBytesDelta) > 0 && parseInt(e.audioDecodingNormalDelta) > 0 && 0 === parseInt(e.audioOutputLevel));\n      }, t.checkAudioIntputLevel = function (e) {\n        return !e || 0 !== parseInt(e.audioInputLevel);\n      }, t.checkFramerateInput = function (e, t) {\n        if (!e || !t.attributes) return !0;\n        var n = parseInt(t.attributes.maxFrameRate),\n            r = parseInt(e.googFrameRateInput);\n        return !n || !r || !(n > 10 && r < 5 || n < 10 && n >= 5 && r <= 1);\n      }, t.checkFramerateSent = function (e) {\n        return !(e && parseInt(e.googFrameRateInput) > 5 && parseInt(e.googFrameRateSent) <= 1);\n      }, t.checkSendVideoBitrate = function (e) {\n        return !e || 0 !== parseInt(e.videoSendBytesDelta);\n      }, t.checkSendAudioBitrate = function (e) {\n        return !e || 0 !== parseInt(e.audioSendBytesDelta);\n      }, t.checkVideoDecode = function (e) {\n        return !e || 0 === parseInt(e.videoRecvBytesDelta) || 0 !== parseInt(e.googFrameRateDecoded);\n      }, t.checkAudioDecode = function (e) {\n        return !e || 0 === parseInt(e.audioRecvBytesDelta) || 0 !== parseInt(e.audioDecodingNormalDelta);\n      }, t.record = function (e, n, r, i, o) {\n        r[e] || (r[e] = {\n          isPrevNormal: !0,\n          record: []\n        });\n        var a = r[e],\n            s = t[\"check\" + e](n, o);\n\n        if (a.record.push(s), a.record.length >= 5) {\n          a.isCurNormal = -1 !== a.record.indexOf(!0);\n          var c = w[e];\n          a.isPrevNormal && !a.isCurNormal && t.gatewayClient.dispatchEvent({\n            type: \"exception\",\n            code: c,\n            msg: N[c],\n            uid: i\n          }), !a.isPrevNormal && a.isCurNormal && t.gatewayClient.dispatchEvent({\n            type: \"exception\",\n            code: c + 2e3,\n            msg: N[c + 2e3],\n            uid: i\n          }), a.isPrevNormal = a.isCurNormal, a.record = [];\n        }\n      }, t.setLocalStats = function (e) {\n        var n = {};\n        Object.keys(e).map(function (r) {\n          var i = e[r],\n              o = t.gatewayClient.localStreams[parseInt(r)],\n              a = t.localStreamStorage[r] || {};\n          o && o.hasVideo() && (t.record(\"SendVideoBitrate\", i.videoStats, a, r), t.record(\"FramerateInput\", i.videoStats, a, r, o), t.record(\"FramerateSent\", i.videoStats, a, r)), o && o.hasAudio() && (t.record(\"AudioIntputLevel\", i.audioStats, a, r), t.record(\"SendAudioBitrate\", i.audioStats, a, r)), n[r] = a;\n        }), t.localStreamStorage = n;\n      }, t.setRemoteStats = function (n) {\n        var r = {};\n        Object.keys(n).map(function (i) {\n          var o = n[i],\n              a = e.remoteStreams[i],\n              s = t.remoteStreamStorage[i] || {};\n          a && a.hasVideo() && a.isPlaying() && t.record(\"VideoDecode\", o.videoStats, s, i), a && a.hasAudio() && a.isPlaying() && (t.record(\"AudioOutputLevel\", o.audioStats, s, i), t.record(\"AudioDecode\", o.audioStats, s, i)), r[i] = s;\n        }), t.remoteStreamStorage = r;\n      }, t;\n    };\n\n    function D(e) {\n      if (\"undefined\" == typeof Symbol || null == e[Symbol.iterator]) {\n        if (Array.isArray(e) || (e = function (e, t) {\n          if (!e) return;\n          if (\"string\" == typeof e) return k(e, t);\n          var n = Object.prototype.toString.call(e).slice(8, -1);\n          \"Object\" === n && e.constructor && (n = e.constructor.name);\n          if (\"Map\" === n || \"Set\" === n) return Array.from(n);\n          if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return k(e, t);\n        }(e))) {\n          var t = 0,\n              n = function n() {};\n\n          return {\n            s: n,\n            n: function n() {\n              return t >= e.length ? {\n                done: !0\n              } : {\n                done: !1,\n                value: e[t++]\n              };\n            },\n            e: function (_e7) {\n              function e(_x7) {\n                return _e7.apply(this, arguments);\n              }\n\n              e.toString = function () {\n                return _e7.toString();\n              };\n\n              return e;\n            }(function (e) {\n              throw e;\n            }),\n            f: n\n          };\n        }\n\n        throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n      }\n\n      var r,\n          i,\n          o = !0,\n          a = !1;\n      return {\n        s: function s() {\n          r = e[Symbol.iterator]();\n        },\n        n: function n() {\n          var e = r.next();\n          return o = e.done, e;\n        },\n        e: function (_e8) {\n          function e(_x8) {\n            return _e8.apply(this, arguments);\n          }\n\n          e.toString = function () {\n            return _e8.toString();\n          };\n\n          return e;\n        }(function (e) {\n          a = !0, i = e;\n        }),\n        f: function f() {\n          try {\n            o || null == r.return || r.return();\n          } finally {\n            if (a) throw i;\n          }\n        }\n      };\n    }\n\n    function k(e, t) {\n      (null == t || t > e.length) && (t = e.length);\n\n      for (var n = 0, r = new Array(t); n < t; n++) {\n        r[n] = e[n];\n      }\n\n      return r;\n    }\n\n    var M,\n        P = n(3),\n        x = new function () {\n      var e = Object(a.b)();\n      return e.states = {\n        UNINIT: \"UNINIT\",\n        INITING: \"INITING\",\n        INITED: \"INITED\"\n      }, e.state = e.states.UNINIT, e.type = null, e.lastConnectedAt = null, e.lastDisconnectedAt = null, e.lastTypeChangedAt = null, e.networkChangeTimer = null, e._init = function (t, n) {\n        if (e.state = e.states.INITING, navigator.connection && navigator.connection.addEventListener) {\n          var r = e._getNetworkInfo();\n\n          e.type = r && r.type, e.state = e.states.INITED, t && t();\n        } else e.state = e.states.UNINIT, n && n(\"DO_NOT_SUPPORT\");\n      }, e._getNetworkInfo = function () {\n        return navigator.connection;\n      }, e._reloadNetworkInfo = function () {\n        var t = e._getNetworkInfo(),\n            n = t && t.type || \"UNSUPPORTED\",\n            r = Date.now();\n\n        if (n !== e.type) {\n          e.lastTypeChangedAt = r, \"none\" == n ? e.lastDisconnectedAt = r : \"none\" == e.type && (e.lastConnectedAt = r), e.type = n;\n          var i = {\n            type: \"networkTypeChanged\",\n            networkType: n\n          };\n          e.dispatchEvent(i);\n        }\n      }, e.getStats = function (t, n) {\n        var r = {},\n            i = e._getNetworkInfo();\n\n        i && (r.NetworkType = i.type || \"UNSUPPORTED\"), setTimeout(function () {\n          t(r);\n        }, 0);\n      }, e._init(function () {\n        navigator.connection.addEventListener(\"change\", function () {\n          e._reloadNetworkInfo();\n        }), e.networkChangeTimer = setInterval(function () {\n          e._reloadNetworkInfo();\n        }, 5e3);\n      }, function (e) {}), e;\n    }(),\n        U = n(55),\n        j = n(16),\n        V = n(56),\n        B = n.n(V),\n        F = n(21),\n        W = function W() {\n      return \"HTTPS\" === (M || M || (M = (window.location.protocol.split(\":\")[0] || \"\").toUpperCase()));\n    },\n        G = function G() {\n      return void 0 !== window.isSecureContext;\n    },\n        H = \"host\",\n        q = function q(e) {\n      var t = {\n        key: void 0,\n        highStream: null,\n        lowStream: null,\n        lowStreamParameter: null,\n        isDualStream: !1,\n        highStreamState: 2,\n        lowStreamState: 2,\n        proxyServer: null,\n        turnServers: [],\n        useProxyServer: !1,\n        useLocalAccessPoint: !1\n      };\n      t.mode = e.mode, t.codec = e.codec, t.clientId = Object(b.generateSessionId)().slice(0, 5), t.uintUid = null, t.customReportCount = 0;\n      e = R()({}, e);\n\n      if (t.aespassword = null, t.aesmode = \"none\", t.hasPublished = !1, t.getSessionId = function () {\n        return e.sessionId;\n      }, t.startChannelMediaRelay = function (n, r) {\n        var i = o.report.reportApiInvoke(e.sessionId, {\n          callback: function callback(e) {\n            if (e) return r && r(e);\n            r && r();\n          },\n          name: \"Client.startChannelMediaRelay\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        if (!(n instanceof m.ChannelMediaRelayConfiguration)) throw \"Configration should be instance of [ChannelMediaRelayConfiguration]\";\n        var a = n.getSrcChannelMediaInfo(),\n            s = n.getDestChannelMediaInfos();\n        if (Object(P.isEmpty)(a)) throw \"srcChannelMediaInfo should not be empty\";\n        if (Object(P.isEmpty)(s) || 0 === s.length) throw \"destChannelMediaInfos should not be empty\";\n        if (!Object(b.is32Uint)(a.uid)) throw \"Invalid uid in srcChannelMediaInfo\";\n        if (!Object(P.isValidChannelName)(a.channelName)) throw \"Invalid channelName in srcChannelMediaInfo\";\n        if (a.token && !Object(P.isValidToken)(a.token)) throw \"Invalid token in srcChannelMediaInfo\";\n        if (s.forEach(function (e) {\n          if (!Object(b.is32Uint)(e.uid)) throw \"Invalid uid in destChannelMediaInfo\";\n          if (!Object(P.isValidChannelName)(e.channelName)) throw \"Invalid channelName in destChannelMediaInfo\";\n          if (e.token && !Object(P.isValidToken)(e.token)) throw \"Invalid token in destChannelMediaInfo\";\n        }), t.gatewayClient.state !== T.a.CONNECTED) throw \"startChannelMediaRelay should be used after join\";\n        t.gatewayClient.startChannelMediaRelay(n).then(function () {\n          i && i();\n        }).catch(function (e) {\n          i && i(e);\n        });\n      }, t.updateChannelMediaRelay = function (n, r) {\n        var i = o.report.reportApiInvoke(e.sessionId, {\n          callback: function callback(e) {\n            if (e) return r && r(e);\n            r && r();\n          },\n          name: \"Client.updateChannelMediaRelay\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        if (!(n instanceof m.ChannelMediaRelayConfiguration)) throw \"Configration should be instance of [ChannelMediaRelayConfiguration]\";\n        var a = n.getSrcChannelMediaInfo(),\n            s = n.getDestChannelMediaInfos();\n        if (Object(P.isEmpty)(a)) throw \"srcChannelMediaInfo should not be empty\";\n        if (Object(P.isEmpty)(s) || 0 === s.length) throw \"destChannelMediaInfos should not be empty\";\n        if (!Object(b.is32Uint)(a.uid)) throw \"Invalid uid in srcChannelMediaInfo\";\n        if (!Object(P.isValidChannelName)(a.channelName)) throw \"Invalid channelName in srcChannelMediaInfo\";\n        if (a.token && !Object(P.isValidToken)(a.token)) throw \"Invalid token in srcChannelMediaInfo\";\n        if (s.forEach(function (e) {\n          if (!Object(b.is32Uint)(e.uid)) throw \"Invalid uid in destChannelMediaInfo\";\n          if (!Object(P.isValidChannelName)(e.channelName)) throw \"Invalid channelName in destChannelMediaInfo\";\n          if (e.token && !Object(P.isValidToken)(e.token)) throw \"Invalid token in destChannelMediaInfo\";\n        }), t.gatewayClient.state !== T.a.CONNECTED) throw \"updateChannelMediaRelay should be used after join\";\n        t.gatewayClient.updateChannelMediaRelay(n).then(function () {\n          i && i();\n        }).catch(function (e) {\n          i && i(e);\n        });\n      }, t.stopChannelMediaRelay = function (n) {\n        var r = o.report.reportApiInvoke(e.sessionId, {\n          callback: function callback(e) {\n            if (e) return n && n(e);\n            n && n();\n          },\n          name: \"Client.stopChannelMediaRelay\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        t.gatewayClient.stopChannelMediaRelay().then(function () {\n          r && r();\n        }).catch(function (e) {\n          r && r(e);\n        });\n      }, t.getConnectionState = function () {\n        var n = o.report.reportApiInvoke(e.sessionId, {\n          name: \"Client.getConnectionState\",\n          options: arguments,\n          tag: \"tracer\"\n        }),\n            r = T.a.connetionStateMap[t.gatewayClient.state];\n        return n(), r;\n      }, t.setClientRole = function (n, r) {\n        var a = o.report.reportApiInvoke(e.sessionId, {\n          callback: r,\n          name: \"Client.setClientRole\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n\n        if (Object(P.checkValidEnum)(n, \"setClientRole\", [H, \"audience\"]), \"rtc\" === t.mode) {\n          var s = \"RTC mode can not use setClientRole\";\n          return i.default.warning(\"[\".concat(t.clientId, \"] \").concat(s)), a && a(s);\n        }\n\n        t.gatewayClient && t.gatewayClient.state === T.a.CONNECTED ? (\"audience\" === n && (0 === this.highStreamState ? this._unpublish(this.highStream, function () {\n          a && a(null, {\n            role: n\n          });\n        }, function (e) {\n          a && a(e);\n        }) : t.gatewayClient.setClientRole(\"audience\", a)), n === H && t.gatewayClient.setClientRole(H, a)) : (t.gatewayClient.role = n, a && a(null, {\n          role: n\n        }));\n      }, t.getGatewayInfo = function (e) {\n        if (t.gatewayClient.state !== T.a.CONNECTED) {\n          var n = \"Client is not in connected state\";\n          return i.default.error(\"[\".concat(t.clientId, \"] \").concat(n)), void e(n);\n        }\n\n        t.gatewayClient.getGatewayInfo(function (t) {\n          e(null, t);\n        }, e);\n      }, t.renewToken = function (n, r, a) {\n        var s = o.report.reportApiInvoke(e.sessionId, {\n          callback: function callback(e, t) {\n            if (e) return i.default.error(\"Failed to renew token \".concat(e), t), a && a(e);\n            r && r(t);\n          },\n          name: \"Client.renewToken\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        if (!Object(P.isValidToken)(n)) throw new Error(\"Invalid token: Token is of the string type .Length of the string: [1,255]. ASCII characters only.\");\n        return t.gatewayClient ? t.key ? (t.key = n, void t.gatewayClient.renewToken(n, function (e) {\n          return s(null, e);\n        }, s)) : (i.default.error(\"[\".concat(t.clientId, \"] renewToken should not be called before user join\")), s(I.default.INVALID_OPERATION)) : (i.default.error(\"[\".concat(t.clientId, \"] renewToken Failed. GatewayClient not Exist\")), s(I.default.INVALID_OPERATION));\n      }, t.setLowStreamParameter = function (n) {\n        var r = o.report.reportApiInvoke(e.sessionId, {\n          name: \"Client.setLowStreamParameter\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        Object(P.checkValidObject)(n, \"param\");\n        var a = n.width,\n            s = n.height,\n            c = n.framerate,\n            d = n.bitrate;\n        Object(P.isEmpty)(a) || Object(P.checkValidNumber)(a, \"width\"), Object(P.isEmpty)(s) || Object(P.checkValidNumber)(s, \"height\"), Object(P.isEmpty)(c) || Object(P.checkValidNumber)(c, \"framerate\"), Object(P.isEmpty)(d) || Object(P.checkValidNumber)(d, \"bitrate\", 1, 1e7), (!a && s || a && !s) && i.default.warning(\"[\".concat(t.clientId, \"] The width and height parameters take effect only when both are set\")), t.lowStreamParameter = n, r();\n      }, t.init = function (t, n, r) {\n        var i = o.report.reportApiInvoke(e.sessionId, {\n          callback: function callback(e, t) {\n            if (e) return r && r(e);\n            n && n(t);\n          },\n          name: \"Client.init\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        Object(P.checkValidString)(t), Object(s.isChromeKernel)() && Object(s.getChromeKernelVersion)() <= 48 ? r ? i(I.default.BAD_ENVIRONMENT) : Object(b.popBanTip)() : (e.appId = t, e.sessionId = Object(b.generateSessionId)(), i());\n      }, t.setTurnServer = function (n) {\n        var r = o.report.reportApiInvoke(e.sessionId, {\n          name: \"Client.setTurnServer\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        if (t.gatewayClient && t.gatewayClient.state !== T.a.DISCONNECTED) throw new Error(\"Set turn server before join channel\");\n        if (t.useProxyServer) throw new Error(\"You have already set the proxy\");\n        if (t.useLocalAccessPoint) throw new Error(\"You have already set the local proxy\");\n        n instanceof Array || (n = [n]);\n        var a = [];\n        n.map(function (e, n) {\n          Object(P.checkValidObject)(e, \"turnServer\");\n          var r = e.turnServerURL,\n              o = e.username,\n              s = e.password,\n              c = e.udpport,\n              d = e.forceturn,\n              u = e.tcpport;\n          if (Object(P.checkValidString)(r, \"turnServerURL\"), Object(P.checkValidString)(o, \"username\"), Object(P.checkValidString)(s, \"password\"), Object(P.checkValidString)(c, \"udpport\"), 0 === parseInt(c)) throw new Error(\"udpport should not be \".concat(c));\n          Object(P.isEmpty)(d) || Object(P.checkValidBoolean)(d, \"forceturn\");\n          var l = {\n            mode: \"manual\"\n          };\n\n          if (l.url = r, l.udpport = c, l.username = o, l.credential = s, l.forceturn = d || !1, !Object(P.isEmpty)(u)) {\n            if (Object(P.checkValidString)(u, \"tcpport\"), 0 === parseInt(u)) throw new Error(\"tcpport should not be \".concat(u));\n            l.tcpport = u, i.default.info(\"[\".concat(t.clientId, \"] Set turnserver[\").concat(n, \"] tcpurl. \").concat(l.url, \":\").concat(l.tcpport));\n          }\n\n          i.default.info(\"[\".concat(t.clientId, \"] Set turnserver[\").concat(n, \"] udpurl. \").concat(l.url, \":\").concat(l.udpport, \",username: \").concat(l.username)), a.push(l);\n        }), t.turnServers = a, r();\n      }, t.setProxyServer = function (n) {\n        var r = o.report.reportApiInvoke(e.sessionId, {\n          name: \"Client.setProxyServer\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        if (t.gatewayClient && t.gatewayClient.state !== T.a.DISCONNECTED) throw new Error(\"Set proxy server before join channel\");\n        if (!n) throw new Error(\"Do not set the proxyServer parameter as empty\");\n        if (t.useProxyServer) throw new Error(\"You have already set the proxy\");\n        if (t.useLocalAccessPoint) throw new Error(\"You have already set the local proxy\");\n        Object(P.checkValidString)(n, \"proxyServer\"), t.proxyServer = n, o.report.setProxyServer(n), i.default.setProxyServer(n), r();\n      }, t.startProxyServer = function (n) {\n        var r = o.report.reportApiInvoke(e.sessionId, {\n          name: \"Client.startProxyServer\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        if (t.gatewayClient && t.gatewayClient.state !== T.a.DISCONNECTED) throw new Error(\"Start proxy server before join channel\");\n        if (t.proxyServer) throw new Error(\"You have already set the proxy\");\n        if (t.useLocalAccessPoint) throw new Error(\"You have already set the local proxy\");\n        t.useProxyServer = !0, t.proxyServerType = n || 1, r();\n      }, t.stopProxyServer = function () {\n        var n = o.report.reportApiInvoke(e.sessionId, {\n          name: \"Client.stopProxyServer\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        if (t.gatewayClient && t.gatewayClient.state !== T.a.DISCONNECTED) throw new Error(\"Stop proxy server after leave channel\");\n        o.report.setProxyServer(), i.default.setProxyServer(), t.turnServers = [], t.proxyServer = null, t.useProxyServer = !1, t.proxyServerType = null, n();\n      }, t.setEncryptionSecret = function (n) {\n        var r = o.report.reportApiInvoke(e.sessionId, {\n          name: \"Client.setEncryptionSecret\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        Object(P.checkValidString)(n, \"password\");\n        var a = new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})\");\n        a.test(n) || i.default.warning(\"The secret is not strong:\\n      The secret must contain at least 1 lowercase alphabetical character,\\n      The secret must contain at least 1 uppercase alphabetical character,\\n      The secret must contain at least 1 numeric character,\\n      The secret must contain at least one special character,\\n      The secret must be eight characters or longer,\\n      \"), t.aespassword = n, r();\n      }, t.setEncryptionMode = function (n, r) {\n        var i = o.report.reportApiInvoke(e.sessionId, {\n          name: \"Client.setEncryptionMode\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        if (Object(P.checkValidString)(n, \"encryptionMode\"), -1 === E.indexOf(n)) throw new Error('Invalid encryptionMode: encryptionMode should be \"aes-128-xts\" | \"aes-256-xts\" | \"aes-128-ecb\" | \"sm4-128-ecb\" | \"aes-128-gcm\" | \"aes-256-gcm\" | \"aes-128-gcm2\" | \"aes-256-gcm2\"');\n        var a = [\"aes-128-gcm2\", \"aes-256-gcm2\"];\n\n        if (-1 !== a.indexOf(n)) {\n          if (!r || !(r instanceof Uint8Array && 32 === r.length)) throw Error(\"salt must be an Uint8Array and exactly equal to 32 bytes\");\n        } else if (r) throw new Error(\"Only \".concat(\"aes-128-gcm2\", \" and \").concat(\"aes-256-gcm2\", \" support use salt\"));\n\n        r && (t.aesSalt = Object(b.uint8ArrayToBase64)(r)), t.aesmode = n, i();\n      }, t.configPublisher = function (n) {\n        var r = o.report.reportApiInvoke(e.sessionId, {\n          name: \"Client.configPublisher\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        Object(P.checkValidObject)(n, \"config\");\n        var i = n.width,\n            a = n.height,\n            s = n.framerate,\n            c = n.bitrate,\n            d = n.publisherUrl;\n        Object(P.checkValidNumber)(i, \"width\"), Object(P.checkValidNumber)(a, \"height\"), Object(P.checkValidNumber)(s, \"framerate\"), Object(P.checkValidNumber)(c, \"bitrate\", 1, 1e7), d && Object(P.checkValidString)(d, \"publisherUrl\"), t.gatewayClient.configPublisher(n), r();\n      }, t.enableDualStream = function (n, r) {\n        var a = o.report.reportApiInvoke(e.sessionId, {\n          callback: function callback(e, t) {\n            if (e) return r && r(e);\n            n && n(t);\n          },\n          name: \"Client.enableDualStream\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        return \"iOS\" === Object(s.getBrowserOS)() ? (o.report.streamSwitch(e.sessionId, {\n          lts: new Date().getTime(),\n          isdual: !0,\n          succ: !1\n        }), a(I.default.IOS_NOT_SUPPORT)) : Object(s.isWeChatBrowser)() ? (o.report.streamSwitch(e.sessionId, {\n          lts: new Date().getTime(),\n          isdual: !0,\n          succ: !1\n        }), a(I.default.WECHAT_NOT_SUPPORT)) : (o.report.streamSwitch(e.sessionId, {\n          lts: new Date().getTime(),\n          isdual: !0,\n          succ: !0\n        }), t.isDualStream = !0, t.highStream && (t.highStream.isDualStream = !0), void (0 === t.highStreamState ? t._publishLowStream(function (e) {\n          return a(null, e);\n        }, function (e) {\n          i.default.warning(\"[\".concat(t.clientId, \"]\"), e), a(I.default.ENABLE_DUALSTREAM_FAILED);\n        }) : 1 === t.highStreamState ? a(I.default.STILL_ON_PUBLISHING) : a(null)));\n      }, t.disableDualStream = function (n, r) {\n        var a = o.report.reportApiInvoke(e.sessionId, {\n          callback: function callback(e, t) {\n            if (e) return r && r(e);\n            n && n(t);\n          },\n          name: \"Client.disableDualStream\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        o.report.streamSwitch(e.sessionId, {\n          lts: new Date().getTime(),\n          isdual: !1,\n          succ: !0\n        }), t.isDualStream = !1, t.highStream && (t.highStream.isDualStream = !1), 0 === t.highStreamState ? t._unpublishLowStream(function () {\n          t.highStream.lowStream = null, a();\n        }, function (e) {\n          i.default.warning(\"[\".concat(t.clientId, \"]\"), e), a(I.default.DISABLE_DUALSTREAM_FAILED);\n        }) : 1 === t.highStreamState ? a(I.default.STILL_ON_PUBLISHING) : a();\n      }, t._getLowStream = function (e, n) {\n        t.lowStream ? e(t.lowStream) : t._createLowStream(function (n) {\n          t.lowStream = n, e(t.lowStream);\n        }, n);\n      }, t._createLowStream = function (e, n) {\n        if (t.highStream && t.highStream.stream) {\n          var r = R()({}, t.highStream.params);\n          if (r.streamID += 1, r.audio = !1, r.video) {\n            if (t.highStream.stream.getVideoTracks()[0]) {\n              var i = new l.a(r);\n              i.isLowStream = !0, i.streamId = t.highStream.getId() + 1;\n              var o = {};\n              t.lowStreamParameter && (o = R()({}, t.lowStreamParameter)), o.width && o.height || (o.width = 160, o.height = 120), o.framerate = o.framerate || 15, o.bitrate = o.bitrate || 50, i.setVideoProfileCustomPlus(o);\n\n              try {\n                var a = B()(t.highStream, {\n                  width: i.videoConstraint.width.ideal,\n                  height: i.videoConstraint.height.ideal,\n                  framerate: i.videoConstraint.frameRate\n                });\n                return i.stream = a, t.highStream.lowStream = i, t.highStream.userMuteVideo && i.muteVideo(), e && e(i);\n              } catch (e) {\n                return n && n(e);\n              }\n            } else n && n(I.default.HIGH_STREAM_NOT_VIDEO_TRACE);\n          } else n && n(I.default.HIGH_STREAM_NOT_VIDEO_TRACE);\n        } else n && n(I.default.HIGH_STREAM_NOT_VIDEO_TRACE);\n      }, t._publishLowStream = function (e, n) {\n        return 2 !== t.lowStreamState ? n && n(I.default.LOW_STREAM_ALREADY_PUBLISHED) : t.highStream && t.highStream.hasScreen() ? n && n(I.default.SHARING_SCREEN_NOT_SUPPORT) : void t._getLowStream(function (r) {\n          t.lowStreamState = 1, t.gatewayClient.publish(r, {\n            streamType: 1\n          }, function () {\n            t.lowStreamState = 0, e && e();\n          }, function (e) {\n            1 === t.lowStreamState && (t.lowStreamState = 2), i.default.debug(\"[\".concat(t.clientId, \"] publish low stream failed\")), n && n(e);\n          });\n        }, n);\n      }, t._unpublishLowStream = function (e, n) {\n        if (0 !== t.lowStreamState) return n && n(I.default.LOW_STREAM_NOT_YET_PUBLISHED);\n        t.lowStream && (t.gatewayClient.unpublish(t.lowStream, {\n          streamType: 1\n        }, function () {}, function (e) {\n          i.default.debug(\"[\".concat(t.clientId, \"] unpublish low stream failed\")), n && n(e);\n        }), t.lowStream.close(), t.lowStream = null, t.lowStreamState = 2, e && e());\n      }, t.join = function (n, r, a, c, u, l) {\n        c && \"function\" == typeof c && (l = u, u = c, c = null);\n        var f = d(),\n            p = Object(s.getBrowserInfo)();\n        i.default.debug(p, \",Support: \" + f);\n\n        var g = W(),\n            m = \"The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser\",\n            h = G() ? window.isSecureContext : \"Browser Not Support\",\n            v = function v() {\n          i.default.warning(m);\n        };\n\n        G() ? window.isSecureContext || v() : g || v();\n        var E = o.report.reportApiInvoke(e.sessionId, {\n          callback: function callback(e, t) {\n            if (e) return l && l(e);\n            u && u(t);\n          },\n          name: \"Client.join\",\n          options: arguments,\n          getStates: function getStates() {\n            return {\n              isHttps: g,\n              isSecureContext: h\n            };\n          },\n          tag: \"tracer\"\n        });\n        if (n && !Object(P.isValidToken)(n)) return i.default.warning(\"[\".concat(t.clientId, \"] Param channelKey should be string\")), E(I.default.INVALID_PARAMETER);\n        if (!Object(P.isValidChannelName)(r)) return i.default.error(\"Invalid Channel Name \".concat(r)), i.default.warning(\"[\".concat(t.clientId, \"] The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,\")), E(I.default.INVALID_PARAMETER);\n        if (\"string\" == typeof r && \"\" === r) return i.default.warning(\"[\".concat(t.clientId, \"] Param channel should not be empty\")), E(I.default.INVALID_PARAMETER);\n        if (c && !Object(P.isValidString)(c)) return i.default.warning(\"[\".concat(t.clientId, \"] optionalInfo should be string\")), E(I.default.INVALID_PARAMETER);\n        if (a && !Object(b.is32Uint)(a) && !Object(P.isValidString)(a, 1, 255)) return i.default.error(\"Invalid UID \".concat(a, \" \").concat(_()(a))), i.default.warning(\"[\".concat(t.clientId, \"] [String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is 32Uint\")), E(I.default.INVALID_PARAMETER);\n        if (\"string\" == typeof a && 0 == a.length) return i.default.warning(\"[\".concat(t.clientId, \"] String uid should not be empty\")), E(I.default.INVALID_PARAMETER);\n        if (\"string\" == typeof a && a.length > 256) return i.default.warning(\"[\".concat(t.clientId, \"] Length of string uid should be less than 255\")), E(I.default.INVALID_PARAMETER);\n        i.default.stopWaitJoin(), t.highStream = null, t.lowStream = null, t.lowStreamParameter = null, t.isDualStream = !1, t.highStreamState = 2, t.lowStreamState = 2;\n        var S = Date.now(),\n            y = setTimeout(function () {\n          if (1 != t.gatewayClient.hasJoined) {\n            i.default.debug(\"[\".concat(t.clientId, \"] The time to join the channel is greater than 5 seconds \"));\n            var n = Date.now();\n            o.report.joinChannelTimeOut({\n              lts: n,\n              sid: e.sessionId,\n              cname: r,\n              cid: O && O.cid,\n              uid: O.uid || (\"string\" == typeof a ? void 0 : a),\n              elapse: n - S,\n              timeout: 5\n            });\n          }\n        }, 5e3),\n            O = {\n          clientId: t.clientId,\n          appId: e.appId,\n          sid: e.sessionId,\n          cname: r,\n          uid: a,\n          turnServers: t.turnServers.concat(),\n          proxyServer: t.proxyServer,\n          token: n || e.appId,\n          useProxyServer: t.useProxyServer,\n          useLocalAccessPoint: t.useLocalAccessPoint,\n          proxyServerType: t.proxyServerType,\n          optionalInfo: c\n        };\n        if (\"string\" == typeof a && (O.stringUid = a, t.uintUid ? (O.uid = t.uintUid, delete t.uintUid) : O.uid = 0), t.aespassword && \"none\" !== t.aesmode && R()(O, {\n          aespassword: t.aespassword,\n          aesmode: t.aesmode\n        }), t.aesSalt && (O.aes_salt = t.aesSalt), o.report.sessionInit(e.sessionId, {\n          lts: new Date().getTime(),\n          cname: r,\n          appid: e.appId,\n          mode: e.mode,\n          succ: !0\n        }), t.onSuccess = function (e) {\n          clearTimeout(y), t.rtcStatsCollector.startNetworkQualityTimer(), t.onSuccess = null, E(null, e);\n        }, t.onFailure = function (e) {\n          return E(e);\n        }, t.channel = r, t.gatewayClient.state !== T.a.DISCONNECTED) return i.default.error(\"[\".concat(t.clientId, \"] Client already in connecting/connected state\")), E(I.default.INVALID_OPERATION), void o.report.joinGateway(e.sessionId, {\n          lts: Date.now(),\n          succ: !1,\n          ec: I.default.INVALID_OPERATION,\n          addr: null\n        });\n        t.gatewayClient.state = T.a.CONNECTING;\n\n        var C = function C(o, a) {\n          i.default.info(\"[\".concat(t.clientId, \"] Joining channel: \").concat(r)), t.gatewayClient.dispatchEvent({\n            type: \"config-distribute\",\n            config: a,\n            joinInfo: O\n          }), t.key = n || e.appId, O.cid = o.cid, O.uid || (O.uid = o.uid), O.vid = o.vid, O.clientId = t.clientId, O.apResponse = o.res, o.uni_lbs_ip && o.uni_lbs_ip[1] && (O.uni_lbs_ip = o.uni_lbs_ip[1]), O.gatewayAddr = o.gateway_addr, t.joinInfo = O, t.gatewayClient.join(O, t.key, function (e) {\n            i.default.info(\"[\".concat(t.clientId, \"] Join channel \").concat(r, \" success, join with uid: \").concat(e, \".\")), t.onSuccess = null, t.rtcStatsCollector.startNetworkQualityTimer(), E(null, e);\n          }, function (e) {\n            return E(e);\n          });\n        };\n\n        O.stringUid && !O.uid ? (t.userAccountReq && !t.userAccountReq.isFinished() && t.userAccountReq.cancel(), t.userAccountReq = Object(A.getUserAccount)(O, t.gatewayClient), t.userAccountReq.then(function (e) {\n          i.default.debug(\"getUserAccount Success \".concat(e.url, \" \").concat(O.stringUid, \" => \").concat(e.uid)), O.uid = e.uid, Object(A.getGatewayList)(O, C, function (e) {\n            return E(e);\n          });\n        }).catch(function (e) {\n          i.default.error(\"getUserAccount rejected\", e), E(e);\n        })) : Object(A.getGatewayList)(O, C, function (e) {\n          return E(e);\n        });\n      }, t.renewChannelKey = function (n, r, a) {\n        var s = o.report.reportApiInvoke(e.sessionId, {\n          callback: function callback(e, t) {\n            if (e) return a && a(e);\n            r && r(t);\n          },\n          name: \"Client.renewChannelKey\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        Object(P.checkValidString)(n, \"key\", 1, 2047), void 0 === t.key ? (i.default.error(\"[\".concat(t.clientId, \"] renewChannelKey should not be called before user join\")), s(I.default.INVALID_OPERATION)) : (t.key = n, t.gatewayClient.joinInfo.token = n, t.gatewayClient.key = n, t.gatewayClient.recover(), s());\n      }, t.leave = function (n, a) {\n        t.gatewayClient.isFirstSuccess = !0, t.gatewayClient.hasInvokeLeave = !0;\n        var s = !1,\n            c = o.report.reportApiInvoke(e.sessionId, {\n          callback: function callback(e, r) {\n            if (e) return a && a(e);\n            t.gatewayClient.reconnectingCS = !1, t.gatewayClient.state = T.a.DISCONNECTED, clearTimeout(Object(A._getReconnectCSTimer)(t.clientId)), t._renewSession(), t.rtcStatsCollector.clearNetworkQualityTimer(), n && n(r);\n          },\n          name: \"Client.leave\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        i.default.info(\"[\".concat(t.clientId, \"] Leaving channel\")), t.userAccountReq && !t.userAccountReq.isFinished() && (t.userAccountReq.cancel(), t.gatewayClient.state === T.a.CONNECTING && (t.gatewayClient.state = T.a.DISCONNECTED)), t._terminateLiveStreaming(), t.gatewayClient.leave(function (e) {\n          s = !0, c(null, e);\n        }, c), setTimeout(function () {\n          s || (t.gatewayClient.socket && (t.gatewayClient.socket.close(), t.gatewayClient.socket = null), t.gatewayClient.state = T.a.DISCONNECTED, c(null, \"LEAVE_MSG_TIMEOUT\"));\n        }, Object(r.getParameter)(\"LEAVE_MSG_TIMEOUT\"));\n      }, t._renewSession = function () {\n        var n = Object(b.generateSessionId)();\n        if (i.default.debug(\"renewSession \".concat(e.sessionId, \" => \").concat(n)), e.sessionId = n, t.gatewayClient.peerPublishDurationMap.clear(), t.joinInfo && (t.joinInfo.sid = n), t.gatewayClient && (t.gatewayClient.joinInfo && (t.gatewayClient.joinInfo.sid = n), t.gatewayClient.localStreams)) for (var r in t.gatewayClient.localStreams) {\n          var o = t.gatewayClient.localStreams[r];\n          o && (o.sid = n);\n        }\n      }, t._publish = function (n, o, a, s) {\n        if (2 !== t.highStreamState) return i.default.warning(\"[\".concat(t.clientId, \"] Can't publish stream when stream already publish \").concat(n.getId())), a && a(I.default.STREAM_ALREADY_PUBLISHED);\n        if (0 === t.turnServers.length && Object(r.getParameter)(\"FORCE_TURN\") && !Object(r.getParameter)(\"TURN_ENABLE_TCP\") && !Object(r.getParameter)(\"TURN_ENABLE_UDP\")) throw new Error(\"force TURN With No TURN Configuration\");\n        i.default.info(\"[\".concat(t.clientId, \"] Publishing stream, uid \").concat(n.getId())), t.highStream = n, t.highStreamState = 1, t.highStream.streamId = t.joinInfo.stringUid || t.joinInfo.uid, t.hasPublished = !1;\n\n        var c = function c(n, r, o) {\n          t.gatewayClient.publish(n, {\n            streamType: 0\n          }, function () {\n            n.sid = e.sessionId, t.highStreamState = 0, i.default.info(\"[\".concat(t.clientId, \"] Publish success, uid: \").concat(n.getId())), t.highStream && (t.highStream.isDualStream = t.isDualStream), t.isDualStream ? t._publishLowStream(function () {\n              r && r();\n            }, function (e) {\n              i.default.warning(\"[\".concat(t.clientId, \"] \"), e), j.a.replaceWithCanvasTrack(n).then(function () {\n                r && r();\n              });\n            }) : j.a.replaceWithCanvasTrack(n).then(function () {\n              r && r();\n            });\n          }, o);\n        };\n\n        \"audience\" !== t.gatewayClient.role || \"live\" !== t.mode || s ? c(n, o, a) : t.gatewayClient.setClientRole(H, function (e) {\n          if (e) return a && a(e);\n          c(n, o, a);\n        });\n      }, t._unpublish = function (e, n, r, o) {\n        if (0 !== t.highStreamState) return i.default.warning(\"[\".concat(t.clientId, \"] Can't unpublish stream when stream not publish\")), r && r(I.default.STREAM_NOT_YET_PUBLISHED);\n        i.default.info(\"[\".concat(t.clientId, \"] Unpublish stream, uid \").concat(e.getId()));\n\n        var a = function a(e, n, r) {\n          t.isDualStream && t.lowStream && t._unpublishLowStream(null, r), t.gatewayClient.unpublish(e, {\n            streamType: 0\n          }, function () {\n            t.highStreamState = 2, i.default.info(\"[\".concat(t.clientId, \"] Unpublish stream success, uid: \").concat(e.getId())), t.gatewayClient.dispatchEvent({\n              type: \"stream-unpublished\",\n              stream: e\n            }), n && n();\n          }, function (n) {\n            i.default.info(\"[\".concat(t.clientId, \"] Unpublish stream fail, uid: \").concat(e.getId())), r && r(n);\n          });\n        };\n\n        t.gatewayClient.role !== H || \"live\" !== t.mode || o ? a(e, n, r) : t.gatewayClient.setClientRole(\"audience\", function (t) {\n          if (t) return r && r(t);\n          a(e, n, r);\n        });\n      }, t.publish = function (n, r) {\n        var i = o.report.reportApiInvoke(e.sessionId, {\n          callback: function callback(e, n) {\n            if (e) return 1 === t.highStreamState && \"REQUEST_ABORT\" !== e && (t.highStreamState = 2), r && r(e);\n          },\n          name: \"Client.publish\",\n          tag: \"tracer\",\n          options: {\n            stream: \"too long to show\",\n            onFailure: !!r\n          }\n        });\n        2 === t.highStreamState ? n._hasVideoTracks() || n._hasAudioTracks() ? (t.gatewayClient.publishRequestId = Object(b.generateId)(), t._publish(n, function (e) {\n          return i(null, e);\n        }, function (e) {\n          return i(e);\n        })) : i(I.default.NO_TRACK_IN_STREAM) : i(I.default.STREAM_ALREADY_PUBLISHED);\n      }, t.unpublish = function (n, r, i) {\n        var a = o.report.reportApiInvoke(e.sessionId, {\n          callback: function callback(e, t) {\n            if (e) return r && r(e);\n            i && i(t);\n          },\n          name: \"Client.unpublish\",\n          tag: \"tracer\",\n          options: {\n            stream: \"too long to show\",\n            onFailure: !!r\n          }\n        });\n        0 === t.highStreamState ? (t.gatewayClient.publishRequestId = null, t._unpublish(n, function (e) {\n          return a(null, e);\n        }, function (e) {\n          return a(e);\n        })) : a(I.default.STREAM_NOT_YET_PUBLISHED);\n      }, t.subscribe = function (n, r, a) {\n        var c = o.report.reportApiInvoke(e.sessionId, {\n          callback: function callback(e, t) {\n            if (e) return a && a(e);\n          },\n          name: \"Client.subscribe\",\n          tag: \"tracer\",\n          options: {\n            stream: \"too long to show\",\n            options: r,\n            onFailure: !!a\n          }\n        });\n        \"function\" == typeof r && (a = r, r = null), Object(P.checkValidObject)(n, \"stream\"), Object(P.isEmpty)(r) || (Object(P.checkValidObject)(r, \"options\"), Object(P.isEmpty)(r.video) || Object(P.checkValidBoolean)(r.video, \"options.video\"), Object(P.isEmpty)(r.audio) || Object(P.checkValidBoolean)(r.audio, \"options.audio\"));\n        var d = {\n          video: !0,\n          audio: !0\n        };\n\n        if (!Object(P.isEmpty)(r)) {\n          if (Object(s.isSafari)() && (!r.video || !r.audio)) {\n            var u = \"SAFARI_NOT_SUPPORTED_FOR_TRACK_SUBSCRIPTION\";\n            return i.default.error(\"[\".concat(t.clientId, \"] \"), u), void c(u);\n          }\n\n          if (!Object(P.isEmpty)(r.video) && !Object(P.isValidBoolean)(r.video) || !Object(P.isEmpty)(r.audio) && !Object(P.isValidBoolean)(r.audio) || !1 === r.audio && !1 === r.video) {\n            u = \"INVALID_PARAMETER \".concat(JSON.stringify(r));\n            return i.default.error(\"[\".concat(t.clientId, \"] \"), u), void c(u);\n          }\n        }\n\n        n.subscribeOptions ? (R()(n.subscribeOptions, d, r), t.gatewayClient.subscribeChange(n, function (e) {\n          return c(null, e);\n        }, c)) : (t.gatewayClient.subscribeRequestId.set(n.getId(), Object(b.generateId)()), n.subscribeOptions = R()({}, d, r), t.gatewayClient.subscribe(n, function (e) {\n          return c(null, e);\n        }, c));\n      }, t.unsubscribe = function (n, r) {\n        var a = o.report.reportApiInvoke(e.sessionId, {\n          callback: function callback(e, t) {\n            if (e) return r && r(e);\n          },\n          name: \"Client.unsubscribe\",\n          tag: \"tracer\",\n          options: {\n            stream: \"too long to show\",\n            onFailure: !!r\n          }\n        });\n        i.default.info(\"[\".concat(t.clientId, \"] Unsubscribe stream, uid: \").concat(n.getId())), t.gatewayClient.subscribeRequestId.delete(n.getId()), t.gatewayClient.unsubscribe(n, function (e) {\n          return a(null, e);\n        }, a);\n      }, t.setRemoteVideoStreamType = function (n, r) {\n        var i = o.report.reportApiInvoke(e.sessionId, {\n          name: \"Client.setRemoteVideoStreamType\",\n          tag: \"tracer\",\n          options: {\n            stream: \"too long to show\",\n            streamType: r\n          }\n        });\n        Object(P.checkValidEnum)(r, \"streamType\", [0, 1]), t.gatewayClient.setRemoteVideoStreamType(n, r), i();\n      }, t.setStreamFallbackOption = function (n, r) {\n        var i = o.report.reportApiInvoke(e.sessionId, {\n          name: \"Client.setStreamFallbackOption\",\n          tag: \"tracer\",\n          options: {\n            stream: \"too long to show\",\n            fallbackType: r\n          }\n        });\n        Object(P.checkValidEnum)(r, \"fallbackType\", [0, 1, 2]), t.gatewayClient.setStreamFallbackOption(n, r), i();\n      }, t.enableAudioVolumeIndicator = function (n, r) {\n        var a = o.report.reportApiInvoke(e.sessionId, {\n          name: \"Client.enableAudioVolumeIndicator\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        n = n || 2e3, r = r || 3, Object(P.checkValidNumber)(r, \"smooth\", 1, 100), Object(P.checkValidNumber)(n, \"interval\", 50, 1e5), t.audioVolumeIndication = t.audioVolumeIndication || {\n          enabled: !0\n        }, t.audioVolumeIndication.interval = n, t.audioVolumeIndication.smooth = r, t.audioVolumeIndication = {\n          interval: n,\n          smooth: r\n        }, i.default.info(\"[\".concat(t.clientId, \"] enableAudioVolumeIndicator interval \").concat(n, \" smooth \").concat(r)), t.gatewayClient.enableAudioVolumeIndicator(n, r), a();\n      }, t.getNetworkStats = function (e, n) {\n        return i.default.deprecate(\"[\".concat(t.clientId, \"] client.getNetworkStats is deprecated. Use client.getTransportStats instead.\")), x.getStats(e, n);\n      }, t.getSystemStats = function (e, t) {\n        return u.getStats(e, t);\n      }, t.getRecordingDevices = function (e, t) {\n        return f.a.getRecordingDevices(e, t);\n      }, t.getPlayoutDevices = function (e, t) {\n        return f.a.getPlayoutDevices(e, t);\n      }, t.getCameras = function (e, t) {\n        return f.a.getCameras(e, t);\n      }, t.getRemoteAudioStats = function (e, n) {\n        return t.rtcStatsCollector.getRemoteAudioStats(e, n);\n      }, t.getLocalAudioStats = function (e, n) {\n        return t.rtcStatsCollector.getLocalAudioStats(e, n);\n      }, t.getRemoteVideoStats = function (e, n) {\n        return t.rtcStatsCollector.getRemoteVideoStats(e, n);\n      }, t.getLocalVideoStats = function (e, n) {\n        return t.rtcStatsCollector.getLocalVideoStats(e, n);\n      }, t._getRemoteVideoQualityStats = function (e, n) {\n        return t.rtcStatsCollector.getRemoteVideoQualityStats(e, n);\n      }, t._getRemoteAudioQualityStats = function (e, n) {\n        return t.rtcStatsCollector.getRemoteAudioQualityStats(e, n);\n      }, t.getTransportStats = function (e, n) {\n        return t.rtcStatsCollector.getTransportStats(function (t) {\n          return x.getStats(function (n) {\n            var r = R()({}, t, n);\n            e && e(r);\n          }, n);\n        }, n);\n      }, t.getSessionStats = function (e, n) {\n        return t.rtcStatsCollector.getSessionStats(e, n);\n      }, t.onNetworkQuality = function () {\n        return t.rtcStatsCollector.onNetworkQuality(onSuccess, onFailure);\n      }, t.sendMetadata = function (n, r) {\n        var i = o.report.reportApiInvoke(e.sessionId, {\n          name: \"Client.sendMetadata\",\n          tag: \"tracer\",\n          callback: function callback(e) {\n            if (e) return r && r(e);\n            r && r();\n          }\n        });\n        t.gatewayClient.sendMetadata(n, i);\n      }, t.sendCustomReportMessage = function (n, a, s, c, d, u) {\n        Object(r.getParameter)(\"CR\") ? t.customReportCount > Object(r.getParameter)(\"CRL\") ? u && u(\"REPORT_LIMITED\") : (t.gatewayClient.hasJoined || (i.default.WARNING(\"Should invoke Client.sendCustomReportMessage after join\"), u && u(\"REPORT_BEFORE_JOINED\")), t.customReportTimer || (t.customReportTimer = setInterval(function () {\n          t.customReportCount = 0;\n        }, Object(r.getParameter)(\"CRI\"))), Object(P.checkValidString)(n, \"reportId\", 0, 100, !1), Object(P.checkValidString)(a, \"category\", 0, 100, !1), Object(P.checkValidString)(s, \"event\", 0, 100, !1), Object(P.checkValidString)(c, \"label\", 0, 100, !1), Object(P.checkValidNumber)(d, \"value\", Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER), t.customReportCount++, o.report.sendCustomReportMessage(e.sessionId, {\n          reportId: n,\n          category: a,\n          event: s,\n          label: c,\n          value: d,\n          lts: Date.now()\n        }, function (e) {\n          e ? u && u(\"REPORT_FAILED\") : u && u();\n        })) : u && u(\"REPORT_FORBIDDEN\");\n      }, t.setLocalAccessPoints = function (n, i) {\n        var a = o.report.reportApiInvoke(e.sessionId, {\n          name: \"Client.setLocalAccessPoints\",\n          tag: \"tracer\"\n        });\n        if (Object(P.checkValidArray)(n, \"serverList\"), Object(P.checkValidString)(i, \"domain\"), t.useProxyServer) throw new Error(\"You have already set the proxy\");\n        var s = /^(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$/;\n        n = n.map(function (e) {\n          return s.test(e) ? \"\".concat(e.replace(/\\./g, \"-\"), \".\").concat(i) : e;\n        }), t.useLocalAccessPoint = !0, Object(r.setParameter)(\"WEBCS_DOMAIN\", n), Object(r.setParameter)(\"WEBCS_DOMAIN_BACKUP_LIST\", n), Object(r.setParameter)(\"GATEWAY_DOMAINS\", [i]), Object(r.setParameter)(\"EVENT_REPORT_DOMAIN\", n[Math.floor(Math.random() * n.length)]), Object(r.setParameter)(\"EVENT_REPORT_BACKUP_DOMAIN\", n[Math.floor(Math.random() * n.length)]), Object(r.setParameter)(\"LOG_UPLOAD_SERVER\", \"\".concat(n[Math.floor(Math.random() * n.length)], \":6444\")), a();\n      }, e.clientId = t.clientId, t.gatewayClient = Object(T.a)(e), t.listenerLoggerTimer = null, t.listenerLoggerCache = [], t.on = function (e, n) {\n        t.gatewayClient.on(e, n), t.listenerLoggerCache.push(\"\".concat(e).concat(n.name ? \":\" + n.name : \"\")), t.listenerLoggerTimer ? clearTimeout(t.listenerLoggerTimer) : i.default.info(\"[\".concat(t.clientId, \"] Adding event handler on \").concat(e)), t.listenerLoggerTimer = setTimeout(function () {\n          t.listenerLoggerCache.length && (t.listenerLoggerTimer = null, i.default.info(\"[\".concat(t.clientId, \"] Added event handler on \").concat(t.listenerLoggerCache.join(\", \"))), t.listenerLoggerCache = []);\n        }, 0);\n      }, t.off = function (e, n) {\n        i.default.info(\"remove event handler from [\".concat(e, \"]\")), t.gatewayClient.removeEventListener(e, n);\n      }, t.rtcStatsCollector = function (e) {\n        var t = Object(a.b)();\n        return t.gatewayClient = e, t.exceptionMonitor = new L(e), t.localStats = {}, t.remoteStats = {}, t.session = {\n          sendBytes: 0,\n          recvBytes: 0,\n          WSSendBytes: 0,\n          WSSendBytesDelta: 0,\n          WSRecvBytes: 0,\n          WSRecvBytesDelta: 0,\n          HTTPSendBytes: 0,\n          HTTPSendBytesDelta: 0,\n          HTTPRecvBytes: 0,\n          HTTPRecvBytesDelta: 0\n        }, t.getRemoteAudioStats = function (e) {\n          var n = t.gatewayClient.traffic_stats,\n              r = {};\n\n          for (var i in t.remoteStats) {\n            var o = {},\n                a = t.remoteStats[i];\n\n            if (Object(O.b)(o, \"End2EndDelay\", a.peer_delay && a.peer_delay.audio_delay), Object(O.b)(o, \"TransportDelay\", a.peer_delay && a.peer_delay.e2e_delay), Object(O.b)(o, \"PacketLossRate\", a.peer_delay && a.peer_delay.e2e_audio_lost_ratio_400ms), Object(O.b)(o, \"RecvLevel\", a.audioStats && a.audioStats.audioOutputLevel), Object(O.b)(o, \"RecvBitrate\", a.audioRecvBitrate), Object(O.b)(o, \"CodecType\", a.audioStats && a.audioStats.googCodecName), Object(O.b)(o, \"MuteState\", a.audioDisabled), Object(O.b)(o, \"TotalFreezeTime\", a.audioStats && a.audioStats.audioTotalFreezeTime), Object(O.b)(o, \"TotalPlayDuration\", a.audioStats && a.audioStats.audioTotalPlayDuration), n && n.peer_delay) {\n              var s = n.peer_delay.find(function (e) {\n                return e.peer_uid == i;\n              });\n\n              if (s) {\n                var c = s.peer_publish_audio_duration + (Date.now() - n.timestamp);\n                Object(O.b)(o, \"AudioPublishDuration\", c);\n              } else Object(O.b)(o, \"AudioPublishDuration\", -1);\n            }\n\n            r[i] = o;\n          }\n\n          e && e(r);\n        }, t.getLocalAudioStats = function (e) {\n          var n = {};\n\n          for (var r in t.localStats) {\n            var i = {},\n                o = t.localStats[r];\n            Object(O.b)(i, \"RecordingLevel\", o.audioStats && o.audioStats.audioInputLevel), Object(O.b)(i, \"SendLevel\", o.audioStats && o.audioStats.totalAudioEnergy), Object(O.b)(i, \"SamplingRate\", o.audioStats && o.audioStats.totalSamplesDuration), Object(O.b)(i, \"SendBitrate\", o.audioSendBitrate), Object(O.b)(i, \"CodecType\", o.audioStats && o.audioStats.googCodecName), Object(O.b)(i, \"MuteState\", o.audioDisabled), Object(O.b)(i, \"audioSendPacketsLost\", o.audioStats && o.audioStats.packetsLost);\n            var a = t.gatewayClient.localStreams[r];\n            a && a.isPlaying() && Object(O.b)(i, \"MuteState\", a.userMuteAudio ? \"1\" : \"0\"), n[r] = i;\n          }\n\n          e && e(n);\n        }, t.getRemoteVideoStats = function (e) {\n          var n = t.gatewayClient.traffic_stats,\n              r = {};\n\n          for (var i in t.remoteStats) {\n            var o = {},\n                a = t.remoteStats[i];\n\n            if (Object(O.b)(o, \"End2EndDelay\", a.peer_delay && a.peer_delay.video_delay), Object(O.b)(o, \"TransportDelay\", a.peer_delay && a.peer_delay.e2e_delay), Object(O.b)(o, \"PacketLossRate\", a.peer_delay && a.peer_delay.e2e_video_lost_ratio_400ms), Object(O.b)(o, \"RecvBitrate\", a.videoRecvBitrate), Object(O.b)(o, \"RecvResolutionWidth\", a.videoStats && a.videoStats.googFrameWidthReceived), Object(O.b)(o, \"RecvResolutionHeight\", a.videoStats && a.videoStats.googFrameHeightReceived), Object(O.b)(o, \"RenderResolutionWidth\", a.videoStats && a.videoStats.renderRemoteWidth), Object(O.b)(o, \"RenderResolutionHeight\", a.videoStats && a.videoStats.renderRemoteHeight), Object(O.b)(o, \"RenderFrameRate\", a.videoStats && a.videoStats.googFrameRateOutput), Object(O.b)(o, \"MuteState\", a.videoDisabled), Object(O.b)(o, \"TotalFreezeTime\", a.videoStats && a.videoStats.videoTotalFreezeTime), Object(O.b)(o, \"TotalPlayDuration\", a.videoStats && a.videoStats.videoTotalPlayDuration), n && n.peer_delay) {\n              var s = n.peer_delay.find(function (e) {\n                return e.peer_uid == i;\n              });\n\n              if (s) {\n                var c = s.peer_publish_video_duration + (Date.now() - n.timestamp);\n                Object(O.b)(o, \"VideoPublishDuration\", c);\n              } else Object(O.b)(o, \"VideoPublishDuration\", -1);\n            }\n\n            r[i] = o;\n          }\n\n          e && e(r);\n        }, t.getLocalVideoStats = function (e) {\n          var n = {};\n\n          for (var r in t.localStats) {\n            var i = {},\n                o = t.localStats[r];\n            Object(O.b)(i, \"TargetSendBitrate\", o.videoTargetSendBitrate), Object(O.b)(i, \"SendFrameRate\", o.videoStats && o.videoStats.googFrameRateSent), Object(O.b)(i, \"SendBitrate\", o.videoSendBitrate), Object(O.b)(i, \"SendResolutionWidth\", o.videoStats && o.videoStats.googFrameWidthSent), Object(O.b)(i, \"SendResolutionHeight\", o.videoStats && o.videoStats.googFrameHeightSent), Object(O.b)(i, \"CaptureResolutionWidth\", o.videoStats && o.videoStats.googFrameWidthInput), Object(O.b)(i, \"CaptureResolutionHeight\", o.videoStats && o.videoStats.googFrameHeightInput), Object(O.b)(i, \"EncodeDelay\", o.videoStats && o.videoStats.googAvgEncodeMs), Object(O.b)(i, \"MuteState\", o.videoDisabled), Object(O.b)(i, \"TotalFreezeTime\", o.videoStats && o.videoStats.videoTotalFreezeTime), Object(O.b)(i, \"TotalDuration\", o.videoStats && o.videoStats.videoTotalPlayDuration), Object(O.b)(i, \"CaptureFrameRate\", o.videoStats && o.videoStats.googFrameRateSent), Object(O.b)(i, \"videoSendPacketsLost\", o.videoStats && o.videoStats.packetsLost), o.videoStats && !o.videoStats.googFrameWidthInput && Object(O.b)(i, \"CaptureResolutionWidth\", o.videoStats && o.videoStats.renderLocalWidth), o.videoStats && !o.videoStats.googFrameHeightInput && Object(O.b)(i, \"CaptureResolutionHeight\", o.videoStats && o.videoStats.renderLocalHeight), n[r] = i;\n          }\n\n          e && e(n);\n        }, t.getRemoteVideoQualityStats = function (e) {\n          var n = {};\n\n          for (var r in t.remoteStats) {\n            var i = {},\n                o = t.remoteStats[r];\n            Object(O.b)(i, \"videoReceiveDelay\", o.videoStats && o.videoStats.googCurrentDelayMs), Object(O.b)(i, \"VideoFreezeRate\", o.videoStats && o.videoStats.videoFreezeRate), Object(O.b)(i, \"FirstFrameTime\", o.firstFrameTime), n[r] = i;\n          }\n\n          e && e(n);\n        }, t.getRemoteAudioQualityStats = function (e) {\n          var n = {};\n\n          for (var r in t.remoteStats) {\n            var i = {},\n                o = t.remoteStats[r];\n            Object(O.b)(i, \"audioReceiveDelay\", o.audioStats && o.audioStats.googCurrentDelayMs), Object(O.b)(i, \"AudioFreezeRate\", o.videoStats && o.videoStats.videoFreezeRate), n[r] = i;\n          }\n\n          e && e(n);\n        }, t.getTransportStats = function (e) {\n          var n = {},\n              r = {},\n              i = t.gatewayClient.traffic_stats,\n              o = i.peer_delay;\n\n          if (Object(O.b)(n, \"OutgoingAvailableBandwidth\", t.gatewayClient.OutgoingAvailableBandwidth / 1e3), Object(O.b)(n, \"RTT\", i && 2 * i.access_delay), o) {\n            var a,\n                s = D(o);\n\n            try {\n              for (s.s(); !(a = s.n()).done;) {\n                var c = a.value;\n                c.downlink_estimate_bandwidth && (r[c.peer_uid] = c.downlink_estimate_bandwidth / 1e3 + \"\");\n              }\n            } catch (e) {\n              s.e(e);\n            } finally {\n              s.f();\n            }\n          }\n\n          n.IncomingAvailableBandwidth = r, e && e(n);\n        }, t.getSessionStats = function (e) {\n          var n = {},\n              r = t.gatewayClient.traffic_stats,\n              i = t.gatewayClient.socket,\n              o = 0,\n              a = 0;\n\n          for (var s in t.remoteStats) {\n            (c = t.remoteStats[s]) && c.videoStats && c.videoStats.videoRecvBytesDelta && (a += parseInt(c.videoStats.videoRecvBytesDelta)), c && c.audioStats && c.audioStats.audioRecvBytesDelta && (a += parseInt(c.audioStats.audioRecvBytesDelta));\n          }\n\n          for (var s in t.localStats) {\n            var c;\n            (c = t.localStats[s]) && c.videoStats && c.videoStats.videoSendBytesDelta && (o += parseInt(c.videoStats.videoSendBytesDelta)), c && c.audioStats && c.audioStats.audioSendBytesDelta && (o += parseInt(c.audioStats.audioSendBytesDelta));\n          }\n\n          var d = o + t.session.WSSendBytesDelta + t.session.HTTPSendBytesDelta,\n              u = a + t.session.WSRecvBytesDelta + t.session.HTTPRecvBytesDelta,\n              l = t.session.sendBytes + Object(C.getHTTPSendBytes)(),\n              f = t.session.recvBytes + Object(C.getHTTPRecvBytes)();\n          t.gatewayClient.socket && t.gatewayClient.socket.state === t.gatewayClient.CONNECTED && (l += i.getSendBytes(), f += i.getRecvBytes());\n          var p = 1;\n          r.peer_delay && (p = r.peer_delay.length, p += 1), i ? Object(O.b)(n, \"Duration\", i.getDuration()) : Object(O.b)(n, \"Duration\", 0), Object(O.b)(n, \"UserCount\", p), Object(O.b)(n, \"SendBytes\", l), Object(O.b)(n, \"RecvBytes\", f), Object(O.b)(n, \"SendBitrate\", 8 * d / 1e3), Object(O.b)(n, \"RecvBitrate\", 8 * u / 1e3), e && e(n);\n        }, t.isLocalVideoFreeze = function (e, t) {\n          var n = 0,\n              r = 0;\n          if (!e || !t) return !1;\n          if (Object(s.isChrome)() || Object(s.isOpera)()) n = e.googFrameRateInput, r = e.googFrameRateSent;else if (Object(s.isSafari)()) n = parseInt(e.framerateMean), r = parseInt(e.framesEncoded) - parseInt(t.framesEncoded);else {\n            if (!Object(s.isFireFox)()) return !1;\n            n = parseInt(e.framerateMean), r = parseInt(e.framesEncoded) - parseInt(t.framesEncoded);\n          }\n          return n > 5 && r < 3;\n        }, t.isRemoteVideoFreeze = function (e, t) {\n          var n = 0,\n              r = 0;\n          if (!e || !t) return !1;\n          if (Object(s.isChrome)() || Object(s.isOpera)()) n = e.googFrameRateReceived, r = e.googFrameRateDecoded;else if (Object(s.isSafari)()) n = e.framerateMean, r = parseInt(e.framesDecoded) - parseInt(t.framesDecoded);else {\n            if (!Object(s.isFireFox)()) return !1;\n            n = parseInt(e.framesReceived) - parseInt(t.framesReceived), r = parseInt(e.framesDecoded) - parseInt(t.framesDecoded);\n          }\n          return n > 5 && n < 10 && r < 3 || n > 10 && n < 20 && r < 4 || n > 20 && r < 5;\n        }, t.isAudioFreeze = function (e) {\n          if (Object(s.isChrome)() && e) {\n            if (e.googDecodingPLC && e.googDecodingPLCCNG && e.googDecodingCTN) return (parseInt(e.googDecodingPLC) + parseInt(e.googDecodingPLCCNG)) / parseInt(e.googDecodingCTN) > .2;\n          } else if ((Object(s.isSafari)() || Object(s.isFireFox)()) && e.packetsLost && e.packetsReceived) return parseInt(e.packetsLost) / (parseInt(e.packetsLost) + parseInt(e.packetsReceived)) > .2;\n\n          return !1;\n        }, t.isAudioDecodeFailed = function (e) {\n          return !!((Object(s.isChrome)() || Object(s.isOpera)()) && e && parseInt(e.bytesReceived) > 0 && 0 === parseInt(e.googDecodingNormal));\n        }, t.startNetworkQualityTimer = function () {\n          t.clearNetworkQualityTimer(), t.networkQualityTimer = setInterval(function () {\n            if (t.gatewayClient.state === T.a.CONNECTED && navigator.onLine) {\n              var e = t.gatewayClient.traffic_stats;\n              t.gatewayClient.dispatchEvent({\n                type: \"network-quality\",\n                uplinkNetworkQuality: t.networkQualityTrans(e.uplink_network_quality),\n                downlinkNetworkQuality: t.networkQualityTrans(e.downlink_network_quality)\n              });\n            } else t.gatewayClient.dispatchEvent({\n              type: \"network-quality\",\n              uplinkNetworkQuality: 0,\n              downlinkNetworkQuality: 0\n            });\n          }, 2e3);\n        }, t.clearNetworkQualityTimer = function () {\n          t.networkQualityTimer && clearInterval(t.networkQualityTimer);\n        }, t.networkQualityTrans = function (e) {\n          return e >= 0 && e < .17 ? 1 : e >= .17 && e < .36 ? 2 : e >= .36 && e < .59 ? 3 : e >= .59 && e <= 1 ? 4 : e > 1 ? 5 : 0;\n        }, t.getStatsTimer = setInterval(function () {\n          var e = t.gatewayClient.traffic_stats,\n              n = Date.now();\n          t.gatewayClient.dispatchEvent({\n            type: \"_testException\"\n          }), Object.keys(t.localStats).length && t.exceptionMonitor.setLocalStats(t.localStats), Object.keys(t.remoteStats).length && t.exceptionMonitor.setRemoteStats(t.remoteStats);\n          var r = {};\n          Object.keys(t.gatewayClient.remoteStreams).forEach(function (i) {\n            var o = t.gatewayClient.remoteStreams[i],\n                a = t.remoteStats[i],\n                s = {\n              id: i,\n              updatedAt: n\n            };\n            r[i] = s, s.firstFrameTime = o.firstFrameTime, a ? (s.audioTotalPlayDuration = a.audioTotalPlayDuration + 1, s.audioTotalFreezeTime = a.audioTotalFreezeTime, s.isAudioFreeze = !1, s.isAudioDecodeFailed = !1, s.videoTotalPlayDuration = a.videoTotalPlayDuration + 1, s.videoTotalFreezeTime = a.videoTotalFreezeTime, s.isVideoFreeze = !1) : (s.audioTotalPlayDuration = 1, s.audioTotalFreezeTime = 0, s.videoTotalPlayDuration = 1, s.videoTotalFreezeTime = 0);\n            var c = e && e.peer_delay && e.peer_delay.find(function (e) {\n              return e.peer_uid == i;\n            });\n            c && (s.peer_delay = c), o && (o.isPlaying() && (s.audioDisabled = o.userMuteAudio || o.peerMuteAudio ? \"1\" : \"0\", s.videoDisabled = o.userMuteVideo || o.peerMuteVideo ? \"1\" : \"0\"), a && a.peer_delay && c && a.peer_delay.stream_type !== c.stream_type && t.gatewayClient.dispatchEvent({\n              type: \"streamTypeChange\",\n              uid: i,\n              streamType: c.stream_type\n            }), o.pc && \"established\" == o.pc.state && o.pc.getStats(function (e) {\n              if (s.pcStats = e, s.audioStats = e.find(function (e) {\n                return \"audio\" == e.mediaType && (e.id.indexOf(\"_recv\") > -1 || e.id.toLowerCase().indexOf(\"inbound\") > -1);\n              }), s.videoStats = e.find(function (e) {\n                return \"video\" == e.mediaType && (e.id.indexOf(\"_recv\") > -1 || e.id.toLowerCase().indexOf(\"inbound\") > -1);\n              }), a && a.audioStats && s.audioStats) {\n                var n = parseInt(s.audioStats.bytesReceived) - parseInt(a.audioStats.bytesReceived),\n                    r = parseInt(s.audioStats.googDecodingNormal) - parseInt(a.audioStats.googDecodingNormal);\n\n                if (s.audioStats.audioRecvBytesDelta = n, s.audioStats.audioDecodingNormalDelta = r, t.session.recvBytes += n, isFinite(n) && s.audioStats.timestamp) {\n                  var i = s.audioStats.timestamp.getTime() - a.audioStats.timestamp.getTime();\n                  s.audioRecvBitrate = Math.floor(8 * n / i);\n                }\n\n                t.isAudioFreeze(s.audioStats) && s.audioTotalPlayDuration > 10 && (s.audioTotalFreezeTime++, s.isAudioFreeze = !0), t.isAudioDecodeFailed(s.audioStats) && s.audioTotalPlayDuration > 10 && (s.isAudioDecodeFailed = !0), s.audioStats.audioTotalFreezeTime = s.audioTotalFreezeTime, s.audioStats.audioTotalPlayDuration = s.audioTotalPlayDuration, s.audioStats.audioFreezeRate = Math.ceil(100 * s.audioTotalFreezeTime / s.audioTotalPlayDuration);\n              }\n\n              if (a && a.videoStats && s.videoStats) {\n                var c = parseInt(s.videoStats.bytesReceived) - parseInt(a.videoStats.bytesReceived);\n\n                if (s.videoStats.videoRecvBytesDelta = c, t.session.recvBytes += c, isFinite(c) && s.videoStats.timestamp) {\n                  i = s.videoStats.timestamp.getTime() - a.videoStats.timestamp.getTime();\n                  s.videoRecvBitrate = Math.floor(8 * c / i);\n                }\n\n                t.isRemoteVideoFreeze(s.videoStats, a.videoStats) && (s.videoTotalFreezeTime++, s.isVideoFreeze = !0), s.videoStats.videoTotalFreezeTime = s.videoTotalFreezeTime, s.videoStats.videoTotalPlayDuration = s.videoTotalPlayDuration, s.videoStats.videoFreezeRate = Math.ceil(100 * s.videoTotalFreezeTime / s.videoTotalPlayDuration), o.player && o.player.video && o.player.video.videoWidth && o.player.video.videoHeight ? (s.videoStats.renderRemoteWidth = o.player.video.videoWidth, s.videoStats.renderRemoteHeight = o.player.video.videoHeight) : (s.videoStats.renderRemoteWidth = o.videoWidth || s.videoStats.googFrameWidthReceived, s.videoStats.renderRemoteHeight = o.videoHeight || s.videoStats.googFrameHeightReceived);\n              }\n            }));\n          }), t.remoteStats = r;\n          var i = {};\n\n          if (Object.keys(t.gatewayClient.localStreams).forEach(function (e) {\n            var r = t.gatewayClient.localStreams[e],\n                o = t.localStats[e],\n                a = {\n              id: e,\n              updatedAt: n\n            };\n            i[e] = a, o ? (a.videoTotalPlayDuration = o.videoTotalPlayDuration + 1, a.videoTotalFreezeTime = o.videoTotalFreezeTime, a.isVideoFreeze = !1) : (a.videoTotalPlayDuration = 1, a.videoTotalFreezeTime = 0), r && (r.isPlaying() && (a.audioDisabled = r.userMuteAudio ? \"1\" : \"0\", a.videoDisabled = r.userMuteVideo ? \"1\" : \"0\"), r.video && r.attributes.maxVideoBW ? a.videoTargetSendBitrate = r.attributes.maxVideoBW : r.video && r.screenAttributes && (a.videoTargetSendBitrate = r.screenAttributes.maxVideoBW), r.pc && \"established\" == r.pc.state && r.pc.getStats(function (e) {\n              if (a.pcStats = e.reverse(), a.audioStats = e.find(function (e) {\n                return \"audio\" == e.mediaType && (e.id.indexOf(\"_send\") > -1 || e.id.toLowerCase().indexOf(\"outbound\") > -1);\n              }), a.videoStats = e.find(function (e) {\n                return \"video\" == e.mediaType && (e.id.indexOf(\"_send\") > -1 || e.id.toLowerCase().indexOf(\"outbound\") > -1);\n              }), a.audioStats && o && o.audioStats) {\n                var n = parseInt(a.audioStats.bytesSent) - parseInt(o.audioStats.bytesSent);\n\n                if (a.audioStats.audioSendBytesDelta = n, t.session.sendBytes += n, isFinite(n) && a.audioStats.timestamp) {\n                  var i = a.audioStats.timestamp.getTime() - o.audioStats.timestamp.getTime();\n                  a.audioSendBitrate = Math.floor(8 * n / i);\n                }\n              }\n\n              if (a.videoStats && o && o.videoStats) {\n                var s = parseInt(a.videoStats.bytesSent) - parseInt(o.videoStats.bytesSent);\n\n                if (a.videoStats.videoSendBytesDelta = s, t.session.sendBytes += s, isFinite(s) && a.videoStats.timestamp) {\n                  i = a.videoStats.timestamp.getTime() - o.videoStats.timestamp.getTime();\n                  a.videoSendBitrate = Math.floor(8 * s / i);\n                }\n\n                t.isLocalVideoFreeze(a.videoStats, o.videoStats) && (a.videoTotalFreezeTime++, a.isVideoFreeze = !0), a.videoStats.videoTotalFreezeTime = a.videoTotalFreezeTime, a.videoStats.videoTotalPlayDuration = a.videoTotalPlayDuration, a.videoStats.videoFreezeRate = Math.ceil(100 * a.videoTotalFreezeTime / a.videoTotalPlayDuration), a.videoStats.renderLocalWidth = r.videoWidth || a.videoStats.googFrameWidthSent, a.videoStats.renderLocalHeight = r.videoHeight || a.videoStats.googFrameHeightSent;\n              }\n            }));\n          }), t.localStats = i, t.session.HTTPSendBytesDelta = Object(C.getHTTPSendBytes)() - t.session.HTTPSendBytes, t.session.HTTPSendBytes = Object(C.getHTTPSendBytes)(), t.session.HTTPRecvBytesDelta = Object(C.getHTTPRecvBytes)() - t.session.HTTPRecvBytes, t.session.HTTPRecvBytes = Object(C.getHTTPRecvBytes)(), t.gatewayClient.socket && t.gatewayClient.socket.state === t.gatewayClient.CONNECTED) {\n            var o = t.gatewayClient.socket;\n            t.session.WSSendBytesDelta = o.getSendBytes() - t.session.WSSendBytes, t.session.WSSendBytes = o.getSendBytes(), t.session.WSRecvBytesDelta = o.getRecvBytes() - t.session.WSRecvBytes, t.session.WSRecvBytes = o.getRecvBytes();\n          }\n        }, 1e3), t.gatewayClient.on(\"join\", function () {\n          t.session = {\n            sendBytes: 0,\n            recvBytes: 0,\n            WSSendBytes: 0,\n            WSSendBytesDelta: 0,\n            WSRecvBytes: 0,\n            WSRecvBytesDelta: 0,\n            HTTPSendBytes: 0,\n            HTTPSendBytesDelta: 0,\n            HTTPRecvBytes: 0,\n            HTTPRecvBytesDelta: 0\n          };\n        }), t;\n      }(t.gatewayClient), t.configDistributManager = function (e) {\n        var t = {};\n        return t.client = e, t.client.gatewayClient && t.client.gatewayClient.on(\"config-distribute\", function (n) {\n          var a = n.joinInfo,\n              s = n.config;\n\n          if (s) {\n            Object(P.isEmpty)(s.uploadLog) || (Object(r.setParameter)(\"UPLOAD_LOG\", s.uploadLog), o.report.reportApiInvoke(a.sid, {\n              name: \"_configDistribute\",\n              options: {\n                feature: \"uploadLog\",\n                value: s.uploadLog\n              }\n            })()), Object(P.isEmpty)(s.dualStream) || (e.isDualStream = s.dualStream, o.report.reportApiInvoke(a.sid, {\n              name: \"_configDistribute\",\n              options: {\n                feature: \"dualStream\",\n                value: s.dualStream\n              }\n            })()), Object(P.isEmpty)(s.streamFallbackOption) || t.client.gatewayClient && t.client.gatewayClient.on(\"stream-subscribed\", function (e) {\n              var n = e.stream;\n              n ? (t.client.gatewayClient.setStreamFallbackOption(n, s.streamFallbackOption), o.report.reportApiInvoke(a.sid, {\n                name: \"_configDistribute\",\n                options: {\n                  feature: \"streamFallbackOption\",\n                  value: s.streamFallbackOption,\n                  streamId: n.getId()\n                }\n              })()) : o.report.reportApiInvoke(a.sid, {\n                name: \"_configDistribute\",\n                options: {\n                  feature: \"streamFallbackOption\",\n                  value: s.streamFallbackOption,\n                  streamId: n.getId(),\n                  err: \"invalid stream\"\n                }\n              })();\n            });\n\n            try {\n              i.default.debug(\"[\".concat(e.clientId, \"] setParameter in distribution: \").concat(JSON.stringify(s))), Object.keys(s).map(function (e) {\n                return Object(r.setParameter)(e, s[e]);\n              });\n            } catch (t) {\n              i.default.debug(\"[\".concat(e.clientId, \"] setParameter in distribution failed: \").concat(JSON.stringify(s)));\n            }\n          }\n        }), t;\n      }(t), Object(U.addLiveStreamingCapability)(t, e), e.areaCode) {\n        var n = e,\n            c = n.areaCode,\n            p = n.excludedArea,\n            g = Object(F.getAreaCodeByConfig)({\n          areaCode: c,\n          excludedArea: p\n        });\n        Object(r.setParameter)(\"AREA_SETTING\", g);\n        var h = Object(F.getAreaDomainConfig)(g);\n        Object.keys(h).map(function (e) {\n          var t = h[e];\n          \"LOG_UPLOAD_SERVER\" == e || \"EVENT_REPORT_DOMAIN\" == e || \"EVENT_REPORT_BACKUP_DOMAIN\" == e || \"NGINX\" == e ? Object(r.setParameter)(e, t[0]) : Object(r.setParameter)(e, t);\n        });\n      }\n\n      return Object(P.isEmpty)(e.turnServer) || t.setTurnServer(e.turnServer), Object(P.isEmpty)(e.proxyServer) || t.setProxyServer(e.proxyServer), \"live\" === t.mode && (t.gatewayClient.role = \"audience\"), \"rtc\" === t.mode && (t.gatewayClient.role = H), t.gatewayClient.on(\"onMultiIP\", function (e) {\n        t.gatewayClient.closeGateway(), t.gatewayClient.socket = void 0, t.gatewayClient.hasChangeBGPAddress = !0, t.joinInfo.multiIP = e.option, t.gatewayClient.state = T.a.CONNECTING;\n\n        var n = function n(e) {\n          i.default.info(\"[\".concat(t.clientId, \"] Joining channel: \").concat(t.channel)), t.joinInfo.cid = e.cid, t.joinInfo.uid || (t.joinInfo.uid = e.uid), t.joinInfo.uni_lbs_ip = e.uni_lbs_ip, t.joinInfo.gatewayAddr = e.gateway_addr, t.onSuccess ? t.gatewayClient.join(t.joinInfo, t.key, function (e) {\n            i.default.info(\"[\".concat(t.clientId, \"] Join channel \").concat(t.channel, \" success\"));\n            var n = t.onSuccess;\n            t.onSuccess = null, t.onFailure = null, n(e);\n          }, t.onFailure) : (t.gatewayClient.joinInfo = R()({}, t.joinInfo), t.gatewayClient.rejoin());\n        };\n\n        t.joinInfo.stringUid && !t.joinInfo.uid ? (t.userAccountReq && !t.userAccountReq.isFinished() && t.userAccountReq.cancel(), t.userAccountReq = Object(A.getUserAccount)(joinInfo, t.gatewayClient), t.userAccountReq.then(function (e) {\n          i.default.error(\"getUserAccount Success \".concat(e.url, \" \").concat(joinInfo.stringUid, \" => \").concat(e.uid)), t.joinInfo.uid = e.uid, Object(A.getGatewayList)(t.joinInfo, n, t.onFailure);\n        }).catch(function (e) {\n          i.default.error(\"getUserAccount rejected\", e), t.onFailure(e);\n        })) : Object(A.getGatewayList)(t.joinInfo, n, t.onFailure);\n      }), t.gatewayClient.on(\"rejoin-start\", function () {\n        t._renewSession(), o.report.sessionInit(e.sessionId, {\n          lts: new Date().getTime(),\n          extend: {\n            rejoin: !0\n          },\n          cname: t.channel,\n          appid: e.appId,\n          mode: e.mode,\n          succ: !0\n        });\n      }), t.gatewayClient.on(\"recover\", function () {\n        t._renewSession(), i.default.debug(\"[\".concat(t.clientId, \"]\"), \"recover\", e.sessionId), o.report.sessionInit(e.sessionId, {\n          lts: new Date().getTime(),\n          extend: {\n            recover: !0\n          },\n          cname: t.channel,\n          appid: e.appId,\n          mode: e.mode,\n          succ: !0\n        });\n      }), t.gatewayClient.on(\"rejoin\", function () {\n        var e = t.highStreamState;\n\n        if (i.default.debug(\"[\".concat(t.clientId, \"] Client local stream preState: \").concat(e)), t.onSuccess) {\n          var n = t.onSuccess;\n          t.onSuccess = null, t.onFailure = null, n(t.joinInfo.uid);\n        }\n\n        !t.highStream || 0 !== e && 1 !== e || (i.default.info(\"[\".concat(t.clientId, \"] publish after rejoin\")), t.highStreamState = 2, t.lowStreamState = 2, t.publish(t.highStream, function (e) {\n          e && i.default.info(\"[\".concat(t.clientId, \"] \"), e);\n        }));\n      }), t.gatewayClient.on(\"streamPublished\", function (e) {\n        t.hasPublished || (t.hasPublished = !0, t.gatewayClient.dispatchEvent({\n          type: \"stream-published\",\n          stream: e.stream,\n          proxy: e.proxy\n        }));\n      }), t.gatewayClient.on(\"pubP2PLost\", function (e) {\n        i.default.debug(\"[\".concat(t.clientId, \"] Start reconnect local peerConnection: \").concat(t.highStream.getId())), t.gatewayClient.dispatchEvent({\n          type: \"stream-reconnect-start\",\n          uid: t.highStream.getId()\n        }), 1 === t.highStreamState && (t.highStreamState = 0, t.lowStreamState = 0), t._unpublish(t.highStream, function () {\n          t._publish(t.highStream, function () {\n            i.default.debug(\"[\".concat(t.clientId, \"] Reconnect local peerConnection success: \").concat(t.highStream.getId())), t.gatewayClient.dispatchEvent({\n              type: \"stream-reconnect-end\",\n              uid: t.highStream.getId(),\n              success: !0,\n              reason: \"\"\n            });\n          }, function (e) {\n            i.default.debug(\"[\".concat(t.clientId, \"] Reconnect local peerConnection failed: \").concat(e)), t.gatewayClient.dispatchEvent({\n              type: \"stream-reconnect-end\",\n              uid: t.highStream.getId(),\n              success: !1,\n              reason: e\n            });\n          }, !0);\n        }, function (e) {\n          i.default.debug(\"[\".concat(t.clientId, \"] Reconnect local peerConnection failed: \").concat(e)), t.gatewayClient.dispatchEvent({\n            type: \"stream-reconnect-end\",\n            uid: t.highStream.getId(),\n            success: !1,\n            reason: e\n          });\n        }, !0);\n      }), t.gatewayClient.on(\"subP2PLost\", function (e) {\n        i.default.debug(\"[\".concat(t.clientId, \"] Start reconnect remote peerConnection: \").concat(e.stream.getId(), \" \").concat(e.stream.subscribeOptions)), t.gatewayClient.dispatchEvent({\n          type: \"stream-reconnect-start\",\n          uid: e.stream.getId()\n        });\n        var n = e.stream.subscribeOptions;\n        i.default.debug(\"[\".concat(t.clientId, \"]\"), \"Re-subscribe stream\", JSON.stringify(n)), t.gatewayClient.unsubscribe(e.stream, function () {\n          e.stream.subscribeOptions = n, t.gatewayClient.subscribe(e.stream, function () {\n            i.default.debug(\"[\".concat(t.clientId, \"] Reconnect remote peerConnection success: \").concat(e.stream.getId())), t.gatewayClient.dispatchEvent({\n              type: \"stream-reconnect-end\",\n              uid: e.stream.getId(),\n              success: !0,\n              reason: \"\"\n            });\n          }, function (n) {\n            i.default.debug(\"[\".concat(t.clientId, \"] Reconnect remote peerConnection failed: \"), n), t.gatewayClient.dispatchEvent({\n              type: \"stream-reconnect-end\",\n              uid: e.stream.getId(),\n              success: !1,\n              reason: n\n            });\n          });\n        }, function (n) {\n          i.default.debug(\"[\".concat(t.clientId, \"] Reconnect remote peerConnection failed: \"), n), t.gatewayClient.dispatchEvent({\n            type: \"stream-reconnect-end\",\n            uid: e.stream.getId(),\n            success: !1,\n            reason: n\n          });\n        });\n      }), x.on(\"networkTypeChanged\", function (e) {\n        t.gatewayClient && t.gatewayClient.dispatchEvent(e);\n        var n = R()({}, e, {\n          type: \"network-type-changed\"\n        });\n        t.gatewayClient.dispatchEvent(n);\n      }), f.a.on(\"recordingDeviceChanged\", function (e) {\n        t.gatewayClient && t.gatewayClient.dispatchEvent(e);\n        var n = R()({}, e, {\n          type: \"recording-device-changed\"\n        });\n        t.gatewayClient.dispatchEvent(n);\n      }), f.a.on(\"playoutDeviceChanged\", function (e) {\n        t.gatewayClient && t.gatewayClient.dispatchEvent(e);\n        var n = R()({}, e, {\n          type: \"playout-device-changed\"\n        });\n        t.gatewayClient.dispatchEvent(n);\n      }), f.a.on(\"cameraChanged\", function (e) {\n        t.gatewayClient && t.gatewayClient.dispatchEvent(e);\n        var n = R()({}, e, {\n          type: \"camera-changed\"\n        });\n        t.gatewayClient.dispatchEvent(n);\n      }), t.gatewayClient.on(\"streamTypeChange\", function (n) {\n        var r = R()({}, n, {\n          type: \"stream-type-changed\"\n        });\n        t.gatewayClient.dispatchEvent(r), o.report.reportApiInvoke(e.sessionId, {\n          name: \"streamTypeChange\"\n        })(null, JSON.stringify(n));\n      }), t;\n    },\n        J = {\n      width: 640,\n      height: 360,\n      videoBitrate: 400,\n      videoFramerate: 15,\n      lowLatency: !1,\n      audioSampleRate: 48e3,\n      audioBitrate: 48,\n      audioChannels: 1,\n      videoGop: 30,\n      videoCodecProfile: 100,\n      userCount: 0,\n      userConfigExtraInfo: {},\n      backgroundColor: 0,\n      transcodingUsers: []\n    },\n        Y = function Y(e) {\n      switch (e) {\n        case \"h264_interop\":\n          return \"h264\";\n\n        default:\n          return \"vp8\";\n      }\n    },\n        z = function z(e) {\n      return -1 === h.indexOf(e.mode) ? I.default.INVALID_CLIENT_MODE : -1 === v.indexOf(e.codec) ? I.default.INVALID_CLIENT_CODEC : \"h264_interop\" == e.mode && \"h264\" !== e.codec && I.default.CLIENT_MODE_CODEC_MISMATCH;\n    },\n        K = function K(e) {\n      switch (e.mode) {\n        case \"interop\":\n        case \"h264_interop\":\n          e.mode = \"live\";\n          break;\n\n        case \"web-only\":\n          e.mode = \"rtc\";\n      }\n    },\n        X = f.a.getDevices,\n        Q = p.a.getScreenSources,\n        Z = JSON.parse(JSON.stringify(r.SUPPORT_RESOLUTION_LIST));\n\n    t.default = {\n      TranscodingUser: {\n        uid: 0,\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n        zOrder: 0,\n        alpha: 1\n      },\n      LiveTranscoding: J,\n      createClient: function createClient(e) {\n        var t = o.report.reportApiInvoke(null, {\n          name: \"createClient\",\n          options: arguments,\n          tag: \"tracer\"\n        });\n        (e = R()({}, e || {})).codec || (e.codec = Y(e.mode));\n        var n = z(e);\n        if (n) throw i.default.error(\"Invalid parameter setting MODE: \".concat(e.mode, \" CODEC: \").concat(e.codec, \" ERROR \").concat(n)), t(n), new Error(n);\n        return i.default.info(\"Creating client, MODE: \".concat(e.mode, \" CODEC: \").concat(e.codec)), K(e), t(null, e), q(e);\n      },\n      createStream: l.b,\n      Logger: i.default,\n      report: o.report,\n      getDevices: X,\n      getScreenSources: Q,\n      getParameter: r.getParameter,\n      setParameter: r.setParameter,\n      checkSystemRequirements: d,\n      getSupportedCodec: g.getSupportedCodec,\n      ChannelMediaRelayConfiguration: m.ChannelMediaRelayConfiguration,\n      VERSION: r.VERSION,\n      BUILD: r.BUILD,\n      PROFILE_TABLE: Z,\n      AUDIO_SAMPLE_RATE_32000: 32e3,\n      AUDIO_SAMPLE_RATE_44100: 44100,\n      AUDIO_SAMPLE_RATE_48000: 48e3,\n      VIDEO_CODEC_PROFILE_BASELINE: 66,\n      VIDEO_CODEC_PROFILE_MAIN: 77,\n      VIDEO_CODEC_PROFILE_HIGH: 100,\n      REMOTE_VIDEO_STREAM_HIGH: 0,\n      REMOTE_VIDEO_STREAM_LOW: 1,\n      REMOTE_VIDEO_STREAM_MEDIUM: 2,\n      AREAS: F.AREAS,\n      AREA_VERSION: \"global\"\n    };\n  }]).default;\n});","map":null,"metadata":{},"sourceType":"script"}